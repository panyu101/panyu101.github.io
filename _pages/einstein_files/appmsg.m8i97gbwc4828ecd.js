function e(){import.meta.url,import("_").catch((()=>1))}function un(){try{!function(){window.location.href.indexOf("clearStorage=1")>=0&&localStorage.removeItem("max-age-storage-test");var e=window.user_uin||0;if(0!==e&&Math.floor(e/100)%1e3<1&&(_e({type:"GET",url:"/mp/reportcache?type=1&random="+Math.random()}),(new Image).src="/mp/reportcache?type=2&uin="+uin,localStorage&&null==localStorage.getItem("max-age-storage-test"))){try{localStorage.setItem("max-age-storage-test",!0)}catch(e){}_e({type:"GET",url:"/mp/reportcache?type=3&random="+Math.random()})}}(),"undefined"==typeof getComputedStyle&&document.body.currentStyle&&(window.getComputedStyle=function(e){return e.currentStyle}),function(){let e=window.user_uin||0;if(!(0!==e&&Math.floor(e/100)%1e3<10))return;let t=document.getElementsByTagName("img"),i=t.length,n=document.getElementById("img-content"),o=n.offsetWidth,a=0,r=0,s=getComputedStyle(n);a=parseInt(s.paddingLeft)+parseInt(s.paddingRight),o-=a,o||(o=window.innerWidth-30);for(let e=0;e<i;++e){if(!t[e].getAttribute("data-src"))continue;let i=1*t[e].getAttribute("data-w")||o,n=1*t[e].getAttribute("data-ratio");n&&n>0&&i>o&&r++}r>0&&ln.push({idkey:28307,order:22,num:r})}(),function(){for(let e=0,t=ln.length;e<t;++e){let t=ln[e];me.setSum(t.idkey,t.order,t.num)}}()}catch(e){}}function Tn(e,t,i,n){i=n?"".concat(i,"px"):i,e.style[t]=i}function Rn(e,t,i=0){return e.getElementsByClassName(t)[i]}function ti(e){e&&(e.style.display="none")}function ni(e){e&&(e.style.display="block")}function ii(e,t){r.jsmonitor({id:223326,key:e,value:t})}function oi(){window.weui.topTips("System error. Try again later")}function ai(e={}){he.report(20883,Object.assign({Device:fe.os.ios?1:fe.os.android?2:-1,MsgId:1*Zn.mid,ItemIdx:1*Zn.idx,BizUin:Ln.biz,ItemShowType:1*Ln.itemShowType,SessionId:Ln.sessionId,EnterId:1*Ln.enterId,Scene:1*Ln.scene,SubScene:1*Ln.subScene,QaId:Pn.dataset.id},e))}function ri(e,t,i){const n={replyListHtml:"",replyList:document.createDocumentFragment()};return e&&e.reply_list&&e.reply_list.length&&(n.leftReplyCount=e.left_reply_cnt,n.leftReplyTips="\u4f59\u4e0b#value#\u6761\u56de\u590d".replace("#value#",e.left_reply_cnt),e.reply_list.forEach((e=>{e.canOp=i,e.content=e.content.htmlEncode(),e.content=a.encode(e.content),e.likeNumFormated=Fe.formatReadNum(e.like_num),e.replyStatus=void 0===e.reply_status?1:e.reply_status,e.isLogin=Dn;const t=document.createElement("div");t.innerHTML=Be.tmpl(kn,e,!1),n.replyListHtml+=t.innerHTML,n.replyList.appendChild(t.firstChild)}))),n}function si(e,t,i=""){const n={answerListHtml:"",fragment:document.createDocumentFragment()};return e.forEach((e=>{e.likeNumFormated=Fe.formatReadNum(e.like_num),e.canOp=t,e.answer_sn=e.answer_sn||"",e.content=e.content.htmlEncode(),e.oriContent=e.content,e.content=a.encode(e.content),e.isLogin=Dn;const i=ri(e.reply_info,e.answer_id,t);Object.assign(e,i);const o=document.createElement("div");o.innerHTML=Be.tmpl(vn,e,!1),n.answerListHtml+=o.innerHTML,n.fragment.appendChild(o.firstChild)})),i===Gn?Un+=Jn:i===$n&&(Hn+=Jn),n}function ci(e={}){const t=Object.assign({action:e.action,limit:Jn,offset:e.offset},Zn);_e({url:ge.join("/mp/qna",t),dataType:"json",success(t){let i;t&&(i=t.qna_info?t.qna_info.answer_info:t.answer_info,e.successCb(i,t))},complete(){e.complete&&e.complete()}})}function di(e,t){let i=0;for(;e.offsetParent&&e!==t;)i+=e.offsetTop,e=e.offsetParent;return i}function li(e,t,i){const n=e.dataset.answerid,o=i?di(e,Bn.getScrollEle()):0;_e({url:ge.join("/mp/qna",Object.assign({action:"get_more_reply",answer_id:n,answer_sn:e.dataset.answersn,limit:10},Zn)),dataType:"json",success(t){if(t&&t.reply_info&&t.reply_info.reply_list&&t.reply_info.reply_list.length){const n=ri(t.reply_info,0,!0);n.replyListHtml?(Rn(e.parentNode,"js_qa_reply_list").appendChild(n.replyList),n.leftReplyCount?e.innerHTML=n.leftReplyTips:ti(e),i&&Bn.scrollTo(0,o-48)):ti(e)}}})}function ui(e){const t=Rn(On,"js_get_more_reply_".concat(e));t&&li(t,0,!0)}function pi(){return Rn(Mn,"js_qa_input")}function mi(){const e=pi();return(e.value||e.innerHTML).trim()}function _i(){mi()?Nn.enableBtn():Nn.disableBtn()}function hi(e={}){ci({action:e.action,offset:e.offset,successCb(t,i){if(t&&t.answer_list&&t.answer_list.length){let i,n;"get_my_answer"===e.action?(i=Gn,n=Mn,ni(Rn(Mn,"js_qa_write_head"))):(i=$n,n=On),Rn(n,"js_qa_qna_answer_list").appendChild(si(t.answer_list,!0,i).fragment)}e.cb&&e.cb(t,i)}})}function fi(){if(!Mn)return;const e="\u56de\u590d: #value#".replace("#value#",a.encode(Vn)),t=Rn(Mn,"js_reply_top_content");qn?(t.innerHTML=e,ni(t)):ti(t)}function gi(e){Rn(Mn,"js_alert_toast_word").innerHTML=e,ni(Rn(Mn,"js_alert_toast")),setTimeout((()=>{ti(Rn(Mn,"js_alert_toast"))}),800)}function wi(){let e=0;const t=On.getElementsByClassName("js_qa_list_item");for(let i=0;i<t.length&&t[i].getBoundingClientRect().y<Oe.getInnerHeight();i++)e++;e>Kn&&(Kn=e)}function yi(e,t){if(Bn)return Bn.show(),void(e&&t&&ui(t));let i;On=Pn.firstChild.cloneNode(!0);const n=Rn(On,"qa__list-more"),o=Rn(On,"js_qa_write_answer");n&&ti(n),o&&xe.addClass(o,Xn),Rn(On,"js_qa_qna_answer_list").innerHTML="",Bn=new En(On,{title:"\u8bfb\u8005\u8ba8\u8bba",extClass:"qa__card",onPullUpLoad(){i>0&&(Bn.showPullUpLoading(),hi({action:"get_more_answer",offset:Hn,cb(e,t){Bn.hidePullUpLoading(),e.left_answer_cnt||0!==t.base_resp.ret?Bn.finishPullUpLoad():Bn.showEndLine()}}))},cb(){hi({action:"get_more_answer",offset:Hn,cb(n){if(e&&t)ui(t);else{const e=jn.dataset.count,t=di(Rn(On,"js_qa_list_item",e),Bn.getScrollEle());Bn.scrollTo(0,t-96)}i=n.left_answer_cnt,i||Bn.showEndLine()}})},onScroll(){wi()},onHide(){wi(),ai({EventType:3,Exposure:Kn}),Kn=0}}),Bn.show(),je.on(On,"tap",".js_get_more_reply",(e=>{li(e.delegatedTarget)}))}function bi(e){let t;const i=qn?"Reply":"\u53c2\u4e0e\u8ba8\u8bba";if(Nn)return fi(),Nn.setTitle(i),e?Nn.setCloseBtnStyle("back"):Nn.setCloseBtnStyle("close"),void Nn.show(!0,pi());Mn=document.createElement("div"),Mn.innerHTML=Be.tmpl(xn,{}),Nn=new En(Mn,{title:i,top:Qn,extClass:"qa__card qa__card_write",hasBtn:!0,disableTransition:!0,onPullUpLoad(){t>0&&(Nn.showPullUpLoading(),hi({action:"get_my_answer",offset:Un,cb(e,t){Nn.hidePullUpLoading(),e.left_answer_cnt||0!==t.base_resp.ret?Nn.finishPullUpLoad():Nn.showEndLine()}}))},onHide(){pi().blur()},onScroll(e){"up"===e&&pi().blur()},cb(){hi({action:"get_my_answer",offset:Un,cb(e){t=e.left_answer_cnt,t||Nn.showEndLine()}})},btnClickCb(){Nn.disableBtn();const e=qn?"add_reply":"add_answer";ni(Rn(Mn,"js_loading_toast")),_e({url:"/mp/qna?action=".concat(e),type:"POST",dataType:"json",data:Object.assign({answer_id:zn,answer_sn:Fn,content:mi(),my_reply_cnt:Wn+1,ignore_tips:1},Zn),success(e){if(e&&e.base_resp&&0===e.base_resp.ret){if(ni(Rn(Mn,"js_sended_toast")),setTimeout((()=>{ti(Rn(Mn,"js_sended_toast"))}),800),pi().value="",Nn.disableBtn(),qn&&e.reply_info&&e.reply_info.reply_list){const t=ri(e.reply_info,0,!0).replyList,i=Rn(Mn,"js_qa_reply_list_".concat(zn));i.appendChild(t.cloneNode(!0)),ni(Rn(i.parentNode,"js_write_reply")),ti(Rn(i.parentNode.parentNode,"js_write_reply"))}else if(!qn&&e.answer_info&&e.answer_info.answer_list){const t=Rn(Mn,"js_qa_qna_answer_list");t.insertBefore(si(e.answer_info.answer_list,!0).fragment,t.firstChild),ni(Rn(Mn,"js_qa_write_head"))}}else Nn.enableBtn(),168003===e.base_resp.ret||168007===e.base_resp.ret?gi("\u5185\u5bb9\u6d89\u5acc\u8fdd\u53cd\u5e73\u53f0\u534f\u8bae\u6216\u6cd5\u89c4\u653f\u7b56"):168004===e.base_resp.ret?gi("\u5173\u6ce8\u8be5\u516c\u4f17\u53f7\u624d\u80fd\u53c2\u4e0e\u8ba8\u8bba"):168005===e.base_resp.ret?gi("\u5173\u6ce8\u8be5\u516c\u4f17\u53f73\u5929\u53ca\u4ee5\u4e0a\u624d\u80fd\u53c2\u4e0e\u8ba8\u8bba"):168008===e.base_resp.ret||168009===e.base_resp.ret?gi("\u5b57\u6570\u4e0d\u80fd\u591a\u4e8e"+(qn?140:600)):oi()},error(){oi(),Nn.enableBtn()},complete(){ti(Rn(Mn,"js_loading_toast")),pi().blur()}})},makeFakeInputEle(){const e=pi(),t=e.cloneNode();t.id="tmp_input",t.style.top=0,t.style.position="absolute",e.parentNode.insertBefore(t,e),t.value=e.value,t.scrollTop=e.scrollTop},removeInputEle(){const e=document.getElementById("tmp_input");e&&e.parentNode.removeChild(e)},makeInputEleBigger(){const e=pi(),t="1000px";e.style.borderTop="solid ".concat(t," transparent"),e.style.position="relative",e.style.top="-".concat(t)}}),fi(),Nn.disableBtn(),e?Nn.setCloseBtnStyle("back"):Nn.setCloseBtnStyle("close"),Nn.show(!0,pi()),function(){const e=pi();je.on(Mn,"tap",".js_get_more_reply",(e=>{li(e.delegatedTarget)})),je.on(e,"input",_i),je.on(e,"tap",(()=>{Nn.scrollTo(0,0)}))}(),new a.Emotion({emotionPanel:s("#js_qa_emotion_panel"),inputArea:s(pi()),emotionPanelArrowWrp:s("#js_qa_emotion_panel_arrow_wrp"),emotionSwitcher:s("#js_qa_emotion_switch"),emotionSlideWrapper:s("#js_qa_emotion_slide_wrapper"),emotionNavBar:s("#js_qa_emotion_navbar"),inputEmotion(){_i()}})}function Si(e){let t=["/mp/copyrightreport?action=report&biz=",biz,"&scene=",e.scene,"&user_uin=",user_uin,"&uin=",uin,"&key=",key,"&pass_ticket=",pass_ticket,"&mid=",window.mid,"&idx=",window.idx,"&source_biz=",window.source_biz,"&source_mid=",window.source_mid,"&source_idx=",window.source_idx,"&card_version=2","&show_appmsg_scene=",window.source,"&session_id=",window.sessionid,"&has_recommend_msg=",window.hasRecommendMsg,"&reprint_type=",window.reprint_type,"&t=",Math.random()].join("");window.isSg&&(t+="&from=sougou"),(new Image).src=t.substr(0,1024)}function Ti(){(window.pageYOffset||document.documentElement.scrollTop)+Oe.getInnerHeight()>Ci.copyright_top&&(Si({scene:"1",card_pos:"0"}),je.off(window,"scroll",Ti),Ti=Ci.copyright_top=null)}function Ei(e){return document.getElementById(e)}function qi(e,t,i){let n="",o="";try{""!=tid&&(o="tid="+tid+"&aid=54");let a=e.split("?")[1]||"";if(a=a.split("#")[0],""==a);else{let r=[a,"mpshare=1","scene="+t,"srcid="+srcid,"sharer_shareinfo="+i],s=ge.getQuery("sharer_shareinfo_first")||ge.getQuery("sharer_shareinfo");if(s?r.push("sharer_shareinfo_first="+s):r.push("sharer_shareinfo_first="+i),""!=o&&r.push(o),a=r.join("&"),2===t&&Oi&&Oi.indexOf(Mi)>-1){let t=Math.floor(Math.random()*Ni.length),i=Ni[t];n=e.split("?")[0]+"?"+a+"&testtype=".concat(i)+"#"+(e.split("#")[1]||"")}else n=e.split("?")[0]+"?"+a+"#"+(e.split("#")[1]||"")}}catch(e){n=""}return n||(n=location.href+"#wechat_redirect",me.setLogs({id:28307,key:47,value:1,log:"[share_link]["+encodeURIComponent(location.href)+"]["+encodeURIComponent(e)+"]["+encodeURIComponent(msg_link)+"]"})),n}function Vi(e,t,i,n,o=0){Se.shareReport({link:e,action_type:i,sharer_shareinfo:n,share_source:window.customShareSource||(0===o?1:2)})}function Ji(e,t){return e.isCDN()&&(e=ge.addWxfrom(e,t)),e}function Gi(){let e=ht(window.user_uin+"_"+Date.now());if(window.is_wash)return{img_url:$i,img_width:"640",img_height:"640",link:qi(Ui,2,e),desc:"",title:"Article constitutes content laundering. You can read the content of the original author below."};{let t=Fi;Ae.isIOS||(t=Ji(Fi,"2"));let i={img_url:t,img_width:"640",img_height:"640",link:Ui,desc:window.clear_desc_flag?"":Ki,title:Wi};if(window.customShareInfo&&"object"==typeof window.customShareInfo&&Object.assign(i,window.customShareInfo),"string"==typeof i.forbid_msg){let e=i.forbid_msg.replace("#op#","Share");return void(window.weui||window).alert(e)}return i.link=qi(i.link,2,e),i}}function Yi(){const e=function(){let e=ht(window.user_uin+"_"+Date.now());if(window.is_wash)return{img_url:$i,img_width:"640",img_height:"640",link:qi(Ui,type,e),desc:"You can read the content of the original author below.",title:"Article constitutes content laundering."};{let t=1,i=Ji(Fi,"1");1==malicious_content_type&&(i="https://mmbiz.qlogo.cn/mmbiz_png/cVgP5bCElFiayFgbgEB9iaDt7hLicfz9RrXGM0LpaQ0TUic2gP7lbbqU3jCD8ibonicgIa3p99yjx1f1P26HChraeRUg/0?wx_fmt=png");let n={appid:zi,img_url:i,img_width:"640",img_height:"640",link:Ui,desc:window.clear_desc_flag?"":Ki,title:Wi};if(window.customShareInfo&&"object"==typeof window.customShareInfo&&Object.assign(n,window.customShareInfo),"string"==typeof n.forbid_msg){let e=n.forbid_msg.replace("#op#","Share");return void(window.weui||window).alert(e)}return n.link=qi(n.link,t,e),n}}();e&&Ie.invoke("shareCustomContent",{friend:e,timeline:Gi()},(()=>{let t=ht(window.user_uin+"_"+Date.now());Vi(Ui,0,1,t,2),l.commit("mp-related-article/setSources","share"),e.vid&&(Li=Object.assign(Li,{vid:e.vid,share_type:2}),u.reportKanData(Li))}))}function to(){const e=document.createElement("div"),t=document.createElement("span");return t.setAttribute("role","option"),t.innerHTML='<span aria-label="\u5408\u96c6\uff1a">#</span>'.concat(window.appmsg_album_info.title),e.appendChild(t),e.innerHTML}function no(){function e(e,t=!1,i=!0){const c=document.createDocumentFragment();if(o)if(t){u=1;for(let t=0;t<e.length;t++)if(e[t].msgid.toString()===window.appmsgid.toString()&&e[t].itemidx.toString()===window.idx.toString()){u=t;break}e.forEach(((e,t)=>{e.index=a?n-(t-u):n+(t-u)}))}else i?e.forEach(((e,t)=>{e.index=a?s.index-t-1:s.index+t+1})):e.forEach(((t,i)=>{t.index=a?r.index+(e.length-i):r.index-(e.length-i)}));return e.forEach((e=>{const t=document.createElement("div");if(xe.addClass(t,Xi.itemClassName),e.msgid.toString()===window.mid.toString()&&e.itemidx.toString()===window.idx.toString()?xe.addClass(t,"album_read_directory_current"):1===e.user_read_status&&(xe.addClass(t,"album_read_directory_disabled"),xe.addClass(t,"js_wx_tap_highlight"),xe.addClass(t,"wx_tap_cell")),o){const i=document.createElement("span");i.className="album_read_directory_item_index",i.innerText="".concat(e.index,"."),t.appendChild(i)}const i=document.createElement("span");i.className="album_read_directory_title_wrp";const n=document.createElement("span");n.className="album_read_directory_title_wrp",n.innerText=e.title,i.appendChild(n),t.setAttribute("data-url",e.url),t.setAttribute("role","option");const a=document.createElement("span");if(e.is_paid){const e="Paid";xe.addClass(a,"wx_icon_pay_tag"),xe.addClass(a,"wx_icon_pay_tag_paid"),a.innerText=e,i.appendChild(a)}else if(e.is_pay_subscribe){const e="Pay";xe.addClass(a,"wx_icon_pay_tag"),a.innerText=e,i.appendChild(a)}t.appendChild(i),c.appendChild(t)})),c}function t(e){1*e.reverse_continue_flag||(d=!1,Qi.disablePullDownLoad()),1*e.continue_flag||(l=!1)}const i=document.createElement("div");i.style.position="relative",i.style.cursor="pointer",i.setAttribute("role","listbox");let n,o,a,r,s,c=[],d=!0,l=!0,u=1;const p={extClass:"album_read_directory weui-half-screen-dialog_fold",hasBtn:!0,btnSlot:'<div id="js_topic_detail" class="weui-btn__word-wrp">\n                  <span class="weui-btn__word">Details</span>\n                  <i class="weui_right_arrow"></i>\n                </div>',title:to(),btnClickCb(){it({ActionType:6}),ot(15),function(){const e=window.appmsg_album_info;if(e.link){const t=e.link.replace("#wechat_redirect","&subscene=159&subscene=".concat(window.source,"&scenenote=").concat(encodeURIComponent(window.location.href),"&nolastread=1#wechat_redirect"));He.openUrlWithExtraWebview(t.htmlDecode())}}()},cb(){var c;c=c=>{Qi.hideLoading(),a=c.base_info.is_reverse,n=c.base_info.cur_article_num,o=c.base_info.is_numbered,i.appendChild(e(c.article_list,!0)),r=c.article_list[0],s=c.article_list[c.article_list.length-1],t(c),l||Qi.showEndLine(),d&&(i.firstChild.parentNode.insertBefore(eo,i.firstChild),Xi.isInsertBlock=!0,Qi.scrollTo(0,i.firstChild.offsetTop+1));const p=i.childNodes[u];setTimeout((()=>{p.offsetTop+p.clientHeight>Qi.contentAreaWrp.clientHeight&&Qi.scrollTo(0,i.offsetHeight)}),200)},_e({type:"GET",url:"/mp/appmsgalbum?action=paging&__biz=".concat(window.biz,"&album_id=").concat(Xi.albumId,"&cur_msgid=").concat(window.appmsgid,"&cur_itemidx=").concat(window.idx,"&count=").concat(Xi.pageCount),timeout:5e3,dataType:"json",success:function(e){e.base_resp&&0===e.base_resp.ret&&c(e.getalbum_resp)},error(){}})},onShow(){it({ActionType:4}),ot(14)},onPullUpLoad(){l&&(Qi.showPullUpLoading(),_e({type:"GET",url:"/mp/appmsgalbum?action=paging&__biz=".concat(window.biz,"&album_id=").concat(Xi.albumId,"&begin_msgid=").concat(s.msgid,"&begin_itemidx=").concat(s.itemidx,"&count=").concat(Xi.pageCount),timeout:5e3,dataType:"json",success:function(n){if(Qi.hidePullUpLoading(),0===(n.base_resp&&1*n.base_resp.ret)){const o=n.getalbum_resp.article_list;t(n.getalbum_resp),i.appendChild(e(o,!1,!0)),c=c.concat(o),Qi.finishPullUpLoad(),s=c[c.length-1],1*n.getalbum_resp.continue_flag||Qi.showEndLine()}},error:function(){}}))},onPullDownLoad(){d&&(Xi.isInsertBlock&&(eo.parentNode.removeChild(eo),Xi.isInsertBlock=!1),Qi.showPullDownLoading(),_e({type:"GET",url:"/mp/appmsgalbum?action=paging&__biz=".concat(window.biz,"&album_id=").concat(Xi.albumId,"&begin_msgid=").concat(r.msgid,"&begin_itemidx=").concat(r.itemidx,"&count=").concat(Xi.pageCount,"&isbackward=1"),timeout:5e3,dataType:"json",success:function(n){if(Qi.hidePullDownLoading(),0===(n.base_resp&&1*n.base_resp.ret)){const o=n.getalbum_resp.article_list,a=n.getalbum_resp.continue_flag;n.getalbum_resp.continue_flag=n.getalbum_resp.reverse_continue_flag,n.getalbum_resp.reverse_continue_flag=a,t(n.getalbum_resp);const s=e(o,!1,!1),d=i.firstChild;i.insertBefore(s,d),c=o.concat(c),Qi.scrollTo(0,d.offsetTop-62),setTimeout((()=>{Qi.finishPullDownLoad()}),500),r=c[0]}},error:function(){}}))}};var m;window.appmsg_album_info.size<=4&&(p.top="".concat(screen.height/2-(screen.height-window.innerHeight),"px")),Qi=new En(i,p),Qi.showLoading(),!Xi.isPC&&Qi.show(),(m=i)&&je.on(m,"click",".".concat(Xi.itemClassName),(e=>{const t=e.delegatedTarget;if(xe.hasClass(t,"album_read_directory_current"))return;let i;i=t.dataset.url.includes("#")?t.dataset.url.replace("#","".concat(Zi,"&scene=190#")):t.dataset.url+"".concat(Zi,"&scene=190"),it({ActionType:5,Url:i}),Ce.jumpUrl(i,!0,{useFastLoad:!0}),xe.addClass(t,"album_read_directory_disabled")}))}function Ro(){const e=Date.now(),t=window.pageYOffset||document.documentElement.scrollTop,i=new IntersectionObserver((n=>{const o=[];n.forEach((e=>{const{target:t,isIntersecting:n}=e;if(n){const e=this.images.find((e=>e.placeholder===t));if(e){const{type:n}=e;let a=e.src;const r=1*e.placeholder.dataset.secLoadStatus;if(!a||1===r)return;if(e.show||2!==r||(e.show=!0,o.push(a)),Ae.isWp&&"img"===e.type&&1*e.placeholder.width>window.sw&&(e.placeholder.width=this.sw),e.show)return void i.unobserve(t);this.changeSrc&&(a=this.changeSrc(a,e.loader,e.placeholder,e.type)),"function"==typeof Eo[n]&&Eo[n].call(this,e,a),o.push(a),i.unobserve(t)}}})),o.length>0&&this.detect&&this.detect({time:e,scrollTop:t,loadList:o})}));this.images.forEach((e=>i.observe(e.placeholder)))}function Po(e){const t=this.images;if(!t||t.length<=0)return!1;const i=window.pageYOffset||document.documentElement.scrollTop,n=window.innerHeight||document.documentElement.clientHeight;let o=this.offset||60,a=0;if("wifi"===window.networkType){const e={bottom:1,top:1};let t;t=window.svr_time?new Date(1e3*window.svr_time):new Date;const i=t.getHours();i>=20&&i<23&&(e.bottom=.5,e.top=0),o=Math.max(e.bottom*n,o),a=Math.max(e.top*n,a)}const r=Date.now(),s=[],c=this.sw,d=this;for(let i=0,r=t.length;i<r;i++){const r=t[i];let l=r.src;const u=1*r.placeholder.dataset.secLoadStatus;if(!l||1===u)continue;if(r.show||2!==u||(r.show=!0,s.push(l)),Ae.isWp&&"img"===r.type&&1*r.placeholder.width>c&&(r.placeholder.width=c),r.show)continue;const p=d.getImgRect&&d.getImgRect(r.placeholder)||r.placeholder.getBoundingClientRect();let m=a,_=o;(l.match(/\:\/\/[^\/]+\/mmbiz\//)&&l.indexOf("wx_fmt=gif")>-1||l.match(/\:\/\/[^\/]+\/mmbiz_gif\//))&&(m=0,_=60),(p.top<=0&&p.top+p.height+m>=0||p.top>0&&p.top<n+_||1===e||2===e&&"img"===r.type||3===e&&"bg"===r.type)&&(d.inImgRead&&(p.top<=0&&p.top+p.height>=0||p.top>0&&p.top<n)&&d.inImgRead(l,window.networkType),d.changeSrc&&(l=d.changeSrc(l,r.loader,r.placeholder,r.type)),"function"==typeof Eo[r.type]&&Eo[r.type].call(this,r,l),s.push(l))}s.length>0&&this.detect&&this.detect({time:r,loadList:s,scrollTop:i})}function Do(){const e=document.getElementsByTagName("img"),t=document.querySelectorAll("[data-lazy-bgimg]"),i=[],n=this.container,o=this.attrKey||"data-src",a=n.offsetWidth;let r=0;const s=this.imgOccupied||!1,c=this.crossOrigin||!1;n.currentStyle?r=n.currentStyle.width:"undefined"!=typeof getComputedStyle&&(r=getComputedStyle(n).width),this.sw=1*r.replace("px","");for(let t=0,n=e.length;t<n;t++){const n=e.item(t),r=Ao(n,o);if(!r)continue;const d=Ao(n,"src");if(d&&d.indexOf("data:image/svg+xml")<0&&!n.dataset.secLoadStatus)continue;let l=100;if(n.dataset&&n.dataset.ratio){const e=1*n.dataset.ratio;let t=1*n.dataset.w||a;"number"==typeof e&&e>0&&(t=t<=a?t:a,l=t*e,s||(n.style.width&&n.setAttribute("_width",n.style.width),Io(n,"width",t+"px","important"),Io(n,"visibility","visible","important"),n.setAttribute("src",xo)))}s||Io(n,"height",l+"px","important"),c&&-1===r.indexOf("mmsns.qpic.cn")&&!(r.match(/\:\/\/[^\/]+\/mmbiz\//)&&r.indexOf("wx_fmt=gif")>-1||r.match(/\:\/\/[^\/]+\/mmbiz_gif\//))&&(n.crossOrigin="anonymous"),n.alt||(n.alt="Image"),i.push({type:"img",placeholder:n,loader:n.cloneNode(),src:r,height:l,show:!1})}for(let e=0,n=t.length;e<n;e++){const n=t.item(e),o=Ao(n,"data-lazy-bgimg");if(!o)continue;const a=n.style.backgroundImage;a&&a.indexOf("data:image/gif;base64")<0&&!n.dataset.secLoadStatus||i.push({type:"bg",placeholder:n,loader:new Image,src:o,show:!1})}window.__lazyload_detected=!0,this.images=i,window.IntersectionObserver&&Ro.call(this);const d=n.querySelector('animate[attributeName="y"]')||n.querySelector('animateTransform[attributeName="transform"]')||n.querySelector("animateMotion");Po.call(this,d?3:0)}function jo(){this.throttle||(this.throttle=!0,setTimeout((()=>{Po.call(this),this.throttle=!1}),500))}function Bo(e){setTimeout((()=>Do.call(e)),0),je.on(window,"scroll",(()=>jo.call(e))),je.on(document,"touchmove",(()=>jo.call(e))),Ie.invoke("getUserConfig",{},(t=>{t.isAccessibilityMode?(window.localStorage.setItem("isMpUserAccessibility","1"),Po.call(e,1)):window.localStorage.removeItem("isMpUserAccessibility")})),Ae.isIOS&&Ae.getInner()>="18001B00"&&Ie.on("onScreenShot",(()=>{Po.call(e,1)}))}async function $o(){await async function(e=Go){try{return window.navigator&&window.navigator.storage&&window.navigator.storage.estimate?window.navigator.storage.estimate().then((({quota:t,usage:i})=>i>=t||i>=e)):!!(window.navigator&&window.navigator.webkitTemporaryStorage&&window.navigator.webkitTemporaryStorage.queryUsageAndQuota)&&new Promise((t=>{window.navigator.webkitTemporaryStorage.queryUsageAndQuota(((i,n)=>{t(i>n||i>=e)}))}))}catch(e){return Yo("getIfCurrentUsageExceed",e),!1}}()&&await async function(){if(!Jo)try{Vo.transaction("rw",Vo.articles,(async()=>{Jo=!0;const e=await Vo.articles.count(),t=Math.floor(e/2),i=await Vo.articles.orderBy("timestamp").limit(t);await i.delete()}))}catch(e){Yo("cleanRelatedArticleList",e)}finally{Jo=!1}}()}function Yo(e,t){try{let i="indexDBError-".concat(e,"-");t&&t.message?i+=t.message:t&&(i+=JSON.stringify(t)),me.setLogs({id:110809,key:84,value:1,log:encodeURIComponent(i)}),window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&window.WX_BJ_REPORT.BadJs.report("related article err","biz=".concat(window.biz," mid=").concat(window.mid," idx=").concat(window.idx),{mid:"mmbizwap:related_article_db_err",view:"wap_business",_info:{error:t,errorMsg:i}})}catch(e){}}function fa(e){xe.removeClass(e,"rich_media_meta_link"),xe.removeClass(e,"js_wx_tap_highlight")}function ba(e){const t=Number(decodeURIComponent(e.getAttribute(wa.banPropName)));return 1===t||0===t||-1===t}function va(e){_e({url:"/mp/cps_product_info?action=UrlGet&product_type=1&url=".concat(encodeURIComponent(e)),type:"GET"})}function ka(e){je.on(e,"click",(()=>{const t=decodeURIComponent(e.getAttribute("data-jump-url")),i=decodeURIComponent(e.getAttribute(wa.clickReportPropName)||"");ba(e)&&t&&(i&&va(i),Ue(t))}))}function xa(){const e=document.getElementsByTagName(wa.tagName);for(const t of e){const e=t.getAttribute(wa.componentIdPropName);if(ya[e])continue;const i=t.getBoundingClientRect();if(i.bottom>0&&i.top<window.innerHeight){const i=decodeURIComponent(t.getAttribute(wa.exposureReportPropName)||"");if(!ba(t)||!i)continue;va(i),ya[e]=!0}}}function Ca(){function e(e,t){const i=t||window.location.search,n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),o=i.substr(i.indexOf("?")+1).match(n);return null!=o?o[2]:""}function t(e){return document.querySelector("#js_mp_video_container_".concat(o.iframeIdx," #").concat(e))}function i(){!function(){let e=o.ratio;a.vw&&a.vh&&(e=a.vw/a.vh);const i=a.vw||o.dom.js_mpvedio.offsetWidth,n=Math.ceil(i/e),r=[Dt];Ae.isWechat&&!Ae.isNewMpApp&&(fe.os.iphone||fe.os.android)&&new Date(1e3*window.ct)>new Date("2022/01/12 19:00:00 GMT+0800")&&r.push(jt);const s={cgiData:a,preview:!(1*a.preview!=1),isInIframe:!0,hitBizuin:a.hit_bizuin,hitVid:a.hit_vid,fromid:o.scene,oriStatus:o.ori_status,isMpVideo:a.txvideo_vid?0:a.is_mp_video,plugins:r,oriVid:o.vid,vid:a.txvideo_vid?a.txvideo_vid:o.vid,ckey:a.txvideo_vid?"":o.ckey,ckey_ad:o.ckey_ad,width:i,height:n,__biz:o.__biz,uin:o.uin,mid:o.mid,idx:o.idx,coverFit:"contain",vtitle:window.msg_title,videoTitle:window.msg_title,useFeFullscreen:!0,comment_id:o.comment_id,scene_type:0,autoplay:o.autoplay,videoMd5:a.video_md5,headImgUrl:window.round_head_img,canShareVideo:!a.isPaySubscribe,bizUserName:window.user_name,bizNickName:window.nickname,profileTabType:1,leaveReport12710Type:1,storeFactory:e=>{const t=new L.Store({modules:{[q.name]:q},state:{...W(),cgiData:e},mutations:z()});return t.registerModule([q.name,F.name],F),t.registerModule([q.name,H.name],H),t}},c=Rt();o.myPlayer=new Pt({el:"#js_vue_player_"+o.iframeIdx,opt:s,store:c}),o.myPlayer.$on("player-ready",(()=>{if(o.dom.js_mpvedio.style.height="100%",U.showReprint()&&!o.hasShowBotbar){const e=t("bottom_bar");e&&(e.style.display="",o.hasShowBotbar=!0,Te.postMessage({type:"addVideoIframeHeight",data:{vid:a.txvideo_vid||o.id,height:o.mpVideoBotH}}))}Te.postMessage({type:"videoInited",data:{vid:o.id,ori_status:o.ori_status,hit_bizuin:a.hit_bizuin,hit_vid:a.hit_vid}})})),o.myPlayer.$on("video-ready",(()=>{Te.postMessage({type:"removeVideoLoading",data:{vid:o.vid}})})),o.myPlayer.$on("fullscreenchange",(e=>{"frontend"===e.type&&(e.state&&o.dom.js_mpvedio.parentNode!==document.body?(o.dom.js_mpvedio.style="position: fixed; top: 0; width: 100%; height: 100%",o.dom.js_mpvedio.style.zIndex=510,o.dom.js_article.style.opacity=0,window.requestAnimationFrame((()=>{document.body.appendChild(o.dom.js_mpvedio),e.supportSwipeBack||(o.dom.js_article.style.transition="opacity .1s")}))):e.state||o.dom.js_mpvedio.parentNode===o.dom.page_content||(o.dom.page_content.appendChild(o.dom.js_mpvedio),e.supportSwipeBack?(o.dom.js_mpvedio.style="position: relative; height: 100%",o.dom.js_article.style.opacity=1):(o.dom.js_mpvedio.style="",setTimeout((()=>{o.dom.js_article.style.opacity=1}),150))))}))}()}function n(n){const{vid:r,vh:s,vw:c,ratio:d,index:l,is_mp_video:u}=n,p=(window.__videoPageInfos||[]).find((({video_id:e})=>e===r))||{};new Promise((e=>{u?e():_e({url:"/mp/videoplayer?action=tx_video&biz=".concat(window.biz,"&mid=").concat(window.mid,"&idx=").concat(window.idx,"&vid=").concat(r,"&source=").concat(window.source),type:"GET",dataType:"json",f:"json",success:t=>{t&&t.base_resp&&0===t.base_resp.ret?e(t.ckey):e()},error:()=>e()})})).then((n=>{a={hit_bizuin:p.hit_bizuin,hit_vid:p.hit_vid,ori_status:p.ori_status,hit_username:p.hit_username,is_mp_video:/^wxv/.test(p.hit_vid)||p.is_mp_video,vh:s,vw:c,vid:r,ckey:n,ratio:d,iframeIdx:l,biz:window.biz,mid:window.mid,idx:window.idx,uin:window.uin,__biz:window.biz,video_title:window.cgiData.title||"",is_login:window.is_login,user_uin:window.user_uin,username:window.user_name,nick_name:window.nickname,preview:!!window.is_temp_url,create_time:window.create_time,source_encode_biz:window.source_encode_biz,comment_id:window.comment_id,show_comment:window.show_comment,isPaySubscribe:1*window.isPaySubscribe||0,bizNickname:window.nickname,roundHeadImg:window.round_head_img,subscene:window.subscene,enterid:1*window.enterid,sessionid:window.sessionid,channel_session_id:window.channel_session_id,real_item_show_type:window.real_item_show_type,item_show_type:window.item_show_type,clientversion:window.clientversion,devicetype:window.devicetype,isprofileblock:window.isprofileblock,sn:window.sn||e("sign",window.location.href)||"",scene:window.source||window.scene||e("scene",window.location.href)||0},1*a.ori_status==1?o.ori_status=1:1*a.ori_status==2?o.ori_status=2:o.ori_status=3,o.showComment=1*a.show_comment==1,o.comment_id=a.comment_id,o.vid=a.vid,o.ckey=a.ckey,o.ckey_ad=a.ckey_ad,o.__biz=a.__biz,o.uin=a.uin,o.mid=a.mid,o.idx=a.idx,o.scene=a.scene||e("scene",window.location.href)||0,o.autoplay=!!o.container.getAttribute("__sec_open_auto_play__"),o.iframeIdx=a.iframeIdx,o.dom={js_article:document.getElementById("js_article"),js_mpvedio:t("js_mpvedio_wrapper_"+o.vid),page_content:t("page-content")},i(),function(){const i=t("h5_profile_btn");i&&2===a.ori_status&&je.tap(i,(()=>{const e="https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz="+a.source_encode_biz+"&scene=111#wechat_redirect";Ae.isWindowsWechat||Ae.isMacWechat?location.href=e:Ie.invoke("openUrlWithExtraWebview",{url:e,openType:1},(t=>{-1===t.err_msg.indexOf("ok")&&(location.href=e)}))}));const n=t("video_detail_btn");n&&/^wxv_/.test(a.vid||"")&&je.tap(n,(()=>{const t=["https://mp.weixin.qq.com/mp/video?t=pages/video_detail_new","&vid=",o.vid,"&mid=",o.mid,"&__biz=",o.__biz,"&idx=",o.idx,"&sn=",window.sn||e("sign",window.location.href)||"","&vidsn=",a&&a.vidsn?a.vidsn:"","&scene=100#wechat_redirect"];o.myPlayer&&o.myPlayer.extendMpReportData({detail_click:1}),window.location.href=t.join("")}))}()}))}const o={hasShowBotbar:!1,mpVideoBotH:37,showComment:!0,loverCount:{}};let a={};return{createMpVideoDom:function(e,t,i){const a=ge.getQuery("vid",i),r=e.getAttribute("data-vw"),s=e.getAttribute("data-vh"),c=e.getAttribute("data-ratio"),d=document.createElement("span"),l=e.attributes;for(let e=l.length-1;e>=0;e--)d.setAttribute(l[e].name,l[e].value);d.id="js_mp_video_container_"+t,d.setAttribute("vid",a),d.classList.add("video_iframe"),d.style.cssText=e.style.cssText,d.style.display="none";const u=Be.tmpl(Ia,{vid:a,index:t,video_h:s},!1);d.innerHTML=u;const p=e.parentNode;return p?(p.lastChild===e?p.appendChild(d):p.insertBefore(d,e.nextSibling),p.removeChild(e),o.container=d,n({iframe:d,vid:a,vh:s,vw:r,ratio:c,index:t,is_mp_video:/^wxv_.+$/.test(a||"")}),d):null}}}function Sa(){function e(e){let t=0;try{const i=document.getElementsByTagName("html").item(0).style["-webkit-text-size-adjust"],n=e.contentDocument;if(n){const e=n.getElementsByTagName("html").item(0);e&&(e.style["-webkit-text-size-adjust"]=i)}if(Ie.on("menu:setfont",(()=>{const t=function(e){let t=0;return e.contentDocument&&e.contentDocument.body.offsetHeight?t=e.contentDocument.body.offsetHeight:e.Document&&e.Document.body&&e.Document.body.scrollHeight?t=e.Document.body.scrollHeight:e.document&&e.document.body&&e.document.body.scrollHeight&&(t=e.document.body.scrollHeight),t}(e);e.parentElement&&0!==t&&(e.style.height="".concat(t,"px"))})),e.contentDocument&&e.contentDocument.body.offsetHeight?t=e.contentDocument.body.offsetHeight:e.Document&&e.Document.body&&e.Document.body.scrollHeight?t=e.Document.body.scrollHeight:e.document&&e.document.body&&e.document.body.scrollHeight&&(t=e.document.body.scrollHeight),e.parentElement&&(e.style.height=t+"px"),/MSIE\s(7|8)/.test(navigator.userAgent)&&e.contentWindow&&e.contentWindow.document){const t=e.contentWindow.document.getElementsByTagName("html");t&&t.length&&(t[0].style.overflow="hidden")}const o=e.contentWindow.document,a=o.querySelectorAll(".vote_option_title .img_panel img"),r="data-prevent-longtap";for(const e of a){if("1"===e.getAttribute(r))continue;e.setAttribute(r,"1"),e.style["pointer-events"]="none",e.addEventListener("touchstart",(e=>e.preventDefault()));const t=e.parentNode,i=t.parentNode,n=o.createElement("div");n.setAttribute("style","\n          position: absolute;\n          left: 0;\n          top: 0;\n          width: 100%;\n          height: 100%;\n        "),i.style.position="relative",i.removeChild(t),n.appendChild(t),i.appendChild(n),n.addEventListener("touchstart",(()=>e.dispatchEvent(new MouseEvent("click"))),!0)}Ii&&Ii.postPageHeightMessage&&Ii.postPageHeightMessage("updatePageHeight"),De.emitRenderNewHeightEvt()}catch(e){}}function t(){const e=window.pageYOffset||document.documentElement.scrollTop,n=i.video_top.length,o=e+Oe.getInnerHeight();let a=0;for(let e=0;e<n;e++){const t=i.video_top[e];t.reported?a++:o>=t.start&&o<=t.end&&(t.reported=!0,setTimeout(function(e,t,i){return function(){const n=Ee.getVideoInfo();let o="",a="",r=3
;n[e]&&(n[e].hit_bizuin&&(o=n[e].hit_bizuin),n[e].hit_vid&&(a=n[e].hit_vid),n[e].ori_status&&(r=n[e].ori_status)),U.report({step:1,hit_vid:a,hit_bizuin:o,ori_status:r,vid:e,screen_num:Math.ceil(t/i),screen_height:i})}}(t.vid,o,Oe.getInnerHeight()),1e4))}a==n&&(je.off(window,"scroll",t),i.video_top=null,i.video_iframe=null,t=null)}const i={txVideoReg:/^http(s)*\:\/\/v\.qq\.com\/iframe\/(preview|player)\.html\?/,mpVideoReg:/^http(s)*\:\/\/mp\.weixin\.qq\.com\/mp\/readtemplate\?t=pages\/video_player_tmpl/,video_iframe:[],video_top:[]},n=[].slice.call(document.getElementsByTagName("iframe")),o=[],a=Math.ceil(1e4*Math.random());window.reportVid=[];for(let t=0,r=n.length;t<r;++t){const r=n[t],s=t;let c=r.getAttribute("data-src")||"";const d=r.className||"";let l=r.getAttribute("src")||c;if(!c||"#"===c){let e=r.getAttribute("data-display-src");if(e&&(0==e.indexOf("/cgi-bin/readtemplate?t=vote/vote-new_tmpl")||0==e.indexOf("https://mp.weixin.qq.com/cgi-bin/readtemplate?t=vote/vote-new_tmpl"))){e=e.replace(/&amp;/g,"&");const t=e.split("&"),i=["/mp/newappmsgvote?action=show"];t.forEach((e=>{0!=e.indexOf("__biz=")&&0!=e.indexOf("supervoteid=")||i.push(e)})),i.length>1&&(c=i.join("&")+"#wechat_redirect")}}if(l&&(i.txVideoReg.test(l)||i.mpVideoReg.test(l))||r.getAttribute("data-mpvid")&&r.getAttribute("data-mpvid").startsWith("wxv_")){const e=ge.getQuery("vid",c)||r.getAttribute("data-mpvid"),t=(window.__videoPageInfos||[]).find((t=>t.video_id===e)),n=t&&t.hit_vid;if(K.isShowMpVideo()||i.mpVideoReg.test(l)||"".concat(n).startsWith("wxv_")){if(!e)return;const t=r.getAttribute("data-vw"),n=r.getAttribute("data-vh");"qq.com"==document.domain&&((new Image).src="https://badjs.weixinbridge.com/badjs?id=139&level=4&from="+window.encodeURIComponent(window.location.host)+"&msg="+window.encodeURIComponent(window.location.href),me.setLogs({id:27302,key:100,value:1,log:"[beforeD]"+window.encodeURIComponent(window.location.href)})),window.reportVid.push(e),l=["/mp/videoplayer?video_h=",n,"&video_w=",t,"&scene=",window.source,"&random_num=",a,"&article_title=",encodeURIComponent(window.msg_title.htmlDecode()),"&source=4&vid=",e,"&mid=",appmsgid,"&idx=",itemidx||idx,"&__biz=",biz,"&nodetailbar=",window.is_temp_url?1:0,"&uin=",uin,"&key=",key,"&pass_ticket=",pass_ticket,"&version=",version,"&devicetype=",window.devicetype||"","&wxtoken=",window.wxtoken||"","&sessionid=",window.sessionid||"","&preview=",window.is_temp_url?1:0,"&is_in_pay_subscribe=",window.isPaySubscribe,"&nickname=".concat(window.nickname),"&roundHeadImg=".concat(window.round_head_img),"&enterid=".concat(window.enterid),"&subscene=".concat(window.subscene)].join("");const o=Ca().createMpVideoDom(r,s,l);i.video_iframe.push({dom:o,vid:e})}}else if(c&&(c.indexOf("newappmsgvote")>-1&&(d.indexOf("js_editor_vote_card")>=0||d.indexOf("vote_iframe")>=0)||0==c.indexOf("http://mp.weixin.qq.com/bizmall/appmsgcard")&&(d.indexOf("card_iframe")>=0||d.indexOf("js_editor_card")>=0)||c.indexOf("appmsgvote")>-1||c.indexOf("mp.weixin.qq.com/mp/getcdnvideourl")>-1)){if(window.is_transfer_msg&&!window.reprint_ticket&&c.indexOf(window.biz)<0)return void o.push(r);if(window.__second_open__||(c=c.replace(/^http:/,location.protocol)),d.indexOf("card_iframe")>=0||d.indexOf("js_editor_card")>=0){-1===d.indexOf("card_iframe")&&(r.className+=" card_iframe"),-1===d.indexOf("res_iframe")&&(r.className+=" res_iframe");let t=c.replace("#wechat_redirect",["&pass_ticket=",pass_ticket,"&scene=",source,"&msgid=",appmsgid,"&msgidx=",itemidx||idx,"&version=",version,"&devicetype=",window.devicetype||"","&child_biz=",biz,"&wxtoken=",window.wxtoken||""].join(""));reprint_ticket&&(t+=["&mid=",mid,"&idx=",idx,"&reprint_ticket=",reprint_ticket,"&source_mid=",source_mid,"&source_idx=",source_idx].join("")),window.__second_open__?_e({url:t,type:"GET",f:"html",success:function(i){r.setAttribute("src",t),r.contentWindow.document.open("text/html","replace"),r.contentWindow.document.write(i),r.contentWindow.document.close(),r.contentWindow.history.replaceState(null,null,t),-1==c.indexOf("mp.weixin.qq.com/mp/getcdnvideourl")&&(r.onload=function(){e(r)})}}):(r.setAttribute("src",t),-1==c.indexOf("mp.weixin.qq.com/mp/getcdnvideourl")&&(r.onload=function(){e(r)}))}else{let t=c.indexOf("#wechat_redirect")>-1,i=["&uin=",uin,"&key=",key,"&pass_ticket=",pass_ticket,"&wxtoken=",window.wxtoken||""].join("");reprint_ticket?i+=["&mid=",mid,"&idx=",idx,"&reprint_ticket=",reprint_ticket,"&source_mid=",source_mid,"&source_idx=",source_idx,"&appmsg_token=",appmsg_token].join(""):(d.indexOf("vote_iframe")>=0||d.indexOf("js_editor_vote_card")>=0)&&(i+=["&mid=",mid,"&idx=",idx,"&appmsg_token=",appmsg_token].join(""),-1===d.indexOf("vote_iframe")&&(r.className+=" vote_iframe"));let n=t?c.replace("#wechat_redirect",i):c+i;window.__second_open__?_e({url:n,type:"GET",f:"html",success:function(t){r.contentWindow.Ajax=_e,r.setAttribute("src",n),r.contentWindow.document.open("text/html","replace"),r.contentWindow.document.write(t),r.contentWindow.document.close(),r.contentWindow.history.replaceState(null,null,n),-1==c.indexOf("mp.weixin.qq.com/mp/getcdnvideourl")&&(r.onload=function(){e(r)})}}):(r.setAttribute("src",n),-1==c.indexOf("mp.weixin.qq.com/mp/getcdnvideourl")&&(r.onload=function(){e(r)}))}r.appmsg_idx=t}}if(o.forEach((e=>e.parentNode.removeChild(e))),window.iframe_reload=function(){n.forEach((t=>{const i=t.getAttribute("src");i&&(i.indexOf("newappmsgvote")>-1||i.indexOf("appmsgvote")>-1)&&e(t)}))},"getElementsByClassName"in document){const e=document.getElementsByClassName("video_iframe");for(let t,i=0;t=e.item(i++);)t.setAttribute("scrolling","no"),t.style.overflow="hidden"}i.video_iframe.length>0&&setTimeout((()=>{const e=i.video_iframe,n=document.getElementById("js_article");for(let t=0,o=e.length;t<o;t++){const o=e[t];if(!o||!o.dom)return;let a=o.dom;const r=parseFloat(getComputedStyle(a).getPropertyValue("height"));let s=0;for(;a&&n!==a;)s+=a.offsetTop,a=a.offsetParent;i.video_top.push({start:s+r/2,end:s+r/2+Oe.getInnerHeight(),reported:!1,vid:o.vid})}t(),je.on(window,"scroll",t)}))}function Ra(e){let t=e.getAttribute("data-src")||e.getAttribute("src"),i=ge.getQuery("vid",t),n=e.getAttribute("data-vw"),o=e.getAttribute("data-vh"),a=e.getAttribute("data-ratio"),r=document.createElement("span");r.setAttribute("data-ratio",a),r.id="js_tx_video_container_"+Math.random(),r.className="js_tx_video_container",r.style.cssText=e.style.cssText,r.style.display="none";let s=e.parentNode;if(s)return s.lastChild===e?s.appendChild(r):s.insertBefore(r,e.nextSibling),Bt.createTxVideo({containerId:r.id,vid:i,width:n,height:o,autoplay:!1,allowFullScreen:!0,onSuccess:function(e){r.playerObj=e.player,function(e,t){if(!t||!e)return;let i=e.parentNode;if(!i)return;let n=[];for(let e=0,o=i.children.length;e<o;e++){let o=i.children[e];o.className.indexOf("js_img_placeholder")>=0&&o.getAttribute("data-vid")==t&&n.push(o)}for(let e=0,t=n.length;e<t;e++)i.removeChild(n[e]);e.style.display="block"}(r,i),r.style.display="block"},onError:function(){}}),s.removeChild(e),r}function Pa(){let e="27613";const t=Ce.getHeadimgTotalCount();Ve.getData({biz:biz,appmsg_type:appmsg_type,mid:mid,sn:sn,idx:idx,scene:source,subscene:window.subscene||0,ascene:1*window.ascene||0,title:msg_title,ct:ct,abtest_cookie:abtest_cookie,devicetype:devicetype,version:window.clientversion,is_need_ticket:Ta&&Ta.length>0?1:0,is_need_ad:0,comment_id:comment_id,is_need_reward:is_need_reward,both_ad:0,reward_uin_count:is_need_reward?t:0,send_time:window.send_time||"",msg_daily_idx:msg_daily_idx,item_show_type:window.item_show_type,is_original:0,is_only_read:is_only_read,req_id:window.req_id||"",pass_ticket:pass_ticket,is_temp_url:window.is_temp_url||0,rtId:e,rtKey:"50",appmsg_like_type:window.appmsg_like_type,is_pay_subscribe:window.isPaySubscribe,pay_subscribe_uin_count:window.isPaySubscribe?t:0,has_red_packet_cover:window.__appmsgCgiData.has_red_packet_cover,export_key:ge.getQuery("exportkey"),export_key_extinfo:"",segment_comment_id:window.segment_comment_id,show_related_article:window.show_related_article,onSuccess:function(t){if(t)try{if(window.__second_open__&&t&&1*!!t.bizfile_ret==1&&(window.localStorage&&window.localStorage.setItem&&window.localStorage.setItem("isBanned-".concat(window.biz,"-").concat(window.mid,"-").concat(window.idx),"1"),window.location.href.indexOf("?")>-1?window.location.href=window.location.href+"&r="+Math.random()+"#wechat_redirect":window.location.href=window.location.href+"?r="+Math.random()+"#wechat_redirect"),l.commit("SET_EXT_RES",t),l.commit("mp-identity/setCurIdentity",{scene:"setRecordIdentity",identity:{type:t.identity_type,name:t.identity_name,nickname:t.nick_name||"",headImg:t.logo_url}}),window.__second_open__&&t.pay_subscribe_info&&1*t.pay_subscribe_info.is_paid!=isPaid)return Ge.report110809(11),(new Image).src="https://badjs.weixinbridge.com/badjs?id=244&level=4&from="+window.encodeURIComponent(window.location.host)+"&msg="+window.encodeURIComponent(window.location.href),void Ie.invoke("handleMPPageAction",{action:"paySuccess",fullUrl:window.location.href,itemShowType:window.item_show_type,url:location.href},(e=>{e.err_msg.indexOf("ok")>-1?Ge.report110809(19):Ge.report110809(20),window.localStorage&&window.localStorage.setItem&&window.localStorage.setItem("isPaid-".concat(window.biz,"-").concat(window.mid,"-").concat(window.idx),"1"),window.location.href=window.location.href+"&r="+Math.random()+"#wechat_redirect"}));if(t&&t.base_resp&&t.base_resp.wxtoken&&(window.wxtoken=t.base_resp.wxtoken),window.fromWeixinCached&&Sa(),function(e){if(!e||!e.img_copy_info||!e.img_copy_info.list)return;let t={},i=e.img_copy_info.list,n=window.__appmsgCgiData.copyright_stat,o=window.__appmsgCgiData.source_biz;for(let e=0,a=i.length;e<a;e++){let a=i[e];if(2==a.type){if(2==n&&o==a.source_uin)continue;t[a.img_url]={source_nickname:a.source_nickname,source_uin:a.source_uin,source_encode_biz:a.source_encode_biz||""}}}let a=document.getElementsByTagName("img");for(let e=0,i=a.length;e<i;e++){let i=a[e],n=i.getAttribute("data-src")||i.getAttribute("data-backsrc")||"";if(t[n]){let e=document.createElement("div");e.innerHTML=Be.tmpl(Ea,t[n],!1);let o=e.children[0],a=i.parentNode.insertBefore(o,i),r=a.children[0];!function(e,t){je.on(t,"click",(function(){let t="https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz="+e.source_encode_biz+"&scene=112#wechat_redirect";return Ae.isWindowsWechat||Ae.isMacWechat?(location.href=t,!1):(Ie.invoke("openUrlWithExtraWebview",{url:t,openType:1},(function(e){-1==e.err_msg.indexOf("ok")&&(location.href=t)})),!1)}))}(t[n],r),a.insertBefore(i,r)}}}(t),t.ret)return;t.red_packet_cover_data&&t.red_packet_cover_data.cover_uri_data&&t.red_packet_cover_data.cover_uri_data.length>0&&(V.init(),V.render({list:t.red_packet_cover_data.cover_uri_data})),t.link_component_list&&t.link_component_list.length&&Aa.updateCpslinkStatus(t.link_component_list),window.lastText=t.effective_content_last_html_node||[],J.setLastTextNode(),J.setLastTextMsg(),J.checkEffectiveContentHeight(),window.isFans=t.is_fans,function(e){let t=e.appmsgstat||{};const i=e.appmsgact||{},n=e.paySubscribeInfo||{};window.paySubscribeInfo=n,window.isFans=e.is_fans,window.appmsgstat||(window.appmsgstat=t),et(),ga.initAuthorName(e.reward,{reward_entrance_enable_for_preview:e.reward_entrance_enable_for_preview}),window.isPaySubscribe&&h.init(n,l);const o=document.querySelector("#js_star");if(o){const e=localStorage.getItem("star_info");let i=1*t.star_num||0;if(e){const t=JSON.parse(e);Number(t.mid)===Number(window.mid)&&t.has_star&&0===i&&(i=1)}Kt(o,i,t.star_status)}let a=[];const{old_liked_before:r,seen_before:s,favorite_before:c,share_before:d,reward_before:u,pay_before:p}=i,{old_liked:m,liked:_}=t;(m||r)&&a.push("like"),(_||s)&&a.push("zaikan"),c&&a.push("collect"),d&&a.push("share"),u&&a.push("reward"),p&&a.push("pay"),window.is_like_profile_gray=e.show_biz_banner,window.is_like_profile_gray&&a.push("gray"),a.length>0&&l.commit("mp-like-profile/setSources",a),e.open_related_read_after_interaction&&l.commit("mp-related-article/setShowAfterInteraction",!0),e.close_related_article&&l.commit("mp-related-article/setNotLoad",!0),t.old_liked||i.old_liked_before?l.commit("mp-related-article/setSources",["praised",!0]):t.liked||i.seen_before?l.commit("mp-related-article/setSources",["liked",!0]):i.favorite_before?l.commit("mp-related-article/setSources",["favorited",!0]):i.share_before?l.commit("mp-related-article/setSources",["shared",!0]):e.show_related_article?l.commit("mp-related-article/setSources",["force",!0]):i.reward_before?l.commit("mp-related-article/setSources",["rewarded",!0]):i.pay_before&&l.commit("mp-related-article/setSources",["paid",!0])}({show_biz_banner:t.show_biz_banner,appmsgstat:t.appmsgstat,appmsgact:t.appmsgact,comment_enabled:t.comment_enabled,comment_count:t.comment_count,only_fans_can_comment:t.only_fans_can_comment,only_fans_days_can_comment:t.only_fans_days_can_comment,is_fans_days:t.is_fans_days,fans_days:t.fans_days||0,reward:{reward_total:t.reward_total_count,is_reward_total_count_cut:t.is_reward_total_count_cut,reward_head_img_infos:t.reward_head_img_infos||[],can_reward:t.can_reward,user_can_reward:t.user_can_reward,timestamp:t.timestamp,reward_author_head:t.reward_author_head,rewardsn:t.rewardsn,scene:source,is_need_reward:is_need_reward,title:msg_title,author_id:author_id,appmsgextRtId:e,appmsgextRtKey:"50",can_whisper:t.can_whisper},reward_entrance_enable_for_preview:t.reward_entrance_enable_for_preview,reward_wording:t.reward_wording,reward_author_head:t.reward_author_head,comment_entrance_enable_for_preview:t.comment_entrance_enable_for_preview,share_redirect_url:t.share_redirect_url||"",logo_url:t.logo_url,nick_name:t.nick_name,is_fans:t.is_fans,paySubscribeInfo:t.pay_subscribe_info,share_flag:t.share_flag,test_flag:t.test_flag,show_related_article:t.show_related_article,open_related_read_after_interaction:t.open_related_read_after_interaction,close_related_article:t.close_related_article,related_article_fast_close:t.related_article_fast_close,hit_bizrecommend:t.hit_bizrecommend}),window.ext_complete_success=!0,Pe.emit("ext-complete-success")}catch(e){return we.log("[Appmsg] error parse async data, biz="+biz+", mid="+mid),me.setLogs({id:24729,key:1,value:1,log:"biz:".concat(biz,",mid:").concat(mid,",uin:").concat(uin,",[key1]").concat(encodeURIComponent(e.toString())).substring(0,1024)}),console,void(void 0!==window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&WX_BJ_REPORT.BadJs.onError(e))}},onError:function(){me.setLogs({id:24729,key:2,value:1,log:"biz:".concat(biz,",mid:").concat(mid,",uin:").concat(uin,",[key2]ajax_err")})},onComplete:function(){window.ext_complete=!0,Ae.isOnlyWechat||(window.ext_complete_success=!0),Pe.emit("ext-complete")}})}function Da(){!function(){let e=document.getElementsByTagName("iframe"),t=[];for(let i=0,n=e.length;i<n;++i)t.push(e[i]);e=null;let i=document.getElementById("js_content").offsetWidth,n=i/U.getRatio();window.logs.video_cnt=0;for(let e=0,o=t.length;e<o;++e){let o=t[e],a=o.getAttribute("data-src")||"",r=o.getAttribute("src")||a;if(r)if(0==r.indexOf("http://z.weishi.com/weixin/player.html"))r=r.replace(/width=\d+/g,"width="+i),r=r.replace(/height=\d+/g,"height="+n),o.width=i,o.height=n,o.style.setProperty&&(o.style.setProperty("width",i+"px","important"),o.style.setProperty("height",n+"px","important")),o.setAttribute("src",r),window.__addIdKeyReport&&window.__addIdKeyReport("28307",10),window.logs.video_cnt++;else{if(/http(s)*\:\/\/v\.qq\.com\/iframe\/(preview|player)\.html\?/.test(r)){const e=ge.getQuery("vid",a)||o.getAttribute("data-mpvid"),t=(window.__videoPageInfos||[]).find((t=>t.video_id===e)),i=t&&t.hit_vid;if(!K.isShowMpVideo()&&!"".concat(i).startsWith("wxv_")){const e=Ra(o);e&&Ta.push(e),"function"==typeof window.__addIdKeyReport&&(window.__addIdKeyReport("28307",10),Ae.isWechat&&Ae.isWindowsWechat?window.__addIdKeyReport("110644",0):Ae.isWechat&&Ae.isMacWechat&&window.__addIdKeyReport("110644",1))}window.logs.video_cnt++;continue}/^http(s)*\:\/\/mp\.weixin\.qq\.com\/mp\/readtemplate\?t=pages\/video_player_tmpl/.test(r)&&window.logs.video_cnt++}}Ta.length>0&&"function"==typeof window.__getVideoWh&&je.on(window,"resize",(function(){try{for(let e=0,t=Ta.length;e<t;e++){let t=Ta[e],i=t.playerObj;if(i){let e=window.__getVideoWh(t);t.style.width=e.w+"px",t.style.height=e.h+"px",i.resize({width:e.vw,height:e.vh})}}}catch(e){}}),!1)}(),Pa()}function qa(e,t){function i(e){return parseInt(e,10)||0}window.logs.img={download:{},read:{},load:{}};const n=document.getElementById("js_cover");if(n){let e=n.getAttribute("data-src");e&&(e.isCDN()&&(e=e.imgChange640(),t&&(e=wt(e)),e=ye(e,5),is_https_res||Oa?e=e.http2https():"http:"!=location.protocol&&-1==navigator.userAgent.indexOf("MicroMessenger")||(e=e.https2http())),setTimeout((function(){n.onload=function(){Vt.setProperty(n,"height","auto","important"),Vt.setProperty(n,"visibility","visible","important")},n.setAttribute("src",e)}),0),window.logs.img.read[e]=!0,window.logs.img.load[e]=!0,n.removeAttribute("data-src"))}window.logs.outer_pic=0;const o=document.getElementsByTagName("img");for(let e=0,t=o.length;e<t;e++){const t=o[e].getAttribute("data-src");t&&t.isGif()&&o[e].classList.add("__bg_gif")}const a=document.getElementsByClassName("__bg_gif");for(let e=0,t=a.length;e<t;++e)a[e].setAttribute("data-order",e);const s=function(e){try{let t=e.childNodes,i=getComputedStyle(e);(i.backgroundImage.match(/https\:\/\/mmbiz\.qpic\.cn/)||i.backgroundImage.match(/http\:\/\/mmbiz\.qpic\.cn/))&&window.__addIdKeyReport("111535",2);for(let e=0;e<t.length;e++)"a"!=t[e].tagName.toLowerCase()&&s(t[e])}catch(e){}};try{const e=document.getElementsByTagName("a");for(let t=0;t<e.length;t++){const i=e.item(t);null!=(i.getAttribute("href")||"").match(/^http/)&&s(i)}}catch(e){}let c=!1;window.isCartoonCopyright||window.is_care_mode||new Bo({attrKey:"data-src",imgOccupied:!0,crossOrigin:!0,inImgRead(e){e&&(window.logs.img.read[e]=!0)},changeSrc(i,n,o,a){if(!i)return"";if(window.__offlineCacheScheme)return i.canHevc()?be(i.offline(),"tp","wxpic",!0):i.offline();let r=i;if(i.isCDN())r=r.imgChange640(),e&&r.canHevc()?(r=yt(r,!1),window.__addIdKeyReport("28307",91),La(i)&&window.__addIdKeyReport(Ma,3)):t?(r=wt(r),window.__addIdKeyReport("28307",84),La(i)&&window.__addIdKeyReport(Ma,4)):r=be(r,"tp","nowebp",!0),r=ye(r,"img"===a?5:15),is_https_res||Oa?(r=r.http2https(),window.__addIdKeyReport("28307",77),La(i)&&window.__addIdKeyReport(Ma,1)):"http:"!=location.protocol&&-1==navigator.userAgent.indexOf("MicroMessenger")||(r=r.https2http(),window.__addIdKeyReport("28307",70),La(i)&&window.__addIdKeyReport(Ma,2));else try{new RegExp("^http(s)?://((mmbiz.qpic.cn/.*)|(m.qpic.cn/.*)|(mmsns.qpic.cn/.*)|(shp.qpic.cn/.*)|(puui.qpic.cn/.*)|(wx.qlogo.cn/.*)|(mmbiz.qlogo.cn/.*)|((a|b)[0-9]*.photo.store.qq.com/.*)|(mp.weixin.qq.com/.*)|(res.wx.qq.com/.*))").test(i)||(window.__addIdKeyReport("28307",9),window.logs.outer_pic++)}catch(e){}return r=r.replace(/^http\:\/\/(a|b)(\d)+\.photo\.store\.qq\.com/g,"http://m.qpic.cn"),/^http(s)?:\/\/m\.qpic\.cn([\/?].*)*$/i.test(r)&&!t&&(r=be(r,"t","",!0)),r=be(r,"wx_lazy","1",!0),"anonymous"==n.crossOrigin&&(r=be(r,"wx_co","1",!0)),!bt()||"img"!==a&&!r.isJpg()||r.isGif()||(r=vt(r)),kt(r)&&(window.__addIdKeyReport("28307",106),La(r)&&window.__addIdKeyReport(Ma,5)),window.logs.img.load[r]=!0,we.log("[Appmsg] image_load_event_change_src. originsrc:"+i+"  ^^^ newsrc : "+r),n.start_load_time=+new Date,r},onerror(e,t,n,o){let a,r=t&&t.__retryload||0;if("img"===o&&r>=2&&function(e,t,n){const o=n;!o||(o.width<40||o.height<40)&&(i(o.style.width)<40||i(o.style.height)<40)||o.classList.contains("wx_img_placeholder_err")||(o.classList.add("wx_img_placeholder_err"),o.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==",window.__addIdKeyReport("28307",51),o.bindRetry||(o.bindRetry=!0,je.on(o,"click",(()=>(window.__addIdKeyReport("28307",66),o.classList.remove("wx_img_placeholder_err"),e=e.https2http(),t.__retryload++,t.src=be(e,"retryload",t.__retryload,!0),!1)))))}(e,t,n),!e||r>2)return;if(!e.isCDN()){if(!bt())return;if(!kt(e)&&!e.isOffline())return}const s=0==e.indexOf("https://")?7:0;window.__addIdKeyReport("28307",72+s),La(e)&&window.__addIdKeyReport(Ma,10+s),r<=1&&window.__addIdKeyReport("28307",75+1*r+s),r<=1&&La(e)&&window.__addIdKeyReport(Ma,14+1*r+s),e.isWxpic()?(window.__addIdKeyReport("28307",93),La(e)&&window.__addIdKeyReport(Ma,24),window.WX_BJ_REPORT&&WX_BJ_REPORT.BadJs.report("imgError:hevc",e,{mid:"mmbizwap:imgMonitor",view:"wap_appmsg"}),r<=1&&window.__addIdKeyReport("28307",96+1*r),r<=1&&La(e)&&window.__addIdKeyReport(Ma,27+1*r)):e.isWebp()?(window.__addIdKeyReport("28307",86),La(e)&&window.__addIdKeyReport(Ma,34),window.WX_BJ_REPORT&&WX_BJ_REPORT.BadJs.report("imgError:webp",e,{mid:"mmbizwap:imgMonitor",view:"wap_appmsg"}),r<=1&&window.__addIdKeyReport("28307",89+1*r),r<=1&&La(e)&&window.__addIdKeyReport(Ma,37+1*r)):window.WX_BJ_REPORT&&WX_BJ_REPORT.BadJs.report("imgError",e,{mid:"mmbizwap:imgMonitor",view:"wap_appmsg"}),kt(e)&&(window.__addIdKeyReport("28307",108),La(e)&&window.__addIdKeyReport(Ma,31)),"img"===o&&r<2&&(r++,t.__retryload=r,1==r&&e.indexOf("http://")>-1?(e=e.http2https(),window.__addIdKeyReport("28307",60),La(e)&&window.__addIdKeyReport(Ma,16),window.__addIdKeyReport("28307",77),La(e)&&window.__addIdKeyReport(Ma,2)):1==r&&(e.indexOf("https://")>-1||e.isOffline())?(e.isOffline()&&(e=e.offline2https()),window.__addIdKeyReport("28307",61),La(e)&&window.__addIdKeyReport(Ma,23),window.__addIdKeyReport("28307",77),La(e)&&window.__addIdKeyReport(Ma,1)):2==r&&e.indexOf("mmbiz.qpic.cn")>-1&&(e=e.replace("mmbiz.qpic.cn","mmbiz.qlogo.cn")).indexOf(!1)&&(e=e.http2https()),kt(e)&&(e=xt(e)),t.start_load_time=+new Date,a=e=be(e,"retryload",r,!0)),window.__has_imgfailed||(window.__has_imgfailed=!0,window.__addIdKeyReport("28307",65)),we.log("[Appmsg] image_load_event_on_error. src:"+e),t.setAttribute("data-fail",1);try{if("[object Array]"==Object.prototype.toString.call(t.lazyLoadOnerror))for(let e=0,i=t.lazyLoadOnerror.length;e<i;e++)"function"==typeof t.lazyLoadOnerror[e]&&t.lazyLoadOnerror[e].call(t)}catch(e){}let c=10;return/tp\=webp/.test(e)&&(c=11),me.setLogs({id:24729,key:c,value:1,log:encodeURIComponent(e)+"["+uin+"]"}),a},beforeload(e,t,i){try{e.isWxpic()&&t.setAttribute("data-before-load-time",Date.now())}catch(e){}},onload(e,t,i){var n;if(!window.__second_open__&&!c){const e=window.performance||window.msPerformance||window.webkitPerformance;if(!e||!e.timing)return;const t=window.location.protocol;r.saveSpeeds({uin:uin,pid:"https:"==t?462:417,speeds:{sid:35,time:Date.now()-e.timing.navigationStart}}),r.send(),c=!0}"img"===i&&(null==(n=null==t?void 0:t.classList)||n.remove("wx_img_placeholder_err"),t.gray&&!t.loadGif&&((t.width||t.naturalWidth)<120||(t.height||t.naturalHeight)<120?t.autoTap&&t.autoTap():t.span&&t.span.children&&t.span.children.item(0)&&(t.span.children.item(0).style.display="")),$t(t));let o=t&&t.__retryload||0;if(o>2)return;if(we.log("[Appmsg] image_load_event_onload_image. src:"+e+"  ^^^  retryloadtimes: "+o),e.isWxpic()&&o<=0&&Math.random()<=Na&&t.getAttribute("data-before-load-time")){const e=Date.now()-t.getAttribute("data-before-load-time");r.saveSpeeds({uin:uin,pid:2986,speeds:{sid:21,time:e}}),r.send()}t.setAttribute("data-fail",0),"img"===i&&function(e){try{const t=e.getAttribute("data-src");if(!/^https?\:\/\/mmbiz\.qpic\.cn/.test(t))return;let i=e.parentNode,n=!1;xe.hasClass(i,"js_jump_icon")&&(n=!0);let o=!1;for(;i.tagName&&"body"!=i.tagName.toLowerCase();){if("a"==i.tagName.toLowerCase()){null!=(i.getAttribute("href")||"").match(/^http/)&&(o=!0);break}i=i.parentNode}if(n&&!o){let t=e.parentNode,i=t.parentNode;if(i){let e=document.createDocumentFragment();for(;t.firstChild;)e.appendChild(t.firstChild);i.insertBefore(e,t),i.removeChild(t)}}else if(!n&&o){let t=document.createElement("span"),i=getComputedStyle(e);"static"!=i.positon&&(t.style.position=i.positon),t.style.left=i.left,t.style.top=i.top,t.style.right=i.right,t.style.bottom=i.bottom,t.style.margin=i.margin,xe.addClass(t,"js_jump_icon"),xe.addClass(t,"h5_image_link"),e.style.position="static",e.style.margin="0px",e.parentNode.insertBefore(t,e),t.appendChild(e),window.__addIdKeyReport("111535",0)}}catch(e){}}(t);try{if("[object Array]"==Object.prototype.toString.call(t.lazyLoadOnload))for(let e=0,i=t.lazyLoadOnload.length;e<i;e++)"function"==typeof t.lazyLoadOnload[e]&&t.lazyLoadOnload[e].call(t)}catch(e){}const a=0==e.indexOf("https://")?7:0;window.__addIdKeyReport("28307",71+a),o<=1&&window.__addIdKeyReport("28307",73+1*o+a),La(e)&&window.__addIdKeyReport(Ma,11+a),La(e)&&o<=1&&window.__addIdKeyReport(Ma,12+1*o+a),e.isWxpic()?(window.__addIdKeyReport("28307",92),o<=1&&window.__addIdKeyReport("28307",94+1*o),La(e)&&window.__addIdKeyReport(Ma,29),La(e)&&o<=1&&window.__addIdKeyReport(Ma,25+1*o)):e.isWebp()&&(window.__addIdKeyReport("28307",85),o<=1&&window.__addIdKeyReport("28307",87+1*o),La(e)&&window.__addIdKeyReport(Ma,39),La(e)&&o<=1&&window.__addIdKeyReport(Ma,35+1*o)),kt(e)&&(window.__addIdKeyReport("28307",107),La(e)&&window.__addIdKeyReport(Ma,30)),window.__has_imgsucceed||(window.__has_imgsucceed=!0,window.__addIdKeyReport("28307",64)),1==o&&e.indexOf("http://")>-1&&(window.__addIdKeyReport("28307",50),La(e)&&window.__addIdKeyReport(Ma,45)),1==o&&e.indexOf("https://")>-1&&(window.__addIdKeyReport("28307",52),La(e)&&window.__addIdKeyReport(Ma,46));const s=Math.random(),d=+new Date-t.start_load_time;d&&0==e.indexOf("https://")&&s<.5?(window.__addIdKeyReport("27822",121,d),window.__addIdKeyReport("27822",122)):d&&s<5e-4&&(window.__addIdKeyReport("27822",124,d),window.__addIdKeyReport("27822",125)),"img"!==i||""===t.style.filter||"none"===t.style.filter||/translate(Z|3d)\(/.test(t.style.transform)||(t.style.transform+=" translateZ(0)",t.style.webkitTransform+=" translateZ(0)")},detect(e){if(!e||!e.time||!e.loadList)return;const t=e.time,i=e.loadList;window.logs&&window.logs.img&&window.logs.img.download&&(window.logs.img.download[t]=i)},container:document.getElementById("page-content")})}function Wa(){const e=document.getElementById("js_read_container"),t={player:null,srcId:"__wxtag__".concat(window.biz,"-").concat(window.mid,"-").concat(window.idx),mediaId:"",tag:"===mediaId-sep===",playDuration:0,playTime:0,maxNum:5,curNum:0,format:"",type:6,speed:100,voiceInfo:{title:"",nickname:"",appmsgUrl:"",duration:0},voiceOpt:null,lock:!1,status:"stop",currentTime:0,beginTime:0,leaveNeedReport:!1,pause2PlayNeedReport:!1,isSeek:!1,loadingTimer:null},i=e=>"".concat(e,"&uin=").concat(window.uin,"&key=").concat(window.key,"&pass_ticket=").concat(encodeURIComponent(window.pass_ticket)),n=()=>{if(t.curNum>10)return(e=>{if(!e&&null!==t.loadingTimer)return clearTimeout(t.loadingTimer),void(t.loadingTimer=null);Ie.invoke("handleMPPageAction",{action:"showToast",status:e?"loading":"dismissloading"})})(!1),t.lock=!1,void window.weui.alert("System busy. Try again later.");t.curNum++;const e=t.curNum>t.maxNum?5e3:1e3;_e({url:"/mp/msgvoice?action=getvoiceinfo&__biz=".concat(window.biz,"&mid=").concat(window.mid,"&idx=").concat(window.idx,"&sn=").concat(window.sn,"&type=").concat(t.type,"&speed=").concat(t.speed),type:"GET",dataType:"json",async:!0,success:a=>{if(a&&a.base_resp&&0===a.base_resp.ret)if(a.mediaid){t.mediaId=a.mediaid;const e=encodeURIComponent("__biz=".concat(window.biz,"&mid=").concat(window.mid,"&idx=").concat(window.idx)),n=t.voiceInfo;t.voiceOpt={protocol:2===a.format?"hls":"",src:i("https://mp.weixin.qq.com/mp/msgvoice?action=get_voice&mediaid=".concat(a.mediaid,"&devicetype=").concat(window.devicetype,"&_type=").concat(t.type,"&speed=").concat(t.speed,"&encodeurl=").concat(e)),lowbandUrl:i("https://mp.weixin.qq.com/mp/msgvoice?action=get_voice&mediaid=".concat(a.mediaid,"&devicetype=").concat(window.devicetype,"&_type=").concat(t.type,"&speed=").concat(t.speed,"&encodeurl=").concat(e)),title:n.title,epname:"Source Article",singer:n.nickname?"".concat(n.nickname,"\u7684\u8bed\u97f3"):"Official Account audio",srcId:t.srcId+t.tag+t.mediaId,coverImgUrl:"",webUrl:n.appmsgUrl,musicbar_url:"https://mp.weixin.qq.com/mp/msgvoice?action=ttspage&__biz=".concat(window.biz,"&mid=").concat(window.mid,"&idx=").concat(window.idx,"&sn=").concat(window.sn,"&type=").concat(t.type,"#wechat_redirect"),needStartMusicUI:0},o()}else setTimeout(n,1e3);else setTimeout(n,e)},error:()=>{setTimeout(n,e)}})},o=()=>{t.player=at.init({protocal:"hls",wxIndex:t.voiceOpt.srcId,type:7,comment_id:"",src:t.voiceOpt.src,jsapi2Src:t.voiceOpt.src+"&voice_type=1",allowPause:!0,duration:t.voiceInfo.duration,title:t.voiceOpt.title,singer:t.voiceOpt.singer,epname:t.voiceOpt.epname,coverImgUrl:t.voiceOpt.coverImgUrl,playingCss:"share_audio_playing",playCssDom:e.getElementsByClassName("js_read_main")[0],playArea:e.getElementsByClassName("js_read_play")[0],progress:e.getElementsByClassName("js_read_progress")[0],fileSize:0,playtimeDom:e.getElementsByClassName("js_read_playtime")[0],bufferDom:e.getElementsByClassName("js_read_buffer")[0],playdotDom:e.getElementsByClassName("js_read_playdot")[0],seekRange:e.getElementsByClassName("js_read_seekRange")[0],seekContainer:e.getElementsByClassName("js_read_main")[0],loadingDom:e.getElementsByClassName("js_read_loading")[0],detailArea:"",detailUrl:t.voiceOpt.musicbar_url,webUrl:t.voiceOpt.musicbar_url})};_e({url:"/mp/msgvoice?action=ttspage&__biz=".concat(window.biz,"&mid=").concat(window.mid,"&idx=").concat(window.idx,"&sn=").concat(window.sn,"&type=").concat(t.type,"&f=json"),type:"GET",dataType:"json",async:!0,success:i=>{i&&i.base_resp&&0===i.base_resp.ret?(t.voiceInfo={title:i.title,nickname:i.nickname,appmsgUrl:i.appmsg_url,duration:1*i.voice_info.duration},n(),e.getElementsByClassName("js_read_duration")[0].innerHTML=(e=>{const t=e=>e>=10?e:"0".concat(e);return"".concat(t(Math.floor(e/60)),":").concat(t(e%60))})(1*i.voice_info.duration)):window.weui.alert("System busy. Try again later.")},error:()=>{window.weui.alert("\u7f51\u7edc\u4e0d\u53ef\u7528\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8bbe\u7f6e")}})}function $a(e){return document.getElementById(e)}async function Ga(e,t){let i=0;for(let n=0;n<Ja.musicLen;n++){const o=Ja._oElements[n],a={};let r=o.getAttribute("voice_encode_fileid")||"";try{r=decodeURIComponent(r)}catch(e){}if(t&&(a.audioPanelVue=t),a.voiceid=at.encodeStr(r)||o.getAttribute("listen_id"),a.voiceid=a.voiceid.replace(/&#61;/g,"=").replace(/^\s/,"").replace(/\s$/,""),a.isaac=1*o.getAttribute("isaac2")||0,a.src=Ja.srcRoot.replace("#meidaid#",a.voiceid),a.hasAddedListenLater=0,o.setAttribute("has-added-listen-later",0),1===a.isaac&&(a.jsapi2Src=a.src+"&voice_type=1"),a.voiceid&&"undefined"!=a.voiceid){if(a.albumLink="",e&&e.length>0&&e.forEach((e=>{if(e.voice_id===r)return e.appmsgalbuminfo&&(a.albumTitle=e.appmsgalbuminfo.title||"",a.albumLink=e.appmsgalbuminfo.link.html(!1).replace("#wechat_redirect","")+"#wechat_redirect",a.albumNum=e.appmsgalbuminfo.tag_content_num||0,a.albumid=e.appmsgalbuminfo.album_id||0),!1})),o.setAttribute("data-verify_state",3),o.setAttribute("data-trans_state",1),musicMap.set(o,{_oMusic:a,num:i}),Xa(o,a,i),"undefined"!=typeof voiceid&&r&&window.voiceid&&r===window.voiceid){const e=o.offsetTop+122-40;setTimeout((()=>{window.scrollTo(0,e)}),0)}i++}}(function(){const e=[...$a("js_content").getElementsByTagName("mp-common-claudio")];return new Promise((t=>{if(!e.length)return void t(e);const i={video_snap_num:e.length};e.forEach(((e,t)=>{i["exportid_".concat(t)]=e.dataset.id,i["username_".concat(t)]=e.dataset.username,i["listen_id".concat(t)]=e.getAttribute("listen_id")})),_e({url:"/mp/appmsg_video_snap?action=batch_get_video_snap",type:"POST",dataType:"json",async:!0,data:i,success(i){i&&i.base_resp&&0===i.base_resp.ret&&(Ja.channelsInfo=i.video_snap_info),t(e)},error(){t(e)}})}))})().then((e=>{if(!Ja.channelsInfo.length)return;let t=null;e.forEach((e=>{const{flag:i,added_in_playlist:n,nonce_id:o,tid:a}=Ja.channelsInfo.find((t=>t.export_id===e.dataset.id));e.setAttribute("has-added-listen-later",n);const r=e.getAttribute("data-nonceid")!==o&&o,s=e.getAttribute("data-tid")!==a&&a;switch(r&&e.setAttribute("data-nonceid",o),s&&e.setAttribute("data-tid",a),i){case 1:e.setAttribute("err_tips","\u5f53\u524d\u97f3\u9891\u5df2\u88ab\u4f5c\u8005\u5220\u9664");break;case 2:case 4:e.setAttribute("err_tips","\u5f53\u524d\u97f3\u9891\u6682\u65f6\u65e0\u6cd5\u64ad\u653e");break;case 3:e.setAttribute("err_tips","\u5f53\u524d\u97f3\u9891\u5df2\u88ab\u8bbe\u7f6e\u79c1\u5bc6")}if(r||s){const i=musicMap.get(e);if(i&&i._oMusic){const e=Ja.musicList[i._oMusic.voiceid+"_"+i.num]
;e&&e.player&&(e.player._o&&(e.player._o.finderInfo={nonceId:o,tid:a}),e.player.player&&e.player.player._o&&(e.player.player._o.finderInfo={nonceId:o,tid:a})),t=i._oMusic.audioPanelVue}}})),t&&"function"==typeof t.updateCardList&&t.updateCardList()}))}function Ya(e,t){e.setAttribute("play_length",t.play_length||1),e.setAttribute("data-verify_state",void 0===t.voice_verify_state?3:t.voice_verify_state),e.setAttribute("data-trans_state",void 0===t.voice_trans_state?1:t.voice_trans_state)}function Xa(e,t,i){t.duration=parseInt((1*e.getAttribute("play_length")||0)/1e3,10),t.posIndex=i;let n=e.getAttribute("name")||"";try{n=decodeURIComponent(n)}catch(e){}if(t.title=at.encodeStr(n).replace(/^\s/,"").replace(/\s$/,""),t.fileSize=1*e.getAttribute("high_size")||0,t.cover=(e.getAttribute("cover")||"").html(!1),t.nickname=window.nickname,t.voiceTag="v",xe.addClass(e,"js_wx_tap_highlight"),Ja.getTingIsOpenPromise.then((()=>async function(e,t){t.isShowListenLater=1===Ja.isSupportListenLater&&!window.tts_is_ban,e.setAttribute("show-listen-later",t.isShowListenLater?1:0),t.playArea=e.shadowRoot.querySelector(".js_voice_play"),t.progress=e.shadowRoot.querySelector(".js_audio_card_progress_inner"),t.bufferDom=e.shadowRoot.querySelector(".js_audio_card_progress_buffer"),t.loadingDom=e.shadowRoot.querySelector(".js_audio_card_progress_loading"),t.playdotDom=e.shadowRoot.querySelector(".js_audio_card_progress_handle"),t.seekRange=e.shadowRoot.querySelector(".js_audio_card_progress_wrp"),t.audioProgressBarDom=e.shadowRoot.querySelector(".js_audio_progress_bar"),t.playpercent=e.shadowRoot.querySelector(".js_voice_percent"),t.playpercentDesc=e.shadowRoot.querySelector(".js_voice_percent_desc"),t.listenLaterDom=e.shadowRoot.querySelector(".js_audio_listen_later"),t.albumDom=e.shadowRoot.querySelector(".js_voice_album"),t.playtimeDom=e.shadowRoot.querySelector(".js_duration"),"MP-COMMON-CLAUDIO"!==e.tagName||function(e){const t=e=>e.stopPropagation();if(!Ae.isWechat||Ae.isWindowsWechat||Ae.isMacWechat||Ae.isNewMpApp)return je.on(e.detailArea,"click",(()=>{(window.weui||window).alert("\u8bf7\u5728\u624b\u673a\u5fae\u4fe1\u5185\u64cd\u4f5c")})),e.listenLaterDom&&je.on(e.listenLaterDom,"touchstart",t),e.listenLaterDom&&je.on(e.listenLaterDom,"mousedown",t),je.on(e.playArea,"touchstart",t),je.on(e.playArea,"mousedown",t),!1;if(Ae.isAndroid&&window.clientversion<"28002655"||Ae.isIOS&&window.clientversion<"18002725"){const i=()=>{Ie.invoke("confirmDialog",{title:"\u5f53\u524d\u7248\u672c\u6682\u4e0d\u652f\u6301\uff0c\u8bf7\u66f4\u65b0\u81f3\u5fae\u4fe1\u6700\u65b0\u7248\u672c",confirmText:"Update Now",cancelText:"Cancel"},(e=>{-1!==e.err_msg.indexOf(":ok")?location.href=Ae.isIOS?"https://itunes.apple.com/cn/app/id414478124?mt=8&ls=1":"https://support.weixin.qq.com/update/":-1!==e.err_msg.indexOf("system:")&&(window.weui||window).alert("\u5f53\u524d\u7248\u672c\u6682\u4e0d\u652f\u6301\uff0c\u8bf7\u66f4\u65b0\u81f3\u5fae\u4fe1\u6700\u65b0\u7248\u672c")}))};return je.on(e.detailArea,"click",i),e.listenLaterDom&&je.on(e.listenLaterDom,"touchstart",t),e.listenLaterDom&&je.on(e.listenLaterDom,"mousedown",t),je.on(e.playArea,"touchstart",t),je.on(e.playArea,"mousedown",t),!1}return!0}(t)?(await async function(e,t){const i=e.voiceid+"_"+e.posIndex;let n="";if(window.voice_in_appmsg&&window.voice_in_appmsg[e.voiceid]){const t=window.voice_in_appmsg[e.voiceid];let i=window.biz||"",o=window.mid||"",a=window.idx||"";t.bizuin&&t.appmsgid&&t.idx&&(i=t.bizuin,o=t.appmsgid,a=t.idx),n=(window.location.protocol||"https:")+"//mp.weixin.qq.com/mp/audio?_wxindex_=#_wxindex_#&scene=104&__biz=#biz#&mid=#mid#&idx=#idx#&voice_id=#voice_id#&sn=#sn##wechat_redirect".replace("#_wxindex_#",e.posIndex).replace("#biz#",i).replace("#mid#",o).replace("#idx#",a).replace("#voice_id#",e.voiceid).replace("#sn#",t.sn||"")}we.log("[Voice] init"+n);const o=at.decodeStr(e.title),a=await dt(),r=a||ut?window.merge_playlist_info_base64:window.category_playlist_info_base64;e.player=at.init({wxIndex:e.posIndex,type:2,songId:e.voiceid,comment_id:"",src:e.src,jsapi2Src:e.jsapi2Src,allowPause:!0,duration:e.duration,title:o,singer:window.nickname?window.nickname+"'s audio":"Official Account audio",epname:"Source Article",coverImgUrl:window.__appmsgCgiData.hd_head_img,playingCss:"share_audio_playing",pauseCss:"share_audio_pause",playCssDom:e.detailArea||$a("voice_main_"+i),playArea:e.playArea||$a("voice_play_"+i),progress:e.progress||$a("voice_progress_"+i),fileSize:e.fileSize,playtimeDom:e.playtimeDom||$a("voice_playtime_"+i),bufferDom:e.bufferDom||$a("voice_buffer_"+i),playdotDom:e.playdotDom||$a("voice_playdot_"+i),playpercent:e.playpercent||$a("voice_percent_"+i),playpercentDesc:e.playpercentDesc||$a("voice_percent_desc_"+i),seekRange:e.seekRange||$a("voice_seekRange_"+i),seekContainer:e.detailArea||$a("voice_main_"+i),loadingDom:e.loadingDom||$a("voice_loading_"+i),detailArea:e.detailArea||$a("voice_main_"+i)||"",albumDom:e.albumDom||$a("voice_album_"+i),detailUrl:n,webUrl:window.msg_link,speedList:[.75,1,1.25,1.5,2],audioCardBody:$a("audio_card_bd_".concat(i)),ctrlArea:$a("audio_card_control_".concat(i)),fastBackBtn:$a("audio_fast_back_".concat(i)),fastForwardBtn:$a("audio_fast_forward_".concat(i)),doubleSpeedBtn:$a("audio_double_speed_".concat(i)),isAudio:!0,isClAudio:"MP-COMMON-CLAUDIO"===t.tagName,userName:window.user_name||"",articleCoverCdnUrl1_1:window.cdn_url_1_1,tingExtInfo:{bizuin:window.biz&&1*window.atob(window.biz)||0,appmsgid:1*window.mid||0,idx:1*window.idx||0,audio_id:e.voiceid||"",is_album_page:!1},albumInfo:{albumId:e.albumid||"",albumName:e.albumTitle||"",albumUrl:e.albumLink||""},finderInfo:e.finderInfo||{},cover:e.cover||"",author:e.author||"",listenId:e.listenId||"",isTingOpen:Ja.isTingOpen,isSupportListenLater:Ja.isSupportListenLater,hasAddedListenLater:e.hasAddedListenLater||0,audioDurationDom:$a("audio_duration_".concat(i)),listenLaterDom:e.listenLaterDom||$a("audio_listen_later_".concat(i)),useNewListenLaterCgi:!0,audioRealTimeDom:$a("audio_real_playtime_".concat(i)),audioProgressBarDom:e.audioProgressBarDom||$a("audio_progress_bar_".concat(i)),listBase64:e.listBase64||r||"",starVersion:a,detailAreaClickHook:()=>{const i=e.audioPanelVue;if(i&&e.listenId){if(i.starVersion){const n=Qa(e,t);i.show(n)}else i.playingListenId===e.listenId&&i.isPlaying?i.show(!1):function(e,t,i=!1){var n;const o=e.audioPanelVue;if(null==(n=null==o?void 0:o.show)||n.call(o,!0),Za(e,t,1),lt({listenId:e.listenId||"",onSuccess:()=>{var t;return null==(t=null==o?void 0:o.getListData)?void 0:t.call(o,!0,(t=>{if(o.notifyAppListChange(),i&&!o.supportDynamicPlayList){const i=t.find((t=>t.listen_id===e.listenId));i&&(o.selectInfo=i.listen_item,o.play(i.listen_item,!1,0,!1,1105))}}))}}),i&&(null==o?void 0:o.supportDynamicPlayList)){const i=Qa(e,t);o.selectInfo=i,o.play(i,!1,0,!1,1105)}}(e,t,!0);return!0}return!1},onListenLaterStart:()=>{const i=e.audioPanelVue;Za(e,t,1);const n=Date.now();Ie.invoke("showBottomToast",{id:"".concat(n),title:"\u5df2\u52a0\u5165\u300c\u64ad\u653e\u5217\u8868\u300d",iconData:"iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAAVFBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////8wXzyWAAAAHHRSTlMAAwQKDQ8SFx0fIC4zaGttfoeTl5inrrGzzNfmamG/UwAAAAFiS0dEAf8CLd4AAADCSURBVFjD7dfbDoJADATQonhFFPEK8///6YOgoIvabaMxmXnenDRL2ywiDMMwP0xeODlA4eS4SDngIq2vDqqpSz2olnTo0Pl/Z7VNPtkbi3dOVmM/cqgnq4FhSekMSop7PjRHy8R0PyLpuTkcqEn33Yclbf+Mj2FJ34dhKaafQ1LcXDxLsfP1KMXPaV+yzHtXsu2NWz+VG0U/v6zJvMf6kmUfdiXbXr1L1v3cSlanleyOSLoDTnOXZ/Rkxl8ShmG+lwsknDDzI+DkEwAAAABJRU5ErkJggg==",subtitle:i?"Details":"",needArrow:!!i,clickable:!!i}),i&&Ie.on("onClickBottomToast",(()=>{var e;return null==(e=null==i?void 0:i.show)?void 0:e.call(i,!0)}))},onListenLaterError:()=>{Za(e,t,0)},onCancelListenLaterStart:()=>{Za(e,t,0)},onCancelListenLaterError:()=>{Za(e,t,1)},onPlaySuccess:()=>{const i=e.audioPanelVue;e.listenId&&i&&!i.starVersion&&lt({listenId:e.listenId||"",onSuccess:()=>Za(e,t,1)})}})}(t,e),e.style.opacity=1):e.style.opacity=1}(e,t))),Ja.getListenLaterIsOpenPromise.then((async()=>{const t=1===Ja.isSupportListenLater&&!window.tts_is_ban;e.setAttribute("show-listen-later",t?1:0)})),"MP-COMMON-CLAUDIO"===e.tagName)return(t={posIndex:i,voiceTag:"v"}).type=4,t.listenId=e.getAttribute("listen_id"),t.duration=1*e.getAttribute("duration"),t.cover=e.getAttribute("cover").html(!1),t.title=e.getAttribute("name"),t.author=e.getAttribute("author"),t.finderInfo={nonceId:e.getAttribute("data-nonceid"),tid:e.getAttribute("data-tid")},t.hasAddedListenLater=e.getAttribute("has-added-listen-later"),e.setAttribute("cover",t.cover),t.detailArea=e.shadowRoot.querySelector(".js_wx_claudio_card"),Ja.musicList[t.listenId+"_"+t.posIndex]=t,window.musicList[t.listenId+"_"+t.posIndex]=t,void xe.addClass(e,"mp_common_channel");if(1===window.is_temp_url&&window.voice_in_appmsg[t.voiceid]){const{transState:i,voiceVerifyState:n}=window.voice_in_appmsg[t.voiceid];e.removeAttribute("err_tips"),e.setAttribute("data-verify_state",void 0===n?3:n),e.setAttribute("data-trans_state",void 0===i?1:i),at.rollStatus(t.voiceid,(t=>{Ya(e,t)}))}else at.getVoiceStatus(t.voiceid).then((i=>{var n,o,a,r;i&&(e.removeAttribute("err_tips"),i.play_length&&parseInt((1*i.play_length||0)/1e3,10)!==1*e.getAttribute("play_length")&&(t.duration=parseInt((1*i.play_length||0)/1e3,10),e.setAttribute("duration",parseInt((1*i.play_length||0)/1e3,10)),t.play_length=parseInt(1*i.play_length||0,10),e.setAttribute("play_length",parseInt((1*i.play_length||0)/1e3,10)),t.listenId=i.listen_id||0,e.setAttribute("listen_id",i.listen_id||0),t.hasAddedListenLater=i.added_in_playlist||0,e.setAttribute("has-added-listen-later",i.added_in_playlist||0),t.player&&t.player._o&&(t.player._o.duration=t.duration,null==(o=null==(n=t.player.player)?void 0:n.setDuration)||o.call(n,t.duration),t.player._o.hasAddedListenLater=t.hasAddedListenLater,t.player._o.listenId=t.listenId,null==(r=null==(a=t.player.player)?void 0:a.setListenId)||r.call(a,t.listenId),setTimeout((()=>{var e;t.player.playtimeDomInnerHtml=(null==(e=t.player._o.playtimeDom)?void 0:e.innerHTML)||""})),t.audioPanelVue&&"function"==typeof t.audioPanelVue.updateCardList&&t.audioPanelVue.updateCardList())),Ya(e,i))}));t.detailArea=e.shadowRoot.querySelector(".js_wx_mpaudio_card"),Ja.musicList[t.voiceid+"_"+t.posIndex]=t,window.musicList[t.voiceid+"_"+t.posIndex]=t,xe.addClass(e,"mp_common_audio")}function Qa(e,t){return{listen_id:e.listenId,title:at.decodeStr(e.title||"")||"",author:e.author||"",duration:e.duration,cover:e.cover||"",type:"MP-COMMON-CLAUDIO"===t.tagName?4:3,...e.finderInfo?{finder_info:e.finderInfo}:{},author_info:{nickname:e.author||"",type:"MP-COMMON-CLAUDIO"===t.tagName?4:3,username:window.user_name||""},article_info:{audio_id:e.voiceid||"",audio_title:at.decodeStr(e.title||"")||"",audio_url:e.src,author:e.author||"",biz_username:window.user_name||"",cover:e.cover||"",duration:e.duration,url:window.msg_link}}}function Za(e,t,i){e.hasAddedListenLater=i,t.setAttribute("has-added-listen-later",i),e.player&&(e.player._o.hasAddedListenLater=i),e.audioPanelVue&&(e.audioPanelVue.needUpdate=!0)}function er(e,t){if(function(){const e=$a("js_content");return!(!e||(Ja._oElements=[...e.getElementsByTagName("mp-common-mpaudio"),...e.getElementsByTagName("mp-common-claudio")],Ja._oElements.length<=0))}())try{Ja.getTingIsOpenPromise=new Promise((e=>{Ja.inWechat?Ie.invoke("getTingAudioState",{},(t=>{/:ok$/.test(t.err_msg)?Ja.isTingOpen=1:-9999!==t.err_code&&-1===t.err_msg.indexOf("function_not_exist")||(Ja.isTingOpen=0),e()})):e()})),Ja.getListenLaterIsOpenPromise=new Promise((e=>{let t=null;t=setTimeout((()=>{Ja.isSupportListenLater=0,e()}),3e3),Ja.inWechat?Ie.invoke("handleMPPageAction",{action:"isSupportAddToTingPlayList"},(i=>{t&&clearTimeout(t),/:ok$/.test(i.err_msg)?Ja.isSupportListenLater=1:Ja.isSupportListenLater=0,e()})):e()})),Ja.musicLen=Ja._oElements.length,Ga(e,t)}catch(e){}}function dr(){if("function"!=typeof document.getElementsByClassName)return;let e=document.getElementsByClassName("js_product_container");e&&e.length>0&&(function(e){try{for(let t=0,i=e.length;t<i;t++){let i=e[t];if(i.className.indexOf("js_list_container")>=0){let e=i.querySelector("img.js_cover");if(e){let t=e.parentNode.getBoundingClientRect();e.style.setProperty("width",t.width+"px","important"),e.style.setProperty("height",t.height+"px","important"),e.style.setProperty("background-size","unset","important"),"0"==e.getAttribute("data-fail")?lr.call(e):e.getAttribute("data-fail")||(e.lazyLoadOnload=e.lazyLoadOnload||[],e.lazyLoadOnload.push(lr))}}}}catch(e){}}(e),n.getAppidInfo({onSuccess:function(t){cr.data=t.data,function(e){for(let t=0,i=e.length;t<i;t++)!function(e,t){je.on(e,"click",".js_product_loop_content",(function(e){let i=e.delegatedTarget,o=i.getAttribute("data-wxaappid"),a=i.getAttribute("data-wxapath"),r=i.getAttribute("data-pid"),s=i.getAttribute("data-appid"),c=i.querySelector(".cps_inner_info_title").innerHTML;return n.jumpUrl({privateExtraData:{cookies:"cps_package=123456; expires=1538286412; busid=mmbiz_ad_cps; domain=*"},sourceAppId:s,appid:o,path:a,scene:1091,sceneNote:[encodeURIComponent(location.href),user_name,msg_title,encodeURIComponent(r),c,a].join(":"),beforeNonWechatWarn:function(){},beforeJumpBackupPage:function(){},onJsapiCallback:function(e){if("openWeApp:ok"===e.err_msg&&r){let e=2;2==i.getAttribute("data-pidtype")&&(e=4),pr([{wxa_appid:o,pid:r,type:e,absolute_order:t+1,appid:i.getAttribute("data-appid")||"",templateid:i.getAttribute("data-templateid")||"",relative_order:1*i.getAttribute("data-order"),packid:i.getAttribute("data-packid")||""}])}}}),!1}))}(e[t],t);let t=document.getElementsByClassName("js_product_loop_content");if(t&&t.length>0&&Oe.getInnerHeight()){for(let e=0;e<t.length;e++)cr.pvele.push(t[e]);ur(),je.on(window,"scroll",ur)}}(e)}})),setTimeout((function(){let e=document.getElementsByClassName("js_product_loop_content").length,t=document.getElementsByClassName("js_product_err_container").length;me.setSum("64469","15",e+t),me.setSum("64469","16",e),me.setSum("64469","18",t)}),0)}function lr(){let e=this.parentNode;if(!e)return;let t=document.createElement("span");t.className=this.className,t.style.background='url("'+this.src+'") no-repeat center',e.insertBefore(t,this),e.removeChild(this)}function ur(){cr.checkInScreenId&&clearTimeout(cr.checkInScreenId),cr.checkInScreenId=setTimeout((function(){cr.checkInScreenId=null;let e=[];for(let t=0;t<cr.pvele.length;t++){let i=cr.pvele[t],n=i.getBoundingClientRect();if((n.height||n.bottom-n.top)>0&&n.top<Oe.getInnerHeight()&&n.bottom>0){let n=i.getAttribute("data-pid");if(n){let o=1;2==i.getAttribute("data-pidtype")&&(o=3),e.push({wxa_appid:i.getAttribute("data-wxaappid"),pid:n,type:o,absolute_order:t+1,appid:i.getAttribute("data-appid")||"",templateid:i.getAttribute("data-templateid")||"",relative_order:1*i.getAttribute("data-order"),packid:i.getAttribute("data-packid")||""})}cr.pvele.splice(t--,1)}}pr(e),0==cr.pvele.length&&(je.off(window,"scroll",ur),ur=null)}),100)}function pr(e){if(!e||0==e.length)return;let t={batch_no:ge.getQuery("batch_no")||"",bizuin:window.biz||"",biz:window.biz||"",mid:window.mid||"",idx:window.idx||"",total:e.length};for(let i=0;i<e.length;i++){let n=e[i],o=i+1;for(let e in n)n.hasOwnProperty(e)&&(t[e+""+o]=n[e])}_e({url:"/mp/productreport?",type:"POST",data:t,dataType:"json",async:!0})}function gr(e){fr=e.fontScale,setTimeout((()=>{const e=document.getElementsByTagName("wx-open-subscribe")||[];for(let t=0;t<e.length;t++)e[t].setAttribute("size",hr),e[t].setAttribute("scale",fr),hr++}),50)}function wr(){if(!document.getElementById("js_content"))return;const e=document.querySelectorAll("mpsubscribe");for(let t=0;t<e.length;t++){const i=e[t],n=document.createElement("mp-common-subscribe"),o=i.getAttribute("data-templateidlist"),a=i.getAttribute("data-index")||0;i.parentNode.appendChild(n),i.parentNode.removeChild(i),n.setAttribute("data-templateidlist",o),n.setAttribute("data-index",a)}_r=document.getElementsByTagName("mp-common-subscribe")||[];for(let e=0;e<_r.length;e++){const t=_r[e],i=t.getAttribute("data-templateidlist")||[],n=t.getAttribute("data-index")||0,o=window.__is_support_wxOpen?1:0;t.setAttribute("data-scene",window.is_temp_url?3:2),t.setAttribute("data-username",window.user_name),t.setAttribute("data-supportwxopen",o),t.setAttribute("data-scale",fr),t.setAttribute("data-index",n),t.setAttribute("data-tagContent","\u8ba2\u9605\u901a\u77e5"),t.setAttribute("data-templateidlist",i),o||t.classList.add("js_subsc_btn")}$(gr),function(){const e=document.getElementsByClassName("js_subsc_btn")||[];for(let t=0;t<e.length;t++){const i=e[t];je.on(i,"click",(()=>{Et("js_subsc_btn")||(window.uin&&window.key&&Ae.isWechat&&!Ae.isWindowsWechat&&!Ae.isMacWechat?document.getElementById("js_update_dialog").style.display="block":window.weui.alert("\u8bf7\u5728\u624b\u673a\u5fae\u4fe1\u5185\u64cd\u4f5c"))}))}je.on(document.getElementById("js_update_cancel"),"click",(()=>{document.getElementById("js_update_dialog").style.display="none"})),je.on(document.getElementById("js_update_confirm"),"click",(()=>{Ce.jumpUrl(mr,!0)}))}()}function yr(){if(!networkType)return;let e=window.performance||window.msPerformance||window.webkitPerformance;if(!e||void 0===e.getEntries)return;let t,i,n=document.getElementsByTagName("img"),o=n.length,a=navigator.userAgent,r=!1;i=RegExp.$1;for(let s=0,c=n.length;s<c;s++){if(t=parseInt(100*Math.random()),t>100)continue;let c=n[s].getAttribute("src");if(!c||c.indexOf("mp.weixin.qq.com")>=0)continue;let d,l=e.getEntries();for(let e=0;e<l.length;e++)if(d=l[e],d.name==c){let e=n[s].getAttribute("data-fail"),t=0;try{a.match(/iphone/i)?t=1:a.match(/android/i)&&(t=2),he.report(11065,{Uin:parseInt(atob(window.biz))||0,IfSuccess:e?1:0,Device:t,user_agent:navigator.userAgent,net_type:networkType,url:c,delay_time:parseInt(d.duration)>0?parseInt(d.duration):0,img_size:n[s].fileSize||0,sample:o>100?100:o,user_device:navigator.userAgent,client_version:i,appmsg_id:parseInt(window.appmsgid,10)})}catch(e){}r=!0;break}if(r)break}}function Ar(e){try{return 1*window.atob(e)}catch(e){}return 0}function Ir(e,t,i,n){he.report(22316,{BizUin:Ar(window.biz),AppMsgID:window.parseInt(window.mid,10)||0,ItemIndex:window.parseInt(window.idx,10)||0,Itemshowtype:0,SessionId:window.sessionid+"",EnterId:window.parseInt(window.enterid,10)||0,Scene:1*window.source,Subscene:1*window.subscene,ActionType:e,toBizuin:Ar(t),isBizBan:1*i,isMassSend:1*window.appmsg_type,CardType:n})}function Cr(){if(kr&&kr.length&&xr.length===kr.length)je.off(window,"scroll",Cr);else for(let e=0;e<kr.length;e++){const t=kr[e],i=t.querySelector(".js_wx_profile_card");if(i&&i.getBoundingClientRect().top>0&&i.getBoundingClientRect().top+i.getBoundingClientRect().height/2<=Oe.getInnerHeight()){const e=i.getAttribute("data-id"),n=i.getAttribute("data-index");-1===xr.indexOf(n)&&(xr.push(n),Ir(0,e,i.getAttribute("data-isban"),1*t.getAttribute("data-from")))}}}function Sr(e,t,i,n,o,a,r){e.addEventListener("click",(()=>{if(Ir(1,i,n,a),n){const e=document.getElementById("js_profile_ban");"none"===e.style.display&&(e.style.display="block",setTimeout((()=>{e.style.display="none"}),2e3))}else Gt({dom:e,callback:e=>function(e){let n=275;e&&e.hasCover&&(n=200),Fe.goProfile({biz:i,scene:124},{username:t,scene:n},null,o)}(e),idkey:299174,idkeyItem:18,detectName:"profileCoverDetect",title:"\u5373\u5c06\u6253\u5f00\u516c\u4f17\u53f7",contentDesc:"".concat(r)})}))}function Tr(e){return window.mp_profile.find((t=>t.fakeid===e))}function Er(){!function(){if(!document.getElementById("js_content"))return;kr=Array.from(document.getElementsByTagName("mpprofile"))||[];const e=Array.from(document.getElementsByTagName("mp-common-profile"))||[],t=kr.concat(e);window.mp_profile.forEach((e=>{e.round_head_img&&(e.round_head_img=e.round_head_img.compressCDNImgSize(),e.round_head_img=ge.addWxfrom(e.round_head_img,19))}));for(let e=0;e<t.length;e++){let i=t[e];const n=i.getAttribute("data-id"),o=1*i.getAttribute("data-from"),a=Tr(n)||{},{alias:r="",fakeid:s,is_biz_ban:c,nickname:d="",original_num:l,round_head_img:u,signature:p="",username:m,biz_account_status:_}=a,h=i.parentNode&&i.parentNode.querySelector('[data-preloadingid="'.concat(n,'"]'));if(h&&i.parentNode.removeChild(h),a){if("MPPROFILE"===i.tagName){const e=document.createElement("mp-common-profile");i.parentNode.appendChild(e),i.parentNode.removeChild(i),i=e}i.setAttribute("data-index",e),i.setAttribute("data-id",s),i.setAttribute("data-headimg",u),i.setAttribute("data-nickname",d.htmlDecode()),i.setAttribute("data-alias",r.htmlDecode()),i.setAttribute("data-signature",p.htmlDecode()),i.setAttribute("data-origin_num",1*l),i.setAttribute("data-is_biz_ban",1*c),i.setAttribute("data-isban",1*c),i.setAttribute("data-biz_account_status",1*_),i.classList.add("js_wx_tap_highlight"),Sr(i,a.username,a.fakeid,a.is_biz_ban,a.biz_account_status,o,d.htmlDecode())}else i.innerHTML=""}Cr();const i=document.createElement("div");i.innerHTML=Be.tmpl(vr,{}),document.body.appendChild(i)}(),je.on(window,"scroll",Cr)}function Nr(e,t){const i=t.dataset.md5,n=Number(t.dataset.type),o=t.dataset.emoji_url,a=Number(t.dataset.is_ban),r=t.dataset.buf;he.report(29377,{bizuin:window.biz&&Number(window.atob(window.biz))||0,msgid:window.parseInt(window.mid,10)||0,itemidx:window.parseInt(window.idx,10)||0,SessionId:window.sessionid+"",EnterId:window.parseInt(window.enterid,10)||0,scene:1*window.source,Subscene:1*window.subscene,action:e,md5:i,type:n,url:o,isBan:a,buf:r})}function Mr(){var e;!function(){for(const e of Pr)je.longtap(e,(function(t){t.stopPropagation(),1!==parseInt(e.dataset.is_ban,10)&&(Nr(Or.LONGTAP,e),Lr(e.dataset.emoji_url,e.dataset.md5,1,e.dataset.buf||"",!0))}),!0),je.tap(e,(function(t){t.stopPropagation(),1!==parseInt(e.dataset.is_ban,10)&&(Nr(Or.CLICK,e),Lr(e.dataset.emoji_url,e.dataset.md5,0,e.dataset.buf||"",!0))}))}(),e=jr,_e({type:"POST",url:"/mp/checkemoticon?action=checkmd5batch",data:{action:"checkmd5batch",md5ListJson:JSON.stringify({list:e})},dataType:"json",timeout:3e3,success:e=>{e&&e.base_resp&&-1!==e.base_resp.ret&&e.is_ban_list&&Array.isArray(e.is_ban_list)&&e.is_ban_list.forEach(((e,t)=>{Pr[t].dataset.is_ban=e}))}}),function(e){0!==e.length&&_e({type:"POST",url:"/mp/getemojibuf?action=getbuf",data:{action:"getbuf",md5ListJson:JSON.stringify({list:e})},dataType:"json",timeout:3e3,success:e=>{e&&e.base_resp&&-1!==e.base_resp.ret&&e.emoji_info&&Array.isArray(e.emoji_info)&&e.emoji_info.forEach((e=>{e.md5&&Dr.get(e.md5).forEach((t=>{t.dataset.buf=e.buf}))}))},complete:()=>{}})}(Br),function(){let e=null;e=new IntersectionObserver((function(t){t.forEach((t=>{if(t.isIntersecting){const i=t.target;Nr(Or.EXPOSE,i),e.unobserve(i)}}))}),{threshold:.5}),Pr.forEach((t=>{e.observe(t)}))}()}function Lr(e,t,i,n,o){const a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=function(){const e=new Uint8Array(a.response);let r=e.length;const s=new Array(r);for(;r--;)s[r]=String.fromCharCode(e[r]);const c=s.join(""),d=window.btoa(c);if(o)Ie.invoke("emoticonAPICollection",{md5:t,opType:i,imageDataString:d,emojiInfoBuf:n},(function(){}));else{if(!Rr)return;Rr.push({md5:t,emojiInfoBuf:n,opType:i,imgDataString:d})}return d},a.onerror=function(){},a.onabort=function(){},a.send()}function Ur(e){let t=[];try{if(e){const i=JSON.parse(e);i&&i.list&&Array.isArray(i.list)&&(t=i.list)}}catch(e){}return t}function Kr(e,t){const i=window.parseInt(t.dataset.usertype,10),n=Ur(t.dataset.picture_clist),o=Ur(t.dataset.video_list);he.report(30376,{bizuin:window.biz&&Number(window.atob(window.biz))||0,msgid:window.parseInt(window.mid,10)||0,itemidx:window.parseInt(window.idx,10)||0,title:window.msg_title||"",accountType:1===i?2:1,accountUin:t.dataset.username,answerCardId:t.dataset.aid,questionId:t.dataset.qid,hasComment:t.dataset.comment?1:0,hasPicture:n.length>0?1:0,hasVideo:o.length>0?1:0,actionType:e,type:Number(t.dataset.card_type)?1:0})}function Vr(e,t,i={}){let n="";i.minVersion&&(n+="&min_version=".concat(encodeURIComponent(i.minVersion)));const o="#/".concat(e);let a="";return Object.keys(t).forEach((e=>{e&&void 0!==t[e]&&(a+="".concat(a?"&":"?").concat(encodeURIComponent(e),"=").concat(encodeURIComponent(String(t[e]))))})),"https://search.weixin.qq.com/cgi-bin/newsearchweb/userclientjump?path=page%2Fask%2Findex".concat(n).concat(o).concat(a)}function Jr(e,t=100){if(e)return e.replace(/\n|\r|\t/g," ").replace(/"|'/g,"").slice(0,t)}function $r(e){const t=e.map((e=>{var t,i,n,o,a,r,s,c,d,l,u,p;const m=null==(i=null==(t=e.answer_content)?void 0:t.video_list)?void 0:i.map((e=>e.media_info?{like_count:e.media_info.like_count||0,thumb_url:e.media_info.thumb_url||""}:{}));let _="";(null==(n=e.answer_content)?void 0:n.text)&&(_=Jr(e.answer_content.text,350));let h="";if(null==(a=null==(o=e.answer_top_comment)?void 0:o.content)?void 0:a.text){const t=Jr(e.answer_top_comment.content.text,100),i=e.answer_top_comment.nickname;t&&(h="".concat(i,"\uff1a").concat(t))}return{question_text:e.question_text,state:e.answer_content.state,usertype:e.type,like_count:e.like_count||0,forward_count:e.forward_count||0,comment_count:e.comment_count||0,username:null==(r=e.user_info)?void 0:r.username,nickname:null==(s=e.user_info)?void 0:s.nickname,headimg_url:null==(c=e.user_info)?void 0:c.headimg_url,aid:null==(d=e.answer_content)?void 0:d.aid,qid:null==(l=e.answer_content)?void 0:l.qid,content_text:_,content_type:null==(u=e.answer_content)?void 0:u.type,picture_list:null==(p=e.answer_content)?void 0:p.picture_list,video_list:m,comment:h}}));Fr.forEach(((e,i)=>{if(t[i]){const n=t[i].state;if(4!==n)2===n?e.dataset.message="\u56de\u7b54\u4ecd\u5728\u5ba1\u6838\u4e2d":8===n?e.dataset.message="\u56de\u7b54\u5ba1\u6838\u4e0d\u901a\u8fc7":64===n&&(e.dataset.message="\u8be5\u56de\u7b54\u5df2\u88ab\u5220\u9664"),e.dataset.status=2;else{e.dataset.like_count=t[i].like_count,e.dataset.forward_count=t[i].forward_count,e.dataset.comment_count=t[i].comment_count,t[i].comment&&t[i].comment.length&&(e.dataset.comment=t[i].comment.slice(0,100));const n=t[i].picture_list;n&&n.length&&Array.isArray(n)&&(e.dataset.picture_clist=JSON.stringify({list:n.slice(0,4)}));const o=t[i].video_list;o&&(e.dataset.video_list=JSON.stringify({list:o})),e.dataset.content_text=t[i].content_text,e.classList.add("js_wx_tap_highlight")}}}))}function Gr(){if(!Wr||!Wr.length)return;const e={count:Fr.length,type:[],username:[],aid:[],qid:[],question_id:[]};zr&&zr.length&&zr.forEach((t=>{e.question_id.push(t.dataset.qid)})),Fr&&Fr.length&&Fr.forEach((t=>{const{usertype:i,username:n,aid:o,qid:a}=t.dataset;e.type.push(i),e.username.push(n),e.aid.push(o),e.qid.push(a)})),_e({type:"POST",url:"/mp/zhuge_appmsg?action=get_qa_info",data:e,dataType:"json",timeout:3e3,success:e=>{if(e&&e.base_resp&&-1!==e.base_resp.ret){const t=e.answer_list;t&&Array.isArray(t)&&$r(t);const i=e.question_list;i&&Array.isArray(i)&&function(e){const t=e.map((e=>({qid:e.question_content.qid,question_text:e.question_content.text,answer_count:e.answer_count,follow_count:e.follow_count,state:e.question_content.state})));zr.forEach(((e,i)=>{if(t[i]){const n=t[i].state;4!==n?(2===n?e.dataset.message="\u95ee\u9898\u4ecd\u5728\u5ba1\u6838\u4e2d":8===n?e.dataset.message="\u95ee\u9898\u5ba1\u6838\u4e0d\u901a\u8fc7":64===n&&(e.dataset.message="\u8be5\u95ee\u9898\u5df2\u88ab\u5220\u9664"),e.dataset.status=2):(e.dataset.follow_count=t[i].follow_count,e.dataset.answer_count=t[i].answer_count,e.classList.add("js_wx_tap_highlight"))}}))}(i)}},complete:()=>{Fr.forEach((e=>{1===Number(e.dataset.status)&&(e.dataset.status=0)})),zr.forEach((e=>{1===Number(e.dataset.status)&&(e.dataset.status=0)}))}})}function Yr(){Gr(),function(){for(const e of Wr){const t=e.shadowRoot.querySelector("button");t&&je.on(t,"touchstart",(e=>{e.stopPropagation()})),je.on(e,"click",(t=>{var i;if(2!==Number(e.dataset.status))if(qr.isWechat){const i=t.composedPath();if(i&&Array.isArray(i)){const t=i[0];!t||"BUTTON"!==t.tagName||window.zhuge_user_limit||window.is_teenager?(Kr(Hr.CLICK,e),Ie.invoke("openLiteApp",{appId:"wxalite2fd372f050eecd471a4392786dfae78c",page:"pages/question/entry",query:{qid:e.dataset.qid,aid:e.dataset.aid,scene:7,sceneNote:"".concat(window.biz?window.atob(window.biz):"0","_").concat(window.mid,"_").concat(window.idx)}},(()=>{}))):(Kr(Hr.ANSWER,e),Ie.invoke("openLiteApp",{appId:"wxalite2fd372f050eecd471a4392786dfae78c",page:"pages/answer-editor/entry",query:{qid:e.dataset.qid,scene:7,sceneNote:"".concat(window.biz?window.atob(window.biz):0,"_").concat(window.mid,"_").concat(window.idx)}},(()=>{})))}}else if(qr.isPCWechat){const t=Vr("pages/question/entry",{qid:e.dataset.qid,aid:e.dataset.aid,scene:7,sceneNote:"".concat(window.atob(window.biz),"_").concat(window.mid,"_").concat(window.idx)});window.open(t)}else i="\u8bf7\u5728\u624b\u673a\u5fae\u4fe1\u7aef\u6253\u5f00",setTimeout((function(){window.weui?window.weui.alert(i):window.alert(i)}),0)}))}}(),function(){let e=null;e=new IntersectionObserver((function(t){t.forEach((t=>{if(t.isIntersecting){const i=t.target;Kr(Hr.EXPOSE,i),e.unobserve(i)}}))}),{threshold:0}),Wr.forEach((t=>{e.observe(t)}))}()}function Qr(e,t,i){if(e){if(i&&"2"!==i.getAttribute("data-cardtype")){const e={compEle:i,compType:"channelProduct",compIdx:Array.from(document.getElementsByTagName("mp-common-product")).indexOf(i)};De.renderCompSilentlyPreHandler(e),Yt(i,i.getAttribute("data-windowproduct")),De.renderCompSilently(e)}!function(){if(Xr.exposureInit)return;Xr.exposureInit=!0;let e=null;e=new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(e.isIntersecting){const i=e.target;try{const e=i.shadowRoot.querySelector("iframe");e&&e.contentWindow&&(an(e.contentWindow,"webEvent",{type:"expose"}),t.unobserve(i))}catch(e){}}}))}),{threshold:1}),en.forEach((t=>{e.observe(t)}))}()}}function cs(e){!ts.networkType&&Ae.isWechat&&(Ae.isIOS||Ae.isAndroid)?Ie.invoke("getNetworkType",{},(t=>{ts.networkType=ts.netTypeMap[t.err_msg]||"fail","network_type:edge"!=t.err_msg&&"network_type:wwan"!=t.err_msg||(t.detailtype||t.subtype)&&(ts.networkType=t.detailtype||t.subtype),"function"==typeof e&&e()})):"function"==typeof e&&e()}function ds(e,t,i,n){let o=is.get(e+t+i+n);if(!o)return null;try{o=JSON.parse(o)||{}}catch(o){return function(e,t,i,n){is.remove(e+t+i+n)}(e,t,i,n),null}return o}function ls(e){is.remove(e)}async function fs(){try{const e=await function(){const e=ge.getQuery("environment"),t="/mp/cps_product_info?action=GetCpsVersion&kol_uin_c=".concat(window.biz).concat(e?"&environment=1":"");return new Promise(((e,i)=>{_e({url:t,dataType:"json",async:!0,success(t){e(t)},error(e){i(e)}})}))}();if(e.cps_version){let t;const i=hs(e.cps_version),n=ge.getQuery("environment");return t=ge.getQuery("forcecpsversion")||i,n&&(t="test/".concat(t)),t}}catch(e){}}async function gs({traceId:e,appId:t}){var i,n,o,a,r,s;try{const c=await function({appId:e,traceId:t}){const i={uin:0,kol_uin:window.biz,cps_detail:JSON.stringify({user_info:{media_specified_id:0},device_info:_s(),kol_uin:window.biz,req_infos:[{select_trace_id:t||Date.now().toString(),sku_id:"498_".concat(e),game_info:{app_id:e}}],extinfo:JSON.stringify({article:{mid:window.mid,idx:window.idx,mode:303}})})};return new Promise(((e,t)=>{_e({url:"/mp/cps_product_info?action=Detail",type:"POST",dataType:"json",async:!0,data:i,success(t){e(t)},error(e){t(e)}})}))}({traceId:e,appId:t}),d=JSON.parse(null==c?void 0:c.detailrsp);if(0===(null==d?void 0:d.ret)){const e=await(s=null==(a=null==(o=null==(n=null==(i=null==d?void 0:d.detail_info)?void 0:i[0])?void 0:n.game_info)?void 0:o.video_info)?void 0:a.video_uid,new Promise(((e,t)=>{_e({url:"/mp/cps_product_info?action=minigame_vid&vid=".concat(s),type:"GET",dataType:"json",success(t){e(t)},error(e){t(e)}})})));0===(null==(r=null==e?void 0:e.base_resp)?void 0:r.ret)&&(d.video_url=null==e?void 0:e.video_url)}return d}catch(e){}}async function ws({srcAppid:e,dramaId:t,planId:i,playAppid:n,traceId:o,mode:a}){return new Promise(((r,s)=>{_e({type:"POST",url:"/mp/mini_drama_info?action=link",data:{kol_uin:window.biz,uin:window.user_uin,cps_detail:JSON.stringify({device_info:_s(),extinfo:JSON.stringify({article:{uin:"".concat(window.user_uin),mid:window.mid,idx:window.idx,mode:a}}),kol_uin:window.biz,req_infos:[{app_id:n,drama_info:{drama_id:t,src_appid:e},plan_id:i,promoter_id:window.biz,select_trace_id:o||Date.now().toString()}],uin:"".concat(window.user_uin),user_info:{media_specified_id:"".concat(window.user_uin)}})},success(e){var t;0===(null==(t=null==(e=JSON.parse(e))?void 0:e.base_resp)?void 0:t.ret)?r(e.data):(s(),x.report312728(13))},error(e){x.report312728(14),s(e)}})}))}async function ys({playAppid:e,srcAppid:t,mediaNo:i,dramaId:n}){
return new Promise(((o,a)=>{_e({type:"POST",url:"/mp/mini_drama_info?action=play_info",data:{appid:e,src_appid:t,media_no:i,drama_id:n},success(e){o(e)},error(e){a(e)}})}))}function bs({dramaInfo:e,cover:t,playUrl:i,width:n,height:o,duration:a,cpsReportId:r,wrpWidth:s,wrpHeight:c,canFullscreen:d,customFullscreenAction:l,alwaysShowControl:u,cpsCardType:p=1,hideDuration:m=!1}){const _=document.createElement("div");_.setAttribute("class","video_cps_wrp"),_.setAttribute("style","width: ".concat(s,"px;height: ").concat(c,"px;")),_.setAttribute("slot","cps-video-component");const h=document.createElement("div");h.id="js_cps_video",_.appendChild(h);const f=function(e){const t=(e.el instanceof Element?e.el:document.querySelector(e.el)).parentNode;return new ps({el:e.el,opt:{cover:e.cover,playUrl:e.playUrl,plugins:e.plugins||[],width:+e.wrpWidth||t.offsetWidth,height:+e.wrpHeight||t.offsetHeight,videoWidth:e.width||0,videoHeight:e.height||0,duration:e.duration||0,muted:e.muted||!1,extInfo:e.extInfo,autoplayWhenExpose:e.autoplayWhenExpose,canFullscreen:e.canFullscreen||!1,customFullscreenAction:e.customFullscreenAction,alwaysShowControl:e.alwaysShowControl,hideDuration:e.hideDuration||!1,cgiData:window.cgiData,preview:!(1*window.is_temp_url!=1),__biz:window.cgiData.biz,uin:window.cgiData.uin||window.user_uin,mid:window.cgiData.mid,idx:window.cgiData.idx,loop:!0,scene_type:6,autoplay:!1,flowNotice:!1,useFeFullscreen:!0},store:ms()})}({el:h,width:n,height:o,wrpWidth:s,wrpHeight:c,duration:a,cover:t,playUrl:i,plugins:[Lt],muted:!0,autoplayWhenExpose:!0,extInfo:{dramaInfo:e},canFullscreen:d,customFullscreenAction:l,alwaysShowControl:u,hideDuration:m}),w=e=>({BizUin:window.biz,MsgId:+window.mid,Idx:+window.idx,PlayletCpsIdStr:r,SessionId:window.sessionid,EnterId:+window.enterid,EventTime:parseInt(1e3*f.getCurrentTime(),10),PlayTime:f.getRealPlayTime(),Duration:parseInt(1e3*f.getVideoDuration(),10),PageUrl:window.location.href,IsFans:window.isFans+1,CpsCardType:p,...e}),g=e=>{const t=w(e);he.report(32253,t)};return f.$on("player-expose",(()=>{f.__hasReportExpose||(g({EventType:1}),f.__hasReportExpose=!0)})),f.$on("click-play-switch",(e=>{g({EventType:e?3:2}),e&&g({EventType:10})})),f.$on("end",(()=>g({EventType:4}))),f.$on("replay",(()=>g({EventType:5}))),f.$on("seeking-status-change",(e=>!e&&g({EventType:6}))),f.$on("mute-change",(e=>g({EventType:e?8:7}))),f.$on("expose-auto-play",(()=>g({EventType:9}))),f.$on("cover-next-show-status-change",(e=>e&&g({EventType:13}))),f.$on("cover-next-click",(e=>e&&g({EventType:14}))),he.leaveReport(32253,(()=>w({EventType:16}))),{videoPlayer:f,dom:_,report32253:g}}function ks(e,t,i=()=>{}){if(e&&!Et("mp-common-cpsad")){if(!Ae.isOnlyWechat)return x.report312728(19),void alert("Open Mini Program in Weixin");t.sceneNote?t.sceneNote+=":".concat(window.source_appid):t.sceneNote=window.source_appid,t.sourceAppId=window.source_appid,Ie.invoke("openWeApp",t,i),Ts(Ct.CLICK_AD_ACTION,"",e.shadowRoot.querySelector("iframe"))}}function xs(e,t){var i;const n=null==(i=e.shadowRoot)?void 0:i.querySelector(".cps_video_footer"),o=new IntersectionObserver(((e,i)=>{e.forEach((e=>{e.isIntersecting&&(t&&t(),i.unobserve(e.target))}))}));n&&o.observe(n)}function Is(e,t){return"".concat(e," | ").concat(t)}function Cs(e,t,i){Ts(Ct.PROXY_CALLBACK_ACTION,{aid:e.aid,proxyId:e.proxyId,proxyData:t},i)}function Ss(e,t,i){if(-1===[Ct.CPS_AD_FRAME_DOMAIN].indexOf(e.origin))return;const{iframeEle:n,aid:o}=function(e,t){let i,n;for(const o in t)if(Object.hasOwnProperty.call(t,o)&&(i=t[o].shadowRoot.querySelector("iframe"),i&&i.contentWindow===e)){n=Number(o);break}return{aid:n,iframeEle:i}}(e.source,i);if(!n)return;const{action:a}=t,r=t.value||{};switch(a){case Ct.FRAME_READY:!function(e,t,i){const n=e[i],o=function(e){const{dataset:t}=e,i=t.adtype,n={};if(i===Ct.CPS_GOODS_TYPE.SHORT_PLAY){const{dramaid:o,srcappid:a,templateid:r,playappid:s,planid:c,defaultpath:d,traceid:l}=t,u=d?decodeURIComponent(d):"";r===As.MP_VIDEO_PLAY&&(n.respInfo=e.shortPlayDataResp),Object.assign(n,{adType:i,dramaId:o,srcAppid:a,templateId:r,playAppid:s,planId:c,defaultPath:u,selectTraceId:l})}else if(i===Ct.CPS_GOODS_TYPE.MINI_GAME){const{appid:o,traceid:a,templateid:r,imgurl:s}=t;r===As.MP_VIDEO_PLAY&&(n.respInfo=e.miniGameDataResp),Object.assign(n,{adType:i,appId:o,selectTraceId:a,templateId:r,selectedImg:s?decodeURIComponent(s):""})}else{const{pid:e,traceid:i,extinfo:o,templateid:a}=t;Object.assign(n,{traceId:i,goodsId:e,extInfo:o,templateId:a||"list"})}return n}(n);Object.assign(o,{aid:i,cpsVersion:n.getAttribute("data-cpsversion"),type:Ct.CPS_GOODS_TYPE.NEW_GOODS}),Ts(Ct.SET_PAGE_DATA_ACTION_NAME,{biz:window.biz,uin:window.uin,scene:window.scene,source:window.source,idx:window.idx,mid:window.mid,isSg:window.isSg,userUin:window.user_uin,sn:window.sn,appmsgid:window.appmsgid,sendTime:window.send_time||"",passTicket:decodeURIComponent(window.pass_ticket),itemShowType:window.item_show_type,bodyScrollTop:Oe.getScrollTop(),screenHeight:Oe.getInnerHeight(),adOffsetTop:c.getOffset(t).offsetTop,createIframeTime:Date.now(),pageUrl:location.href,heightWidthRate:9/16,boundingClientRect:t.getBoundingClientRect(),type:Ct.CPS_GOODS_TYPE.NEW_GOODS,skin:ge.getQuery("color_scheme"),wx_traceid:ge.getQuery("wx_traceid")},t),Ts(Ct.SET_AD_DATA_ACTION_NAME,{goodsInfo:o,type:Ct.CPS_GOODS_TYPE.NEW_GOODS,hideAdMark:window.hideAdMarkOnCps},t)}(i,n,o);break;case Ct.PROXY_ACTION:!function(e,t){var i,n;if("jsapi"===e.proxyType)return void function(e,t){const i=e.proxyData||{},n=function(e){const t=e.proxyData||{},{methodName:i}=t;return-1!==Ct.AD_JSAPI_WHITE_LIST.indexOf(i)||Is(Ct.INVALID_METHOD_NAME_MSG_PREFIX,i)}(e);if("string"==typeof n)return void Cs(e,{err_msg:n},t);const o=n=>{Cs(e,n,t),"openUrlWithExtraWebview"===i.methodName&&-1===n.err_msg.indexOf("ok")&&(location.href=i.args.url)};try{if("on"===i.methodType)Ie[i.methodType](i.methodName,o);else{if("openWeApp"===i.methodName||"openEmbeddedWeApp"===i.methodName){let{sceneNote:e}=i.args;if(e?e+=":".concat(window.source_appid):e=window.source_appid,i.args.sceneNote=e,i.args.sourceAppId=window.source_appid,Et("mp-common-cpsad"))return}"openEmbeddedWeApp"===i.methodName&&(Ae.isIOS&&Ae.gtVersion("8.0.42",!0)||Ae.isAndroid&&Ae.gtVersion("8.0.42",!0))?Ie[i.methodType]("openEmbeddedWeApp",Object.assign({modalHeightRatio:.8,allowFullScreen:!0,blurMask:!1},i.args),(e=>{e&&e.err_msg&&-1!==e.err_msg.indexOf(":ok")?o(e):Ie[i.methodType]("openWeApp",i.args,o)})):("openEmbeddedWeApp"===i.methodName&&(i.methodName="openWeApp"),Ie[i.methodType](i.methodName,i.args,o))}}catch(n){Cs(e,{err_msg:Is(Ct.INVALID_METHOD_TYPE_MSG_PREFIX,i.methodType)},t)}"adDataReport"===i.methodName&&1===i.args.need_record_page_operation&&x.report115849(41)}(e,t);const o=e.proxyData||{};if("bizapi"===e.proxyType){if("request"===o.methodName)return void function(e,t){const i=(e.proxyData||{}).args||{};-1!==Ct.AD_REQ_PATH_WHITE_LIST.indexOf(i.path)?_e({type:i.requestType,url:"".concat(i.path,"?").concat(i.requestQuery||""),data:i.requestBody||{},mayAbort:!0,success:i=>{Cs(e,{err_msg:"request:success",response:i},t)},error:(i,n)=>{Cs(e,{err_msg:"request:error",xhr:i,err_info:n},t)}}):Cs(e,{err_msg:Is(Ct.INVALID_REQ_PATH_MSG_PREFIX,i.path)},t)}(e,t);if("addIdKeyReport"===o.methodName)return void me.setSum(o.args.id,o.args.key,o.args.val);"addBadJsReport"===o.methodName&&(null==(n=null==(i=window.WX_BJ_REPORT)?void 0:i.BadJs)||n.report("AdFrameError:".concat(o.args.id),o.args.msg))}}(r,n,i[o]);break;case Ct.CHANGE_FRAME_STYLE:!function(e,t,i){if(!1===e.display&&(i.style.display="none"),e.height){const n=e.height.slice&&"px"===e.height.slice(-2)||"number"==typeof e.height?"".concat(Math.ceil(parseFloat(e.height,10)),"px"):e.height;t.style.height=n,function(e){const t=e.getAttribute("data-planid"),i=e.getAttribute("data-pid"),n=e.getAttribute("data-traceid"),o={compEle:e,compType:"mp-common-cpsad",compIdx:Array.from(document.querySelectorAll("mp-common-cpsad")).indexOf(e)};De.renderCompSilentlyPreHandler(o),Yt(e,t||i||n||""),De.renderCompSilently(o)}(i)}if(e.width){const i=e.width.slice&&"px"===e.width.slice(-2)||"number"==typeof e.width?"".concat(Math.ceil(parseFloat(e.width,10)),"px"):e.width;t.style.width=i}}(r,n,i[o]);break;case Ct.PROXY_CONSOLE:!function(e){const{method:t,data:i}=e;if("function"==typeof console[t]){[].concat(i)}}(r)}}function Ts(e,t,i){const n=i.contentWindow;n&&x.postMessage(n,e,t,Ct.CPS_AD_FRAME_DOMAIN)}function js(){const e=document.querySelectorAll("".concat(Es.oldTagName,",").concat(Es.tagName));0!==e.length&&fs().then((t=>{t&&(e.forEach((e=>{e.tagName.toLowerCase()===Es.oldTagName&&(e=vs(e,Es.tagName));const i=Math.ceil(1e4*Math.random());Es.iframeMap[i]=e;const{templateid:n,adtype:o}=e.dataset;n===As.MP_VIDEO_PLAY?o===Ct.CPS_GOODS_TYPE.SHORT_PLAY?function(e,t){const{dramaid:i,srcappid:n,planid:o,parentwidth:a,playappid:r,mediano:s,defaultpath:c,traceid:d=""}=e.dataset;(async function({srcAppid:e,dramaId:t,playAppid:i,mediaNo:n,planId:o,traceId:a}){try{let r,s=203;if(n){const[c,d]=await Promise.all([ys({srcAppid:e,dramaId:t,playAppid:i,mediaNo:n}),ws({dramaId:t,srcAppid:e,playAppid:i,planId:o,traceId:a,mode:s})]);r={shortPlayDataResp:JSON.parse(d),videoResp:JSON.parse(c)},x.report312728(16)}else{s=205;const n=await ws({dramaId:t,srcAppid:e,playAppid:i,planId:o,traceId:a,mode:s});r={shortPlayDataResp:JSON.parse(n)},x.report312728(17)}return r}catch(e){}})({dramaId:i,srcAppid:n,playAppid:r,mediaNo:s,planId:o,traceId:d}).then((i=>{var n;const{shortPlayDataResp:d,videoResp:l}=i;let u,p;0===(null==d?void 0:d.ret)?(u=function(e){var t,i,n;const o=(null==(t=e.detail_info[0])?void 0:t.drama_info)||{},{cover_url:a,drama_name:r,media_count:s,theme:c,ext:{hot_degree:d},status:l}=o,u=(null==(i=e.detail_info[0])?void 0:i.wx_miniprogram_link)||"",p=(null==(n=e.detail_info[0])?void 0:n.wx_miniprogram_app_username)||"",m={dramaCoverUrl:a,dramaName:r,dramaNum:s,categoryName:c.replace(/\u3001/g,"/"),hotView:d,status:l,path:u,userName:p};return u||x.report312728(14),m}(d),e.shortPlayDataResp=d,p=s&&0===(null==(n=null==l?void 0:l.base_resp)?void 0:n.ret)?function(e){const{coverurl:t,duration:i,jump_appid:n,video_url:o,height:a,width:r}=e;return{videoCoverUrl:t,duration:i,jumpAppid:n,videoPlayUrl:o,videoWidth:r,videoHeight:a}}(l):{videoCoverUrl:e.getAttribute("data-materialcoverurl"),videoPlayUrl:e.getAttribute("data-materialurl")}):x.report312728(18),u.path||x.report312728(20);const m={relativeURL:decodeURIComponent(u.path||c),appId:r,scene:1091,userName:u.userName},_=e=>{var t,i,n;-1===(null==(t=null==e?void 0:e.err_msg)?void 0:t.indexOf("ok"))?(me.setSum(309906,41,1),null==(n=null==(i=window.WX_BJ_REPORT)?void 0:i.BadJs)||n.report("AdFrameError:PROXY_ID_JUMP_SHORT_PLAY","errMsg:".concat(JSON.stringify(e.err_msg)))):me.setSum(309906,42,1)},h={drama_name:u.dramaName,total_num:u.dramaNum,cover_url:u.dramaCoverUrl,drama_class:u.categoryName,hot_view:u.hotView,appid:r,jump_path:u.path||decodeURIComponent(c),ban:2===u.status};if(2===u.status)return void e.setAttribute("data-banvideo",1);const{dom:f,report32253:w,videoPlayer:g}=bs({cpsReportId:o,dramaInfo:h,cover:p.videoCoverUrl,playUrl:p.videoPlayUrl,duration:p.duration||0,width:p.videoWidth||0,height:p.videoHeight||0,wrpWidth:a,wrpHeight:a,canFullscreen:!0,alwaysShowControl:!1,hideDuration:!0,customFullscreenAction:()=>{ks(e,m,_),w({EventType:15})}});g&&g.$on("cover-next-click",(()=>{Ts(Ct.CLICK_AD_ACTION,"",e.shadowRoot.querySelector("iframe"))})),e.setAttribute("data-videocarddata",JSON.stringify({videoCoverUrl:u.dramaCoverUrl,name:u.dramaName,categoryInfo:"".concat(u.dramaNum,"\u96c6"),categoryName:u.categoryName})),e.addEventListener("click",(t=>{(t.composedPath()||[]).some((e=>{var t;return null==(t=e.classList)?void 0:t.contains("cps_video_footer")}))&&(ks(e,m,_),w({EventType:12}))})),xs(e,(()=>{w({EventType:11})})),e.appendChild(f),e.setAttribute("data-cpsversion",t),e.setAttribute("data-ready",1)})).catch((()=>{}))}(e,t):o===Ct.CPS_GOODS_TYPE.MINI_GAME&&function(e,t){const{appid:i,traceid:n,parentwidth:o,videorate:a}=e.dataset;gs({traceId:n,appId:i}).then((r=>{var s,c,d,l,u,p,m,_,h,f,w,g,y,b;e.miniGameDataResp=r;const v=null==(s=null==r?void 0:r.detail_info)?void 0:s[0],x={relativeURL:(null==v?void 0:v.wx_miniprogram_link)||"",appId:i,scene:1311,userName:(null==v?void 0:v.wx_miniprogram_app_username)||"",sceneNote:"".concat(window.biz,":").concat(window.mid,":").concat(window.idx)},k={drama_name:null==(c=null==v?void 0:v.game_info)?void 0:c.name,cover_url:null==(d=null==v?void 0:v.game_info)?void 0:d.logo,drama_class:(null==(l=null==v?void 0:v.game_info)?void 0:l.brief_intro)||(null==(u=null==v?void 0:v.game_info)?void 0:u.description),appid:null==(p=null==v?void 0:v.game_info)?void 0:p.app_id,jump_path:x.relativeURL,banStatue:0,cover_style:{width:"48px",height:"48px",margin:"16px 0 16px 16px"},cover_next_info_style:{borderRadius:"8px"},ban:2===(null==(m=null==v?void 0:v.game_info)?void 0:m.status)};if(2===(null==(_=null==v?void 0:v.game_info)?void 0:_.status))return void e.setAttribute("data-banvideo",1);const A=function(e){return Math.max(1,Math.min(16/9,e))}(a)||16/9,{dom:I,videoPlayer:C,report32253:S}=bs({cpsReportId:n,dramaInfo:k,cover:null==(f=null==(h=null==v?void 0:v.game_info)?void 0:h.video_info)?void 0:f.cover_img_url,playUrl:null==r?void 0:r.video_url,duration:0,width:0,height:0,wrpWidth:o,wrpHeight:A>1?o/A:o,canFullscreen:!0,cpsCardType:2,hideDuration:!0,customFullscreenAction:()=>{ks(e,x),S({EventType:15})}});C&&C.$on("cover-next-click",(()=>{Ts(Ct.CLICK_AD_ACTION,"",e.shadowRoot.querySelector("iframe"))})),e.setAttribute("data-videocarddata",JSON.stringify({videoCoverUrl:null==(g=null==(w=null==v?void 0:v.game_info)?void 0:w.video_info)?void 0:g.cover_img_url,name:null==(y=null==v?void 0:v.game_info)?void 0:y.name,categoryInfo:null==(b=null==v?void 0:v.game_info)?void 0:b.category_3_name,categoryName:"\u5c0f\u6e38\u620f"})),e.addEventListener("click",(t=>{(t.composedPath()||[]).some((e=>{var t;return null==(t=e.classList)?void 0:t.contains("cps_video_footer")}))&&(ks(e,x),S({EventType:12}))})),xs(e,(()=>{S({EventType:11})})),e.appendChild(I),e.setAttribute("data-cpsversion",t),e.setAttribute("data-ready",1)})).catch((()=>{}))}(e,t):(e.setAttribute("data-cpsversion",t),e.setAttribute("data-ready",1))})),function(e,t,i,...n){const o=e=>{let o;if(!t||e.origin===t){if("object"!=typeof e.data)try{o=JSON.parse(e.data)}catch(e){return}else o=e.data;"function"==typeof i&&i(e,o,...n)}};e.addEventListener("message",o)}(window,Ct.CPS_AD_FRAME_DOMAIN,Ss,Es.iframeMap))})).catch((()=>{}))}function Bs(){window.addEventListener&&window.addEventListener("load",(function(){window.__moonsafe_mutation_report_keys||(window.__moonsafe_mutation_report_keys={});const e=window.moon&&window.moon.moonsafe_id||29715,t=window.moon&&window.moon.moonsafe_key||0;let i=[],n={};const o=function(e,t,o){o=o||1,n[e]||(n[e]=0),n[e]+=o,t&&(function(e){return"[object Array]"==Object.prototype.toString.call(e)}(t)?i=i.concat(t):i.push(t)),setTimeout((function(){a()}),1500)},a=function(){const o=[],r=i.length,s=["r="+Math.random()];for(const i in n)n.hasOwnProperty(i)&&o.push(e+"_"+(1*i+1*t)+"_"+n[i]);for(let e=0;e<r&&!(e>=10);++e)s.push("log"+e+"="+encodeURIComponent(i[e]));if(0==o.length&&s.length<=1)return;const c="idkey="+o.join(";")+"&lc="+(s.length-1)+"&"+s.join("&");let d;if(window.ActiveXObject)try{d=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{d=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){d=!1}}else window.XMLHttpRequest&&(d=new XMLHttpRequest);d&&(d.open("POST",location.protocol+"//mp.weixin.qq.com/mp/jsmonitor?",!0),d.setRequestHeader("cache-control","no-cache"),d.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),d.setRequestHeader("X-Requested-With","XMLHttpRequest"),d.onreadystatechange=function(){4===d.readyState&&(i.length>10?(i=i.slice(10),a()):(i=[],n={}))},i=[],n={},d.send(c))};try{if(!window.__observer)return;const e=window.__observer_data;if(window.__observer.takeRecords){const t=window.__observer.takeRecords();if(t&&t.length){e.count++;const i=new Date;t.forEach((function(t){const i=t.addedNodes;for(let t=0;t<i.length;t++){const n=i[t];if("SCRIPT"===n.tagName){const t=n.src;!t||/qq\.com/.test(t)||/weishi\.com/.test(t)||e.list.push(t)}}})),e.exec_time+=new Date-i}}window.__observer.disconnect();const t=window.__moonsafe_mutation_report_keys.observer||2,i=window.__moonsafe_mutation_report_keys.script_src||8,n=window.__moonsafe_mutation_report_keys.setattribute||9,a=window.__moonsafe_mutation_report_keys.ajax||10,r=25;for(let i=0;i<e.list.length;i++){const n=e.list[i],a=["[moonsafe][observer][url]:"+location.href,"[moonsafe][observer][src]:"+n,"[moonsafe][observer][ua]:"+navigator.userAgent];e.list.length==i+1&&(a.push("[moonsafe][observer][count]:"+e.count),a.push("[moonsafe][observer][exec_time]:"+e.exec_time+"ms")),o(t,a),"inlinescript_without_nonce"==n&&o(r,a)}const s=window.__danger_src;if(s){const e=[{key:"xmlhttprequest",idkey:a},{key:"script_src",idkey:i},{key:"script_setAttribute",idkey:n}];for(let t=0;t<e.length;t++){const i=e[t].key,n=s[i];if(n&&n.length)for(let a=0;a<n.length;a++){const r=["[moonsafe]["+i+"][url]:"+location.href,"[moonsafe]["+i+"][src]:"+n[a],"[moonsafe]["+i+"][ua]:"+navigator.userAgent];o(e[t].idkey,r)}}}}catch(e){o(3,["[moonsafe][observer][exception]:"+e])}}),!1)}function Ns(e){return e&&e.getBoundingClientRect?e.getBoundingClientRect().top+function(){let e=0;return void 0!==window.pageXOffset?e=window.pageXOffset:void 0!==document.compatMode&&"BackCompat"!==document.compatMode?e=document.documentElement.scrollTop:void 0!==document.body&&(e=document.body.scrollTop),e}():0}function Ms(){if(""===Os)return;const e=function(){const e=[],t=document.getElementsByTagName("img");for(let i=0,n=t.length;i<n;i++){const n=t.item(i);n.getAttribute("data-src")&&e.push(n)}return e}();if(Os>e.length)return;const t=Ns(e[Os]);window.scroll(0,t)}function Ls(){let e=!1,t=window.performance||window.msPerformance||window.webkitPerformance;if(!(t&&t.timing&&t.timing.navigationStart))return!1;e=t.timing.navigationStart,function(){function t(){if(-1==navigator.userAgent.indexOf("NetType/"))return!1;let e=["2G","cmwap","cmnet","uninet","uniwap","ctwap","ctnet"];for(let t=0,i=e.length;t<i;++t)if(-1!=navigator.userAgent.indexOf(e[t]))return!0;return!1}let i=window.performance&&window.performance.timing,n=window.write_sceen_time-e,o=window.first_sceen__time-e,a=window.page_endtime-e,r=(window.onload_endtime||+new Date)-e;-1!=navigator.userAgent.indexOf("MicroMessenger")&&(n=real_show_page_time-e,o=real_show_page_time-e);let s=window.logs.jsapi_ready_time?window.logs.jsapi_ready_time-e:void 0,c=window.logs.a8key_ready_time?window.logs.a8key_ready_time-e:void 0,d=i&&i.connectEnd-i.connectStart,l=i&&i.secureConnectionStart&&i.connectEnd-i.secureConnectionStart,u=i&&i.domainLookupEnd&&i.domainLookupStart&&i.domainLookupEnd-i.domainLookupStart;if(window.logs.pagetime.wtime=n,window.logs.pagetime.ftime=o,window.logs.pagetime.ptime=a,window.logs.pagetime.onload_time=r,window.logs.pagetime.jsapi_ready_time=s,window.logs.pagetime.a8key_ready_time=c,need_report_cost?_e({url:"/mp/report_cost",type:"post",data:{id_key_list:["1|1|"+a,"1|2|"+o,"1|3|"+r,"1|4|"+s,"1|5|"+c,"1|6|"+d,"1|7|"+l,"1|8|"+u].join(";")}}):Math.random()<.01&&_e({url:"/mp/report_cost",type:"post",data:{id_key_list:["#1|1|"+a,"1|2|"+o,"1|3|"+r,"1|4|"+s,"1|5|"+c,"1|6|"+d,"1|7|"+l,"1|8|"+u].join(";")}}),need_report_cost&&o>3e3){let e=new Image,t=(new Date).getTime();e.onload=function(){let e=(new Date).getTime()-t,i=(new Date).getTime(),n=new Image;n.onload=function(){let t=(new Date).getTime()-i;_e({url:"/mp/report_cost",type:"post",data:{id_key_list:["^2|1|"+e,"2|2|"+t].join(";")}})},n.src="http://ugc.qpic.cn/adapt/0/7d8963bb-aace-df23-0569-f8a4e388eacb/100?r="+Math.random()},e.src="http://ugc.qpic.cn/adapt/0/7d8963bb-aace-df23-0569-f8a4e388eacb/100?r="+Math.random()}Math.random()>.2||r<0||n<0||o<0||a<0||(s&&me.setAvg(27822,15,s),c&&me.setAvg(27822,17,c),a>=15e3?me.setAvg(27822,29,a):(me.setAvg(27822,1,a).setAvg(27822,3,r).setAvg(27822,5,o),window.isWeixinCached&&me.setAvg(27822,19,a),t()?(me.setAvg(27822,9,a),window.isWeixinCached&&me.setAvg(27822,23,a)):"wifi"==networkType?(me.setAvg(27822,7,a),window.isWeixinCached&&me.setAvg(27822,21,a)):"2g/3g"==networkType?(me.setAvg(27822,11,a),window.isWeixinCached&&me.setAvg(27822,25,a)):"4g"==networkType?(me.setAvg(27822,14,a),window.isWeixinCached&&me.setAvg(27822,26,a)):(me.setAvg(27822,13,a),window.isWeixinCached&&me.setAvg(27822,28,a)),window.moon&&moon.clearSample&&(me.setAvg(27822,71,a),t()?me.setAvg(27822,73,a):"wifi"==networkType?me.setAvg(27822,75,a):"2g/3g"==networkType?me.setAvg(27822,77,a):"4g"==networkType?me.setAvg(27822,78,a):me.setAvg(27822,79,a)),d&&me.setAvg(27822,65,d),l&&me.setAvg(27822,67,l),u&&me.setAvg(27822,69,u)))}(),window.logs.jsapi_ready_fail&&me.setSum(24729,55,window.logs.jsapi_ready_fail),function(){const e=document.getElementById("page-content");if(!e||Math.random()>.1)return;const i=function(){const n=document.getElementById("js_content_end"),o=window.pageYOffset||document.documentElement.scrollTop,a=n.offsetTop;if(o+Oe.getInnerHeight()>=a){let n,o,a=e.getElementsByTagName("img"),r={},s=[],c=0,d=0,l=0;for(let e=0,t=a.length;e<t;++e){let t=a[e];n=t.getAttribute("data-src")||t.getAttribute("src"),o=t.getAttribute("src"),n&&(n.isCDN()?d++:l++,c++,r[o]={})}if(s.push("1="+1e3*c),s.push("2="+1e3*d),s.push("3="+1e3*l),t.getEntries){let e=t.getEntries(),i=window.logs&&window.logs.img&&window.logs.img.download;if(!i)return;let n=[0,0,0],o=[0,0,0];c=d=0;for(let t=0,i=e.length;t<i;++t){let i=e[t],a=i.name;a&&"img"==i.initiatorType&&r[a]&&(a.isCDN()&&(o[0]+=i.duration,d++),n[0]+=i.duration,c++,r[a]={startTime:i.startTime,responseEnd:i.responseEnd})}n[0]>0&&c>0&&(n[2]=n[0]/c),o[0]>0&&d>0&&(o[2]=o[0]/d);for(let e in i)if(i.hasOwnProperty(e)){let t=i[e],a=0,s=0,c=0,d=0;for(let e=0,i=t.length;e<i;++e){let i=t[e];if(r[i]&&r[i].startTime&&r[i].responseEnd){let e=r[i].startTime,t=r[i].responseEnd;a=Math.max(a,t),s=s?Math.min(s,e):e,i.isCDN()&&(c=Math.max(a,t),d=s?Math.min(s,e):e)}}n[1]+=Math.round(a-s),o[1]+=Math.round(c-d)}let a=4,l=7;for(let e=0;e<3;e++)n[e]=Math.round(n[e]),o[e]=Math.round(o[e]),n[e]>0&&(s.push(a+e+"="+n[e]),"wifi"==networkType?s.push(a+e+6+"="+n[e]):"2g/3g"!=networkType&&"4g"!=networkType||s.push(a+e+12+"="+n[e])),o[e]>0&&(s.push(l+e+"="+o[e]),"wifi"==networkType?s.push(l+e+6+"="+o[e]):"2g/3g"!=networkType&&"4g"!=networkType||s.push(l+e+12+"="+o[e]))}je.off(window,"scroll",i,!1)}};je.on(window,"scroll",i,!1)}(),function(){if(Math.random()>.001)return;const e=document.createElement("iframe"),t=Math.ceil(10*Math.random())-1,i=uin+mid+idx+Math.ceil(1e3*Math.random())+(new Date).getTime();e.style.display="none",e.id="js_ajax",e.setAttribute("data-time",t),e.src="/mp/iframetest?action=page&traceid="+i+"&devicetype="+devicetype+"&timeout="+[600,800,1e3,1200,1500,2e3,3e3,5e3,1e4,18e3][t],document.getElementById("js_article").appendChild(e)}()}function Us(){try{if(!window.ad_keywords||"true"!==window.show_ad_keyword)return;const e=window.ad_keywords,t=document.querySelectorAll(".".concat(qe)).length,i=e.map((e=>e.keyword)).join(";");if(Hs=i,Fs=0,Xe({adKeywordsList:e,maxRenderNum:5,existingCount:t})){const t=Qe(e,{groupId:Fs,msgKeyWords:i});document.querySelectorAll(".".concat(qe)).forEach((e=>{var i;(null==(i=e._adinfo)?void 0:i.data)&&(t.observe(e),function(e,t){e.addEventListener("click",(e=>{e.stopPropagation(),Ye({keyword:t.keyword,eventType:2,msgKeyWords:Hs,groupId:Fs}),l.commit("mp-adv-keyword/setAdKeywordItem",t),l.commit("mp-adv-keyword/setReportData",{groupId:Fs,msgKeyWords:Hs}),l.commit("mp-adv-keyword/setShow",!0)}),!0)}(e,e._adinfo.data))})),Ye({keyword:"",eventType:0,groupId:Fs,msgKeyWords:i})}}catch(e){}}import"./modulepreload-polyfill.m8i97gbw4abee2a4.js";import{P as t,W as n,n as i,u as o,e as a,w as r,j as s,o as c,M as d,s as l,K as u,a as p,m,b as _,c as h,S as f,d as g,f as w,B as y,L as b,H as v,A as k,g as x,C as A,D as I,I as C,h as S,p as T,i as E,k as R,l as P,G as D,R as j,q as B,r as O,t as N,v as M,V as L,x as q,y as W,z,E as F,F as H,J as U,N as K,O as V,Q as J,T as $,U as G,X as Y,Y as X,Z as Q,_ as Z,$ as ee,a0 as te,a1 as ne,a2 as ie,a3 as oe,a4 as ae,a5 as re,a6 as se,a7 as ce,a8 as de}from"./index.m8i97gbwfe46bbc4.js";import{t as le,s as ue}from"./topbar.m8i97gbw513482ad.js";import pe from"./ext_loading.m8i97gbwe2cdf5ae.js";import{j as me,a as _e,c as he,D as fe,U as ge,b as we,d as ye,e as be,l as ve,g as ke}from"./jsmonitor_report.m8i97gbw24f1c8f3.js";import{C as xe}from"./class.m8i97gbwd1a660bd.js";import{m as Ae,J as Ie}from"./core.m8i97gbwe37c0e2c.js";import{p as Ce,A as Se,I as Te,V as Ee,w as Re}from"./page_utils.m8i97gbwfcabefdd.js";import{e as Pe,p as De}from"./page_cls_ctrl.m8i97gbwbbe1df6f.js";import{D as je}from"./event.m8i97gbw4d651b40.js";import{T as Be}from"./tmpl.m8i97gbw1af565c1.js";import{u as Oe}from"./comm_utils.m8i97gbw6d469e3e.js";import{d as Ne,c as Me,g as Le,A as qe,a as We,h as ze}from"./render_utils.m8i97gbw6805fe0d.js";import{p as Fe,o as He,a as Ue}from"./page_utils.m8i97gbwa62c0a1f.js";import{r as Ke,A as Ve}from"./appmsgext.m8i97gbwf0de8c03.js";import{R as Je,i as $e}from"./vote.m8i97gbw2fcc4ddb.js";import{u as Ge}from"./pay_report_utils.m8i97gbweb8274d0.js";import{r as Ye,a as Xe,e as Qe,g as Ze}from"./utils.m8i97gbw60a74149.js";import{b as et,s as tt}from"./set_article_read.m8i97gbw1178a71a.js";import{c as nt,r as it,a as ot,V as at,q as rt,k as st,s as dt,b as lt,m as ut,g as pt,i as mt}from"./index.m8i97gbw135d6add.js";import{n as _t}from"./_plugin-vue2_normalizer.m8i97gbwfc2fb13f.js";import{m as ht}from"./underline_action.m8i97gbw4f4c3cc5.js";import{i as ft,a as gt,g as wt,b as yt,s as bt,c as vt,d as kt,f as xt}from"./advance.m8i97gbw7e96d73e.js";import{s as At,a as It}from"./private_share.m8i97gbw93a75d66.js";import{A as Ct}from"./a_config.m8i97gbw59077e3e.js";import{L as St}from"./like_and_share.m8i97gbwbaedd0cc.js";import"./wxgspeedsdk.m8i97gbwf8eb5e85.js";import{i as Tt,h as Et}from"./mobile_click.m8i97gbw0c17571d.js";import{F as Rt,V as Pt,a as Dt,b as jt,T as Bt,P as Ot,c as Nt,d as Mt,e as Lt}from"./cover_next.m8i97gbw82154466.js";import{P as qt}from"./product_search.m8i97gbw14d97b02.js";import{I as Wt}from"./interaction.m8i97gbw1f04b510.js";import{B as zt,V as Ft}from"./background_color.m8i97gbw56439729.js";import{i as Ht}from"./article_bottom_bar.m8i97gbw2e8cf593.js";import{n as Ut}from"./defineProperty-a0a43b76.m8i97gbwef20e9dc.js";import{__setStar as Kt}from"./set_star.m8i97gbwf3c3ff13.js";import{D as Vt,o as Jt,i as $t}from"./report_img.m8i97gbwc9ef79a3.js";import{b as Gt,r as Yt,i as Xt}from"./channels.m8i97gbwd66b6dff.js";import{g as Qt}from"./get_word_cnt.m8i97gbw1a70c97b.js";import{s as Zt,m as en,r as tn,h as nn,g as on,p as an}from"./channel_product_utils.m8i97gbwe7b734f7.js";import{L as rn}from"./storage.m8i97gbw52356a02.js";import"./intersection-observer.m8i97gbwe16580c9.js";import"./set_custom_ele.m8i97gbw3af54f67.js";import"./modal.m8i97gbwd01ea73f.js";import{i as cn}from"./index.m8i97gbw1a18c2d0.js";import{getImmersiveMode as dn}from"./set_fullscreen_webview.m8i97gbw358f71ba.js";import"./get_page_read_pos.m8i97gbw03e9c3f0.js";import"./body_first_observer.m8i97gbwa7d0eac4.js";import"./rec_report_key.m8i97gbwb87e4fe3.js";import"./localstorage.m8i97gbw3741f01c.js";import"./textOverflow.m8i97gbw3b2cab0b.js";import"./safe_area_insets.m8i97gbwf4487500.js";import"./i18n.m8i97gbwde033f12.js";import"./loadscript.m8i97gbw2014a786.js";import"./moment.m8i97gbw07db360f.js";import"./object-73371513.m8i97gbw8a1756fb.js";import"./bind_element.m8i97gbwfafab59c.js";import"./bind_element.m8i97gbw0627987a.js";import"./bind_element.m8i97gbw843aa060.js";const ln=[];let pn=!1;const mn=navigator.userAgent.match(/MicroMessenger\/(\d+)\.(\d+)\.(\d+)/);if(mn){const e=Number(mn[1]),t=Number(mn[2]),i=Number(mn[3]);(e>6||6===e&&t>5||6===e&&5===t&&i>=3)&&(pn=!0)}const _n={tagName:"mp-wxaproduct",isWechat:(Ae.isAndroid||Ae.isIOS)&&Ae.isWechat&&!Ae.isWxWork,isPcWechat:Ae.isWindowsWechat||Ae.isMacWechat,screen_height:Oe.getInnerHeight(),canJumpOnTap:pn,commonReportData:{},minishopDom:[],appmsgType:1*window.appmsg_type||9},hn=(e={})=>{const i=e.dom,o=e.minishopInfo;je.on(i,"tap",(function(e){e.stopPropagation(),e.preventDefault(),he.report(22042,Object.assign({},_n.commonReportData,{ActionType:2,toWxaAppId:o.appid,CardType:"large"===o.cardtype?1:0,ProductId:o.productId,isMassSend:_n.appmsgType})),((e={})=>{_n.isWechat||_n.isPcWechat?_n.canJumpOnTap&&n.jumpUrl({options:{userName:e.username,scene:1058,sceneNote:encodeURIComponent(location.href),relativeURL:e.path},beforeJumpBackupPage:function(){},onJsapiCallback:function(e){e.err_msg}}):new t({msg:"\u8bf7\u4f7f\u7528\u5fae\u4fe1\u6253\u5f00\u3002"})})(o)}),!0),je.on(i,"click",(e=>{e.preventDefault(),e.stopPropagation()}),!0)},fn=()=>{for(let e=0;e<_n.minishopDom.length;e++){const t=_n.minishopDom[e];if(1*t.getAttribute("data-hasreport")!=1){const e=document.documentElement.scrollTop||document.body.scrollTop,i=t.getAttribute("data-wxaproduct-productid")||"0",n=t.getAttribute("data-wxaproduct-appid")||"",o=t.getAttribute("data-wxaproduct-cardtype")||"mini";t.clientHeight+t.offsetTop>=e+t.clientHeight/2&&t.clientHeight+t.offsetTop<=e+t.clientHeight/2+_n.screen_height&&(t.setAttribute("data-hasreport",1),he.report(22042,Object.assign({},_n.commonReportData,{ActionType:1,toWxaAppId:n,CardType:"large"===o?1:0,ProductId:i,isMassSend:_n.appmsgType})))}}};je.on(window,"scroll",fn);const gn=(e={})=>{if(e.node&&e.data&&e.data.headimg){const t=function(e){const t=e.node,i=e.data;return function(){const e=document.createElement("div");e.innerHTML=Be.tmpl('<# if(cardtype === \'mini\') {#>\n<div role="button" class="appmsg_card_context wx_tap_card minishop_card minishop_card_small js_wx_tap_highlight" data-wxaproduct-productid="<#=productId#>" data-wxaproduct-appid="<#=appid#>" data-wxaproduct-cardtype="<#=cardtype#>">\n  <div class="minishop_card_hd">\n    <i aria-label="\u5546\u54c1\uff0c" class="minishop_card_thumb" style="background-image:url(<#=headimg#>);"></i>\n  </div>\n  <div class="minishop_card_bd">\n    <div class="minishop_main_context">\n      <strong class="minishop_card_title"><#=title#></strong>\n      <# if(avatar && nickname) { #>\n      <div class="minishop_card_profile weui-flex">\n        <img class="minishop_card_profile_avatar" src="<#=avatar#>" alt="">\n        <strong class="minishop_card_profile_nickname"><#=nickname#></strong>\n      </div>\n      <# } #>\n    </div>\n    <div class="minishop_extra_context weui-flex">\n      <em class="minishop_card_price"><#=price#></em>\n      <button class="weui-btn weui-btn_xmini minishop_card_buy_btn" type="button"><i class="icon_minishop_card_buy"></i>Purchase</button>\n    </div>\n  </div>\n</div>\n<#} else { #>\n<div role="button" class="appmsg_card_context wx_tap_card minishop_card minishop_card_large js_wx_tap_highlight" data-wxaproduct-productid="<#=productId#>" data-wxaproduct-appid="<#=appid#>" data-wxaproduct-cardtype="<#=cardtype#>">\n  <div class="minishop_card_hd">\n    <i aria-label="\u5546\u54c1\uff0c" class="minishop_card_thumb" style="background-image:url(<#=headimg#>);"></i>\n  </div>\n  <div class="minishop_card_bd weui-flex__item">\n    <div class="minishop_main_context">\n      <strong class="minishop_card_title"><#=title#></strong>\n      <# if(avatar && nickname) { #>\n      <div class="minishop_card_profile weui-flex">\n        <img class="minishop_card_profile_avatar" src="<#=avatar#>" alt="">\n        <strong class="minishop_card_profile_nickname"><#=nickname#></strong>\n      </div>\n      <# } #>\n    </div>\n    <div class="minishop_extra_context weui-flex">\n      <em class="minishop_card_price"><#=price#></em>\n      <button class="weui-btn weui-btn_xmini minishop_card_buy_btn" type="button"><i class="icon_minishop_card_buy"></i>Purchase</button>\n    </div>\n  </div>\n</div>\n<# } #>',i,!0).replace(/>\s*</g,"><").replace(/^\s+/,"").replace(/\s+$/,"");const n=e.firstChild;t.parentNode.insertBefore(n,t.nextSibling);const o=t.parentNode.querySelector('[data-preloadingid="'+i.productId+'"]');o&&o.parentNode.removeChild(o),hn({dom:n,minishopInfo:i}),_n.minishopDom.push(n),fn()}}(e),i=function(){this.onload=null,this.onerror=null,t()},n=new Image;n.onload=i,n.onerror=i,n.src=e.data.headimg}},wn=e=>{_e({url:"/mp/wapwxaproduct?action=batch_get_product&product_ids=".concat(JSON.stringify({list:e})),type:"GET",dataType:"json",success(e){e&&e.base_resp&&1*e.base_resp.ret==0&&"[object Array]"===Object.prototype.toString.call(e.product_list)&&((e=[])=>{
const t=document.querySelectorAll(_n.tagName);for(let i=0,n=t.length;i<n;i++){const n=t[i],o=decodeURIComponent(n.getAttribute("data-wxaproduct-productid")||""),a=e.find((e=>e.product_id===o))||{},r={productId:o,title:n.getAttribute("data-wxaproduct-title")||"",price:decodeURIComponent(n.getAttribute("data-wxaproduct-price")||""),headimg:decodeURIComponent(n.getAttribute("data-wxaproduct-headimg")||""),cardtype:decodeURIComponent(n.getAttribute("data-wxaproduct-cardtype")||""),avatar:a.avatar||"",nickname:a.nickname||"",appid:a.appid||decodeURIComponent(n.getAttribute("data-wxaproduct-appid")||""),path:a.path||"",username:a.username||""};gn({data:r,node:n})}})(e.product_list)},error(t){_n.retry&&(_n.retry--,wn(e))}})},yn=(e={})=>{e.minishopCards&&(_n.commonReportData={BizUin:1*Ne(e.biz),MsgId:window.parseInt(e.mid,10)||0,ItemIdx:window.parseInt(e.idx,10)||0,Scene:window.parseInt(e.source,10)||0,SubScene:window.parseInt(e.subscene,10)||0,EnterId:window.parseInt(e.enterid,10)||0},wn(e.minishopCards.list),fn())},bn='<span class="qa__card js_qa_card_inner">\n  <# if (qaDeleted) { #>\n    <span class="qa__card-deleted">\u8ba8\u8bba\u5185\u5bb9\u5df2\u88ab\u5220\u9664</span>\n  <# } else { #>\n    <span>\n      <span class="qa__card-hd">\n        <span class="qa__hd-notice"><#=nickname#> \u53d1\u8d77\u4e86\u4e00\u4e2a\u8bfb\u8005\u8ba8\u8bba</span>\n        <span class="qa__hd-question"><#==title#></span>\n      </span>\n      <# if (!answerCount) { #>\n        <# if (isLogin) { #>\n          <!-- <# if (disableAnswerWord) { #>\n            <span class="qa__list-answer qa__list-answer_desc"><#=disableAnswerWord#></span>\n          <# } else { #>\n            <span class="qa__list-answer js_qa_write_answer">\u53c2\u4e0e\u8ba8\u8bba</span>\n          <# } #> -->\n          <span class="qa__list-answer qa__list-answer_desc">\u8ba8\u8bba\u5df2\u7ed3\u675f</span>\n        <# } #>\n      <# } else { #>\n        <span>\n          <span class="qa__list-hd">\n            <span class="qa__list-hd-title js_qa_list_head_title">\u7cbe\u9009\u8ba8\u8bba\u5185\u5bb9</span>\n            <!-- <# if (isLogin) { #>\n              <# if (disableAnswerWord) { #>\n                <span class="qa__list-hd-desc"><#=disableAnswerWord#></span>\n              <# } else { #>\n                <span class="qa__list-hd-action js_qa_write_answer">\u53c2\u4e0e\u8ba8\u8bba</span>\n              <# } #>\n            <# } #> -->\n          </span>\n          <span class="qa__list js_qa_qna_answer_list"><#==answerListStr#></span>\n          <# if (leftAnswerCnt) { #>\n            <p class="qa__list-more js_more_answer_entry" data-count="<#=answerCount#>"><#=leftAnswerCnt#></p>\n          <# } #>\n        </span>\n      <# } #>\n    </span>\n  <# } #>\n</span>',vn='<div class="qa__list-item js_qa_list_item">\n  <!-- \u5c42\u4e3b\u5934\u50cf -->\n  <section class="qa__item-avatar">\n    <img src="<#=user_info.headimg#>">\n  </section>\n  <section class="qa__item-bd">\n    <div class="qa__item-info">\n      <!-- \u5c42\u4e3b\u6635\u79f0 -->\n      <div class="qa__item-nickname">\n        <#=user_info.nickname#>\n      </div>\n      <!-- \u70b9\u8d5e -->\n      <div class="qa__item-action">\n        <!-- span\u52a0praised\u70b9\u8d5e -->\n        <# if (is_my_answer && canOp) { #>\n          <div class="qa__action js_delete_answer" data-id="<#=answer_id#>"><i class="icon_delete"></i></div>\n        <# } #>\n        <!-- \u7cbe\u9009\u4e4b\u540e\u7684\u624d\u80fd\u70b9\u8d5e -->\n        <# if (answer_status && isLogin) { #>\n          <div class="qa__action qa__action-praise js_qa_like<# if (my_like_status) { #> praised<# } #>" data-type="1" data-id="<#=answer_id#>">\n            <i class="icon_praise_gray"></i>\n            <span class="js_like_num" data-num="<#=like_num#>">\n              <#=likeNumFormated#>\n            </span>\n          </div>\n        <# } #>\n        <# if (!answer_status) { #>\n          <div class="qa__action qa__action_normal">Not approved</div>\n        <# } #>\n      </div>\n    </div>\n\n    <!-- \u56de\u7b54\u5185\u5bb9 -->\n    <p class="qa__item-content js_qa_item_content"><#=content#></p>\n    <!-- <# if (is_my_answer && canOp) { #>\n    <div class="qa__action qa__action-reply js_write_reply" data-answerid="<#=answer_id#>" data-answersn="<#=answer_sn#>" <# if (replyListHtml) { #>style="display: none;"<# } #>><span>Reply</span></div>\n    <# } #> -->\n\n    <!-- \u56de\u590d -->\n    <section class="qa__reply">\n      <section class="js_qa_reply_list js_qa_reply_list_<#=answer_id#>">\n        <#=replyListHtml#>\n      </section>\n      <# if (replyListHtml && leftReplyCount) { #>\n        <p class="qa__reply-more js_get_more_reply js_get_more_reply_<#=answer_id#>" data-answerid="<#=answer_id#>" data-answersn="<#=answer_sn#>">\n          <#=leftReplyTips#>\n        </p>\n      <# } #>\n      <!-- <# if (is_my_answer && canOp) { #>\n      <div class="qa__action qa__action-reply js_write_reply" data-answerid="<#=answer_id#>" data-answersn="<#=answer_sn#>" <# if (!replyListHtml) { #>style="display: none;"<# } #>><span>Reply</span></div>\n      <# } #> -->\n    </section>\n  </section>\n</div>',kn='<section class="qa__reply-item js_qa_reply_item<# if (is_my_reply) { #> js_qa_my_reply<# } #>">\n  <div class="qa__reply-hd">\n    <div class="qa__reply-nickname">\n      <# if (is_biz_reply) { #>\n        Author\n      <# } else { #>\n        <#=user_info.nickname#>\n      <# } #>\n    </div>\n    <div class="qa__item-action">\n      <# if (is_my_reply && canOp) { #>\n        <div class="qa__action js_delete_reply" data-id="<#=reply_id#>"><i class="icon_delete"></i></div>\n      <# } #>\n      <!-- \u7cbe\u9009\u4e4b\u540e\u7684\u624d\u80fd\u70b9\u8d5e -->\n      <# if (replyStatus && isLogin) { #>\n        <div class="qa__action qa__action-praise js_qa_like<# if (my_like_status) { #> praised<# } #>" data-type="2" data-id="<#=reply_id#>">\n          <i class="icon_praise_gray"></i>\n          <span class="js_like_num" data-num="<#=like_num#>">\n            <#=likeNumFormated#>\n          </span>\n        </div>\n      <# } #>\n      <# if (!replyStatus) { #>\n        <div class="qa__action qa__action_normal">Not approved</div>\n      <# } #>\n    </div>\n  </div>\n  <p class="qa__reply-content js_qa_reply_content"><#=content#></p>\n</section>',xn='<div class="qa__modal-reply">\n  <div class="qa__modal-reply-msg js_reply_top_content"></div>\n  <div class="frm_textarea_box_wrp">\n    <span class="frm_textarea_box" style="position: relative; display: block;">\n      <div style="position: relative; height: 9.6em; overflow: hidden; font-size: 17px;">\n        <textarea class="frm_textarea js_qa_input" placeholder="\u5185\u5bb9\u88ab\u516c\u4f17\u53f7\u7cbe\u9009\u540e\uff0c\u5c06\u5bf9\u6240\u6709\u4eba\u53ef\u89c1\u3002" style="height: 9.6em; width: 100%; border: none; outline: none;"></textarea>\n      </div>\n      <div class="emotion_tool">\n        <span class="emotion_switch" style="display:none;"></span>\n        <span id="js_qa_emotion_switch" class="pic_emotion_switch_wrp">\n          <img class="pic_default" src="<#=window.icon_emotion_switch#>" alt="">\n          <img class="pic_active" src="<#=window.icon_emotion_switch_active#>" alt="">\n          <img class="pic_default_primary" src="<#=window.icon_emotion_switch_primary#>" alt="">\n          <img class="pic_active_primary" src="<#=window.icon_emotion_switch_active_primary#>" alt="">\n        </span>\n      </div>\n    </span>\n  </div>\n  <div class="emotion_panel" id="js_qa_emotion_panel">\n    <span class="emotion_panel_arrow_wrp" id="js_qa_emotion_panel_arrow_wrp">\n      <i class="emotion_panel_arrow arrow_out"></i>\n      <i class="emotion_panel_arrow arrow_in"></i>\n    </span>\n    <div class="emotion_list_wrp" id="js_qa_emotion_slide_wrapper"></div>\n    <ul class="emotion_navs" id="js_qa_emotion_navbar"></ul>\n  </div>\n</div>\n<div class="qa__list-wrp">\n  <div class="qa__list-hd js_qa_write_head" style="display: none;">\n    <span class="qa__list-hd-title">\u6211\u7684\u8ba8\u8bba\u5185\u5bb9</span>\n  </div>\n  <div class="qa__list js_qa_qna_answer_list"></div>\n</div>\n\n<div class="js_loading_toast" style="display: none;">\n  <div class="weui-mask_transparent"></div>\n  <div class="weui-toast">\n    <i class="weui-loading weui-icon_toast"></i>\n    <p class="weui-toast__content js_loading_content">Loading...</p>\n  </div>\n</div>\n\n<div class="js_sended_toast" style="display: none;">\n  <div class="weui-mask_transparent"></div>\n  <div class="weui-toast">\n    <i class="weui-icon-success-no-circle weui-icon_toast"></i>\n    <p class="weui-toast__content" id="js_toast_msg">Posted</p>\n  </div>\n</div>\n\n<div class="qa__toast-alert js_alert_toast" style="display: none;">\n  <div class="weui-mask_transparent"></div>\n  <div class="weui-toast">\n    <i class=" qa__icon-alert"></i>\n    <p class="weui-toast__content js_alert_toast_word"></p>\n  </div>\n</div>',An="weui-btn_disabled",In="page_no_scroll",Cn="".concat(screen.height/4*3,"px"),Sn={top:fe.os.pc?"20%":"".concat(screen.height/4-(screen.height-window.innerHeight),"px"),btnText:"Submit",hasHeader:!0,clickMask2Hide:!0,animationType:"bottom",scroll2Hide:!0,sideslip2Hide:!0};class En{constructor(e,t={}){t=Object.assign({},Sn,t);const i=document.createElement("div");i.innerHTML=Be.tmpl('<div class="wx_bottom_modal_wrp legacy <#=extClass#>">\n  <div\n    class="weui-half-screen-dialog wx_bottom_modal js_bottom_modal_content"\n    role="dialog"\n    aria-modal="true"\n    aria-hidden="true"\n    tabindex="0"\n    <# if (!autoHeight) { #>\n      style="max-height: none;"\n    <# } else { #>\n      style="max-height: <#=maxHeight#>;"\n    <# } #>\n  >\n    <# if (hasHeader) { #>\n      <div class="weui-half-screen-dialog__hd__wrp">\n        <div class="weui-half-screen-dialog__hd js_bottom_modal_hd">\n          <div class="weui-half-screen-dialog__hd__side">\n            <button class="weui-btn_icon js_close_bottom_modal weui-wa-hotarea">Close<i class="weui-icon-half-screen-close"></i></button>\n          </div>\n\n          <div class="weui-half-screen-dialog__hd__main">\n            <strong class="weui-half-screen-dialog__title js_bottom_modal_title">Title</strong>\n          </div>\n\n          <div class="weui-half-screen-dialog__hd__side">\n            <# if (hasBtn) { #>\n              <# if (btnSlot) { #>\n                <div role="button" class="js_submit_bottom_modal weui-wa-hotarea">\n                  <#==btnSlot#>\n                </div>\n              <# } else { #>\n                <button class="weui-btn weui-btn_primary weui-btn_xmini js_submit_bottom_modal weui-wa-hotarea"><#=btnText#></button>\n              <# } #>\n            <# } #>\n            <button class="weui-btn_icon" style="display:none;">\u66f4\u591a<i class="weui-icon-more"></i></button>\n          </div>\n        </div>\n      </div>\n    <# } #>\n    <div class="weui-half-screen-dialog__bd js_bottom_modal_bd">\n      <div role="alert" class="wx_bottom_modal_msg_wrp js_modal_loading" style="display: none;">\n        <div class="wx_bottom_modal_msg">\n          <i class="weui-loading" role="img" aria-label="Loading..."></i>\n        </div>\n      </div>\n      <!-- \u4e0a\u4e0b\u62c9\u52a0\u8f7dloading -->\n      <div role="alert" class="weui-loadmore js_pull_loading" style="display: none;">\n        <i class="weui-loading"></i>\n        <span class="weui-loadmore__tips">Loading...</span>\n      </div>\n\n      <!-- \u52a0\u8f7d\u5b8c\u6210\u7684dom\uff0c\u63d2\u5230js_bottom_modal_bd\u4e0b -->\n      <div role="option" class="weui-loadmore weui-loadmore_line weui-loadmore_dot js_modal_end_line" style="display: none;">\n        <div class="weui-hidden_abs">\u5df2\u65e0\u66f4\u591a\u6570\u636e</div>\n        <span class="weui-loadmore__tips"></span>\n      </div>\n    </div>\n    <# if (hasFooter) { #>\n      <div class="weui-half-screen-dialog__ft js_bottom_modal_ft"></div>\n    <# } #>\n  </div>\n  <# if (hasMask) { #>\n    <!-- \u900f\u660emask\uff0c\u7528\u4e8e\u9632\u6b62\u70b9\u900f -->\n    <div class="wx_bottom_modal_mask_fixed js_bottom_modal_mask_not_click"></div>\n\n    <!-- \u6709\u5e95\u8272\u7684mask -->\n    <div class="weui-mask wx_bottom_modal_mask js_bottom_modal_mask"></div>\n  <# } #>\n</div>',{hasBtn:t.hasBtn,btnText:t.btnText,extClass:t.extClass||"",hasMask:!t.removeMask,isTopic:!!t.isTopic,hasHeader:t.hasHeader,hasFooter:!!t.footerEl,btnSlot:t.btnSlot,autoHeight:t.autoHeight,maxHeight:Cn});const n=i.firstChild;this.scrollLock=!1,this.curScrollTop=0,this.touches={startX:0,startY:0,curX:0,curY:0,isScreenLeft:!1,direction:"",times:0},this.opt=t,this.rootEle=n,this.contentEle=e,this.contentAreaWrp=n.getElementsByClassName("js_bottom_modal_bd")[0],this.contentAreaWrp.appendChild(e),this.contentArea=n.getElementsByClassName("js_bottom_modal_content")[0],this.loading=this.rootEle.getElementsByClassName("js_modal_loading")[0],this.pullLoading=this.rootEle.getElementsByClassName("js_pull_loading")[0],this.endLine=this.rootEle.getElementsByClassName("js_modal_end_line")[0],this.enableGesture=!1,this.triggerEl=null,this.isAutoFocus=!0,t.removeMask||(this.maskEle=n.getElementsByClassName("js_bottom_modal_mask")[0],this.maskNotClick=n.getElementsByClassName("js_bottom_modal_mask_not_click")[0],t.transparentMask&&Tn(this.maskEle,"opacity",0)),t.hasHeader&&(this.headAreaWrp=n.getElementsByClassName("js_bottom_modal_hd")[0],this.submitBtn=this.headAreaWrp.getElementsByClassName("js_submit_bottom_modal")[0],this.closeBtn=this.headAreaWrp.getElementsByClassName("js_close_bottom_modal")[0],this.setTitle(t.title)),t.footerEl&&(this.footAreaWrp=n.querySelector(".js_bottom_modal_ft"),this.footAreaWrp.appendChild(t.footerEl)),"right"===t.animationType&&this.rootEle.classList.add("wx_bottom_modal_right"),document.body.appendChild(n),t.cb&&t.cb(),this.bindEvent()}bindEvent(){this.maskEle&&(this.opt.clickMask2Hide&&je.tap(this.maskEle,(()=>{this.hide()})),je.on(this.contentArea,"transitionend",(e=>{e.target!==this.contentArea||"transform"!==e.propertyName&&"-ms-transform"!==e.propertyName||(""!==this.contentArea.style.transform?this.contentArea.style.removeProperty("transform"):this.getShowStatus()?"function"==typeof this.opt.onShowAfterAnimation&&this.opt.onShowAfterAnimation():(Tn(this.maskNotClick,"visibility","hidden"),!this.opt.autoHeight&&Tn(this.contentArea,"top",this.opt.top)))})),je.tap(this.maskNotClick,(()=>setTimeout((()=>{this.hide(),Tn(this.maskNotClick,"visibility","hidden"),!this.opt.autoHeight&&Tn(this.contentArea,"top",this.opt.top)}),300))),je.on(this.maskEle,"touchmove",(e=>{e.preventDefault()}))),this.headAreaWrp&&(je.on(this.headAreaWrp,"touchstart",(e=>this.onTouchStart(e))),je.on(this.headAreaWrp,"touchmove",(e=>{e.preventDefault();const t=e.changedTouches[0];this.getTouchDirection(t)&&this.moveByDirection(t)})),je.on(this.headAreaWrp,"touchend",(e=>this.onTouchEnd(e)))),this.footAreaWrp&&(je.on(this.footAreaWrp,"touchstart",(e=>this.onTouchStart(e))),je.on(this.footAreaWrp,"touchmove",(e=>{e.preventDefault();const t=e.changedTouches[0];this.getTouchDirection(t)&&this.moveByDirection(t)})),je.on(this.footAreaWrp,"touchend",(e=>this.onTouchEnd(e)))),this.closeBtn&&je.on(this.closeBtn,"click",(()=>{this.hide()})),this.submitBtn&&je.on(this.submitBtn,"click",(()=>{xe.hasClass(this.submitBtn,An)||this.opt.btnClickCb&&this.opt.btnClickCb()})),je.on(this.contentAreaWrp,"scroll",(()=>{this.checkReachBoundary(),this.contentAreaWrp.scrollTop>0?xe.addClass(this.contentArea,"weui-half-screen-dialog_headline"):xe.removeClass(this.contentArea,"weui-half-screen-dialog_headline")})),this.headAreaWrp&&je.tap(this.headAreaWrp.getElementsByClassName("js_bottom_modal_title")[0],(()=>{this.opt.titleClickCb&&this.opt.titleClickCb()})),je.on(this.contentAreaWrp,"touchstart",(e=>this.onTouchStart(e))),je.on(this.contentAreaWrp,"touchmove",(e=>{const t=e.changedTouches[0];if(this.getTouchDirection(t))if("Y"===this.touches.direction){const n=this.contentAreaWrp,o=t.pageY,a=o-this.touches.startY,r=n.scrollTop<=0&&a>0,s=(i=n,Math.ceil(i.scrollTop+i.offsetHeight)>=i.scrollHeight&&a<0);r||s?(r&&!this.opt.onPullDownLoad&&this.move(o),e.preventDefault()):this.resetMovement(),this.touches.curY=o}else e.preventDefault(),this.moveByDirection(t);var i})),je.on(this.contentAreaWrp,"touchend",(e=>this.onTouchEnd(e))),je.on(window,"unload",(()=>{this.opt.removeMask||i.hide()}))}checkReachBoundary(e=!0,t=!0){this.scrollLock&&0!==this.contentAreaWrp.scrollTop||(this.scrollLock=!0,setTimeout((()=>{this.scrollLock=!1}),50),e&&!this.pullingDownLock&&this.contentAreaWrp.scrollTop<=0&&(this.opt.onPullDownLoad&&this.opt.onPullDownLoad(),this.pullingDownLock=!0),setTimeout((()=>{t&&!this.pullingUpLock&&this.contentAreaWrp.scrollTop+this.contentAreaWrp.offsetHeight+100>this.contentEle.offsetHeight&&(this.opt.onPullUpLoad&&this.opt.onPullUpLoad(),this.pullingUpLock=!0)}),100),this.opt.onScroll&&this.opt.onScroll(this.contentAreaWrp.scrollTop>this.curScrollTop?"up":"down"),this.curScrollTop=this.contentAreaWrp.scrollTop)}onTouchStart(e){const t=e.touches[0];this.touches={startX:t.pageX,startY:t.pageY,curX:t.pageX,curY:t.pageY,isScreenLeft:this.enableGesture&&t.pageX<=30,direction:"",times:0},this.contentArea.style.transition="none"}onTouchEnd(e){const t=this.touches.direction,i="X"===t?100:this.contentArea.offsetHeight/4,n=e.changedTouches[0]["page".concat(t)]-this.touches["start".concat(t)],o=this.contentArea.dataset;this.contentArea.style.removeProperty("transition"),o.distance&&(n>i?this.hide():this.contentArea.style.transform="translateY(0)",delete o.distance)}getTouchDirection(e){if(this.touches.direction)return!0;if(!this.touches.isScreenLeft)return this.touches.direction="Y",!0;this.touches.times++;const t=Math.abs(e.pageX-this.touches.startX),i=Math.abs(e.pageY-this.touches.startY);return this.touches.times>=3?(this.touches.direction=t>=i?"X":"Y",!0):t>=5&&t>=i?(this.touches.direction="X",!0):i>=5&&(this.touches.direction="Y",!0)}moveByDirection(e){const t=this.touches.direction,i=e["page".concat(t)];i-this.touches["start".concat(t)]>0?this.move(i):this.resetMovement(),this.touches["cur".concat(t)]=i}move(e){if(this.opt.sideslip2Hide&&"X"===this.touches.direction||this.opt.scroll2Hide&&"Y"===this.touches.direction){const t=this.contentArea.dataset;t.distance=1*(t.distance||0)+e-this.touches["cur".concat(this.touches.direction)],this.contentArea.style.transform="translateY(".concat(t.distance,"px)")}}resetMovement(){delete this.contentArea.dataset.distance,this.contentArea.style.removeProperty("transform")}show(e,t,n,a=!0){xe.addClass(document.body,In),this.triggerEl=n||window.event&&window.event.target,this.isAutoFocus=a,this.getShowStatus()||(e||this.opt.autoHeight||Tn(this.contentArea,"top",this.opt.top),Tn(this.contentArea,"visibility","visible"),xe.addClass(this.rootEle,"wx_bottom_modal_show"),this.setAriaHidden(!1),this.contentArea.focus(),this.maskEle&&this.opt.clickMask2Hide&&Tn(this.maskNotClick,"visibility","visible"),this.opt.removeMask||i.show({alpha:this.opt.transparentMask?0:.6,callback:e=>{e&&"function"==typeof this.opt.onShowNavShadow&&this.opt.onShowNavShadow()},onClick:()=>{this.hide()}}),this.opt.sideslip2Hide&&(fe.os.ios?Ie.invoke("handleDeviceInfo",{action:"disableInteractivePop",disable:!0},(e=>{/:ok$/.test(e.err_msg)&&(this.enableGesture=!0)})):o.disable({onGoBack:()=>{this.hide()},onDisable:()=>{this.enableGesture=!0},onEnable:()=>{this.enableGesture=!1}})),e&&(xe.addClass(this.rootEle,"wx_bottom_modal_form"),Tn(this.contentArea,"top","25px")),setTimeout((()=>{e||"right"===this.opt.animationType&&(Tn(this.contentArea,"-ms-transform","translateX(0)"),Tn(this.contentArea,"transform","translateX(0)"))})),e&&(setTimeout((()=>{"bottom"===this.opt.animationType?Tn(this.contentArea,"top","100%"):Tn(this.contentArea,"top",this.opt.top),xe.removeClass(this.rootEle,"wx_bottom_modal_form"),setTimeout((()=>{Tn(this.contentArea,"top",this.opt.top),"right"===this.opt.animationType&&(Tn(this.contentArea,"-ms-transform","translateX(0)"),Tn(this.contentArea,"transform","translateX(0)"))}))}),50),fe.os.ios?t.focus():(this.tmpInputEle||(this.tmpInputEle=t.cloneNode(!0)),this.tmpInputEle.style.opacity=0,this.tmpInputEle.style.position="fixed",this.tmpInputEle.style.top=0,this.tmpInputEle.style.zIndex="-1",document.body.appendChild(this.tmpInputEle),setTimeout((()=>{t.focus(),this.opt.makeInputEleBigger&&this.opt.makeInputEleBigger(),document.body.removeChild(this.tmpInputEle)}),300),this.tmpInputEle.focus()),fe.os.ios&&!this.hasBindInputEvent&&this.opt.makeFakeInputEle&&this.opt.removeInputEle&&(this.hasBindInputEvent=!0,je.on(t,"focus",(()=>{setTimeout((()=>{t.style.opacity=1,this.opt.removeInputEle()}),50)})),je.on(t,"blur",(()=>{this.opt.makeFakeInputEle(),t.style.opacity=0})))),this.opt.onShow&&this.opt.onShow())}hide(e){xe.removeClass(document.body,In),e&&Tn(this.maskNotClick,"visibility","hidden"),this.getShowStatus()&&(this.contentArea.style.removeProperty("-ms-transform"),this.contentArea.style.removeProperty("transform"),xe.removeClass(this.rootEle,"wx_bottom_modal_show"),this.setAriaHidden(!0),this.isAutoFocus&&function(e){if(!(e&&e instanceof HTMLElement))return!1;const t=window.getComputedStyle(e);return 0!==t.width&&0!==t.height&&0!==t.opacity&&"none"!==t.display&&"hidden"!==t.visibility&&null!==e.offsetParent}(this.triggerEl)&&(this.triggerEl.setAttribute("tabindex","0"),this.triggerEl.focus()),this.opt.removeMask||i.hide(),this.opt.sideslip2Hide&&(fe.os.ios?Ie.invoke("handleDeviceInfo",{action:"disableInteractivePop",disable:!1},(e=>{/:ok$/.test(e.err_msg)&&(this.enableGesture=!1)})):o.enable({onEnable:()=>{this.enableGesture=!1}})),this.opt.onHide&&this.opt.onHide())}disableBtn(){this.submitBtn&&xe.addClass(this.submitBtn,An)}enableBtn(){this.submitBtn&&xe.removeClass(this.submitBtn,An)}finishPullUpLoad(){this.pullingUpLock=!1}finishPullDownLoad(){this.pullingDownLock=!1}setTitle(e){this.headAreaWrp&&("string"==typeof e?this.headAreaWrp.getElementsByClassName("js_bottom_modal_title")[0].innerHTML=e:"object"==typeof e&&e.innerHTML&&(this.headAreaWrp.getElementsByClassName("js_bottom_modal_title")[0].innerHTML=e.innerHTML))}scrollTo(...e){this.contentAreaWrp.scrollTo(...e)}getRootEle(){return this.rootEle}getBdEle(){return this.contentAreaWrp}getScrollEle(){return this.contentAreaWrp}setCloseBtnStyle(e){if(this.closeBtn){const t=this.closeBtn.getElementsByTagName("i")[0],i="weui-icon-close-thin",n="weui-icon-back-arrow-thin";"back"===e?(xe.removeClass(t,i),xe.addClass(t,n)):(xe.removeClass(t,n),xe.addClass(t,i))}}getShowStatus(){return xe.hasClass(this.rootEle,"wx_bottom_modal_show")}showLoading(){Tn(this.loading,"display","block")}hideLoading(){Tn(this.loading,"display","none")}showPullUpLoading(){this.contentAreaWrp.appendChild(this.pullLoading),Tn(this.pullLoading,"display","block")}hidePullUpLoading(){Tn(this.pullLoading,"display","none")}showPullDownLoading(){this.contentAreaWrp.insertBefore(this.pullLoading,this.contentAreaWrp.firstChild),Tn(this.pullLoading,"display","block")}hidePullDownLoading(){Tn(this.pullLoading,"display","none")}showEndLine(){this.contentAreaWrp.appendChild(this.endLine),Tn(this.endLine,"display","block")}setAriaHidden(e){this.contentArea.setAttribute("aria-hidden",e.toString())}disablePullDownLoad(){this.opt.onPullDownLoad=null}}const Pn=document.getElementsByTagName("mp-qa")[0];let Dn,jn,Bn,On,Nn,Mn;const Ln={};let qn,Wn,zn,Fn,Hn=0,Un=0,Kn=0,Vn="";const Jn=10,$n="answerList",Gn="myAnswerList",Yn="praised",Xn="modalWriteAnswerClass",Qn="25px",Zn={__biz:Pn&&Pn.dataset.bizuin,question_id:Pn&&Pn.dataset.id,qna_sn:Pn&&function(e){let t;if(window.qnaCardData)try{t=JSON.parse(window.qnaCardData);const i=t.list;if(i&&i.length)for(let t=0;t<i.length;t++)if(e===i[t].question_id)return i[t].qna_sn}catch(e){}return""}(Pn.dataset.id)},ei={},vi={renderQaCard:function(e={}){Pn&&(Zn.mid=e.mid,Zn.idx=e.idx,Ln.userUin=e.userUin,Ln.biz=e.biz,Ln.itemShowType=e.itemShowType,Ln.enterId=e.enterId,Ln.scene=e.scene,Ln.subScene=e.subScene,Ln.sessionId=e.sessionId,Dn=e.isLogin,ci({action:"get_qna_info",successCb(e,t){let i,n,o,r;const s=t.base_resp.ret,d=168001===s,l=t.qna_info&&t.qna_info.question_info;d?Pn.innerHTML=Be.tmpl(bn,{qaDeleted:d}):0===s&&("1"===ge.getQuery("js_my_answer")&&(bi(),ii(4)),e&&e.answer_list&&e.answer_list.length&&(o=si(e.answer_list,!1).answerListHtml,n=e.answer_list.length,e.left_answer_cnt&&(i="\u4f59\u4e0b#value#\u6761\u8ba8\u8bba\u5185\u5bb9".replace("#value#",e.left_answer_cnt))),1===l.can_answer_type&&0===t.qna_info.is_fans?r="\u4f5c\u8005\u5df2\u8bbe\u7f6e\u5173\u6ce8\u540e\u624d\u53ef\u53c2\u4e0e\u8ba8\u8bba":2===l.can_answer_type&&0===t.qna_info.is_fans_days&&(r="\u4f5c\u8005\u5df2\u8bbe\u7f6e\u5173\u6ce87\u5929\u540e\u624d\u53ef\u53c2\u4e0e\u8ba8\u8bba"),Pn.innerHTML=Be.tmpl(bn,{qaDeleted:d,answerCount:n,leftAnswerCnt:i,answerListStr:o,disableAnswerWord:r,title:a.encode(l.question_title.htmlEncode()),nickname:l.biz_info.nickname,isLogin:Dn}),jn=Rn(Pn,"js_more_answer_entry"),function(){function e(){if(t)return;const e=Pn.firstChild,i=c.getOffset(e).offsetTop,n=Oe.getScrollTop();n+Oe.getInnerHeight()>=i&&n<=i+e.offsetHeight&&(ai({EventType:1}),ii("0"),t=!0)}let t;je.on(Pn,"tap",".js_get_more_reply",(e=>{const t=e.delegatedTarget.dataset.answerid;ei[t]?yi():(yi(!0,t),ei[t]=!0)})),je.on(document.body,"click",".js_qa_write_answer",(e=>{qn=!1,bi(xe.hasClass(e.delegatedTarget,Xn)),ii(2)})),je.on(document.body,"click",".js_write_reply",(e=>{const t=e.delegatedTarget,i=t.parentNode.parentNode;if(zn=t.dataset.answerid,Fn=t.dataset.answersn,i){const e=i.getElementsByClassName("js_qa_reply_content");Wn=i.getElementsByClassName("js_qa_my_reply").length,Vn=e.length?e[e.length-1].innerHTML:Rn(i,"js_qa_item_content").innerHTML}qn=zn,qn&&(bi(!0),ii(3))})),je.on(jn,"click",(()=>{yi(),ai({EventType:2}),ii(1)})),je.on(document.body,"tap",".js_qa_like",(e=>{const t=e.delegatedTarget,i=xe.hasClass(t,Yn);xe.toggleClass(t,Yn);const n=Rn(t,"js_like_num");let o=(parseInt(n.dataset.num,10)||0)+(i?-1:1);o=o>=0?o:0,n.innerHTML=Fe.formatReadNum(o),n.dataset.num=o,ii("2"===t.dataset.type?6:5),_e({url:"/mp/qna?action=like",type:"POST",data:Object.assign({like_type:t.dataset.type,op:i?2:1,answer_id:t.dataset.id,reply_id:t.dataset.id},Zn)})})),je.on(document.body,"tap",".js_delete_answer",(e=>{const t=e.delegatedTarget;ii(7),setTimeout((()=>{window.weui.confirm("\u786e\u5b9a\u5220\u9664\u8ba8\u8bba\u5185\u5bb9\u5417\uff1f",{buttons:[{label:"Cancel",type:"default"},{label:"Delete",type:"primary",onClick(){_e({url:"/mp/qna?action=del_answer",type:"POST",dataType:"json",data:Object.assign({answer_id:t.dataset.id},Zn),success(e){if(e&&e.base_resp&&0===e.base_resp.ret){const e=t.parentNode.parentNode.parentNode.parentNode;e&&xe.hasClass(e,"js_qa_list_item")&&e.parentNode.removeChild(e)}else oi()}})}}]})}),50)})),je.on(document.body,"tap",".js_delete_reply",(e=>{const t=e.delegatedTarget;ii(8),setTimeout((()=>{window.weui.confirm("Delete this reply?",{buttons:[{label:"Cancel",type:"default"},{label:"Delete",type:"primary",onClick(){_e({url:"/mp/qna?action=del_reply",type:"POST",dataType:"json",data:Object.assign({reply_id:t.dataset.id},Zn),success(e){if(e&&e.base_resp&&0===e.base_resp.ret){const e=t.parentNode.parentNode.parentNode;if(e&&xe.hasClass(e,"js_qa_reply_item")){const t=e.parentNode;t.removeChild(e),t.children.length||(ti(t.parentNode),ti(Rn(t.parentNode,"js_write_reply")),ni(Rn(t.parentNode.parentNode,"js_write_reply")))}}else oi()}})}}]})}),50)})),Oe.bindDebounceScrollEvent(e),e()}())}}))}},ki=function(e,t){let i=!1,n=e;if(e===t)i=!0;else for(;n.parentNode&&(n=n.parentNode,1!==n.nodeType||"body"!==n.tagName.toLowerCase());)if(n===t){i=!0;break}return i},xi=function(e){this.biz=e.biz,this.logid=e.logid,this.baseData=e.baseData,this.isPaySubscribe=e.isPaySubscribe,this.container=e.container,this.totalLength=this.container.innerText.length,this.initEvent()};xi.prototype.initEvent=function(){je.on(document,"copy",(()=>{const e=[].concat(this.baseData),t=this.getContentData().trim();t.length&&(e.push(this.totalLength),e.push(""),e.push(t.length),e.push(this.isPaySubscribe),this.report(e.join(",")))}))},xi.prototype.getContentData=function(){const e=document.getSelection(),t=this.container;let i="";if(e&&e.rangeCount){const n=e.getRangeAt(0);if(!n.collapsed){const o=n.startContainer,a=n.startOffset,r=n.endContainer,s=n.endOffset,c=ki(o,t),d=ki(r,t);if(c&&d)i=n.toString();else if(c||d){const e=document.createRange();e.setStart(o,a),e.setEnd(r,s),!d&&e.setEndAfter(t),!c&&e.setStartBefore(t),i=e.toString()}else if(e.containsNode&&e.containsNode(t,!0)){const e=document.createRange();e.setEndAfter(t),e.setStartBefore(t),i=e.toString()}}}return i},xi.prototype.report=function(e){const t=this.biz,i=this.logid;_e({url:"/mp/webcommreport?action=report&report_useruin=1&__biz="+t,type:"POST",data:{logid:i,buffer:e},async:!1,timeout:2e3})};let Ai=null;if(window.parent!==window){let e=function(e){let t;e.origin?t=e.origin:e.originalEvent&&(t=e.originalEvent.origin),/^http(s)?\:\/\/finance\.qq\.com$/.test(t)&&/^http(s)?\:\/\/gu\.qq\.com$/.test(t)&&/^http(s)?\:\/\/wzq\.tenpay\.com$/.test(t)&&e.source&&(e.data,document.getElementsByTagName("body")[0],document.getElementById("activity-name"),document.getElementById("meta_content"),document.getElementById("page-content"))};document.getElementsByTagName("html")[0].style.width="1px",document.getElementsByTagName("html")[0].style.minWidth="100%",document.getElementById("js_content"),document.getElementById("img-content");let t=document.getElementById("page-content");document.getElementsByClassName("rich_media_area_extra")[0].style.display="none",Ai=function(e){if(!t)return;let i=getComputedStyle(t);["http://finance.qq.com","http://gu.qq.com","https://gu.qq.com","https://wzq.tenpay.com","https://www.tentrees.cn/","https://sticker.weixin.qq.com"].forEach((t=>{window.parent.postMessage({name:e,data:parseFloat(i.height)},t)}))},Ai("pageHeight"),window.addEventListener("message",e,!1)}const Ii=Ai,Ci={copyright_top:0},Ri={card_click_report:Si,card_pv_report:function(){if("2"==__appmsgCgiData.copyright_stat){let e=Ei("copyright_info"),t=Ei("js_article");for(;e&&t!==e;)Ci.copyright_top+=e.offsetTop,e=e.offsetParent;je.on(window,"scroll",Ti),Ti()}}},Pi=document.getElementById("js_tags_preview_toast");let Di=null;const ji={init(e){if(1===window.reprint_style||2===window.reprint_style||3===window.reprint_style||1*e.dataset.len==0)return;const t=e=>{if(window.is_temp_url)Pi&&(Pi.style.display="",Di&&clearTimeout(Di),Di=setTimeout((()=>{Pi.style.display="none",Di=null}),3e3));else{const t={};let i=e.url;t.scene=window.source,t.subscene=window.subscene,t.sessionid=window.sessionid,t.enterid=window.enterid;let n=0;window.isPayTopic&&(n=0===window.isPaid?1:2),nt({eventType:2,albumId:e.album_id,albumType:0,tagSrc:e.tag_source,canPaid:window.isPayTopic,price:window.isPayTopic?window.payTopicPrice:0,ifPaid:n}),Ce.goUrl(i,Object.assign({},t,{scene:173,from_msgid:window.mid,from_itemidx:window.idx,count:3,nolastread:1}))}};if(xe.hasClass(e,"js_single")){const i=e.querySelector(".js_tag").dataset;je.on(e,"click",(()=>t(i)))}else je.on(e,"click",(i=>{let n=i.target;n&&n!==e&&!xe.hasClass(n,"js_tag")&&(n=n.parentNode),n&&xe.hasClass(n,"js_tag")&&t(n.dataset)}));const i=t=>{const n=Oe.getInnerHeight()+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop);e.offsetTop<n?("function"!=typeof t&&je.off(window,"scroll",i),Array.prototype.forEach.call(e.getElementsByClassName("js_tag"),(e=>{const t=e.dataset;let i=0;window.isPayTopic&&(i=0===window.isPaid?1:2),nt({eventType:1,albumId:t.album_id,albumType:0,tagSrc:t.tag_source,canPaid:window.isPayTopic,price:window.isPayTopic?window.payTopicPrice:0,ifPaid:i})}))):"function"==typeof t&&t()};i((()=>{je.on(window,"scroll",i)}))}},Bi=_t({name:"mp-album",filters:{htmlDecode:e=>"".concat(e).html(!1)},props:{albumTags:{type:Array,default:()=>[]}},computed:{showAlbum(){return this.albumTags.length>0}},mounted(){ji.init(this.$refs.albumArea)}},(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.showAlbum,expression:"showAlbum"}],ref:"albumArea",staticClass:"article-tag__list",attrs:{"data-len":e.albumTags.length}},[t("div",{staticClass:"article-tags"},e._l(e.albumTags,(function(i,n){return t("div",{key:n,staticClass:"article-tag__item-wrp js_tag weui-wa-hotarea js_wx_tap_highlight wx_tap_link",attrs:{"data-url":i.link.htmlDecode()||"/mp/publictag?action=get&tag_id=".concat(i.tagId,"&start=0"),"data-tag_id":i.tagId,"data-album_id":i.albumId,"data-tag_source":i.tagSource,role:"link",tabindex:"0"}},[t("span",{
staticClass:"article-tag__item"},[t("i",{staticClass:"weui-icon-album"}),e._v(e._s(e._f("htmlDecode")(i.title)))]),i.size>0?t("span",{staticClass:"article-tag__item-num"},[t("span",{attrs:{id:""}},[e._v(e._s(i.size))])]):e._e()])})),0)])}),[],!1,null,null,null,null).exports,Oi=[2390745668,3099420829,3872121626,3203738065,3072206507,3566970574,3002803029,3099387730,3559965496,3525314097,2390323860,3084276724,3289028514,3003793452,3003972371,2398512110,3071748654,3233018348,3095049467,3076061592,3273032305,3264278949,3086344434,3014829842,3294546013,2058310401,2397841479,2397640820,3282179238,3072107639,3521076442,3554888231,2397274880,2394106525,3077726226,2103095721,3593723769,2395186785,2393698643,3944000110,2397445840,2394144447,3082139483,3070806332,3016714421,3006879186,3213574124,3221398587,3078448935,3591999034,3551390431],Ni=["testrd","otherrd"];let Mi=0;try{Mi=1*window.atob(window.biz)}catch(e){}let Li={report_action:2,share_type:5};Ie.call("hideToolbar"),Ie.call("showOptionMenu");let Wi=msg_title.htmlDecode(),zi="",Fi=cdn_url_1_1||msg_cdn_url||ori_head_img_url||round_head_img,Hi=Fi,Ui=msg_link.htmlDecode(),Ki=msg_desc.htmlDecode();Ki=Ki||" ",Ki=Ki.replace(/<br\/>/g,"\n"),idx>1&&document.getElementById("js_content")&&ct<1446652800&&(Ki=document.getElementById("js_content").innerHTML.replace(/<\/?[^>]*\/?>/g,"").htmlDecode().replace(/^(\s*)|(\s*)$/g,"").substr(0,54)),window.isPayTopic&&(Ki="\u6536\u5f55\u4e8e\u4ed8\u8d39\u5408\u96c6"+window.payTopicTitle||""),Fi=Fi.compressCDNImgSize(),Hi=Hi.compressCDNImgSize(),malicious_title_reason_id&&(Wi=d.maliciousTitleMap[malicious_content_type][malicious_title_reason_id]||Wi,Ki=d.maliciousDescMap[malicious_content_type][malicious_title_reason_id]||Ki,1!=malicious_content_type&&(Fi="https://mmbiz.qlogo.cn/mmbiz_png/cVgP5bCElFiayFgbgEB9iaDt7hLicfz9RrXGM0LpaQ0TUic2gP7lbbqU3jCD8ibonicgIa3p99yjx1f1P26HChraeRUg/0?wx_fmt=png")),("1"==is_limit_user||window.cps_article_data)&&Ie.call("hideOptionMenu"),window.is_temp_url&&Ie.invoke("hideMenuItems",{menuList:["menuItem:share:timeline","menuItem:share:qq","menuItem:share:weiboApp","menuItem:share:facebook","menuItem:share:qzone","menuitem:share:weibo","menuItem:share:WeiboApp","menuItem:share:QZone","menuitem:facebook","menuItem:copyUrl","menuItem:share:email","menuitem:copy_url","menuitem:share:haokan"]},(function(){}));let $i="https://res.wx.qq.com/op_res/Fwh9olR917lxUMxpJVM5sCCyrQOJSm68IEt-HfL7vpc5-_etzmyuLg1kPdU6RNRX";const Xi={itemClassName:"album_read_directory_item",albumId:window.appmsg_album_info.id,pageCount:10,isPC:Ae.isWindows||Ae.isMac&&!Ae.isIOS,isInsertBlock:!1};let Qi;const Zi="&cur_album_id=".concat(Xi.albumId),eo=document.createElement("div");eo.style.height="1px";const io=e=>new RegExp("^".concat(location.protocol,"//")).test(e)?e:e.replace(/^.*\/\//,"".concat(location.protocol,"//")),oo=_t({name:"mp-keep-read",components:{[p.name]:p},data:()=>({isPC:Ae.isWindows||Ae.isMac&&!Ae.isIOS}),computed:{...m({appmsgAlbumInfo:e=>e.cgiData.appmsg_album_info,appmsgAlbumExtInfo:e=>{var t,i;return(null==(t=e.extRes)?void 0:t.appmsg_album_extinfo)||(null==(i=e.cgiData)?void 0:i.appmsg_atricle_album_info)}}),showCard(){return this.appmsgAlbumExtInfo&&(this.appmsgAlbumExtInfo.pre_article_link||this.appmsgAlbumExtInfo.next_article_link)}},watch:{appmsgAlbumExtInfo:{handler(){this.showCard&&this.$nextTick((()=>{this.initExposeReport()}))},immediate:!0}},methods:{onShow(){!fe.os.pc&&document.body.classList.add("page_no_scroll")},onHide(){!fe.os.pc&&document.body.classList.remove("page_no_scroll")},showBottomModal(){Qi?!this.isPC&&Qi.show():no(),this.isPC&&(this.$refs.albumKeepRead.style.overflow="visible",Qi.contentAreaWrp.style.height="355px",Qi.endLine.childNodes[3].style.background="var(--weui-BG-5)",this.$refs.pcPopoverContent.appendChild(Qi.contentAreaWrp))},jumpPrev(){let e;it({ActionType:2,SubActionType:1}),ot(12),e=this.appmsgAlbumExtInfo.pre_article_link.includes("#")?this.appmsgAlbumExtInfo.pre_article_link.replace("#","".concat(Zi,"&scene=189#")):this.appmsgAlbumExtInfo.pre_article_link+"".concat(Zi,"&scene=189"),location.href=io(e.replace(/&amp;/g,"&"))},jumpNext(){let e;it({ActionType:2,SubActionType:2}),ot(13),e=this.appmsgAlbumExtInfo.next_article_link.includes("#")?this.appmsgAlbumExtInfo.next_article_link.replace("#","".concat(Zi,"&scene=189#")):this.appmsgAlbumExtInfo.next_article_link+"".concat(Zi,"&scene=189"),location.href=io(e.replace(/&amp;/g,"&"))},gotoAlbumInfo(){if(it({ActionType:6}),ot(15),this.appmsgAlbumInfo.link){const e=this.appmsgAlbumInfo.link.replace("#wechat_redirect","&subscene=159&subscene=".concat(window.source,"&scenenote=").concat(encodeURIComponent(window.location.href),"&nolastread=1#wechat_redirect"));He.openUrlWithExtraWebview(e.htmlDecode())}},initExposeReport(){function e(){if(t)return;const e=c.getOffset(i).offsetTop||0,o=Oe.getScrollTop();o+Oe.getInnerHeight()>=e+n&&o<=e+n&&(it({ActionType:1}),ot(11),t=!0)}let t;const{albumKeepRead:i}=this.$refs,n=i&&i.offsetHeight/2||0;Oe.bindDebounceScrollEvent(e),e()}}},(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.showCard,expression:"showCard"}],ref:"albumKeepRead",staticClass:"appmsg_card_context album_read_card"},[e.showCard?[t("div",{staticClass:"album_read_hd weui-flex",attrs:{role:"button"},on:{click:function(t){return t.stopPropagation(),e.showBottomModal.apply(null,arguments)}}},[e.isPC?t("mp-popover",{attrs:{"wrp-class":"popover-wrp-class","ext-class":"popover-ext-class"},on:{show:e.onShow,hide:e.onHide}},[t("div",{staticClass:"album_read_source",attrs:{slot:"target"},slot:"target"},[t("span",{staticClass:"wx_tap_link js_album_directory__name"},[e._v(e._s(e.appmsgAlbumInfo.title.htmlDecode())+" \xb7 \u76ee\u5f55")]),t("i",{staticClass:"weui-icon-read"})]),t("div",{staticClass:"album_name_title",attrs:{slot:"title"},on:{click:function(t){return t.stopPropagation(),e.gotoAlbumInfo.apply(null,arguments)}},slot:"title"},[e._v("#"+e._s(e.appmsgAlbumInfo.title.htmlDecode()))]),t("div",{ref:"pcPopoverContent"})]):t("div",{staticClass:"album_read_source"},[t("span",{staticClass:"wx_tap_link js_album_directory__name"},[e._v(e._s(e.appmsgAlbumInfo.title.htmlDecode())+" \xb7 \u76ee\u5f55")]),t("i",{staticClass:"weui-icon-read"})])],1),t("div",{staticClass:"album_read_bd weui-flex"},[e.appmsgAlbumExtInfo.pre_article_link?t("span",{staticClass:"album_read_nav_item album_read_nav_prev weui-flex__item wx_tap_link js_wx_tap_highlight",attrs:{role:"button"},on:{click:e.jumpPrev}},[t("span",{staticClass:"album_read_nav_inner"},[t("span",{staticClass:"album_read_nav_btn"},[e._v("\u4e0a\u4e00\u7bc7")]),t("span",{staticClass:"album_read_nav_title"},[t("span",{staticClass:"album_read_nav_title_inner"},[e._v(e._s(e.appmsgAlbumExtInfo.pre_article_title.htmlDecode()||""))])])])]):e._e(),e.appmsgAlbumExtInfo.next_article_link?t("span",{staticClass:"album_read_nav_item album_read_nav_next weui-flex__item wx_tap_link js_wx_tap_highlight",attrs:{role:"button"},on:{click:e.jumpNext}},[t("span",{staticClass:"album_read_nav_inner"},[t("span",{staticClass:"album_read_nav_btn"},[e._v("\u4e0b\u4e00\u7bc7")]),t("span",{staticClass:"album_read_nav_title"},[t("span",{staticClass:"album_read_nav_title_inner"},[e._v(e._s(e.appmsgAlbumExtInfo.next_article_title.htmlDecode()||""))])])])]):e._e()])]:e._e()],2)}),[],!1,null,null,null,null).exports,ao=_t({name:"mp-pay-btn",props:{buttonText:{type:String,default:"\u5fae\u4fe1\u8c46\u5151\u6362"}},computed:{...m(["cgiData"]),...m("mp-pay-read",["loading","isInMiniProgram"])},methods:{..._("mp-pay-read",["payFunc"])}},(function(){var e=this,t=e._self._c;return t("button",{ref:"payPanelBtn",staticClass:"js_pay_btn js_article_bottom weui-btn weui-btn_loading",class:{btn_disabled:e.isInMiniProgram},on:{click:e.payFunc}},[e.loading?t("div",{staticClass:"js_button_loading"},[e._m(0),e._v(" Loading... ")]):t("div",[t("i",{staticClass:"pay__icon-wecoin"}),t("span",{staticClass:"price js_pay_fee",attrs:{id:"js_pay_fee_normal"}},[e._v(e._s(e.cgiData.wecoin_amount))]),e._v("\xa0"+e._s(e.buttonText)+" ")])])}),[function(){var e=this._self._c;return e("span",{staticClass:"weui-primary-loading weui-primary-loading_transparent"},[e("i",{staticClass:"weui-primary-loading__dot"})])}],!1,null,null,null,null).exports,ro=8+window.parseInt(window.getComputedStyle(document.documentElement).getPropertyValue("--sab"));let so=0,co=0,lo=!1,uo=0;const po=window.scrollY,mo=window.innerHeight/3,_o=_t({name:"mp-pay-gift",data:()=>({giftBarTitleText:"\u53ef\u8d60\u9001\u7ed9\u4e00\u4f4d\u670b\u53cb\u514d\u8d39\u9605\u8bfb"}),computed:{...m(["cgiData"]),...m("mp-pay-read",["paySubscribeInfo"])},mounted(){const e=window.localStorage.getItem("paySuc"),t=this.$refs.giftBar.getBoundingClientRect().top;"1"===e&&t>window.innerHeight?(window.localStorage.setItem("paySuc","0"),this.$refs.giftBar.className="pay__gift-send show",this.giftBarTitleText="\u5df2\u5151\u6362\uff0c\u53ef\u8d60\u9001\u7ed9\u4e00\u4f4d\u670b\u53cb",h.reportSend(2),je.on(window,"scroll",this.scrollHandler),je.on(this.$refs.giftBar,"touchstart",this.touchStartHandler),je.on(this.$refs.giftBar,"touchmove",this.touchMoveHandler),je.on(this.$refs.giftBar,"touchend",this.touchEndHandler)):!xe.hasClass(this.$refs.giftBar,"show")&&t<=window.innerHeight&&(this.$refs.giftBar.className="pay__gift-send pay__gift-send_static",h.reportSend(4))},beforeDestroy(){je.off(window,"scroll",this.scrollHandler)},methods:{present(){if(fe.os.iphone||fe.os.ipad||fe.os.android){let e=this.paySubscribeInfo.gift_url.html(),t="";const i=e.indexOf("#");-1!==i&&(t=e.substring(i),e=e.substring(0,i)),xe.hasClass(this.$refs.giftBar,"pay__gift-send_static")?h.reportSend(5):h.reportSend(3),Ce.goUrl("".concat(e,"&sessionid=").concat(this.cgiData.sessionid,"&enterid=").concat(this.cgiData.enterid,"&scene=").concat(this.cgiData.source,"&subscene=").concat(this.cgiData.subscene,"&biz=").concat(this.cgiData.biz,"&mid=").concat(this.cgiData.mid,"&idx=").concat(this.cgiData.idx).concat(t))}else window.weui.alert("\u8bf7\u4f7f\u7528\u79fb\u52a8\u7aef\u5fae\u4fe1\u6253\u5f00")},touchStartHandler(e){xe.hasClass(this.$refs.giftBar,"show")&&(lo=!0,uo=e.touches[0].clientY,so=co)},touchMoveHandler(e){e.preventDefault();const t=e.touches[0].clientY-uo;xe.hasClass(this.$refs.giftBar,"show")&&lo&&(t+so>=0&&t+so<=ro?(this.$refs.giftBar.style.transform="translate3d(0, ".concat(t+so,"px, 0)"),co=t+so):t+so>ro?(this.$refs.giftBar.style.transform="translate3d(0, ".concat(ro,"px, 0)"),co=ro):t+so<0&&(this.$refs.giftBar.style.transform="translate3d(0, 0, 0)",co=0))},touchEndHandler(){lo=!1,xe.hasClass(this.$refs.giftBar,"show")&&co===ro&&(this.$refs.giftBar.className="pay__gift-send",je.off(this.$refs.giftBar,"touchstart",this.touchStartHandler),je.off(this.$refs.giftBar,"touchmove",this.touchMoveHandler),je.off(this.$refs.giftBar,"touchend",this.touchEndHandler))},scrollHandler(){const e=document.getElementById("js_pay_wall_wrap").getBoundingClientRect();e.top+e.height-48<=window.innerHeight?(this.giftBarTitleText="\u53ef\u8d60\u9001\u7ed9\u4e00\u4f4d\u670b\u53cb\u514d\u8d39\u9605\u8bfb",this.$refs.giftBar.className="pay__gift-send pay__gift-send_static",this.$refs.giftBar.style.transform="translate3d(0, 0, 0)",je.off(this.$refs.giftBar,"touchstart",this.touchStartHandler),je.off(this.$refs.giftBar,"touchmove",this.touchMoveHandler),je.off(this.$refs.giftBar,"touchend",this.touchEndHandler),je.off(window,"scroll",this.scrollHandler),h.reportSend(4)):window.scrollY-po>mo&&(this.$refs.giftBar.className="pay__gift-send")}}},(function(){var e=this,t=e._self._c;return t("div",{ref:"giftBar",staticClass:"pay__gift-send_static pay__gift-send",attrs:{id:"js_pay_gift_bar"}},[t("div",{staticClass:"pay__gift-send-content"},[t("div",{staticClass:"pay__gift-send-title",attrs:{id:"js_pay_gift_bar_title"}},[e._v(" "+e._s(e.giftBarTitleText)+" ")])]),t("div",{staticClass:"pay__gift-send-btn",attrs:{id:"js_send_pay_gift"},on:{click:e.present}},[e._v("\u53bb\u8d60\u9001")])])}),[],!1,null,null,null,null).exports,ho=_t({name:"mp-pay-read-qrcode",computed:{src:()=>fe.os.pc?"/mp/paysubqrcode?action=get_article_qrcode&__biz=".concat(window.biz,"&mid=").concat(window.mid,"&idx=").concat(window.idx,"&sn=").concat(window.sn,"#wechat_redirect"):""}},(function(){var e=this,t=e._self._c;return t("div",{staticClass:"pay__notice-qrcode js_pay_qrcode_wrap js_pay_fee_display"},[t("div",{staticClass:"pay__qrcode-wrp"},[t("img",{staticClass:"js_pay_qrcode",attrs:{src:e.src}})]),t("div",{staticClass:"pay__qrcode-title"},[e._v("\u5fae\u4fe1\u626b\u4e00\u626b\u4ed8\u8d39\u9605\u8bfb\u672c\u6587")])])}),[],!1,null,null,null,null).exports,fo=_t({name:"mp-pay-read-bottom",components:{[ho.name]:ho,[ao.name]:ao,[f.name]:f},props:{payTopicNoticeText:{type:String,default:""},visible:{type:Boolean}},data:()=>({addLargeFontStyle:!1,bottomHeight:0,showBottomBar:!!window.is_login}),computed:{...m(["cgiData"]),...m("mp-pay-read",["wecoinText","loading","payReadBottomVisible"]),...m("mp-stream",["articleFoldStatus"]),...g("mp-pay-read",["topicLink"]),...g("mp-stream",["hasInteractData","recommendShow","recommendGray","recommendFriendNum","friendSeenInfo","showFriendSeen","hasRecommended"]),payBtnText(){return this.showBottomBar?"\u8bfb\u5168\u6587":"\u5fae\u4fe1\u8c46\u5151\u6362"},streamFriendsShow(){return!!(0!==this.showFriendSeen&&this.recommendShow&&1!==this.recommendGray&&this.recommendFriendNum>0)},isPcWechat:()=>Ae.isWindowsWechat||Ae.isMacWechat},watch:{articleFoldStatus(e){!e&&this.showBottomBar&&this.$nextTick((()=>{this.judgeHeight("100")}))},hasInteractData(){this.$nextTick((()=>{this.judgeHeight("100")}))}},created(){this.unwatchVisible=this.$watch("visible",(e=>{var t,i,n;if(e){const e=null==(i=null==(t=this.$refs.button)?void 0:t.$el)?void 0:i.getBoundingClientRect().height,o=null==(n=this.$refs.content)?void 0:n.getBoundingClientRect().height;this.addLargeFontStyle=o/e>108/52,this.unwatchVisible()}}))},mounted(){this.showBottomBar&&(Ie.on("menu:setfont",(e=>{this.judgeHeight(e.fontScale)})),this.$nextTick((()=>{this.judgeHeight("100")})))},methods:{...w("mp-stream",["setStreamFriendsListStatus"]),..._("mp-pay-read",["goBuyTopic"]),getBottomBarHeight(){const e=document.getElementById("js_article_bottom_bar");return e?Math.floor(null==e?void 0:e.getBoundingClientRect().height):0},judgeHeight(e="100"){setTimeout((()=>{var t,i,n;let o=!1;if("100"===e){const e=null==(i=null==(t=this.$refs.button)?void 0:t.$el)?void 0:i.getBoundingClientRect().height;o=(null==(n=this.$refs.content)?void 0:n.getBoundingClientRect().height)/e>.7}this.addLargeFontStyle=1*e>=140||o,this.bottomHeight=this.getBottomBarHeight()}),100)},streamFriendsClick(){this.setStreamFriendsListStatus(!0)}}},(function(){var e=this,t=e._self._c;return 1!==e.cgiData.isPayTopic?t("div",{staticClass:"pay pay__notice",class:{pay__notice_largeFont:e.addLargeFontStyle,"pay__notice_new pay_new":e.showBottomBar,pay__notice_hiden:e.articleFoldStatus},style:{bottom:e.bottomHeight+"px",padding:(e.isPcWechat,"0px 20px 1px")},attrs:{id:"js_pay_panel_bottom"}},[t("div",{staticClass:"pay__notice-intro"},[e.streamFriendsShow?t("mp-stream-friends",{attrs:{isPayArticle:!0,showFriendSeen:e.showFriendSeen,likeTipsInfo:e.friendSeenInfo,recommendFriendNum:e.recommendFriendNum,isRecommended:e.hasRecommended,payReadBottomVisible:e.payReadBottomVisible},on:{"stream-friends-click":e.streamFriendsClick}}):t("div",{ref:"content",staticClass:"pay__intro-content"},[t("p",{staticClass:"pay__notice-title"},[e._v(" \u53ef\u8bd5\u8bfb"+e._s(e.cgiData.preview_percent)+"% ")]),t("div",{staticClass:"pay__notice-desc",attrs:{id:"js_pay_panel_bottom_wecoin_tips"}},[e._v(" "+e._s(e.wecoinText)+" ")])]),t("div",{staticClass:"pay__notice-btn-wrp",style:{width:"".concat(e.streamFriendsShow&&!e.payReadBottomVisible?"0":""),opacity:"".concat(e.streamFriendsShow&&!e.payReadBottomVisible?"0":1)}},[t("mp-pay-btn",{ref:"button",attrs:{"button-text":e.payBtnText}}),t("mp-pay-read-qrcode")],1)],1)]):t("div",{staticClass:"pay pay__notice pay__topic-notice",class:{"pay_new pay__notice_new":e.showBottomBar,pay__notice_hiden:e.articleFoldStatus},style:{bottom:e.bottomHeight+"px"},attrs:{id:"js_pay_topic_panel_bottom"}},[t("div",{staticClass:"pay__notice-intro"},[e.streamFriendsShow?t("mp-stream-friends",{attrs:{isPayArticle:!0,showFriendSeen:e.showFriendSeen,likeTipsInfo:e.friendSeenInfo,recommendFriendNum:e.recommendFriendNum,isRecommended:e.hasRecommended,payReadBottomVisible:e.payReadBottomVisible},on:{"stream-friends-click":e.streamFriendsClick}}):t("div",{staticClass:"pay__intro-content"},[t("div",{staticClass:"pay__notice-desc"},[e._v(" "+e._s(e.payTopicNoticeText)+" ")]),e.showBottomBar?e._e():t("p",{staticClass:"pay__notice-title"},[e._v(e._s(e.cgiData.payTopicTitle))])]),t("div",{staticClass:"pay__notice-btn-wrp",style:{width:"".concat(e.streamFriendsShow&&!e.payReadBottomVisible?"0":""),opacity:"".concat(e.streamFriendsShow&&!e.payReadBottomVisible?"0":1)}},[t("button",{staticClass:"js_pay_topic_btn weui-btn",class:{btn_disabled:e.cgiData.payTopicRemoveFlag>0},attrs:{"data-url":e.topicLink},on:{click:e.goBuyTopic}},[e._v(" \u5408\u96c6\u8be6\u60c5 ")]),t("mp-pay-read-qrcode")],1)],1)])}),[],!1,null,null,null,null).exports,go=_t({name:"mp-buy-wecoin-btn",computed:{...m("mp-pay-read",["wecoinRemain"])}},(function(){var e=this,t=e._self._c;return t("div",{staticClass:"pay__wecoin-entry"},[t("i",{staticClass:"pay__icon-wecoin"}),t("span",{staticClass:"price",attrs:{id:"js_wecoin_remain"}},[e._v(e._s(e.wecoinRemain))])])}),[],!1,null,null,null,null).exports,wo=_t({name:"mp-pay-edu-tips",components:{[y.name]:y},computed:{...m(["cgiData"]),...m("mp-pay-read",["payEduTips"]),top:()=>window.innerHeight-467},methods:{...w("mp-pay-read",["setWecoinRemain","setPayLock","setPayEduTips"]),hideEduTipsCb(){this.$refs.bottomModal.hide(),b.show(),Ie.invoke("getWCCoinBalance",{},(e=>{b.hide(),e&&e.err_msg&&e.err_msg.indexOf("ok")>-1?(this.setWecoinRemain(e.balance),this.$emit("show-confirm")):this.setPayLock(!1)})),this.setPayEduTips({...this.payEduTips,firstWecoinRecharge:0})},show(){this.$refs.bottomModal.show()}}},(function(){var e=this,t=e._self._c;return t("mp-bottom-modal",{ref:"bottomModal",attrs:{"ext-class":"pay__edu-modal","has-header":!1,top:"".concat(e.top,"px")},on:{hide:e.hideEduTipsCb},scopedSlots:e._u([{key:"footer",fn:function(){return[t("a",{staticClass:"weui-btn weui-btn_default",on:{click:e.hideEduTipsCb}},[e._v("OK")])]},proxy:!0}])},[t("div",{staticClass:"pay__wecoin-edu-profile"},[t("div",{staticClass:"pay__wecoin-edu-title"},[e._v(" \u53ef\u5728\u300c\u6211>\u4e2a\u4eba\u4fe1\u606f>\u5fae\u4fe1\u8c46\u300d\u9875\u9762\uff0c\u67e5\u770b\u5fae\u4fe1\u8c46\u6d88\u8d39\u660e\u7ec6\u3002 ")]),t("div",{staticClass:"pay__wecoin-edu-pic"},[t("div",{staticClass:"pay__wecoin-edu-avatar"},[t("img",{attrs:{src:e.payEduTips&&e.payEduTips.userImgUrl}})]),t("div",{staticClass:"pay__wecoin-edu-nic"},[e._v(" "+e._s(e.payEduTips&&e.payEduTips.userNickname)+" ")])])])])}),[],!1,null,null,null,null).exports,yo=_t({name:"mp-pay-confirm",components:{[y.name]:y,[wo.name]:wo,[go.name]:go},props:{title:{type:String,default:""}},data:()=>({agreeStat:!1}),computed:{...m(["cgiData"]),...m("mp-pay-read",["wecoinRemain","payEduTips","encodeRespBuff"]),needTopup(){return this.wecoinRemain<this.cgiData.wecoin_amount},btnDisabled(){return this.needTopup&&!1===this.agreeStat},wecoinTitle(){return this.needTopup?"\u5fae\u4fe1\u8c46\u4e0d\u8db3\uff0c\u5151\u6362\u5168\u6587\u8fd8\u9700":"\u5151\u6362\u5168\u6587"},wecoinPrice(){return this.needTopup?this.cgiData.wecoin_amount-this.wecoinRemain:this.cgiData.wecoin_amount},wecoinTips(){return"\u552e\u4ef7 ".concat(this.wecoinPrice/10,"\u5143")}},methods:{...w("mp-pay-read",["setPayLock","setWecoinRemain"]),..._("mp-pay-read",["paySuc","pollCheck"]),onLinkClick(e){e&&e.preventDefault(),Ge.reportPayAppmsg(17),Ie.invoke("openUrlWithExtraWebview",{url:"https://kf.qq.com/touch/product/WXDB_app.html",openType:1})},onTermClick(e){"A"===e.target.tagName&&Ie.invoke("openUrlWithExtraWebview",{url:this.cgiData.paySubscribeInfo.agreement_url.htmlDecode(),openType:1})},onTermCheckboxToggle(e){const{footerBtn:t}=this.$refs;e.target.checked?t.removeAttribute("disabled"):t.setAttribute("disabled","disabled")},show(){this.$refs.bottomModal.show()},hide(){this.$refs.bottomModal.hide()},onFooterBtnClick(){if(this.$refs.footerBtn.getAttribute("disabled"))return;const{wecoin_amount:e}=this.cgiData;we.log("[Appmsg] pay process 5 wecoinAmountRemain=".concat(this.wecoinRemain," wecoin_amount=").concat(e)),this.needTopup?(this.hide(),setTimeout((()=>{Ge.reportPayAppmsg(19),we.log("[Appmsg] pay process 6.1 buyWCCoin");const e=e=>{b.hide(),e&&e.err_msg&&e.err_msg.indexOf("ok")>-1&&(this.setWecoinRemain(e.balance),this.needTopup?this.show():this.consumeWCCoin())},t={businessId:2,scene:4,panelShowType:"present",diffWecoinCount:this.cgiData.wecoin_amount>this.wecoinRemain?this.cgiData.wecoin_amount-this.wecoinRemain:0};Ae.isAndroid&&Ae.gtVersion("8.0.18",!0)&&(t.mode=2,t.agreementVersion=this.cgiData.paySubscribeInfo.agreement_version,t.customCount=this.cgiData.wecoin_amount-this.wecoinRemain,t.productId=this.cgiData.paySubscribeInfo.recharge_product_id),Ie.invoke("buyWCCoin",t,(t=>{t&&t.err_msg&&(t.err_msg.indexOf("ok")>-1?Ae.isIOS&&Ae.ltVersion("8.0.17")||Ae.isAndroid&&Ae.ltVersion("8.0.17")?this.payEduTips.firstWecoinRecharge?this.$refs.eduTipsModal.show():(b.show(),Ie.invoke("getWCCoinBalance",{},e)):Ie.invoke("showWCCoinFirstBuyCoinTips",{alwaysDarkMode:!1},(()=>{b.show(),Ie.invoke("getWCCoinBalance",{},e)})):t.err_msg.indexOf("cancel")>-1&&this.show())}))}),250)):(this.hide(),this.consumeWCCoin())},consumeWCCoin(){const{encodeRespBuff:e}=this;we.log("[Appmsg] pay process 3 can_use_wecoin=".concat(this.cgiData.can_use_wecoin)),we.log("[Appmsg] pay process 4 on payBtn tap"),b.show();const t=Math.round(new Date/1e3);Ie.invoke("consumeWCCoin",{buff:e,businessId:2},(i=>{this.setPayLock(!1),i&&i.err_msg&&i.err_msg.indexOf("ok")>-1?(Ge.reportPay(t,1,e),this.pollCheck()):i&&i.err_msg&&i.err_msg.indexOf("fail")>-1&&(Ge.reportPay(t,3,e,i.err_msg,i.err_code,i.err_domain),window.weui.alert("\u5151\u6362\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"))}))},buyWecoin(){this.hide();const e=e=>{b.hide(),e&&e.err_msg&&e.err_msg.indexOf("ok")>-1&&(this.setWecoinRemain(e.balance),this.show())};setTimeout((()=>{Ge.reportPayAppmsg(14);const t=this.needTopup?this.cgiData.wecoin_amount-this.wecoinRemain:0;Ie.invoke("buyWCCoin",{businessId:2,scene:3,panelShowType:"present",diffWecoinCount:t},(t=>{t&&t.err_msg&&(t.err_msg.indexOf("ok")>-1?Ae.isIOS&&Ae.ltVersion("8.0.17")||Ae.isAndroid&&Ae.ltVersion("8.0.17")?this.payEduTips.firstWecoinRecharge?this.$refs.eduTipsModal.show():(b.show(),Ie.invoke("getWCCoinBalance",{},e)):Ie.invoke("showWCCoinFirstBuyCoinTips",{alwaysDarkMode:!1},(()=>{b.show(),Ie.invoke("getWCCoinBalance",{},e)})):t.err_msg.indexOf("cancel")>-1&&this.show())}))}),250)}}},(function(){var e=this,t=e._self._c;return t("div",[t("mp-bottom-modal",{ref:"bottomModal",attrs:{"ext-class":"pay__bottom-modal","has-btn":"","auto-height":""},on:{submit:e.buyWecoin,hide:function(){return e.setPayLock(!1)}},scopedSlots:e._u([{key:"btn",fn:function(){return[t("mp-buy-wecoin-btn")]},proxy:!0},{key:"footer",fn:function(){return[t("div",[e.needTopup?t("div",{ref:"footerTerm",staticClass:"pay__wecoin-term weui-cells_checkbox",attrs:{id:"js_wecoin_term"},on:{click:e.onTermClick}},[t("label",{attrs:{for:"js_wecoin_term_check"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.agreeStat,expression:"agreeStat"}],ref:"wecoinCheck",staticClass:"weui-check",attrs:{id:"js_wecoin_term_check",type:"checkbox"},domProps:{checked:Array.isArray(e.agreeStat)?e._i(e.agreeStat,null)>-1:e.agreeStat},on:{change:function(t){var i=e.agreeStat,n=t.target,o=!!n.checked;if(Array.isArray(i)){var a=e._i(i,null);n.checked?a<0&&(e.agreeStat=i.concat([null])):a>-1&&(e.agreeStat=i.slice(0,a).concat(i.slice(a+1)))}else e.agreeStat=o}}}),t("i",{staticClass:"weui-icon-checked"}),e._v("\u540c\u610f"),t("a",{attrs:{href:"javascript:;"}},[e._v("\u300a\u5fae\u4fe1\u8c46\u5145\u503c\u534f\u8bae\u300b")])])]):e._e(),t("div",{staticClass:"weui-half-screen-dialog__btn-area"},[t("a",{ref:"footerBtn",staticClass:"weui-btn weui-btn_primary",attrs:{disabled:e.btnDisabled},on:{click:e.onFooterBtnClick}},[e._v(e._s(e.needTopup?"\u53bb\u5145\u503c":"\u5151\u6362"))])]),t("div",{staticClass:"weui-half-screen-dialog__attachment-wrp",on:{click:e.onLinkClick}},[t("a",{staticClass:"weui-half-screen-dialog__attachment-link",attrs:{href:"javascript:;"}},[e._v("\u5e38\u89c1\u95ee\u9898")])])])]},proxy:!0}])},[t("div",{staticClass:"pay__wecoin"},[t("div",{staticClass:"pay__wecoin-title",staticStyle:{"font-weight":"normal"},attrs:{id:"js_wecoin_title"}},[e._v(" "+e._s(e.wecoinTitle)+" ")]),t("div",{staticClass:"pay__wecoin-content pay__wecoin-content-price"},[t("i",{staticClass:"pay__icon-wecoin"}),t("span",{staticClass:"price",attrs:{id:"js_wecoin_price"}},[e._v(e._s(e.wecoinPrice))])]),t("div",{ref:"wecoinTipsDom",staticClass:"pay__wecoin-tips",attrs:{id:"js_wecoin_tips"}},[e._v(" "+e._s(e.wecoinTips)+" ")])])]),t("mp-pay-edu-tips",{ref:"eduTipsModal",on:{"show-confirm":function(){return e.$refs.bottomModal.show()}}})],1)}),[],!1,null,null,null,null).exports,bo=_t({name:"mp-wecoin-tips",components:{[y.name]:y},computed:{...m("mp-pay-read",["wecoinText"]),top:()=>innerHeight-375},methods:{onQuestionClick(e){e&&e.preventDefault(),Ge.reportPayAppmsg(17),Ie.invoke("openUrlWithExtraWebview",{url:"https://kf.qq.com/touch/product/WXDB_app.html",openType:1}),this.$refs.bottomModal.hide()},show(){this.$refs.bottomModal.show()}}},(function(){var e=this,t=e._self._c;return t("mp-bottom-modal",{ref:"bottomModal",attrs:{"ext-class":"pay__wecoin-edu-modal",top:"".concat(e.top,"px")},scopedSlots:e._u([{key:"footer",fn:function(){return[t("a",{staticClass:"pay__wecoin-edu-link",on:{click:e.onQuestionClick}},[e._v("\u5e38\u89c1\u95ee\u9898")])]},proxy:!0}])},[t("div",{staticClass:"pay__wecoin-edu"},[t("div",{staticClass:"pay__wecoin-title"},[t("div",{staticClass:"pay__icon-wecoin"}),t("div",[e._v("\u4ed8\u8d39\u5185\u5bb9\u9700\u7528\u5fae\u4fe1\u8c46\u5151\u6362")])]),t("div",{staticClass:"pay__wecoin-edu-desc"},[e._v(" \u5fae\u4fe1\u8c46\u662f\u7528\u4e8e\u5151\u6362\u5fae\u4fe1\u5185\u865a\u62df\u7269\u54c1\u548c\u670d\u52a1\u7684\u9053\u5177\u3002 "),t("span",[e._v(e._s(e.wecoinText))]),e._v(" \u5fae\u4fe1\u8c46\u8fd8\u53ef\u7528\u4e8e\u5151\u6362\u76f4\u64ad\u95f4\u7684\u865a\u62df\u793c\u7269\u7b49\u3002 ")])])])}),[],!1,null,null,null,null).exports,vo=_t({name:"mp-pay-read",components:{[fo.name]:fo,[ho.name]:ho,[yo.name]:yo,[ao.name]:ao,[bo.name]:bo,[_o.name]:_o,[v.name]:v},data:()=>({iapPriceInfo:null,showBottomBar:!!window.is_login}),computed:{...m(["cgiData","extRes"]),...m("mp-pay-read",["wecoinText","payLock","wecoinRemain","loading","isInMiniProgram","paySubscribeInfo","payReadBottomVisible"]),...g("mp-stream",["recommendShow","recommendGray","recommendFriendNum","showFriendSeen"]),...g("mp-pay-read",["isPaidLSKey","topicLink"]),contentTextLen(){var e;return 1*(null==(e=this.cgiData.payforread_info)?void 0:e.content_plain_text_len)},canGift(){return!!this.paySubscribeInfo&&this.cgiData.payGiftsCount-this.paySubscribeInfo.gifted_count>0},payFee(){var e;return(1*(null==(e=this.cgiData.payforread_info)?void 0:e.fee)/100).toFixed(2)},isPaid(){return this.cgiData.isPaid},previewPercent(){return this.cgiData.preview_percent},payTopicNoticeText(){return 0===this.previewPercent?"\u5151\u6362\u5408\u96c6\u540e\u53ef\u9605\u8bfb\u5168\u6587":"\u5151\u6362\u5408\u96c6\u540e\u53ef\u9605\u8bfb\u5269\u4f59".concat(100-this.previewPercent,"%")},payTopicFreqText(){const e=this.cgiData.payTopicCount,t=this.cgiData.payTopicTotalCount;return e<t?"\u5df2\u53d1\u8868".concat(e,"\u4e2a")+" "+"\u8ba1\u5212\u53d1\u8868".concat(t,"\u4e2a"):"\u5df2\u5b8c\u7ed3 \u5171".concat(e,"\u4e2a")},payTopicList(){return this.cgiData.payTopicArticleTitles?this.cgiData.payTopicArticleTitles.slice(0,4):[]},previewTipsText:()=>/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?"\u4ed8\u8d39\u540e\u53ef\u8d60\u9001\u7ed9\u4e00\u4f4d\u670b\u53cb\u514d\u8d39\u9605\u8bfb (1\u5143 = 7\u5fae\u4fe1\u8c46)":"\u4ed8\u8d39\u540e\u53ef\u8d60\u9001\u7ed9\u4e00\u4f4d\u670b\u53cb\u514d\u8d39\u9605\u8bfb (1\u5143 = 10\u5fae\u4fe1\u8c46)",tempkey(){return this.cgiData.tempkey},payFeeNormalText(){const{wecoin_amount:e,fee:t}=this.cgiData;return e>0?e:t/10},payTotalSummary(){var e;const t=this.extRes.reward_total_count?"\uff0c".concat(Ce.formatNum(this.extRes.reward_total_count)," \u4eba\u559c\u6b22"):"";return"".concat(Ce.formatNum(null==(e=this.paySubscribeInfo)?void 0:e.pay_cnt)," \u4eba\u4ed8\u8d39")+t},avatarList(){return this.paySubscribeInfo?this.cgiData.isPaid&&!this.cgiData.payFreeGift?[Object.assign({},this.paySubscribeInfo.my_head_img_info,{reward_status:this.paySubscribeInfo.my_reward_status}),...this.paySubscribeInfo.pay_head_img_infos||[]]:this.paySubscribeInfo.pay_head_img_infos||[]:[]},payBtnText(){return this.showBottomBar?"\u8bfb\u5168\u6587":"\u5fae\u4fe1\u8c46\u5151\u6362"},streamFriendsShow(){return!!(0!==this.showFriendSeen&&this.recommendShow&&1!==this.recommendGray&&this.recommendFriendNum>0)}},watch:{extRes(e){e.pay_subscribe_info&&(this.setPayEduTips({firstWecoinRecharge:1*e.pay_subscribe_info.first_wecoin_recharge,userImgUrl:e.pay_subscribe_info.user_img_url,userNickname:e.pay_subscribe_info.user_nick_name}),this.setPayGlobal({enable_custom_recharge:e.pay_subscribe_info.enable_custom_recharge,agreement_url:e.pay_subscribe_info.agreement_url,agreement_version:e.pay_subscribe_info.agreement_version,agreement_status:e.pay_subscribe_info.agreement_status,recharge_product_id:e.pay_subscribe_info.recharge_product_id,price:e.pay_subscribe_info.price}),e.pay_subscribe_info.wecoin_tips&&(Ae.isIOS||Ae.isAndroid)&&!Ae.isWxWork&&this.$refs.wecoinTipsModal.show())},payReadBottomVisible(e){null===e&&this.togglePayPanelBottom()}},created(){this.iapPriceInfo=this.cgiData.iapPriceInfo},mounted(){we.log("[Appmsg] pay process 1 isPaySubscribe=".concat(this.cgiData.isPaySubscribe)),Ie.on("onScreenShot",(()=>{Ge.reportPayAppmsg(6),me.setSum(114217,15,1)}));const e=Ae.isWindows||Ae.isMac&&!Ae.isIOS,t=document.getElementById("js_content"),i=e=>{"IMG"===e.target.tagName&&e.preventDefault()};e&&(t.addEventListener("dragstart",i),Ae.isWechat||t.addEventListener("contextmenu",i)),we.log("[Appmsg] pay process 2 isPaid=".concat(this.isPaid)),this.isPaid||this.initPay()},beforeDestroy(){je.off(this.cgiData,"scroll",this.togglePayPanelBottom)},methods:{...w("mp-pay-read",["setPayEduTips","setPayGlobal","setConfirmModal","setPayReadBottomVisible"]),..._("mp-pay-read",["goBuyTopic"]),initPay(){const e=document.getElementById("js_pay_panel");Ae.isAndroid&&"1"===localStorage.getItem(this.isPaidLSKey)&&Ge.report110809(30),this.cgiData.jump2pay&&je.on(window,"load",(()=>{window.scrollTo(0,e.getBoundingClientRect().top-Oe.getInnerHeight()/3)})),this.setConfirmModal(this.$refs.payConfirm),this.togglePayPanelBottom(),je.on(window,"scroll",this.togglePayPanelBottom)},togglePayPanelBottom(){const e=this.$refs.payReadBottom.$el,t=this.cgiData.isPayTopic?document.getElementById("js_pay_topic_btn"):this.$refs.payBtn.$el,{top:i}=t.getBoundingClientRect(),n=window.getComputedStyle(e);if(i+(80+parseInt(n.paddingTop,10)+parseInt(n.paddingBottom,10))>this.cgiData.innerHeight){if(1*this.cgiData.previewPercent==0)return;if(this.cgiData.isRemovedFromPayTopic&&!this.cgiData.isPaid)return;this.setPayReadBottomVisible(!0)}else this.setPayReadBottomVisible(!1),window.is_finished_preview=1},toPayDetail(){Ce.goUrl("/mp/paysub?action=evaluate_show_page&__biz=".concat(this.cgiData.biz,"&product_type=").concat(this.cgiData.productPayPackage.product_type,"&product_id=").concat(this.cgiData.productPayPackage.product_id,"&sn=").concat(this.cgiData.sn,"&link=").concat(encodeURIComponent(this.cgiData.msg_link),"&from_scene=").concat(this.cgiData.source,"&from_subscene=").concat(this.cgiData.subscene,"&is_fans=").concat(this.cgiData.isFans))}}},(function(){var e=this,t=e._self._c;return t("div",[e.isPaid?[e.paySubscribeInfo&&e.paySubscribeInfo.pay_cnt?t("mp-headimg-wall",{staticClass:"pay__detail-wrp",attrs:{type:"pay","total-count":e.paySubscribeInfo.pay_cnt,"total-summary":e.payTotalSummary,"head-imgs":e.avatarList},on:{"click-summary":e.toPayDetail}}):e._e(),e.canGift?t("mp-pay-gift"):e._e()]:[e.previewPercent>0?t("div",{staticClass:"pay__mask_static"}):e._e(),t("div",{staticClass:"pay pay__static",class:{pay_new:e.showBottomBar},attrs:{id:"js_pay_panel"}
},[1===e.cgiData.isPayTopic&&e.cgiData.payTopicRemoveFlag>0?t("div",{staticClass:"pay__topic-tips"},[e._v(" "+e._s(1===e.cgiData.payTopicRemoveFlag?"\u6b64\u5185\u5bb9\u5df2\u4ece\u5408\u96c6\u4e2d\u79fb\u9664\uff0c\u4e0d\u652f\u6301\u4ed8\u8d39":"\u4ed8\u8d39\u5408\u96c6\u5df2\u88ab\u4f5c\u8005\u5220\u9664\uff0c\u4e0d\u652f\u6301\u4ed8\u8d39")+" ")]):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:!(1!==e.cgiData.isPayTopic||2===e.cgiData.payTopicRemoveFlag),expression:"!(cgiData.isPayTopic !== 1 || cgiData.payTopicRemoveFlag === 2)"}],staticClass:"pay__topic"},[t("div",{staticClass:"pay__topic-hd"},[e._v(" "+e._s(e.payTopicNoticeText)+" ")]),t("div",{staticClass:"pay__topic-bd"},[t("div",{staticClass:"pay__topic-main"},[t("div",{staticClass:"pay__topic-main-wrp"},[t("div",{staticClass:"pay__topic-title"},[e._v(e._s(e.cgiData.payTopicTitle))]),t("div",{staticClass:"pay__topic-meta"},[t("span",{attrs:{id:"js_pay_topic_freq"}},[e._v(" "+e._s(e.payTopicFreqText)+" ")])])]),t("a",{class:"weui-btn weui-btn_mini ".concat(e.cgiData.payTopicRemoveFlag>0&&!e.isPaid?"weui-btn_disabled":"weui-btn_primary"," weui-wa-hotarea pay__topic-btn"),attrs:{id:"js_pay_topic_btn","data-url":e.topicLink,href:"javascript:;"},on:{click:e.goBuyTopic}},[e._v(" \u5408\u96c6\u8be6\u60c5 ")])]),t("ul",{staticClass:"pay__topic-list"},e._l(e.payTopicList,(function(i,n){return t("li",{key:i},[e._v(e._s(n+1)+". "+e._s(i))])})),0)])]),t("div",{directives:[{name:"show",rawName:"v-show",value:1!==e.cgiData.isPayTopic,expression:"cgiData.isPayTopic !== 1"}],staticClass:"pay__main"},[e.cgiData.payDesc&&0===e.previewPercent?t("div",{staticClass:"pay__head-notice"},[e._v(" \u6b63\u6587\u9700\u4ed8\u8d39\u540e\u624d\u53ef\u9605\u8bfb ")]):e._e(),t("div",{staticClass:"pay__notice-btn-wrp",class:{"pay__notice-btn-lg":e.showBottomBar}},[t("mp-pay-btn",{ref:"payBtn",attrs:{"button-text":e.payBtnText}}),0!==e.cgiData.payGiftsCount?t("div",{staticClass:"pay__preview-tips",attrs:{id:"js_pay_preview_tips"}},[e._v(" "+e._s(e.previewTipsText)+" ")]):t("div",{staticClass:"pay__preview-tips",attrs:{id:"js_pay_wecoin_tips"}},[e._v(" "+e._s(e.wecoinText)+" ")]),e.tempkey?t("div",{staticClass:"pay__preview-tips js_pay_fee_display"},[e._v(" \u9884\u89c8\u72b6\u6001\u4e0b\u4e0d\u4f1a\u6263\u8d39 ")]):e._e(),t("mp-pay-read-qrcode")],1)]),e.paySubscribeInfo&&e.paySubscribeInfo.pay_cnt?t("mp-headimg-wall",{staticClass:"pay__detail-wrp",attrs:{type:"pay","total-count":e.paySubscribeInfo.pay_cnt,"total-summary":e.payTotalSummary,"head-imgs":e.avatarList},on:{"click-summary":e.toPayDetail}}):e._e()],1),t("transition",{attrs:{name:"fade"}},[t("mp-pay-read-bottom",{directives:[{name:"show",rawName:"v-show",value:e.payReadBottomVisible||e.streamFriendsShow,expression:"payReadBottomVisible || streamFriendsShow"}],ref:"payReadBottom",attrs:{visible:e.payReadBottomVisible,"pay-topic-notice-text":e.payTopicNoticeText}})],1),t("mp-pay-confirm",{ref:"payConfirm"})],t("mp-wecoin-tips",{ref:"wecoinTipsModal"})],2)}),[],!1,null,"73a07835",null,null).exports,ko=_t({name:"mp-sponsor-ad",components:{[k.name]:k},data:()=>({posType:Ct.AD_POS.POS_SPONSOR}),methods:{handleAdFrameMessage(e){e===Ct.FRAME_READY&&x.report115849(63)}}},(function(){var e=this;return(0,e._self._c)("mp-ad-frame",{attrs:{"pos-type":e.posType},on:{"ad-frame-message":e.handleAdFrameMessage}})}),[],!1,null,null,null,null).exports,xo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkJDQzA1MTVGNkE2MjExRTRBRjEzODVCM0Q0NEVFMjFBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkJDQzA1MTYwNkE2MjExRTRBRjEzODVCM0Q0NEVFMjFBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QkNDMDUxNUQ2QTYyMTFFNEFGMTM4NUIzRDQ0RUUyMUEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QkNDMDUxNUU2QTYyMTFFNEFGMTM4NUIzRDQ0RUUyMUEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6p+a6fAAAAD0lEQVR42mJ89/Y1QIABAAWXAsgVS/hWAAAAAElFTkSuQmCC",Ao=Vt.attr,Io=Vt.setProperty;let Co=!1,So=!1,To=!1;const Eo={img:function(e,t){const i=this;e.loader.onerror=function(){const t=!!i.onerror&&i.onerror(this.src,this,e.placeholder,e.type);t&&(this.src=t)},e.loader.onload=function(){if(Jt(this,e.placeholder),e.placeholder.getAttribute("data-ratio")&&parseFloat(e.placeholder.getAttribute("data-ratio"),10)!==this.naturalHeight/this.naturalWidth&&(window.__addIdKeyReport&&window.__addIdKeyReport(330742,4),Co||window.__addIdKeyReport&&window.__addIdKeyReport(330742,5),window.create_time&&window.create_time>1682352e3&&(window.__addIdKeyReport&&window.__addIdKeyReport(330742,18),Math.abs(parseFloat(e.placeholder.getAttribute("data-ratio"),10)-this.naturalHeight/this.naturalWidth)*e.placeholder.getBoundingClientRect().width<=1?window.__addIdKeyReport&&window.__addIdKeyReport(330742,6):(!To&&window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&Math.random()<.1&&window.WX_BJ_REPORT.BadJs.report("wrong img ratio page",location.href),!To&&window.__addIdKeyReport&&window.__addIdKeyReport(330742,19),To=!0)),Co=!0),parseFloat(e.placeholder.getAttribute("data-ratio"),10)||window.__addIdKeyReport&&window.__addIdKeyReport(330742,8),e.placeholder.getBoundingClientRect().width||window.__addIdKeyReport&&(Ae.isIOS&&window.__addIdKeyReport(330742,12),Ae.isAndroid&&window.__addIdKeyReport(330742,13),Ae.isWindows&&window.__addIdKeyReport(330742,14),Ae.isMac&&window.__addIdKeyReport(330742,15)),parseFloat(e.placeholder.getAttribute("data-ratio"),10)!==this.naturalHeight/this.naturalWidth){const t=e.placeholder.getBoundingClientRect().bottom;t<window.innerHeight&&(Ae.isIOS||t>0&&Ae.isAndroid)&&(window.__addIdKeyReport&&window.__addIdKeyReport(330742,9),!So&&window.__addIdKeyReport&&window.__addIdKeyReport(330742,10),So=!0)}e.placeholder=this,i.onload&&i.onload(this.src,this,e.type),this.onload=null},i.beforeload&&i.beforeload(t,e.loader,e.type),Ao(e.loader,"src",t),e.show=!0},bg:function(e,t){const i=this,n=t=>{const n='url("data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==")',o=e.placeholder.style.backgroundImage.replace(n,'url("'.concat(t,'")'));"string"==typeof e.placeholder.dataset.style&&(e.placeholder.dataset.style=e.placeholder.dataset.style.replace(n,'url("'.concat(t,'")'))),e.placeholder.style.backgroundImage=o,e.placeholder.classList.remove("wx_imgbc_placeholder"),window.Darkmode.updateStyle(e.placeholder,{"background-image":o}),i.onload&&i.onload(t,e.placeholder,e.type),e.loader.onload=null};e.loader.onerror=function(){const t=!!i.onerror&&i.onerror(this.src,this,e.placeholder,e.type);t?this.src=t:n(e.src)},e.loader.onload=function(){n(this.src)},i.beforeload&&i.beforeload(t,e.loader,e.type),Ao(e.loader,"src",t),e.show=!0}},Oo=fe.os.pc,No=_t({name:"mp-added-info",components:{[A.name]:A,[I.name]:I,[y.name]:y,Intersect:C},data(){const e=document.getElementById("js_article_bottom_bar");return{deviceIsPc:Oo,showDrawer:!1,list:[],total:0,overviewCount:0,notHideDialogWhenPageHide:!1,bottomWriteHeight:e?e.offsetHeight:0}},computed:{...m(["cgiData"]),...m("mp-comment",["commentStatus","notHideReplayDialogWhenPageHide"]),...g("mp-comment",["commentEnabled"]),overviewList(){return this.list.slice(0,this.overviewCount)},intersectMarin(){return this.bottomWriteHeight?"0px 0px -".concat(this.bottomWriteHeight,"px 0px"):"0px"}},watch:{commentStatus(e){if(!(this.overviewCount>0))switch(e){case 1:this.overviewCount=1;break;case 0:this.overviewCount=3;break;case-1:!this.commentEnabled&&(this.overviewCount=3)}}},created(){this.hideAfterAnimationCB=null,"0"!==this.cgiData.extra_comment_id&&(new S({comment_id:this.cgiData.extra_comment_id,appmsgid:this.cgiData.appmsgid,idx:this.cgiData.idx,item_show_type:this.cgiData.item_show_type||0,biz:this.cgiData.biz}),this.getData(),Ae.isIOS&&document.addEventListener("visibilitychange",this.onVisibilitychange))},beforeDestroy(){"0"!==this.cgiData.extra_comment_id&&Ae.isIOS&&document.removeEventListener("visibilitychange",this.onVisibilitychange)},methods:{...w("mp-comment",["setNotHideReplayDialogWhenPageHide"]),report33250(e){he.report(33250,{BizUin:window.biz||"",AppMsgId:window.parseInt(window.mid,10)||0,AppMsgItemIdx:window.parseInt(window.idx,10)||0,Scene:1*window.source||0,EnterId:window.parseInt(window.enterid,10)||0,ExtraCommentId64Bit:this.cgiData.extra_comment_id,opType:e})},expose(){this.report33250(this.total>this.overviewCount?0:1)},showDialog(){this.report33250(2),this.deviceIsPc?(this.$refs.pcCommentList.resetPcDropDown(),this.showDrawer=!0):this.$refs.dialog.show()},goEditPage(){this.report33250(3),Ue("/publicpoc/article_extra_msg?action=getappmsginfo&url=".concat(encodeURIComponent(window.location.href))),this.setNotHideReplayDialogWhenPageHide(!0)},goGuidencesPage(){Ue("/s?__biz=Mzg4NDYwOTcyNA==&mid=2247517238&idx=1&sn=6d69c9c9fe2c99c2a0ea7c676fd78357&chksm=cfb743e5f8c0caf3ab40828bd598cb636a4ac5be911a805ed7ad4103a6641613d19b3f8b4239#rd"),this.setNotHideReplayDialogWhenPageHide(!0)},getData(){_e({url:ge.join("/mp/appmsg_comment",{action:"getextracomment",appmsgid:this.cgiData.appmsgid,idx:this.cgiData.idx,comment_id:this.cgiData.extra_comment_id,top_content_id:window.goAddedInfoContentId||"",offset:0,limit:100},!0),dataType:"json",success:e=>{e.base_resp&&0===e.base_resp.ret&&(this.list=e.extra_comment,this.total=e.total_cnt,window.goAddedInfoContentId&&this.$nextTick((()=>{const e=this.$el.getBoundingClientRect();let t=0,i=0,n=0;document.body&&(i=document.body.scrollTop),document.documentElement&&(n=document.documentElement.scrollTop),t=i-n>0?i:n;const o=t+e.top-T.pageHeight/2+e.height/2;document.documentElement.scrollTop=o,document.body.scrollTop=o})))}})},remove(e){let t=-1;this.list.some(((i,n)=>{if(i.content_id===e)return t=n,!0}))&&(this.list.splice(t,1),!this.list.length&&this.$refs.dialog.getShowStatus()?(this.hideAfterAnimationCB=()=>{this.total=0},this.$refs.dialog.hide()):this.total--)},exposeCommentItem(e){var t;E({content_id:e.content_id||"",is_elected_comment:e.is_elected||0,is_friend_comment:0,scene:1,identity_type:e.identity_type,identity_name:e.identity_name,is_from_me:1*e.is_from_me,is_from:e.is_from||0,like_num:e.like_num||0,reply_list:(null==(t=e.reply_new)?void 0:t.reply_list)||[]})},onHideAfterAnimation(){"function"==typeof this.hideAfterAnimationCB&&(this.hideAfterAnimationCB(),this.hideAfterAnimationCB=null)},onVisibilitychange(){this.$refs.dialog&&this.$refs.dialog.getShowStatus()&&("hidden"===document.visibilityState?!this.notHideDialogWhenPageHide&&!this.notHideReplayDialogWhenPageHide&&this.$refs.dialog.hide():(this.notHideDialogWhenPageHide||this.notHideReplayDialogWhenPageHide)&&(i.show({alpha:.6,mode:"replace",onClick:()=>{this.$refs.dialog.hide()}}),this.notHideDialogWhenPageHide=!1,this.setNotHideReplayDialogWhenPageHide(!1)))}}},(function(){var e=this,t=e._self._c;return e.total?t("div",{staticClass:"wx_added_info_container"},[t("div",{staticClass:"appmsg_card_context wx_added_info_card"},[t("intersect",{attrs:{threshold:[1],"root-margin":e.intersectMarin},on:{"~enter":function(t){return e.expose.apply(null,arguments)}}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.overviewList.length,expression:"overviewList.length"}]},[t("div",{staticClass:"wx_added_info_card_bd"},[t("div",{staticClass:"wx_added_info_card_title"},[e._v("\u6b64\u5185\u5bb9\u5b58\u5728\u4e89\u8bae\uff0c\u4ee5\u4e0b\u4e3a\u7b2c\u4e09\u65b9\u8865\u5145\u4fe1\u606f")]),t("mp-comment-list",{attrs:{folder:"",type:"addedInfo","comment-id":e.cgiData.extra_comment_id,list:e.overviewList,"bottom-write-height":e.bottomWriteHeight},on:{remove:e.remove,"expose-item":e.exposeCommentItem}})],1),t("div",{staticClass:"js_wx_tap_highlight wx_tap_cell wx_added_info_card_ft",on:{click:e.showDialog}},[t("div",{staticClass:"wx_added_info_card_ft_title"},[e._v("All")]),t("div",{staticClass:"wx_added_info_card_ft_tips"},[e._v(e._s(e.total)+"\u6761")])])])]),e.deviceIsPc?t("mp-drawer",{attrs:{"scroll-selector":".drawer_added_info_main"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("\u8865\u5145\u4fe1\u606f")]},proxy:!0}],null,!1,3048128595),model:{value:e.showDrawer,callback:function(t){e.showDrawer=t},expression:"showDrawer"}},[t("div",{staticClass:"drawer_added_info_container"},[t("div",{staticClass:"drawer_added_info_main"},[t("mp-comment-list",{ref:"pcCommentList",attrs:{type:"addedInfo","comment-id":e.cgiData.extra_comment_id,list:e.list},on:{"go-resource":function(){e.notHideDialogWhenPageHide=!0},remove:e.remove,"expose-item":e.exposeCommentItem}}),t("div",{staticClass:"weui-loadmore weui-loadmore_default weui-loadmore_line weui-loadmore_dot"},[t("span",{staticClass:"weui-loadmore__tips",staticStyle:{"background-color":"transparent"}})])],1)])]):t("mp-bottom-modal",{ref:"dialog",attrs:{"ext-class":"discuss_more_dialog_wrp weui-half-screen-dialog_wrp added_info_dialog","has-btn":"","close-btn-type":"fold","hide-when-scroll-down":"","hide-when-sideslip":""},on:{submit:e.goEditPage,"hide-after-animation":e.onHideAfterAnimation},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("\u8865\u5145\u4fe1\u606f")]},proxy:!0},{key:"btn",fn:function(){return[t("a",{staticClass:"weui-link",attrs:{href:"javascript:;"}},[e._v("\u53bb\u8865\u5145")])]},proxy:!0}],null,!1,2038421654)},[t("div",{staticClass:"discuss_more_dialog_content"},[t("mp-comment-list",{attrs:{type:"addedInfo","comment-id":e.cgiData.extra_comment_id,list:e.list},on:{"go-resource":function(){e.notHideDialogWhenPageHide=!0},remove:e.remove,"expose-item":e.exposeCommentItem}}),t("div",{staticClass:"wx_added_info_guidences"},[t("a",{attrs:{href:"javascript:;"},on:{click:e.goGuidencesPage}},[e._v("\u300c\u8865\u5145\u4fe1\u606f\u300d\u529f\u80fd\u8bf4\u660e")])])],1)])],1)]):e._e()}),[],!1,null,null,null,null).exports,Mo=_t({name:"mp-keyword-ad",components:{[k.name]:k},props:{keywordAdData:{type:Object,default:()=>({})},exPageData:{type:Object,default:()=>({})}},data:()=>({posType:Ct.AD_POS.POS_AD_KEYWORD}),methods:{handleAdFrameLoad(){this.$emit("ad-load")},handleAdFrameMessage(e){e===Ct.CHANGE_FRAME_STYLE&&this.$emit("ad-change-frame-style")},onAdDataChange(e){this.$emit("ad-data-change",e)}}},(function(){var e=this;return(0,e._self._c)("mp-ad-frame",{attrs:{"pos-type":e.posType,"keyword-ad-data":e.keywordAdData,"ex-page-data":e.exPageData},on:{"ad-frame-load":e.handleAdFrameLoad,"ad-frame-message":e.handleAdFrameMessage,"ad-data-change":e.onAdDataChange}})}),[],!1,null,null,null,null).exports,Lo=_t({name:"mp-search-link",props:{keyword:{type:String,default:""}}},(function(){var e=this,t=e._self._c;return t("p",{ref:"footerBox",staticClass:"adv_keyword_search",on:{click:function(){return e.$emit("click")}}},[t("a",{staticClass:"js_wx_tap_highlight wx_tap_link"},[e._v(e._s("\u641c\u7d22\u300c".concat(e.keyword,"\u300d\u7f51\u7edc\u7ed3\u679c")))])])}),[],!1,null,null,null,null).exports,qo=_t({name:"mp-ad-keyword-bottom-modal",components:{[y.name]:y,[Mo.name]:Mo,[Lo.name]:Lo},data:()=>({observer:null,topHeight:"".concat(.33*Oe.getInnerHeight(),"px"),exPageData:{bodyScrollTop:0,screenHeight:0,adOffsetTop:0},debounceScroll:null,isLoading:!1,adRendered:!1}),computed:{...m("mp-adv-keyword",["show","keywordItem","reportData","keywordAdData","keywordDesc"])},created(){this.$watch("show",(function(e){e&&this.showBottomModal()})),this.debounceScroll=Ce.debounce(this.handleScroll,100)},mounted(){this.observer=new IntersectionObserver(((e,t)=>{e.forEach((e=>{e.isIntersecting&&(Ye({eventType:4,keyword:this.keywordItem.keyword,...this.reportData}),t.unobserve(e.target))}))})),this.exPageData.screenHeight=Math.floor(Oe.getInnerHeight()*(1-.33)-this.calTopBarHeight())},beforeDestroy(){this.observer&&this.observer.disconnect(),this.debounceScroll=null},methods:{...w("mp-adv-keyword",["setShow","setKeywordAdData","setKeywordDescription"]),showBottomModal(){this.getKeywordAd(),this.getKeywordBaikeInfo(this.keywordItem),this.$refs.bottomModal.show(),Ye({eventType:3,keyword:this.keywordItem.keyword,...this.reportData})},onHide(){this.setShow(!1),this.adRendered=!1,Ye({eventType:6,keyword:this.keywordItem.keyword,...this.reportData})},handleScroll(e,t){var i;const n=null==(i=this.$refs.adCard)?void 0:i.$el;this.exPageData.bodyScrollTop=Math.floor(t.scrollTop),n&&(this.exPageData.adOffsetTop=this.updateAdOffset(n)+this.exPageData.bodyScrollTop,this.postMessageToAdFrame(Ct.PAGE_SCROLL_ACTION,{hasVideoPlayingInScreen:!1,...this.exPageData},n))},goSouyisou(){Ye({eventType:7,keyword:this.keywordItem.keyword,...this.reportData}),setTimeout((()=>{Ie.invoke("openWXSearchPage",{query:this.keywordItem.keyword})}))},postMessageToAdFrame(e,t,i){const n=i.contentWindow;n&&x.postMessage(n,e,t,Ct.AD_FRAME_DOMAIN)},adCardClick(){Ye({eventType:5,keyword:this.keywordItem.keyword,...this.reportData})},getKeywordAd(){const e=R(),t=P(),i=this;this.isLoading=!0,_e({url:t,data:Object.assign(e,{pos_type_list:JSON.stringify([12]),article_keyword:this.keywordItem.keyword,is_need_ad:1}),type:"POST",dataType:"json",rtId:27613,rtKey:50,rtDesc:Ke,async:!0,success(e){we.log("[Appmsg] success get adkeywords data"),0===(null==e?void 0:e.ret)&&(i.setKeywordAdData(e),i.$nextTick((()=>{i.exPageData.adOffsetTop=i.updateAdOffset(i.$refs.adCardDiv)+i.exPageData.bodyScrollTop}))),i.isLoading=!1},error(e){we.log("[Appmsg] get adkeywords data error"),i.isLoading=!1}})},getKeywordBaikeInfo(e){const t=this;_e({url:"/mp/adkeyword",data:{action:"get_adkeyword_abstract",bizuin:window.biz?parseInt(window.atob(window.biz),10):0,appmsgid:1*window.mid||0,idx:1*window.idx||0,scene:window.source,request_id:Date.now(),keyword:e.keyword,idx_range:e.idx_range_list[0],s1s_stat_info:e.s1s_context_info,s1s_context_info:e.s1s_context_info},usePb:!0,success(e){try{const i=JSON.parse(e);0===i.base_resp.ret&&t.setKeywordDescription(i.abstract_resp)}catch(e){}},error(e){}})},adLoad(){this.observer.observe(this.$refs.adCard.$el)},updateAdOffset(e){const t=this.$refs.bottomModal.$el.querySelector("#contentAreaWrp");return Math.floor(e.getBoundingClientRect().top-t.getBoundingClientRect().top)},calTopBarHeight(){const e=this.$refs.bottomModal.$el.querySelector(".weui-half-screen-dialog__hd__wrp");let t=64;return e&&(t=e.getBoundingClientRect().height),t}}},(function(){var e=this,t=e._self._c;return t("div",{staticClass:"adv_keyword_bottom_modal"},[t("mp-bottom-modal",{ref:"bottomModal",attrs:{top:e.topHeight,"auto-height":!!e.keywordAdData,"hide-when-sideslip":"","close-btn-type":"fold","ext-class":"ad_keyword_bottom_modal_wrap","content-area-class":"bottom_modal_content_area","content-wrap-class":"bottom_modal_content_wrap"},on:{hide:e.onHide,scroll:e.debounceScroll},scopedSlots:e._u([e.isLoading||e.keywordAdData?null:{key:"footer",fn:function(){return[t("mp-search-link",{attrs:{keyword:e.keywordItem.keyword},on:{click:e.goSouyisou}})]},proxy:!0}],null,!0)},[e.isLoading?t("div",{staticClass:"loading-wrapper"},[t("i",{staticClass:"weui-loading"})]):t("div",[t("h1",{staticClass:"adv_keyword_title"},[e._v(e._s(e.keywordItem.keyword))]),t("p",{staticClass:"adv_keyword_desc"},[e._v(e._s(e.keywordDesc.abstract))]),t("div",{ref:"adCardDiv"},[e.keywordAdData?t("mp-keyword-ad",{ref:"adCard",attrs:{"keyword-ad-data":e.keywordAdData,"ex-page-data":e.exPageData},on:{"ad-load":e.adLoad,"ad-change-frame-style":function(){e.adRendered=!0}}}):e._e()],1),e.adRendered?t("div",{staticClass:"adv_footer_box"},[t("mp-search-link",{attrs:{keyword:e.keywordItem.keyword},on:{click:e.goSouyisou}})],1):e._e()])])],1)}),[],!1,null,"074c4d68",null,null).exports,Wo=_t({components:{[Bi.name]:Bi,[No.name]:No,[D.name]:D,[j.name]:j,[vo.name]:vo,[oo.name]:oo,[ko.name]:ko,[St.name]:St,[qo.name]:qo},data:()=>({showBottomBar:!!window.is_login,hasExtLoadDone:!!window.ext_complete_success}),computed:{...m(["cgiData"]),...m({statStyle:e=>{var t;return 3===(null==(t=e.extRes.appmsgstat)?void 0:t.style)?1:0}}),reprintStyle(){return this.cgiData.reprint_style},showReward(){return 0===this.cgiData.is_pay_subscribe||1===this.cgiData.isPaid},isPaySubscribe(){return 1*this.cgiData.is_pay_subscribe==1},albumTags(){return this.cgiData.publicTagInfo},showGongYi(){var e;return!!(null==(e=this.cgiData.yqj_info)?void 0:e.yqj_did)&&(!!this.cgiData.is_login||Tt())}},created(){Pe.on("ext-complete-success",(()=>{this.hasExtLoadDone=!0;const e=document.getElementById("js_temp_bottom_area");e&&(e.style.display="none")})),Ie.on("onScreenShot",(()=>{me.setSum(114217,17,1)}))},methods:{onShare(){Yi()}}},(function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"content_bottom_area"}},[e.reprintStyle?e._e():[t("mp-sponsor-ad"),e._v(" "),e.showGongYi&&e.showReward?t("mp-gongyi"):e._e()],t("mp-added-info"),e._v(" "),e.reprintStyle?e._e():[e.showReward&&!e.showGongYi?t("mp-reward",{attrs:{"show-author":""}}):e._e(),e._v(" "),e.isPaySubscribe&&!e.reprintStyle?t("mp-pay-read"):e._e()],t("mp-album",{attrs:{"album-tags":e.albumTags}}),e._v(" "),t("mp-keep-read"),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.hasExtLoadDone,expression:"hasExtLoadDone"}],staticClass:"rich_media_tool_area"},[t("mp-like-read-area",{attrs:{"stat-style":e.statStyle,"show-bottom-bar":e.showBottomBar},on:{share:e.onShare}})],1),t("mp-ad-keyword-bottom-modal")],2)}),[],!1,null,null,null,null).exports,zo=window.Vue;var Fo={exports:{}};const Ho=Le(Fo.exports=function(){function e(e,t,i){if(i||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function t(e,t){return"object"!=typeof t||Ot(t).forEach((function(i){e[i]=t[i]})),e}function i(e,t){return Lt.call(e,t)}function n(e,t){"function"==typeof t&&(t=t(Mt(e))),("undefined"==typeof Reflect?Ot:Reflect.ownKeys)(t).forEach((function(i){o(e,i,t[i])}))}function o(e,n,o,a){qt(e,n,t(o&&i(o,"get")&&"function"==typeof o.get?{get:o.get,set:o.set,configurable:!0}:{value:o,configurable:!0,writable:!0},a))}function a(e){return{from:function(t){return e.prototype=Object.create(t.prototype),o(e.prototype,"constructor",e),{extend:n.bind(null,e.prototype)}}}}function r(e,t,i){return zt.call(e,t,i)}function s(e,t){return t(e)}function c(e){if(!e)throw new Error("Assertion Failed")}function d(e){Bt.setImmediate?setImmediate(e):setTimeout(e,0)}function l(e,t){if("string"==typeof t&&i(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],o=0,a=t.length;o<a;++o){var r=l(e,t[o]);n.push(r)}return n}var s=t.indexOf(".");if(-1!==s){var c=e[t.substr(0,s)];return null==c?void 0:l(c,t.substr(s+1))}}function u(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){c("string"!=typeof n&&"length"in n);for(var o=0,a=t.length;o<a;++o)u(e,t[o],n[o])}else{var r,s,d=t.indexOf(".");-1!==d?(r=t.substr(0,d),""===(s=t.substr(d+1))?void 0===n?Nt(e)&&!isNaN(parseInt(r))?e.splice(r,1):delete e[r]:e[r]=n:u(d=(d=e[r])&&i(e,r)?d:e[r]={},s,n)):void 0===n?Nt(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function p(e){var t,n={};for(t in e)i(e,t)&&(n[t]=e[t]);return n}function m(e){return Ft.apply([],e)}function _(e){return Kt=new WeakMap,e=function e(t){if(!t||"object"!=typeof t)return t;var n=Kt.get(t);if(n)return n;if(Nt(t)){n=[],Kt.set(t,n);for(var o=0,a=t.length;o<a;++o)n.push(e(t[o]))}else if(Ht.has(t.constructor))n=t;else{var r,s=Mt(t);for(r in n=s===Object.prototype?{}:Object.create(s),Kt.set(t,n),t)i(t,r)&&(n[r]=e(t[r]))}return n}(e),Kt=null,e}function h(e){return Vt.call(e).slice(8,-1)}function f(e,t){return 0<=(t=e.indexOf(t))&&e.splice(t,1),0<=t}function w(e){var t,i,n,o;if(1===arguments.length){if(Nt(e))return e.slice();if(this===Gt&&"string"==typeof e)return[e];if(o=$t(e)){for(i=[];!(n=o.next()).done;)i.push(n.value);return i}if(null==e)return[e];if("number"!=typeof(t=e.length))return[e];for(i=new Array(t);t--;)i[t]=e[t];return i}for(t=arguments.length,i=new Array(t);t--;)i[t]=arguments[t];return i}function g(e,t){this.name=e,this.message=t}function y(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,i){return i.indexOf(e)===t})).join("\n")}function b(e,t,i,n){this.failures=t,this.failedKeys=n,this.successCount=i,this.message=y(e,t)}function v(e,t){this.name="BulkError",this.failures=Object.keys(t).map((function(e){return t[e]})),this.failuresByPos=t,this.message=y(e,this.failures)}function x(){}function k(e){return e}function A(e,t){return null==e||e===k?t:function(i){return t(e(i))}}function I(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function C(e,t){return e===x?t:function(){var i=e.apply(this,arguments);void 0!==i&&(arguments[0]=i);var n=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?I(n,this.onsuccess):n),o&&(this.onerror=this.onerror?I(o,this.onerror):o),void 0!==a?a:i}}function S(e,t){return e===x?t:function(){e.apply(this,arguments);var i=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?I(i,this.onsuccess):i),n&&(this.onerror=this.onerror?I(n,this.onerror):n)}}function T(e,i){return e===x?i:function(n){var o=e.apply(this,arguments);t(n,o);var a=this.onsuccess,r=this.onerror;return this.onsuccess=null,this.onerror=null,n=i.apply(this,arguments),a&&(this.onsuccess=this.onsuccess?I(a,this.onsuccess):a),r&&(this.onerror=this.onerror?I(r,this.onerror):r),void 0===o?void 0===n?void 0:n:t(o,n)}}function E(e,t){return e===x?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function R(e,t){return e===x?t:function(){var i=e.apply(this,arguments);if(i&&"function"==typeof i.then){for(var n=this,o=arguments.length,a=new Array(o);o--;)a[o]=arguments[o];return i.then((function(){return t.apply(n,a)}))}return t.apply(this,arguments)}}function j(e){oi=e}function P(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=wi;if("function"!=typeof e){if(e!==ai)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&B(this,this._value))}this._state=null,this._value=null,++t.ref,function e(t,i){try{i((function(i){if(null===t._state){if(i===t)throw new TypeError("A promise cannot be resolved with itself.");var n=t._lib&&q();i&&"function"==typeof i.then?e(t,(function(e,t){i instanceof P?i._then(e,t):i.then(e,t)})):(t._state=!0,t._value=i,O(t)),n&&W()}}),B.bind(null,t))}catch(e){B(t,e)}}(this,e)}function D(e,t,i,n,o){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=i,this.reject=n,this.psd=o}function B(e,t){var i,n;_i.push(t),null===e._state&&(i=e._lib&&q(),t=hi(t),e._state=!1,e._value=t,n=e,mi.some((function(e){return e._value===n._value}))||mi.push(n),O(e),i&&W())}function O(e){var t=e._listeners;e._listeners=[];for(var i=0,n=t.length;i<n;++i)N(e,t[i]);var o=e._PSD;--o.ref||o.finalize(),0===yi&&(++yi,li((function(){0==--yi&&z()}),[]))}function N(e,t){if(null!==e._state){var i=e._state?t.onFulfilled:t.onRejected;if(null===i)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++yi,li(M,[i,e,t])}else e._listeners.push(t)}function M(e,t,i){try{var n,o=t._value;!t._state&&_i.length&&(_i=[]),n=oi&&t._consoleTask?t._consoleTask.run((function(){return e(o)})):e(o),t._state||-1!==_i.indexOf(o)||function(e){for(var t=mi.length;t;)if(mi[--t]._value===e._value)return mi.splice(t,1)}(t),i.resolve(n)}catch(e){i.reject(e)}finally{0==--yi&&z(),--i.psd.ref||i.psd.finalize()}}function L(){X(fi,(function(){q()&&W()}))}function q(){var e=ui;return pi=ui=!1,e}function W(){var e,t,i;do{for(;0<gi.length;)for(e=gi,gi=[],i=e.length,t=0;t<i;++t){var n=e[t];n[0].apply(null,n[1])}}while(0<gi.length);pi=ui=!0}function z(){var e=mi;mi=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=bi.slice(0),i=t.length;i;)t[--i]()}function F(e){return new P(ai,!1,e)}function U(e,t){var i=wi;return function(){var n=q(),o=wi;try{return G(i,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{G(o,!1),n&&W()}}}function H(e,i,n,o){var a=wi,r=Object.create(a);return r.parent=a,r.ref=0,r.global=!1,r.id=++Si,fi.env,r.env=di?{Promise:P,PromiseProp:{value:P,configurable:!0,writable:!0},all:P.all,race:P.race,allSettled:P.allSettled,any:P.any,resolve:P.resolve,reject:P.reject}:{},i&&t(r,i),++a.ref,r.finalize=function(){--this.parent.ref||this.parent.finalize()},o=X(r,e,n,o),0===r.ref&&r.finalize(),o}function K(){return xi.id||(xi.id=++ki),++xi.awaits,xi.echoes+=ri,xi.id}function V(){return!!xi.awaits&&(0==--xi.awaits&&(xi.id=0),xi.echoes=xi.awaits*ri,!0)}function J(e){return xi.echoes&&e&&e.constructor===ci?(K(),e.then((function(e){return V(),e}),(function(e){return V(),Ti(e)}))):e}function $(){var e=Ai[Ai.length-1];Ai.pop(),G(e,!1)}function G(e,t){var i,n=wi;(t?!xi.echoes||Ii++&&e===wi:!Ii||--Ii&&e===wi)||queueMicrotask(t?function(e){++Ci,xi.echoes&&0!=--xi.echoes||(xi.echoes=xi.awaits=xi.id=0),Ai.push(wi),G(e,!0)}.bind(null,e):$),e!==wi&&(wi=e,n===fi&&(fi.env=Y()),di&&(i=fi.env.Promise,t=e.env,(n.global||e.global)&&(Object.defineProperty(Bt,"Promise",t.PromiseProp),i.all=t.all,i.race=t.race,i.resolve=t.resolve,i.reject=t.reject,t.allSettled&&(i.allSettled=t.allSettled),t.any&&(i.any=t.any))))}function Y(){var e=Bt.Promise;return di?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(Bt,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function X(e,t,i,n,o){var a=wi;try{return G(e,!0),t(i,n,o)}finally{G(a,!1)}}function Q(e,t,i,n){return"function"!=typeof e?e:function(){var o=wi;i&&K(),G(t,!0);try{return e.apply(this,arguments)}finally{G(o,!1),n&&queueMicrotask(V)}}}function Z(e){Promise===ci&&0===xi.echoes?0===Ii?e():enqueueNativeMicroTask(e):setTimeout(e,0)}function ee(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}function te(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=_(t))[e],t}}function ie(){throw ti.Type()}function ne(e,t){try{var i=oe(e),n=oe(t);if(i!==n)return"Array"===i?1:"Array"===n?-1:"binary"===i?1:"binary"===n?-1:"string"===i?1:"string"===n?-1:"Date"===i?1:"Date"!==n?NaN:-1;switch(i){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(e,t){for(var i=e.length,n=t.length,o=i<n?i:n,a=0;a<o;++a)if(e[a]!==t[a])return e[a]<t[a]?-1:1;return i===n?0:i<n?-1:1}(ae(e),ae(t));case"Array":return function(e,t){for(var i=e.length,n=t.length,o=i<n?i:n,a=0;a<o;++a){var r=ne(e[a],t[a]);if(0!==r)return r}return i===n?0:i<n?-1:1}(e,t)}}catch(e){}return NaN}function oe(e){var t=typeof e;return"object"!=t?t:ArrayBuffer.isView(e)||"ArrayBuffer"===(e=h(e))?"binary":e}function ae(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function re(){}function se(e){function t(t,i){if(i){for(var o=arguments.length,a=new Array(o-1);--o;)a[o-1]=arguments[o];return n[t].subscribe.apply(null,a),e}if("string"==typeof t)return n[t]}function i(e,o,a){if("object"!=typeof e){var r;o=o||E;var s={subscribers:[],fire:a=a||x,subscribe:function(e){-1===s.subscribers.indexOf(e)&&(s.subscribers.push(e),s.fire=o(s.fire,e))},unsubscribe:function(e){s.subscribers=s.subscribers.filter((function(t){return t!==e})),s.fire=s.subscribers.reduce(o,a)}};return n[e]=t[e]=s}Ot(r=e).forEach((function(e){var t=r[e];if(Nt(t))i(e,r[e][0],r[e][1]);else{if("asap"!==t)throw new ti.InvalidArgument("Invalid event config");var n=i(e,k,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach((function(e){d((function(){e.apply(null,t)}))}))}))}}))}var n={};t.addEventType=i;for(var o=1,a=arguments.length;o<a;++o)i(arguments[o]);return t}function ce(e,t){return a(t).from({prototype:e}),t}function de(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function le(e,t){e.filter=ee(e.filter,t)}function ue(e,t,i){
var n=e.replayFilter;e.replayFilter=n?function(){return ee(n(),t())}:t,e.justLimit=i&&!n}function pe(e,t){if(e.isPrimKey)return t.primaryKey;var i=t.getIndexByKeyPath(e.index);if(!i)throw new ti.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return i}function me(e,t,i){var n=pe(e,t.schema);return t.openCursor({trans:i,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:n,range:e.range}})}function _e(e,t,n,o){var a=e.replayFilter?ee(e.filter,e.replayFilter()):e.filter;if(e.or){var r={},s=function(e,n,o){var s,c;a&&!a(n,o,(function(e){return n.stop(e)}),(function(e){return n.fail(e)}))||("[object ArrayBuffer]"==(c=""+(s=n.primaryKey))&&(c=""+new Uint8Array(s)),i(r,c)||(r[c]=!0,t(e,n,o)))};return Promise.all([e.or._iterate(s,n),he(me(e,o,n),e.algorithm,s,!e.keysOnly&&e.valueMapper)])}return he(me(e,o,n),ee(e.algorithm,a),t,!e.keysOnly&&e.valueMapper)}function he(e,t,i,n){var o=U(n?function(e,t,o){return i(n(e),t,o)}:i);return e.then((function(e){if(e)return e.start((function(){var i=function(){return e.continue()};t&&!t(e,(function(e){return i=e}),(function(t){e.stop(t),i=x}),(function(t){e.fail(t),i=x}))||o(e.value,e,(function(e){return i=e})),i()}))}))}function fe(e){Object.assign(this,e)}function we(){}function ge(e,t){return e<t?-1:e===t?0:1}function ye(e,t){return t<e?-1:e===t?0:1}function be(e,t,i){return(e=e instanceof zi?new e.Collection(e):e)._ctx.error=new(i||TypeError)(t),e}function ve(e){return new e.Collection(e,(function(){return Ae("")})).limit(0)}function xe(e,t,i,n){function o(e){a="next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()},r="next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()},s="next"===e?ge:ye;var t=i.map((function(e){return{lower:r(e),upper:a(e)}})).sort((function(e,t){return s(e.lower,t.lower)}));c=t.map((function(e){return e.upper})),d=t.map((function(e){return e.lower})),u="next"===(l=e)?"":n}var a,r,s,c,d,l,u,p=i.length;if(!i.every((function(e){return"string"==typeof e})))return be(e,ji);o("next"),(e=new e.Collection(e,(function(){return ke(c[0],d[p-1]+n)})))._ondirectionchange=function(e){o(e)};var m=0;return e._addAlgorithm((function(e,i,n){var o=e.key;if("string"!=typeof o)return!1;var a=r(o);if(t(a,d,m))return!0;for(var _=null,h=m;h<p;++h){var f=function(e,t,i,n,o,a){for(var r=Math.min(e.length,n.length),s=-1,c=0;c<r;++c){var d=t[c];if(d!==n[c])return o(e[c],i[c])<0?e.substr(0,c)+i[c]+i.substr(c+1):o(e[c],n[c])<0?e.substr(0,c)+n[c]+i.substr(c+1):0<=s?e.substr(0,s)+t[s]+i.substr(s+1):null;o(e[c],d)<0&&(s=c)}return r<n.length&&"next"===a?e+i.substr(e.length):r<e.length&&"prev"===a?e.substr(0,i.length):s<0?null:e.substr(0,s)+n[s]+i.substr(s+1)}(o,a,c[h],d[h],s,l);null===f&&null===_?m=h+1:(null===_||0<s(_,f))&&(_=f)}return i(null!==_?function(){e.continue(_+u)}:n),!1})),e}function ke(e,t,i,n){return{type:2,lower:e,upper:t,lowerOpen:i,upperOpen:n}}function Ae(e){return{type:1,lower:e,upper:e}}function Ie(){}function Ce(e){return U((function(t){return Se(t),e(t.target.error),!1}))}function Se(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}function Te(){}function Ee(e,t,i,n,o,a,r){return{name:e,keyPath:t,unique:i,multi:n,auto:o,compound:a,src:(i&&!r?"&":"")+(n?"*":"")+(o?"++":"")+Re(t)}}function Re(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function je(e,t,i){return{name:e,primKey:t,indexes:i,mappedClass:null,idxByName:(n=function(e){return[e.name,e]},i.reduce((function(e,t,i){return(i=n(t,i))&&(e[i[0]]=i[1]),e}),{}))};var n}function Pe(e){return null==e?function(){}:"string"==typeof e?1===(t=e).split(".").length?function(e){return e[t]}:function(e){return l(e,t)}:function(t){return l(t,e)};var t}function De(e){return[].slice.call(e)}function Be(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function Oe(e,t,i){function n(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var i=e.lower,n=e.upper,o=e.lowerOpen;return e=e.upperOpen,void 0===i?void 0===n?null:t.upperBound(n,!!e):void 0===n?t.lowerBound(i,!!o):t.bound(i,n,!!o,!!e)}function o(e){var t,i=e.name;return{name:i,schema:e,mutate:function(e){var t=e.trans,o=e.type,a=e.keys,r=e.values,s=e.range;return new Promise((function(e){function c(e){++w,Se(e)}function d(t){t=t.target.result,h.forEach((function(e,t){return null!=e.error&&(f[t]=e.error)})),e({numFailures:w,failures:f,results:"delete"===o?a:h.map((function(e){return e.result})),lastResult:t})}e=U(e);var l=t.objectStore(i),u=null==l.keyPath,p="put"===o||"add"===o;if(!p&&"delete"!==o&&"deleteRange"!==o)throw new Error("Invalid operation type: "+o);var m,_=(a||r||{length:1}).length;if(a&&r&&a.length!==r.length)throw new Error("Given keys array must have same length as given values array.");if(0===_)return e({numFailures:0,failures:{},results:[],lastResult:void 0});var h=[],f=[],w=0;if("deleteRange"===o){if(4===s.type)return e({numFailures:w,failures:f,results:[],lastResult:void 0});3===s.type?h.push(m=l.clear()):h.push(m=l.delete(n(s)))}else{var g=(u=p?u?[r,a]:[r,null]:[a,null])[0],y=u[1];if(p)for(var b=0;b<_;++b)h.push(m=y&&void 0!==y[b]?l[o](g[b],y[b]):l[o](g[b])),m.onerror=c;else for(b=0;b<_;++b)h.push(m=l[o](g[b])),m.onerror=c}m.onerror=function(e){c(e),d(e)},m.onsuccess=d}))},getMany:function(e){var t=e.trans,n=e.keys;return new Promise((function(e,o){e=U(e);for(var a,r=t.objectStore(i),s=n.length,c=new Array(s),d=0,l=0,u=function(t){t=t.target,c[t._pos]=t.result,++l===d&&e(c)},p=Ce(o),m=0;m<s;++m)null!=n[m]&&((a=r.get(n[m]))._pos=m,a.onsuccess=u,a.onerror=p,++d);0===d&&e(c)}))},get:function(e){var t=e.trans,n=e.key;return new Promise((function(e,o){e=U(e);var a=t.objectStore(i).get(n);a.onsuccess=function(t){return e(t.target.result)},a.onerror=Ce(o)}))},query:(t=c,function(e){return new Promise((function(o,a){o=U(o);var r,s,c,d=e.trans,l=e.values,u=e.limit,p=e.query,m=u===1/0?void 0:u,_=p.index;if(p=p.range,d=d.objectStore(i),_=_.isPrimaryKey?d:d.index(_.name),p=n(p),0===u)return o({result:[]});t?((m=l?_.getAll(p,m):_.getAllKeys(p,m)).onsuccess=function(e){return o({result:e.target.result})},m.onerror=Ce(a)):(r=0,s=!l&&"openKeyCursor"in _?_.openKeyCursor(p):_.openCursor(p),c=[],s.onsuccess=function(){var e=s.result;return e?(c.push(l?e.value:e.primaryKey),++r===u?o({result:c}):void e.continue()):o({result:c})},s.onerror=Ce(a))}))}),openCursor:function(e){var t=e.trans,o=e.values,a=e.query,r=e.reverse,s=e.unique;return new Promise((function(e,c){e=U(e);var d=a.index,l=a.range,u=t.objectStore(i),p=(u=d.isPrimaryKey?u:u.index(d.name),d=r?s?"prevunique":"prev":s?"nextunique":"next",!o&&"openKeyCursor"in u?u.openKeyCursor(n(l),d):u.openCursor(n(l),d));p.onerror=Ce(c),p.onsuccess=U((function(){var i,n,o,a,r=p.result;r?(r.___id=++Ji,r.done=!1,i=r.continue.bind(r),n=(n=r.continuePrimaryKey)&&n.bind(r),o=r.advance.bind(r),a=function(){throw new Error("Cursor not stopped")},r.trans=t,r.stop=r.continue=r.continuePrimaryKey=r.advance=function(){throw new Error("Cursor not started")},r.fail=U(c),r.next=function(){var e=this,t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))},r.start=function(e){function t(){if(p.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()}var s=new Promise((function(e,t){e=U(e),p.onerror=Ce(t),r.fail=t,r.stop=function(t){r.stop=r.continue=r.continuePrimaryKey=r.advance=a,e(t)}}));return p.onsuccess=U((function(){p.onsuccess=t,t()})),r.continue=i,r.continuePrimaryKey=n,r.advance=o,t(),s},e(r)):e(null)}),c)}))},count:function(e){var t=e.query,o=e.trans,a=t.index,r=t.range;return new Promise((function(e,t){var s=o.objectStore(i),c=a.isPrimaryKey?s:s.index(a.name);(c=(s=n(r))?c.count(s):c.count()).onsuccess=U((function(t){return e(t.target.result)})),c.onerror=Ce(t)}))}}}i=(r=i,s=De((a=e).objectStoreNames),d={schema:{name:a.name,tables:s.map((function(e){return r.objectStore(e)})).map((function(e){var t=e.keyPath,i=e.autoIncrement,n=Nt(t),o={};return i={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==t,compound:n,keyPath:t,autoIncrement:i,unique:!0,extractKey:Pe(t)},indexes:De(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,i=e.unique,n=e.multiEntry;return e=e.keyPath,n={name:t,compound:Nt(e),keyPath:e,unique:i,multiEntry:n,extractKey:Pe(e)},o[Be(e)]=n})),getIndexByKeyPath:function(e){return o[Be(e)]}},o[":id"]=i.primaryKey,null!=t&&(o[Be(t)]=i.primaryKey),i}))},hasGetAll:0<s.length&&"getAll"in r.objectStore(s[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}).schema;var a,r,s,c=d.hasGetAll,d=i.tables.map(o),l={};return d.forEach((function(e){return l[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!l[e])throw new Error("Table '".concat(e,"' not found"));return l[e]},MIN_KEY:-1/0,MAX_KEY:Vi(t),schema:i}}function Ne(e,t,i,n){var o=i.IDBKeyRange;return i.indexedDB,{dbcore:(n=Oe(t,o,n),e.dbcore.reduce((function(e,t){return t=t.create,Dt(Dt({},e),t(e))}),n))}}function Le(e,t){var i=t.db;t=Ne(e._middlewares,i,e._deps,t),e.core=t.dbcore,e.tables.forEach((function(t){var i=t.name;e.core.schema.tables.some((function(e){return e.name===i}))&&(t.core=e.core.table(i),e[i]instanceof e.Table&&(e[i].core=t.core))}))}function qe(e,t,i,n){i.forEach((function(i){var a=n[i];t.forEach((function(t){var n=function e(t,i){return Wt(t,i)||(t=Mt(t))&&e(t,i)}(t,i);(!n||"value"in n&&void 0===n.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?o(t,i,{get:function(){return this.table(i)},set:function(e){qt(this,i,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[i]=new e.Table(i,a))}))}))}function We(e,t){t.forEach((function(t){for(var i in t)t[i]instanceof e.Table&&delete t[i]}))}function ze(e,t){return e._cfg.version-t._cfg.version}function Fe(e,t,i,n){var o=e._dbSchema;i.objectStoreNames.contains("$meta")&&!o.$meta&&(o.$meta=je("$meta",Ye("")[0],[]),e._storeNames.push("$meta"));var a=e._createTransaction("readwrite",e._storeNames,o);a.create(i),a._completion.catch(n);var r=a._reject.bind(a),s=wi.transless||wi;H((function(){return wi.trans=a,wi.transless=s,0!==t?(Le(e,i),c=t,((n=a).storeNames.includes("$meta")?n.table("$meta").get("version").then((function(e){return null!=e?e:c})):P.resolve(c)).then((function(t){return o=t,r=a,s=i,c=[],t=(n=e)._versions,d=n._dbSchema=$e(0,n.idbdb,s),0!==(t=t.filter((function(e){return e._cfg.version>=o}))).length?(t.forEach((function(e){c.push((function(){var t=d,i=e._cfg.dbschema;Ge(n,t,s),Ge(n,i,s),d=n._dbSchema=i;var a=He(t,i);a.add.forEach((function(e){Ke(s,e[0],e[1].primKey,e[1].indexes)})),a.change.forEach((function(e){if(e.recreate)throw new ti.Upgrade("Not yet support for changing primary key");var t=s.objectStore(e.name);e.add.forEach((function(e){return Je(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),Je(t,e)})),e.del.forEach((function(e){return t.deleteIndex(e)}))}));var c=e._cfg.contentUpgrade;if(c&&e._cfg.version>o){Le(n,s),r._memoizedTables={};var l=p(i);a.del.forEach((function(e){l[e]=t[e]})),We(n,[n.Transaction.prototype]),qe(n,[n.Transaction.prototype],Ot(l),l),r.schema=l;var u,m=Yt(c);return m&&K(),a=P.follow((function(){var e;(u=c(r))&&m&&(e=V.bind(null,null),u.then(e,e))})),u&&"function"==typeof u.then?P.resolve(u):a.then((function(){return u}))}})),c.push((function(t){var i,o,a=e._cfg.dbschema;i=a,o=t,[].slice.call(o.db.objectStoreNames).forEach((function(e){return null==i[e]&&o.db.deleteObjectStore(e)})),We(n,[n.Transaction.prototype]),qe(n,[n.Transaction.prototype],n._storeNames,n._dbSchema),r.schema=n._dbSchema})),c.push((function(t){n.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(n.idbdb.version/10)===e._cfg.version?(n.idbdb.deleteObjectStore("$meta"),delete n._dbSchema.$meta,n._storeNames=n._storeNames.filter((function(e){return"$meta"!==e}))):t.objectStore("$meta").put(e._cfg.version,"version"))}))})),function e(){return c.length?P.resolve(c.shift()(r.idbtrans)).then(e):P.resolve()}().then((function(){Ve(d,s)}))):P.resolve();var n,o,r,s,c,d})).catch(r)):(Ot(o).forEach((function(e){Ke(i,e,o[e].primKey,o[e].indexes)})),Le(e,i),void P.follow((function(){return e.on.populate.fire(a)})).catch(r));var n,c}))}function Ue(e,t){Ve(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var i=$e(0,e.idbdb,t);Ge(e,e._dbSchema,t);for(var n=0,o=He(i,e._dbSchema).change;n<o.length;n++){var a=function(e){if(e.change.length||e.recreate)return{value:void 0};var i=t.objectStore(e.name);e.add.forEach((function(e){Je(i,e)}))}(o[n]);if("object"==typeof a)return a.value}}function He(e,t){var i,n={del:[],add:[],change:[]};for(i in e)t[i]||n.del.push(i);for(i in t){var o=e[i],a=t[i];if(o){var r={name:i,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||o.primKey.auto!==a.primKey.auto)r.recreate=!0,n.change.push(r);else{var s=o.idxByName,c=a.idxByName,d=void 0;for(d in s)c[d]||r.del.push(d);for(d in c){var l=s[d],u=c[d];l?l.src!==u.src&&r.change.push(u):r.add.push(u)}(0<r.del.length||0<r.add.length||0<r.change.length)&&n.change.push(r)}}else n.add.push([i,a])}return n}function Ke(e,t,i,n){var o=e.db.createObjectStore(t,i.keyPath?{keyPath:i.keyPath,autoIncrement:i.auto}:{autoIncrement:i.auto});return n.forEach((function(e){return Je(o,e)})),o}function Ve(e,t){Ot(e).forEach((function(i){t.db.objectStoreNames.contains(i)||Ke(t,i,e[i].primKey,e[i].indexes)}))}function Je(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function $e(e,t,i){var n={};return r(t.objectStoreNames,0).forEach((function(e){for(var t=i.objectStore(e),o=Ee(Re(s=t.keyPath),s||"",!0,!1,!!t.autoIncrement,s&&"string"!=typeof s,!0),a=[],r=0;r<t.indexNames.length;++r){var s=(c=t.index(t.indexNames[r])).keyPath,c=Ee(c.name,s,!!c.unique,!!c.multiEntry,!1,s&&"string"!=typeof s,!1);a.push(c)}n[e]=je(e,o,a)})),n}function Ge(e,t,i){for(var n=i.db.objectStoreNames,o=0;o<n.length;++o){var a=n[o],s=i.objectStore(a);e._hasGetAll="getAll"in s;for(var c=0;c<s.indexNames.length;++c){var d=s.indexNames[c],l=s.index(d).keyPath,u="string"==typeof l?l:"["+r(l).join("+")+"]";!t[a]||(l=t[a].idxByName[u])&&(l.name=d,delete t[a].idxByName[u],t[a].idxByName[d]=l)}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Bt.WorkerGlobalScope&&Bt instanceof Bt.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Ye(e){return e.split(",").map((function(e,t){var i=(e=e.trim()).replace(/([&*]|\+\+)/g,""),n=/^\[/.test(i)?i.match(/^\[(.*)\]$/)[1].split("+"):i;return Ee(i,n||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),Nt(n),0===t)}))}function Xe(){}function Qe(e,t){var i=e._dbNamesDB;return i||(i=e._dbNamesDB=new an(Di,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),i.table("dbnames")}function Ze(e){return e&&"function"==typeof e.databases}function et(e){return H((function(){return wi.letThrough=!0,e()}))}function tt(e){return!("from"in e)}function it(e,i,n){var o=ne(i,n);if(!isNaN(o)){if(0<o)throw RangeError();if(tt(e))return t(e,{from:i,to:n,d:1});var a=e.l;if(o=e.r,ne(n,e.from)<0)return a?it(a,i,n):e.l={from:i,to:n,d:1,l:null,r:null},rt(e);if(0<ne(i,e.to))return o?it(o,i,n):e.r={from:i,to:n,d:1,l:null,r:null},rt(e);ne(i,e.from)<0&&(e.from=i,e.l=null,e.d=o?o.d+1:1),0<ne(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,a&&!e.l&&nt(e,a),o&&n&&nt(e,o)}}function nt(e,t){tt(t)||function e(t,i){var n=i.from,o=i.to,a=i.l;i=i.r,it(t,n,o),a&&e(t,a),i&&e(t,i)}(e,t)}function ot(e,t){var i=at(t),n=i.next();if(n.done)return!1;for(var o=n.value,a=at(e),r=a.next(o.from),s=r.value;!n.done&&!r.done;){if(ne(s.from,o.to)<=0&&0<=ne(s.to,o.from))return!0;ne(o.from,s.from)<0?o=(n=i.next(s.from)).value:s=(r=a.next(o.from)).value}return!1}function at(e){var t=tt(e)?null:{s:0,n:e};return{next:function(e){for(var i=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,i)for(;t.n.l&&ne(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!i||ne(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function rt(e){var t,i,n=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(i=e.l)||void 0===i?void 0:i.d)||0),o=1<n?"r":n<-1?"l":"";o&&(t="r"==o?"l":"r",i=Dt({},e),n=e[o],e.from=n.from,e.to=n.to,e[o]=n[o],i[o]=n[t],(e[t]=i).d=st(i)),e.d=st(e)}function st(e){var t=e.r;return e=e.l,(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}function ct(e,t){return Ot(t).forEach((function(n){e[n]?nt(e[n],t[n]):e[n]=function e(t){var n,o,a={};for(n in t)i(t,n)&&(o=t[n],a[n]=!o||"object"!=typeof o||Ht.has(o.constructor)?o:e(o));return a}(t[n])})),e}function dt(e,t){return e.all||t.all||Object.keys(e).some((function(i){return t[i]&&ot(t[i],e[i])}))}function lt(e){ct(Xi,e),Qi||(Qi=!0,setTimeout((function(){Qi=!1,ut(Xi,!(Xi={}))}),0))}function ut(e,t){void 0===t&&(t=!1);var i=new Set;if(e.all)for(var n=0,o=Object.values(Yi);n<o.length;n++)pt(r=o[n],e,i,t);else for(var a in e){var r,s=/^idb\:\/\/(.*)\/(.*)\//.exec(a);s&&(a=s[1],s=s[2],(r=Yi["idb://".concat(a,"/").concat(s)])&&pt(r,e,i,t))}i.forEach((function(e){return e()}))}function pt(e,t,i,n){for(var o=[],a=0,r=Object.entries(e.queries.query);a<r.length;a++){for(var s=r[a],c=s[0],d=[],l=0,u=s[1];l<u.length;l++){var p=u[l];dt(t,p.obsSet)?p.subscribers.forEach((function(e){return i.add(e)})):n&&d.push(p)}n&&o.push([c,d])}if(n)for(var m=0,_=o;m<_.length;m++){var h=_[m];c=h[0],d=h[1],e.queries.query[c]=d}}function mt(e){function t(){if(n.openCanceller!==s)throw new ti.DatabaseClosed("db.open() was cancelled")}function i(){return new P((function(a,s){if(t(),!o)throw new ti.MissingAPI;var l=e.name,m=n.autoSchema||!c?o.open(l):o.open(l,c);if(!m)throw new ti.MissingAPI;m.onerror=Ce(s),m.onblocked=U(e._fireOnBlocked),m.onupgradeneeded=U((function(t){var i;u=m.transaction,n.autoSchema&&!e._options.allowEmptyDB?(m.onerror=Se,u.abort(),m.result.close(),(i=o.deleteDatabase(l)).onsuccess=i.onerror=U((function(){s(new ti.NoSuchDatabase("Database ".concat(l," doesnt exist")))}))):(u.onerror=Ce(s),t=t.oldVersion>Math.pow(2,62)?0:t.oldVersion,p=t<1,e.idbdb=m.result,d&&Ue(e,u),Fe(e,t/10,u,s))}),s),m.onsuccess=U((function(){u=null;var t,o,s,_,h,f=e.idbdb=m.result,w=r(f.objectStoreNames);if(0<w.length)try{var g=f.transaction(1===(_=w).length?_[0]:_,"readonly");if(n.autoSchema)o=f,s=g,(t=e).verno=o.version/10,s=t._dbSchema=$e(0,o,s),t._storeNames=r(o.objectStoreNames,0),qe(t,[t._allTables],Ot(s),s);else if(Ge(e,e._dbSchema,g),((h=He($e(0,(h=e).idbdb,g),h._dbSchema)).add.length||h.change.some((function(e){return e.add.length||e.change.length})))&&!d)return f.close(),c=f.version+1,d=!0,a(i());Le(e,g)}catch(e){}Pi.push(e),f.onversionchange=U((function(t){n.vcFired=!0,e.on("versionchange").fire(t)})),f.onclose=U((function(t){e.on("close").fire(t)})),p&&(h=e._deps,g=l,f=h.indexedDB,h=h.IDBKeyRange,Ze(f)||g===Di||Qe(f,h).put({name:g}).catch(x)),a()}),s)})).catch((function(e){switch(null==e?void 0:e.name){case"UnknownError":if(0<n.PR1398_maxLoop)return n.PR1398_maxLoop--,i();break;case"VersionError":if(0<c)return c=0,i()}return P.reject(e)}))}var n=e._state,o=e._deps.indexedDB;if(n.isBeingOpened||e.idbdb)return n.dbReadyPromise.then((function(){return n.dbOpenError?Ti(n.dbOpenError):e}));n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;var a,s=n.openCanceller,c=Math.round(10*e.verno),d=!1,l=n.dbReadyResolve,u=null,p=!1;return P.race([s,("undefined"==typeof navigator?P.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(e){function t(){return indexedDB.databases().finally(e)}a=setInterval(t,100),t()})).finally((function(){return clearInterval(a)})):Promise.resolve()).then(i)]).then((function(){return t(),n.onReadyBeingFired=[],P.resolve(et((function(){return e.on.ready.fire(e.vip)}))).then((function t(){if(0<n.onReadyBeingFired.length){var i=n.onReadyBeingFired.reduce(R,x);return n.onReadyBeingFired=[],P.resolve(et((function(){return i(e.vip)}))).then(t)}}))})).finally((function(){n.openCanceller===s&&(n.onReadyBeingFired=null,n.isBeingOpened=!1)})).catch((function(t){n.dbOpenError=t;try{u&&u.abort()}catch(e){}return s===n.openCanceller&&e._close(),Ti(t)})).finally((function(){n.openComplete=!0,l()})).then((function(){var t;return p&&(t={},e.tables.forEach((function(i){i.schema.indexes.forEach((function(n){n.name&&(t["idb://".concat(e.name,"/").concat(i.name,"/").concat(n.name)]=new Gi(-1/0,[[[]]]))})),t["idb://".concat(e.name,"/").concat(i.name,"/")]=t["idb://".concat(e.name,"/").concat(i.name,"/:dels")]=new Gi(-1/0,[[[]]])})),Hi(Fi).fire(t),ut(t,!0)),e}))}function _t(e){function t(t){return e.next(t)}function i(e){return function(t){var i=e(t);return t=i.value,i.done?t:t&&"function"==typeof t.then?t.then(n,o):Nt(t)?Promise.all(t).then(n,o):n(t)}}var n=i(t),o=i((function(t){return e.throw(t)}));return i(t)()}function ht(e,t,i){for(var n=Nt(e)?e.slice():[e],o=0;o<i;++o)n.push(t);return n}function ft(e,t,n,o){return n=n||{},o=o||"",Ot(e).forEach((function(a){var r,s,c;i(t,a)?(r=e[a],s=t[a],"object"==typeof r&&"object"==typeof s&&r&&s?(c=h(r))!==h(s)?n[o+a]=t[a]:"Object"===c?ft(r,s,n,o+a+"."):r!==s&&(n[o+a]=t[a]):r!==s&&(n[o+a]=t[a])):n[o+a]=void 0})),Ot(t).forEach((function(a){i(e,a)||(n[o+a]=t[a])})),n}function wt(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}function gt(e,t,i){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var n=[],o=0,a=0;o<t.keys.length&&a<e.length;++o)0===ne(t.keys[o],e[a])&&(n.push(i?_(t.values[o]):t.values[o]),++a);return n.length===e.length?n:null}catch(e){return null}}function yt(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function bt(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}function vt(e,t,i){if(0===i.numFailures)return t;if("deleteRange"===t.type)return null;var n=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return i.numFailures===n?null:(t=Dt({},t),Nt(t.keys)&&(t.keys=t.keys.filter((function(e,t){return!(t in i.failures)}))),"values"in t&&Nt(t.values)&&(t.values=t.values.filter((function(e,t){return!(t in i.failures)}))),t)}function xt(e,t){return i=e,(void 0===(n=t).lower||(n.lowerOpen?0<ne(i,n.lower):0<=ne(i,n.lower)))&&(void 0===t.upper||(t.upperOpen?ne(e,t.upper)<0:ne(e,t.upper)<=0));var i,n}function kt(e,t,i,n,o,a){if(!i||0===i.length)return e;var r=t.query.index,s=r.multiEntry,c=t.query.range,d=n.schema.primaryKey.extractKey,l=r.extractKey,u=(r.lowLevelIndex||r).extractKey;return(i=i.reduce((function(e,i){var n=e,o="add"===i.type||"put"===i.type?i.values.filter((function(e){return e=l(e),s&&Nt(e)?e.some((function(e){return xt(e,c)})):xt(e,c)})).map((function(e){return e=_(e),a&&Object.freeze(e),e})):[];switch(i.type){case"add":n=e.concat(t.values?o:o.map((function(e){return d(e)})));break;case"put":var r=(new Gi).addKeys(i.values.map((function(e){return d(e)})));n=e.filter((function(e){return e=t.values?d(e):e,!ot(new Gi(e),r)})).concat(t.values?o:o.map((function(e){return d(e)})));break;case"delete":var u=(new Gi).addKeys(i.keys);n=e.filter((function(e){return e=t.values?d(e):e,!ot(new Gi(e),u)}));break;case"deleteRange":var p=i.range;n=e.filter((function(e){return!xt(d(e),p)}))}return n}),e))===e?e:(i.sort((function(e,t){return ne(u(e),u(t))||ne(d(e),d(t))})),t.limit&&t.limit<1/0&&(i.length>t.limit?i.length=t.limit:e.length===t.limit&&i.length<t.limit&&(o.dirty=!0)),a?Object.freeze(i):i)}function At(e,t){return 0===ne(e.lower,t.lower)&&0===ne(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function It(e,t){return function(e,t,i,n){if(void 0===e)return void 0!==t?-1:0;if(void 0===t)return 1;if(0===(t=ne(e,t))){if(i&&n)return 0;if(i)return 1;if(n)return-1}return t}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(e,t,i,n){if(void 0===e)return void 0!==t?1:0;if(void 0===t)return-1;if(0===(t=ne(e,t))){if(i&&n)return 0;if(i)return-1;if(n)return 1}return t}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function Ct(e,t,i,n){e.subscribers.add(i),n.addEventListener("abort",(function(){var n,o;e.subscribers.delete(i),0===e.subscribers.size&&(n=e,o=t,setTimeout((function(){0===n.subscribers.size&&f(o,n)}),3e3))}))}function St(e,t){return new Proxy(e,{get:function(e,i,n){return"db"===i?t:Reflect.get(e,i,n)}})}function Tt(e,t){var i=this;this._middlewares={},this.verno=0;var n=Tt.dependencies;this._options=t=Dt({addons:Tt.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},n=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o,a,r,c,d,l={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:x,dbReadyPromise:null,cancelOpen:x,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};l.dbReadyPromise=new P((function(e){l.dbReadyResolve=e})),l.openCanceller=new P((function(e,t){l.cancelOpen=t})),this._state=l,this.name=e,this.on=se(this,"populate","blocked","versionchange","close",{ready:[R,x]}),this.on.ready.subscribe=s(this.on.ready.subscribe,(function(e){return function(t,n){Tt.vip((function(){var o,a=i._state;a.openComplete?(a.dbOpenError||P.resolve().then(t),n&&e(t)):a.onReadyBeingFired?(a.onReadyBeingFired.push(t),n&&e(t)):(e(t),o=i,n||e((function e(){o.on.ready.unsubscribe(t),o.on.ready.unsubscribe(e)})))}))}})),this.Collection=(o=this,ce(qi.prototype,(function(e,t){this.db=o;var i=Ni,n=null;if(t)try{i=t()}catch(e){n=e}var a=e._ctx;e=(t=a.table).hook.reading.fire,this._ctx={table:t,index:a.index,isPrimKey:!a.index||t.schema.primKey.keyPath&&a.index===t.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:n,or:a.or,valueMapper:e!==k?e:null}}))),this.Table=(a=this,ce(Mi.prototype,(function(e,t,i){this.db=a,this._tx=i,this.name=e,this.schema=t,this.hook=a._allTables[e]?a._allTables[e].hook:se(null,{creating:[C,x],reading:[A,k],updating:[T,x],deleting:[S,x]})}))),this.Transaction=(r=this,ce(Ki.prototype,(function(e,t,i,n,o){var a=this;this.db=r,this.mode=e,this.storeNames=t,this.schema=i,this.chromeTransactionDurability=n,this.idbtrans=null,this.on=se(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new P((function(e,t){a._resolve=e,a._reject=t})),this._completion.then((function(){a.active=!1,a.on.complete.fire()}),(function(e){var t=a.active;return a.active=!1,a.on.error.fire(e),a.parent?a.parent._reject(e):t&&a.idbtrans&&a.idbtrans.abort(),Ti(e)}))}))),this.Version=(c=this,ce($i.prototype,(function(e){this.db=c,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))),this.WhereClause=(d=this,ce(zi.prototype,(function(e,t,i){if(this.db=d,this._ctx={table:e,index:":id"===t?null:t,or:i},this._cmp=this._ascending=ne,this._descending=function(e,t){return ne(t,e)},this._max=function(e,t){return 0<ne(e,t)?e:t},this._min=function(e,t){return ne(e,t)<0?e:t},this._IDBKeyRange=d._deps.IDBKeyRange,!this._IDBKeyRange)throw new ti.MissingAPI}))),this.on("versionchange",(function(e){e.newVersion,i.close({disableAutoOpen:!1})})),this.on("blocked",(function(e){!e.newVersion||(e.newVersion,e.oldVersion)})),this._maxKey=Vi(t.IDBKeyRange),this._createTransaction=function(e,t,n,o){return new i.Transaction(e,t,n,i._options.chromeTransactionDurability,o)},this._fireOnBlocked=function(e){i.on("blocked").fire(e),Pi.filter((function(e){return e.name===i.name&&e!==i&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))},this.use(tn),this.use(on),this.use(nn),this.use(Zi),this.use(en);var u=new Proxy(this,{get:function(e,t,n){if("_vip"===t)return!0;if("table"===t)return function(e){return St(i.table(e),u)};var o=Reflect.get(e,t,n);return o instanceof Mi?St(o,u):"tables"===t?o.map((function(e){return St(e,u)})):"_createTransaction"===t?function(){return St(o.apply(this,arguments),u)}:o}});this.vip=u,n.forEach((function(e){return e(i)}))}function Et(e){this._subscribe=e}function Rt(e){var t,n=!1,o=new sn((function(o){var a,r=Yt(e),s=!1,c={},d={},l={get closed(){return s},unsubscribe:function(){s||(s=!0,a&&a.abort(),u&&Hi.storagemutated.unsubscribe(m))}};o.start&&o.start(l);var u=!1,p=function(){return Z(_)},m=function(e){ct(c,e),dt(d,c)&&p()},_=function(){var l,_,h;!s&&rn.indexedDB&&(c={},l={},a&&a.abort(),a=new AbortController,h=function(t){var i=q();try{r&&K();var n=H(e,t);return n=r?n.finally(V):n}finally{i&&W()}}(_={subscr:l,signal:a.signal,requery:p,querier:e,trans:null}),Promise.resolve(h).then((function(e){n=!0,t=e,s||_.signal.aborted||(c={},function(e){for(var t in e)if(i(e,t))return;return 1}(d=l)||u||(Hi(Fi,m),u=!0),Z((function(){return!s&&o.next&&o.next(e)})))}),(function(e){n=!1,["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||s||Z((function(){s||o.error&&o.error(e)}))})))};return setTimeout(p,0),l}));return o.hasValue=function(){return n},o.getValue=function(){return t},o}function jt(e){var t=ln;try{ln=!0,Hi.storagemutated.fire(e),ut(e,!0)}finally{ln=t}}var Pt=function(e,t){return(Pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},Dt=function(){return(Dt=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Bt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:Me,Ot=Object.keys,Nt=Array.isArray;"undefined"==typeof Promise||Bt.Promise||(Bt.Promise=Promise);var Mt=Object.getPrototypeOf,Lt={}.hasOwnProperty,qt=Object.defineProperty,Wt=Object.getOwnPropertyDescriptor,zt=[].slice,Ft=[].concat,Ut="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(m([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return Bt[e]})),Ht=new Set(Ut.map((function(e){return Bt[e]}))),Kt=null,Vt={}.toString,Jt="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",$t="symbol"==typeof Jt?function(e){var t;return null!=e&&(t=e[Jt])&&t.apply(e)}:function(){return null},Gt={},Yt="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},Xt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(si=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"]),Qt={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};a(g).from(Error).extend({toString:function(){return this.name+": "+this.message}}),a(b).from(g),a(v).from(g);var Zt=Xt.reduce((function(e,t){return e[t]=t+"Error",e}),{}),ei=g,ti=Xt.reduce((function(e,t){function i(e,i){this.name=n,e?"string"==typeof e?(this.message="".concat(e).concat(i?"\n "+i:""),this.inner=i||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=Qt[t]||n,this.inner=null)}var n=t+"Error";return a(i).from(ei),e[t]=i,e}),{});ti.Syntax=SyntaxError,ti.Type=TypeError,ti.Range=RangeError;var ii=si.reduce((function(e,t){return e[t+"Error"]=ti[t],e}),{}),ni=Xt.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=ti[t]),e}),{})
;ni.ModifyError=b,ni.DexieError=g,ni.BulkError=v;var oi="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href),ai={},ri=100,si=(Ut="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,Mt(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,Mt(t),e]}())[0],ci=(Xt=Ut[1],Ut=Ut[2],Xt=Xt&&Xt.then,si&&si.constructor),di=!!Ut,li=function(e,t){gi.push([e,t]),pi&&(queueMicrotask(L),pi=!1)},ui=!0,pi=!0,mi=[],_i=[],hi=k,fi={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:x,pgp:!1,env:{},finalize:x},wi=fi,gi=[],yi=0,bi=[],vi={get:function(){function e(e,n){var o=this,a=!t.global&&(t!==wi||i!==Ci),r=a&&!V(),s=new P((function(i,s){N(o,new D(Q(e,t,a,r),Q(n,t,a,r),i,s,t))}));return this._consoleTask&&(s._consoleTask=this._consoleTask),s}var t=wi,i=Ci;return e.prototype=ai,e},set:function(e){o(this,"then",e&&e.prototype===ai?vi:{get:function(){return e},set:vi.set})}};n(P.prototype,{then:vi,_then:function(e,t){N(this,new D(null,null,e,t,wi))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=e,i=arguments[1];return"function"==typeof t?this.then(null,(function(e){return(e instanceof t?i:F)(e)})):this.then(null,(function(e){return(e&&e.name===t?i:F)(e)}))},finally:function(e){return this.then((function(t){return P.resolve(e()).then((function(){return t}))}),(function(t){return P.resolve(e()).then((function(){return F(t)}))}))},timeout:function(e,t){var i=this;return e<1/0?new P((function(n,o){var a=setTimeout((function(){return o(new ti.Timeout(t))}),e);i.then(n,o).finally(clearTimeout.bind(null,a))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&o(P.prototype,Symbol.toStringTag,"Dexie.Promise"),fi.env=Y(),n(P,{all:function(){var e=w.apply(null,arguments).map(J);return new P((function(t,i){0===e.length&&t([]);var n=e.length;e.forEach((function(o,a){return P.resolve(o).then((function(i){e[a]=i,--n||t(e)}),i)}))}))},resolve:function(e){return e instanceof P?e:e&&"function"==typeof e.then?new P((function(t,i){e.then(t,i)})):new P(ai,!0,e)},reject:F,race:function(){var e=w.apply(null,arguments).map(J);return new P((function(t,i){e.map((function(e){return P.resolve(e).then(t,i)}))}))},PSD:{get:function(){return wi},set:function(e){return wi=e}},totalEchoes:{get:function(){return Ci}},newPSD:H,usePSD:X,scheduler:{get:function(){return li},set:function(e){li=e}},rejectionMapper:{get:function(){return hi},set:function(e){hi=e}},follow:function(e,t){return new P((function(i,n){return H((function(t,i){var n=wi;n.unhandleds=[],n.onunhandled=i,n.finalize=I((function(){var e,n=this;e=function(){0===n.unhandleds.length?t():i(n.unhandleds[0])},bi.push((function t(){e(),bi.splice(bi.indexOf(t),1)})),++yi,li((function(){0==--yi&&z()}),[])}),n.finalize),e()}),t,i,n)}))}}),ci&&(ci.allSettled&&o(P,"allSettled",(function(){var e=w.apply(null,arguments).map(J);return new P((function(t){0===e.length&&t([]);var i=e.length,n=new Array(i);e.forEach((function(e,o){return P.resolve(e).then((function(e){return n[o]={status:"fulfilled",value:e}}),(function(e){return n[o]={status:"rejected",reason:e}})).then((function(){return--i||t(n)}))}))}))})),ci.any&&"undefined"!=typeof AggregateError&&o(P,"any",(function(){var e=w.apply(null,arguments).map(J);return new P((function(t,i){0===e.length&&i(new AggregateError([]));var n=e.length,o=new Array(n);e.forEach((function(e,a){return P.resolve(e).then((function(e){return t(e)}),(function(e){o[a]=e,--n||i(new AggregateError(o))}))}))}))})));var xi={awaits:0,echoes:0,id:0},ki=0,Ai=[],Ii=0,Ci=0,Si=0;-1===(""+Xt).indexOf("[native code]")&&(K=V=x);var Ti=P.reject,Ei=String.fromCharCode(65535),Ri="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ji="String expected.",Pi=[],Di="__dbnames",Bi="readonly",Oi="readwrite",Ni={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1},Mi=(re.prototype._trans=function(e,t,i){function n(e,i,n){if(!n.schema[a])throw new ti.NotFound("Table "+a+" not part of transaction");return t(n.idbtrans,n)}var o=this._tx||wi.trans,a=this.name,r=oi&&"undefined"!=typeof console&&console.createTask&&void 0,s=q();try{var c=o&&o.db._novip===this.db._novip?o===wi.trans?o._promise(e,n,i):H((function(){return o._promise(e,n,i)}),{trans:o,transless:wi.transless||wi}):function e(t,i,n,o){if(t.idbdb&&(t._state.openComplete||wi.letThrough||t._vip)){var a=t._createTransaction(i,n,t._dbSchema);try{a.create(),t._state.PR1398_maxLoop=3}catch(a){return a.name===Zt.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(t.close({disableAutoOpen:!1}),t.open().then((function(){return e(t,i,n,o)}))):Ti(a)}return a._promise(i,(function(e,t){return H((function(){return wi.trans=a,o(e,t,a)}))})).then((function(e){if("readwrite"===i)try{a.idbtrans.commit()}catch(e){}return"readonly"===i?e:a._completion.then((function(){return e}))}))}if(t._state.openComplete)return Ti(new ti.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return Ti(new ti.DatabaseClosed);t.open().catch(x)}return t._state.dbReadyPromise.then((function(){return e(t,i,n,o)}))}(this.db,e,[this.name],n);return r&&(c._consoleTask=r,c=c.catch((function(e){return Ti(e)}))),c}finally{s&&W()}},re.prototype.get=function(e,t){var i=this;return e&&e.constructor===Object?this.where(e).first(t):null==e?Ti(new ti.Type("Invalid argument to Table.get()")):this._trans("readonly",(function(t){return i.core.get({trans:t,key:e}).then((function(e){return i.hook.reading.fire(e)}))})).then(t)},re.prototype.where=function(e){function t(e,t){return 0===r.cmp(e,t)}if("string"==typeof e)return new this.db.WhereClause(this,e);if(Nt(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var i=Ot(e);if(1===i.length)return this.where(i[0]).equals(e[i[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){if(e.compound&&i.every((function(t){return 0<=e.keyPath.indexOf(t)}))){for(var t=0;t<i.length;++t)if(-1===i.indexOf(e.keyPath[t]))return!1;return!0}return!1})).sort((function(e,t){return e.keyPath.length-t.keyPath.length}))[0];if(n&&this.db._maxKey!==Ei){var o=n.keyPath.slice(0,i.length);return this.where(o).equals(o.map((function(t){return e[t]})))}var a=this.schema.idxByName,r=this.db._deps.indexedDB;o=(s=i.reduce((function(i,n){var o=i[0],r=i[1],s=(i=a[n],e[n]);return[o||i,o||!i?ee(r,i&&i.multi?function(e){return e=l(e,n),Nt(e)&&e.some((function(e){return t(s,e)}))}:function(e){return t(s,l(e,n))}):r]}),[null,null]))[0];var s=s[1];return o?this.where(o.name).equals(e[o.keyPath]).filter(s):n?this.filter(s):this.where(i).equals("")},re.prototype.filter=function(e){return this.toCollection().and(e)},re.prototype.count=function(e){return this.toCollection().count(e)},re.prototype.offset=function(e){return this.toCollection().offset(e)},re.prototype.limit=function(e){return this.toCollection().limit(e)},re.prototype.each=function(e){return this.toCollection().each(e)},re.prototype.toArray=function(e){return this.toCollection().toArray(e)},re.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},re.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,Nt(e)?"[".concat(e.join("+"),"]"):e))},re.prototype.reverse=function(){return this.toCollection().reverse()},re.prototype.mapToClass=function(e){function t(){return null!==n&&n.apply(this,arguments)||this}function i(t){if(!t)return t;var i,n=Object.create(e.prototype);for(i in t)if(!r.has(i))try{n[i]=t[i]}catch(e){}return n}var n,o=this.db,a=this.name;(this.schema.mappedClass=e).prototype instanceof ie&&(function(e,t){function i(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Pt(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}(t,n=e),Object.defineProperty(t.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),t.prototype.table=function(){return a},e=t);for(var r=new Set,s=e.prototype;s;s=Mt(s))Object.getOwnPropertyNames(s).forEach((function(e){return r.add(e)}));return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=i,this.hook("reading",i),e},re.prototype.defineClass=function(){return this.mapToClass((function(e){t(this,e)}))},re.prototype.add=function(e,t){var i=this,n=this.schema.primKey,o=n.auto,a=n.keyPath,r=e;return a&&o&&(r=te(a)(e)),this._trans("readwrite",(function(e){return i.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[r]})})).then((function(e){return e.numFailures?P.reject(e.failures[0]):e.lastResult})).then((function(t){if(a)try{u(e,a,t)}catch(e){}return t}))},re.prototype.update=function(e,t){return"object"!=typeof e||Nt(e)?this.where(":id").equals(e).modify(t):void 0===(e=l(e,this.schema.primKey.keyPath))?Ti(new ti.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t)},re.prototype.put=function(e,t){var i=this,n=this.schema.primKey,o=n.auto,a=n.keyPath,r=e;return a&&o&&(r=te(a)(e)),this._trans("readwrite",(function(e){return i.core.mutate({trans:e,type:"put",values:[r],keys:null!=t?[t]:null})})).then((function(e){return e.numFailures?P.reject(e.failures[0]):e.lastResult})).then((function(t){if(a)try{u(e,a,t)}catch(e){}return t}))},re.prototype.delete=function(e){var t=this;return this._trans("readwrite",(function(i){return t.core.mutate({trans:i,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?P.reject(e.failures[0]):void 0}))},re.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Ni})})).then((function(e){return e.numFailures?P.reject(e.failures[0]):void 0}))},re.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",(function(i){return t.core.getMany({keys:e,trans:i}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))},re.prototype.bulkAdd=function(e,t,i){var n=this,o=Array.isArray(t)?t:void 0,a=(i=i||(o?void 0:t))?i.allKeys:void 0;return this._trans("readwrite",(function(t){var i=(s=n.schema.primKey).auto;if((s=s.keyPath)&&o)throw new ti.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new ti.InvalidArgument("Arguments objects and keys must have the same length");var r=e.length,s=s&&i?e.map(te(s)):e;return n.core.mutate({trans:t,type:"add",keys:o,values:s,wantResults:a}).then((function(e){var t=e.numFailures,i=e.results,o=e.lastResult;if(e=e.failures,0===t)return a?i:o;throw new v("".concat(n.name,".bulkAdd(): ").concat(t," of ").concat(r," operations failed"),e)}))}))},re.prototype.bulkPut=function(e,t,i){var n=this,o=Array.isArray(t)?t:void 0,a=(i=i||(o?void 0:t))?i.allKeys:void 0;return this._trans("readwrite",(function(t){var i=(s=n.schema.primKey).auto;if((s=s.keyPath)&&o)throw new ti.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new ti.InvalidArgument("Arguments objects and keys must have the same length");var r=e.length,s=s&&i?e.map(te(s)):e;return n.core.mutate({trans:t,type:"put",keys:o,values:s,wantResults:a}).then((function(e){var t=e.numFailures,i=e.results,o=e.lastResult;if(e=e.failures,0===t)return a?i:o;throw new v("".concat(n.name,".bulkPut(): ").concat(t," of ").concat(r," operations failed"),e)}))}))},re.prototype.bulkUpdate=function(e){var t=this,i=this.core,n=e.map((function(e){return e.key})),o=e.map((function(e){return e.changes})),a=[];return this._trans("readwrite",(function(r){return i.getMany({trans:r,keys:n,cache:"clone"}).then((function(s){var c=[],d=[];e.forEach((function(e,i){var n=e.key,o=e.changes,r=s[i];if(r){for(var l=0,p=Object.keys(o);l<p.length;l++){var m=p[l],_=o[m];if(m===t.schema.primKey.keyPath){if(0!==ne(_,n))throw new ti.Constraint("Cannot update primary key in bulkUpdate()")}else u(r,m,_)}a.push(i),c.push(n),d.push(r)}}));var l=c.length;return i.mutate({trans:r,type:"put",keys:c,values:d,updates:{keys:n,changeSpecs:o}}).then((function(e){var i=e.numFailures,n=e.failures;if(0===i)return l;for(var o=0,r=Object.keys(n);o<r.length;o++){var s,c=r[o],d=a[Number(c)];null!=d&&(s=n[c],delete n[c],n[d]=s)}throw new v("".concat(t.name,".bulkUpdate(): ").concat(i," of ").concat(l," operations failed"),n)}))}))}))},re.prototype.bulkDelete=function(e){var t=this,i=e.length;return this._trans("readwrite",(function(i){return t.core.mutate({trans:i,type:"delete",keys:e})})).then((function(e){var n=e.numFailures,o=e.lastResult;if(e=e.failures,0===n)return o;throw new v("".concat(t.name,".bulkDelete(): ").concat(n," of ").concat(i," operations failed"),e)}))},re);Ut=Symbol();var Li=(fe.prototype.execute=function(e){var t=null===(t=this.replacePrefix)||void 0===t?void 0:t[0];return t&&"string"==typeof e&&e.startsWith(t)?this.replacePrefix[1]+e.substring(t.length):e},fe),qi=(we.prototype._read=function(e,t){var i=this._ctx;return i.error?i.table._trans(null,Ti.bind(null,i.error)):i.table._trans("readonly",e).then(t)},we.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Ti.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},we.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=ee(t.algorithm,e)},we.prototype._iterate=function(e,t){return _e(this._ctx,e,t,this._ctx.table.core)},we.prototype.clone=function(e){var i=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&t(n,e),i._ctx=n,i},we.prototype.raw=function(){return this._ctx.valueMapper=null,this},we.prototype.each=function(e){var t=this._ctx;return this._read((function(i){return _e(t,e,i,t.table.core)}))},we.prototype.count=function(e){var t=this;return this._read((function(e){var i=t._ctx,n=i.table.core;if(de(i,!0))return n.count({trans:e,query:{index:pe(i,n.schema),range:i.range}}).then((function(e){return Math.min(e,i.limit)}));var o=0;return _e(i,(function(){return++o,!1}),e,n).then((function(){return o}))})).then(e)},we.prototype.sortBy=function(e,t){function i(e,t){return t?i(e[o[t]],t-1):e[a]}function n(e,t){return(e=i(e,r))<(t=i(t,r))?-s:t<e?s:0}var o=e.split(".").reverse(),a=o[0],r=o.length-1,s="next"===this._ctx.dir?1:-1;return this.toArray((function(e){return e.sort(n)})).then(t)},we.prototype.toArray=function(e){var t=this;return this._read((function(e){var i=t._ctx;if("next"===i.dir&&de(i,!0)&&0<i.limit){var n=i.valueMapper,o=pe(i,i.table.core.schema);return i.table.core.query({trans:e,limit:i.limit,values:!0,query:{index:o,range:i.range}}).then((function(e){return e=e.result,n?e.map(n):e}))}var a=[];return _e(i,(function(e){return a.push(e)}),e,i.table.core).then((function(){return a}))}),e)},we.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,de(t)?ue(t,(function(){var t=e;return function(e,i){return 0===t||(1===t?--t:i((function(){e.advance(t),t=0})),!1)}})):ue(t,(function(){var t=e;return function(){return--t<0}}))),this},we.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),ue(this._ctx,(function(){var t=e;return function(e,i,n){return--t<=0&&i(n),0<=t}}),!0),this},we.prototype.until=function(e,t){return le(this._ctx,(function(i,n,o){return!e(i.value)||(n(o),t)})),this},we.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},we.prototype.last=function(e){return this.reverse().first(e)},we.prototype.filter=function(e){var t;return le(this._ctx,(function(t){return e(t.value)})),(t=this._ctx).isMatch=ee(t.isMatch,e),this},we.prototype.and=function(e){return this.filter(e)},we.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},we.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},we.prototype.desc=function(){return this.reverse()},we.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,i){e(i.key,i)}))},we.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},we.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,i){e(i.primaryKey,i)}))},we.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var i=[];return this.each((function(e,t){i.push(t.key)})).then((function(){return i})).then(e)},we.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&de(t,!0)&&0<t.limit)return this._read((function(e){var i=pe(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:i,range:t.range}})})).then((function(e){return e.result})).then(e);t.keysOnly=!t.isMatch;var i=[];return this.each((function(e,t){i.push(t.primaryKey)})).then((function(){return i})).then(e)},we.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},we.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},we.prototype.lastKey=function(e){return this.reverse().firstKey(e)},we.prototype.distinct=function(){var e;if(!(e=(e=this._ctx).index&&e.table.schema.idxByName[e.index])||!e.multi)return this;var t={};return le(this._ctx,(function(e){var n=e.primaryKey.toString();return e=i(t,n),t[n]=!0,!e})),this},we.prototype.modify=function(e){var t=this,i=this._ctx;return this._write((function(n){function o(e,t){var i=t.failures;t=t.numFailures,w+=e-t;for(var n=0,o=Ot(i);n<o.length;n++){var a=o[n];f.push(i[a])}}var a,r,s;s="function"==typeof e?e:(a=Ot(e),r=a.length,function(t){for(var i=!1,n=0;n<r;++n){var o=a[n],s=e[o],c=l(t,o);s instanceof Li?(u(t,o,s.execute(c)),i=!0):c!==s&&(u(t,o,s),i=!0)}return i});var c=i.table.core,d=c.schema.primaryKey,p=d.outbound,m=d.extractKey,h=t.db._options.modifyChunkSize||200,f=[],w=0,g=[];return t.clone().primaryKeys().then((function(t){function a(r){var d=Math.min(h,t.length-r);return c.getMany({trans:n,keys:t.slice(r,r+d),cache:"immutable"}).then((function(l){for(var u=[],f=[],w=p?[]:null,g=[],y=0;y<d;++y){var b=l[y],v={value:_(b),primKey:t[r+y]};!1!==s.call(v,v.value,v)&&(null==v.value?g.push(t[r+y]):p||0===ne(m(b),m(v.value))?(f.push(v.value),p&&w.push(t[r+y])):(g.push(t[r+y]),u.push(v.value)))}var x=de(i)&&i.limit===1/0&&("function"!=typeof e||e===Wi)&&{index:i.index,range:i.range};return Promise.resolve(0<u.length&&c.mutate({trans:n,type:"add",values:u}).then((function(e){for(var t in e.failures)g.splice(parseInt(t),1);o(u.length,e)}))).then((function(){return(0<f.length||x&&"object"==typeof e)&&c.mutate({trans:n,type:"put",keys:w,values:f,criteria:x,changeSpec:"function"!=typeof e&&e}).then((function(e){return o(f.length,e)}))})).then((function(){return(0<g.length||x&&e===Wi)&&c.mutate({trans:n,type:"delete",keys:g,criteria:x}).then((function(e){return o(g.length,e)}))})).then((function(){return t.length>r+d&&a(r+h)}))}))}return a(0).then((function(){if(0<f.length)throw new b("Error modifying one or more objects",f,w,g);return t.length}))}))}))},we.prototype.delete=function(){var e=this._ctx,t=e.range;return de(e)&&(e.isPrimKey||3===t.type)?this._write((function(i){var n=e.table.core.schema.primaryKey,o=t;return e.table.core.count({trans:i,query:{index:n,range:o}}).then((function(t){return e.table.core.mutate({trans:i,type:"deleteRange",range:o}).then((function(e){var i=e.failures;if(e.lastResult,e.results,e=e.numFailures)throw new b("Could not delete some values",Object.keys(i).map((function(e){return i[e]})),t-e);return t-e}))}))})):this.modify(Wi)},we),Wi=function(e,t){return t.value=null},zi=(Object.defineProperty(Ie.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ie.prototype.between=function(e,t,i,n){i=!1!==i,n=!0===n;try{return 0<this._cmp(e,t)||0===this._cmp(e,t)&&(i||n)&&(!i||!n)?ve(this):new this.Collection(this,(function(){return ke(e,t,!i,!n)}))}catch(e){return be(this,Ri)}},Ie.prototype.equals=function(e){return null==e?be(this,Ri):new this.Collection(this,(function(){return Ae(e)}))},Ie.prototype.above=function(e){return null==e?be(this,Ri):new this.Collection(this,(function(){return ke(e,void 0,!0)}))},Ie.prototype.aboveOrEqual=function(e){return null==e?be(this,Ri):new this.Collection(this,(function(){return ke(e,void 0,!1)}))},Ie.prototype.below=function(e){return null==e?be(this,Ri):new this.Collection(this,(function(){return ke(void 0,e,!1,!0)}))},Ie.prototype.belowOrEqual=function(e){return null==e?be(this,Ri):new this.Collection(this,(function(){return ke(void 0,e)}))},Ie.prototype.startsWith=function(e){return"string"!=typeof e?be(this,ji):this.between(e,e+Ei,!0,!0)},Ie.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):xe(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],Ei)},Ie.prototype.equalsIgnoreCase=function(e){return xe(this,(function(e,t){return e===t[0]}),[e],"")},Ie.prototype.anyOfIgnoreCase=function(){var e=w.apply(Gt,arguments);return 0===e.length?ve(this):xe(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},Ie.prototype.startsWithAnyOfIgnoreCase=function(){var e=w.apply(Gt,arguments);return 0===e.length?ve(this):xe(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,Ei)},Ie.prototype.anyOf=function(){var e=this,t=w.apply(Gt,arguments),i=this._cmp;try{t.sort(i)}catch(e){return be(this,Ri)}if(0===t.length)return ve(this);var n=new this.Collection(this,(function(){return ke(t[0],t[t.length-1])}));n._ondirectionchange=function(n){i="next"===n?e._ascending:e._descending,t.sort(i)};var o=0;return n._addAlgorithm((function(e,n,a){for(var r=e.key;0<i(r,t[o]);)if(++o===t.length)return n(a),!1;return 0===i(r,t[o])||(n((function(){e.continue(t[o])})),!1)})),n},Ie.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ie.prototype.noneOf=function(){var e=w.apply(Gt,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return be(this,Ri)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]}),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},Ie.prototype.inAnyRange=function(e,t){function i(e,t){return p(e[0],t[0])}var n=this,o=this._cmp,a=this._ascending,r=this._descending,s=this._min,c=this._max;if(0===e.length)return ve(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&a(e[0],e[1])<=0})))return be(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ti.InvalidArgument);var d,l=!t||!1!==t.includeLowers,u=t&&!0===t.includeUppers,p=a;try{(d=e.reduce((function(e,t){for(var i=0,n=e.length;i<n;++i){var a=e[i];if(o(t[0],a[1])<0&&0<o(t[1],a[0])){a[0]=s(a[0],t[0]),a[1]=c(a[1],t[1]);break}}return i===n&&e.push(t),e}),[])).sort(i)}catch(e){return be(this,Ri)}var m=0,_=u?function(e){return 0<a(e,d[m][1])}:function(e){return 0<=a(e,d[m][1])},h=l?function(e){return 0<r(e,d[m][0])}:function(e){return 0<=r(e,d[m][0])},f=_;return(e=new this.Collection(this,(function(){return ke(d[0][0],d[d.length-1][1],!l,!u)})))._ondirectionchange=function(e){p="next"===e?(f=_,a):(f=h,r),d.sort(i)},e._addAlgorithm((function(e,t,i){for(var o,r=e.key;f(r);)if(++m===d.length)return t(i),!1;return!_(o=r)&&!h(o)||(0===n._cmp(r,d[m][1])||0===n._cmp(r,d[m][0])||t((function(){p===a?e.continue(d[m][0]):e.continue(d[m][1])})),!1)})),e},Ie.prototype.startsWithAnyOf=function(){var e=w.apply(Gt,arguments);return e.every((function(e){return"string"==typeof e}))?0===e.length?ve(this):this.inAnyRange(e.map((function(e){return[e,e+Ei]}))):be(this,"startsWithAnyOf() only works with strings")},Ie),Fi="storagemutated",Ui="x-storagemutated-1",Hi=se(null,Fi),Ki=(Te.prototype._lock=function(){return c(!wi.global),++this._reculock,1!==this._reculock||wi.global||(wi.lockOwnerFor=this),this},Te.prototype._unlock=function(){if(c(!wi.global),0==--this._reculock)for(wi.global||(wi.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{X(e[1],e[0])}catch(e){}}return this},Te.prototype._locked=function(){return this._reculock&&wi.lockOwnerFor!==this},Te.prototype.create=function(e){var t=this;if(!this.mode)return this;var i=this.db.idbdb,n=this.db._state.dbOpenError;if(c(!this.idbtrans),!e&&!i)switch(n&&n.name){case"DatabaseClosedError":throw new ti.DatabaseClosed(n);case"MissingAPIError":throw new ti.MissingAPI(n.message,n);default:throw new ti.OpenFailed(n)}if(!this.active)throw new ti.TransactionInactive;return c(null===this._completion._state),(e=this.idbtrans=e||(this.db.core||i).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=U((function(i){Se(i),t._reject(e.error)})),e.onabort=U((function(i){Se(i),t.active&&t._reject(new ti.Abort(e.error)),t.active=!1,t.on("abort").fire(i)})),e.oncomplete=U((function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Hi.storagemutated.fire(e.mutatedParts)})),this},Te.prototype._promise=function(e,t,i){var n=this;if("readwrite"===e&&"readwrite"!==this.mode)return Ti(new ti.ReadOnly("Transaction is readonly"));if(!this.active)return Ti(new ti.TransactionInactive);if(this._locked())return new P((function(o,a){n._blockedFuncs.push([function(){n._promise(e,t,i).then(o,a)},wi])}));if(i)return H((function(){var e=new P((function(e,i){n._lock();var o=t(e,i,n);o&&o.then&&o.then(e,i)}));return e.finally((function(){return n._unlock()})),e._lib=!0,e}));var o=new P((function(e,i){var o=t(e,i,n);o&&o.then&&o.then(e,i)}));return o._lib=!0,o},Te.prototype._root=function(){return this.parent?this.parent._root():this},Te.prototype.waitFor=function(e){var t,i=this._root(),n=P.resolve(e);i._waitingFor?i._waitingFor=i._waitingFor.then((function(){return n})):(i._waitingFor=n,i._waitingQueue=[],t=i.idbtrans.objectStore(i.storeNames[0]),function e(){for(++i._spinCount;i._waitingQueue.length;)i._waitingQueue.shift()();i._waitingFor&&(t.get(-1/0).onsuccess=e)}());var o=i._waitingFor;return new P((function(e,t){n.then((function(t){return i._waitingQueue.push(U(e.bind(null,t)))}),(function(e){return i._waitingQueue.push(U(t.bind(null,e)))})).finally((function(){i._waitingFor===o&&(i._waitingFor=null)}))}))},Te.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ti.Abort))},Te.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(i(t,e))return t[e];var n=this.schema[e];if(!n)throw new ti.NotFound("Table "+e+" not part of transaction");return(n=new this.db.Table(e,n,this)).core=this.db.core.table(e),t[e]=n},Te),Vi=function(e){try{return e.only([[]]),Vi=function(){return[[]]},[[]]}catch(e){return Vi=function(){return Ei},Ei}},Ji=0,$i=(Xe.prototype._parseStoresSpec=function(e,t){Ot(e).forEach((function(i){if(null!==e[i]){var n=Ye(e[i]),o=n.shift();if(o.unique=!0,o.multi)throw new ti.Schema("Primary key cannot be multi-valued");n.forEach((function(e){if(e.auto)throw new ti.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new ti.Schema("Index must have a name and cannot be an empty string")})),t[i]=je(i,o,n)}}))},Xe.prototype.stores=function(e){var i=this.db;this._cfg.storesSource=this._cfg.storesSource?t(this._cfg.storesSource,e):e,e=i._versions;var n={},o={};return e.forEach((function(e){t(n,e._cfg.storesSource),o=e._cfg.dbschema={},e._parseStoresSpec(n,o)})),i._dbSchema=o,We(i,[i._allTables,i,i.Transaction.prototype]),qe(i,[i._allTables,i,i.Transaction.prototype,this._cfg.tables],Ot(o),o),i._storeNames=Ot(o),this},Xe.prototype.upgrade=function(e){return this._cfg.contentUpgrade=R(this._cfg.contentUpgrade||x,e),this},Xe),Gi=function(e,i){if(!this){var n=new Gi;return e&&"d"in e&&t(n,e),n}t(this,arguments.length?{d:1,from:e,to:1<arguments.length?i:e}:{d:0})};n(Gi.prototype,((Xt={add:function(e){return nt(this,e),this},addKey:function(e){return it(this,e,e),this},addKeys:function(e){var t=this;return e.forEach((function(e){return it(t,e,e)})),this}})[Jt]=function(){return at(this)},Xt));var Yi={},Xi={},Qi=!1,Zi={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return Dt(Dt({},e),{table:function(t){function i(e,t,n){var o=Be(e),a=r[o]=r[o]||[],c=null==e?0:"string"==typeof e?1:e.length,d=0<t;return d=Dt(Dt({},n),{name:d?"".concat(o,"(virtual-from:").concat(n.name,")"):n.name,lowLevelIndex:n,isVirtual:d,keyTail:t,keyLength:c,extractKey:Pe(e),unique:!d&&n.unique}),a.push(d),d.isPrimaryKey||s.push(d),1<c&&i(2===c?e[0]:e.slice(0,c-1),t+1,n),a.sort((function(e,t){return e.keyTail-t.keyTail})),d}function n(t){var i,n=t.query.index;return n.isVirtual?Dt(Dt({},t),{query:{index:n.lowLevelIndex,range:(i=t.query.range,n=n.keyTail,{type:1===i.type?2:i.type,lower:ht(i.lower,i.lowerOpen?e.MAX_KEY:e.MIN_KEY,n),lowerOpen:!0,upper:ht(i.upper,i.upperOpen?e.MIN_KEY:e.MAX_KEY,n),upperOpen:!0})}}):t}var o=e.table(t),a=o.schema,r={},s=[];t=i(a.primaryKey.keyPath,0,a.primaryKey),r[":id"]=[t];for(var c=0,d=a.indexes;c<d.length;c++){var l=d[c];i(l.keyPath,0,l)}return Dt(Dt({},o),{schema:Dt(Dt({},a),{primaryKey:t,indexes:s,getIndexByKeyPath:function(e){return(e=r[Be(e)])&&e[0]}}),count:function(e){return o.count(n(e))},query:function(e){return o.query(n(e))},openCursor:function(t){function i(i){return Object.create(i,{continue:{value:function(n){null!=n?i.continue(ht(n,t.reverse?e.MAX_KEY:e.MIN_KEY,r)):t.unique?i.continue(i.key.slice(0,c).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,r)):i.continue()}},continuePrimaryKey:{value:function(t,n){i.continuePrimaryKey(ht(t,e.MAX_KEY,r),n)}},primaryKey:{get:function(){return i.primaryKey}},key:{get:function(){var e=i.key;return 1===c?e[0]:e.slice(0,c)}},value:{get:function(){return i.value}}})}var a=t.query.index,r=a.keyTail,s=a.isVirtual,c=a.keyLength;return s?o.openCursor(n(t)).then((function(e){return e&&i(e)})):o.openCursor(t)}})}})}},en={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return Dt(Dt({},t),{table:function(n){var o=t.table(n),a=o.schema.primaryKey;return Dt(Dt({},o),{mutate:function(t){function r(t){var n,r,s,c=wi.trans,m=t.keys||wt(a,t);if(!m)throw new Error("Keys missing");return"delete"!==(t="add"===t.type||"put"===t.type?Dt(Dt({},t),{keys:m}):Dt({},t)).type&&(t.values=e([],t.values,!0)),t.keys&&(t.keys=e([],t.keys,!0)),n=o,s=m,("add"===(r=t).type?Promise.resolve([]):n.getMany({trans:r.trans,keys:s,cache:"immutable"})).then((function(e){var n=m.map((function(n,o){var r,s,m,_=e[o],h={onerror:null,onsuccess:null};return"delete"===t.type?d.fire.call(h,n,_,c):"add"===t.type||void 0===_?(r=l.fire.call(h,n,t.values[o],c),null==n&&null!=r&&(t.keys[o]=n=r,a.outbound||u(t.values[o],a.keyPath,n))):(r=ft(_,t.values[o]),(s=p.fire.call(h,r,n,_,c))&&(m=t.values[o],Object.keys(s).forEach((function(e){i(m,e)?m[e]=s[e]:u(m,e,s[e])})))),h}));return o.mutate(t).then((function(i){for(var o=i.failures,a=i.results,r=i.numFailures,s=(i=i.lastResult,0);s<m.length;++s){var c=(a||m)[s],d=n[s];null==c?d.onerror&&d.onerror(o[s]):d.onsuccess&&d.onsuccess("put"===t.type&&e[s]?t.values[s]:c)}return{failures:o,results:a,numFailures:r,lastResult:i}})).catch((function(e){return n.forEach((function(t){return t.onerror&&t.onerror(e)})),Promise.reject(e)}))}))}var s=wi.trans,c=s.table(n).hook,d=c.deleting,l=c.creating,p=c.updating;switch(t.type){case"add":if(l.fire===x)break;return s._promise("readwrite",(function(){return r(t)}),!0);case"put":if(l.fire===x&&p.fire===x)break;return s._promise("readwrite",(function(){return r(t)}),!0);case"delete":if(d.fire===x)break;return s._promise("readwrite",(function(){return r(t)}),!0);case"deleteRange":if(d.fire===x)break;return s._promise("readwrite",(function(){return function e(t,i,n){return o.query({trans:t,values:!1,query:{index:a,range:i},limit:n}).then((function(o){var a=o.result;return r({type:"delete",keys:a,trans:t}).then((function(o){return 0<o.numFailures?Promise.reject(o.failures[0]):a.length<n?{failures:[],numFailures:0,lastResult:void 0}:e(t,Dt(Dt({},i),{lower:a[a.length-1],lowerOpen:!0}),n)}))}))}(t.trans,t.range,1e4)}),!0)}return o.mutate(t)}})}})}},tn={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var i=e.table(t);return Dt(Dt({},i),{getMany:function(e){if(!e.cache)return i.getMany(e);var t=gt(e.keys,e.trans._cache,"clone"===e.cache);return t?P.resolve(t):i.getMany(e).then((function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?_(t):t},t}))},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),i.mutate(e)}})}}}},nn={stack:"dbcore",level:0,name:"Observability",create:function(e){
var t=e.schema.name,i=new Gi(e.MIN_KEY,e.MAX_KEY);return Dt(Dt({},e),{transaction:function(t,i,n){if(wi.subscr&&"readonly"!==i)throw new ti.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(wi.querier));return e.transaction(t,i,n)},table:function(n){var o=e.table(n),a=o.schema,r=a.primaryKey,s=a.indexes,c=r.extractKey,d=r.outbound,l=r.autoIncrement&&s.filter((function(e){return e.compound&&e.keyPath.includes(r.keyPath)})),u=Dt(Dt({},o),{mutate:function(e){function s(e){return e="idb://".concat(t,"/").concat(n,"/").concat(e),m[e]||(m[e]=new Gi)}var c,d,u,p=e.trans,m=e.mutatedParts||(e.mutatedParts={}),_=s(""),h=s(":dels"),f=e.type,w=(y="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[wt(r,e).filter((function(e){return e})),e.values]:[])[0],g=y[1],y=e.trans._cache;return Nt(w)?(_.addKeys(w),(y="delete"===f||w.length===g.length?gt(w,y):null)||h.addKeys(w),(y||g)&&(c=s,d=y,u=g,a.indexes.forEach((function(e){function t(t){return null!=t?e.extractKey(t):null}function i(t){return e.multiEntry&&Nt(t)?t.forEach((function(e){return n.addKey(e)})):n.addKey(t)}var n=c(e.name||"");(d||u).forEach((function(e,n){var o=d&&t(d[n]);0!==ne(o,n=u&&t(u[n]))&&(null!=o&&i(o),null!=n&&i(n))}))})))):w?(g={from:w.lower,to:w.upper},h.add(g),_.add(g)):(_.add(i),h.add(i),a.indexes.forEach((function(e){return s(e.name).add(i)}))),o.mutate(e).then((function(t){return!w||"add"!==e.type&&"put"!==e.type||(_.addKeys(t.results),l&&l.forEach((function(i){var n=e.values.map((function(e){return i.extractKey(e)})),o=i.keyPath.findIndex((function(e){return e===r.keyPath}));t.results.forEach((function(e){return n[o]=e})),s(i.name).addKeys(n)}))),p.mutatedParts=ct(p.mutatedParts||{},m),t}))}}),p={get:function(e){return[r,new Gi(e.key)]},getMany:function(e){return[r,(new Gi).addKeys(e.keys)]},count:s=function(t){t=(i=t.query).index;var i=i.range;return[t,new Gi(null!==(t=i.lower)&&void 0!==t?t:e.MIN_KEY,null!==(i=i.upper)&&void 0!==i?i:e.MAX_KEY)]},query:s,openCursor:s};return Ot(p).forEach((function(e){u[e]=function(a){var r=!!(_=wi.subscr),s=yt(wi,o)&&bt(e,a)?a.obsSet={}:_;if(r){var l=function(e){return e="idb://".concat(t,"/").concat(n,"/").concat(e),s[e]||(s[e]=new Gi)},u=l(""),m=l(":dels"),_=(r=(_=p[e](a))[0],_[1]);if(("query"===e&&r.isPrimaryKey&&!a.values?m:l(r.name||"")).add(_),!r.isPrimaryKey){if("count"!==e){var h="query"===e&&d&&a.values&&o.query(Dt(Dt({},a),{values:!1}));return o[e].apply(this,arguments).then((function(t){if("query"===e){if(d&&a.values)return h.then((function(e){return e=e.result,u.addKeys(e),t}));var i=a.values?t.result.map(c):t.result;(a.values?u:m).addKeys(i)}else if("openCursor"===e){var n=t,o=a.values;return n&&Object.create(n,{key:{get:function(){return m.addKey(n.primaryKey),n.key}},primaryKey:{get:function(){var e=n.primaryKey;return m.addKey(e),e}},value:{get:function(){return o&&u.addKey(n.primaryKey),n.value}}})}return t}))}m.add(i)}}return o[e].apply(this,arguments)}})),u}})}},on={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return Dt(Dt({},e),{transaction:function(i,n,o){var a,r,s=e.transaction(i,n,o);return"readwrite"===n&&(r=(a=new AbortController).signal,o=function(o){return function(){if(a.abort(),"readwrite"===n){for(var r=new Set,c=0,d=i;c<d.length;c++){var l=d[c],u=Yi["idb://".concat(t,"/").concat(l)];if(u){var p=e.table(l),m=u.optimisticOps.filter((function(e){return e.trans===s}));if(s._explicit&&o&&s.mutatedParts)for(var _=0,h=Object.values(u.queries.query);_<h.length;_++)for(var w=0,g=(v=h[_]).slice();w<g.length;w++)dt((x=g[w]).obsSet,s.mutatedParts)&&(f(v,x),x.subscribers.forEach((function(e){return r.add(e)})));else if(0<m.length){u.optimisticOps=u.optimisticOps.filter((function(e){return e.trans!==s}));for(var y=0,b=Object.values(u.queries.query);y<b.length;y++)for(var v,x,k,A=0,I=(v=b[y]).slice();A<I.length;A++)null!=(x=I[A]).res&&s.mutatedParts&&(o&&!x.dirty?(k=Object.isFrozen(x.res),k=kt(x.res,x.req,m,p,x,k),x.dirty?(f(v,x),x.subscribers.forEach((function(e){return r.add(e)}))):k!==x.res&&(x.res=k,x.promise=P.resolve({result:k}))):(x.dirty&&f(v,x),x.subscribers.forEach((function(e){return r.add(e)}))))}}}r.forEach((function(e){return e()}))}}},s.addEventListener("abort",o(!1),{signal:r}),s.addEventListener("error",o(!1),{signal:r}),s.addEventListener("complete",o(!0),{signal:r})),s},table:function(i){var n=e.table(i),o=n.schema.primaryKey;return Dt(Dt({},n),{mutate:function(e){var a=wi.trans;if(o.outbound||"disabled"===a.db._options.cache||a.explicit)return n.mutate(e);var r=Yi["idb://".concat(t,"/").concat(i)];return r?(a=n.mutate(e),"add"!==e.type&&"put"!==e.type||!(50<=e.values.length||wt(o,e).some((function(e){return null==e})))?(r.optimisticOps.push(e),e.mutatedParts&&lt(e.mutatedParts),a.then((function(t){0<t.numFailures&&(f(r.optimisticOps,e),(t=vt(0,e,t))&&r.optimisticOps.push(t),e.mutatedParts&&lt(e.mutatedParts))})),a.catch((function(){f(r.optimisticOps,e),e.mutatedParts&&lt(e.mutatedParts)}))):a.then((function(t){var i=vt(0,Dt(Dt({},e),{values:e.values.map((function(e,i){var n;return u(e=null!==(n=o.keyPath)&&void 0!==n&&n.includes(".")?_(e):Dt({},e),o.keyPath,t.results[i]),e}))}),t);r.optimisticOps.push(i),queueMicrotask((function(){return e.mutatedParts&&lt(e.mutatedParts)}))})),a):n.mutate(e)},query:function(e){if(!yt(wi,n)||!bt("query",e))return n.query(e);var o="immutable"===(null===(s=wi.trans)||void 0===s?void 0:s.db._options.cache),a=(d=wi).requery,r=d.signal,s=function(e,t,i,n){var o=Yi["idb://".concat(e,"/").concat(t)];if(!o)return[];if(!(t=o.queries[i]))return[null,!1,o,null];var a=t[(n.query?n.query.index.name:null)||""];if(!a)return[null,!1,o,null];switch(i){case"query":var r=a.find((function(e){return e.req.limit===n.limit&&e.req.values===n.values&&At(e.req.query.range,n.query.range)}));return r?[r,!0,o,a]:[a.find((function(e){return("limit"in e.req?e.req.limit:1/0)>=n.limit&&(!n.values||e.req.values)&&It(e.req.query.range,n.query.range)})),!1,o,a];case"count":return[r=a.find((function(e){return At(e.req.query.range,n.query.range)})),!!r,o,a]}}(t,i,"query",e),c=s[0],d=s[1],l=s[2],u=s[3];return c&&d?c.obsSet=e.obsSet:(d=n.query(e).then((function(e){var t=e.result;if(c&&(c.res=t),o){for(var i=0,n=t.length;i<n;++i)Object.freeze(t[i]);Object.freeze(t)}else e.result=_(t);return e})).catch((function(e){return u&&c&&f(u,c),Promise.reject(e)})),c={obsSet:e.obsSet,promise:d,subscribers:new Set,type:"query",req:e,dirty:!1},u?u.push(c):(u=[c],(l=l||(Yi["idb://".concat(t,"/").concat(i)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[e.query.index.name||""]=u)),Ct(c,u,a,r),c.promise.then((function(t){return{result:kt(t.result,e,null==l?void 0:l.optimisticOps,n,c,o)}}))}})}})}},an=(Tt.prototype.version=function(e){if(isNaN(e)||e<.1)throw new ti.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new ti.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,i=t.filter((function(t){return t._cfg.version===e}))[0];return i||(i=new this.Version(e),t.push(i),t.sort(ze),i.stores({}),this._state.autoSchema=!1,i)},Tt.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||wi.letThrough||this._vip)?e():new P((function(e,i){if(t._state.openComplete)return i(new ti.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void i(new ti.DatabaseClosed);t.open().catch(x)}t._state.dbReadyPromise.then(e,i)})).then(e)},Tt.prototype.use=function(e){var t=e.stack,i=e.create,n=e.level,o=e.name;return o&&this.unuse({stack:t,name:o}),(e=this._middlewares[t]||(this._middlewares[t]=[])).push({stack:t,create:i,level:null==n?10:n,name:o}),e.sort((function(e,t){return e.level-t.level})),this},Tt.prototype.unuse=function(e){var t=e.stack,i=e.name,n=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((function(e){return n?e.create!==n:!!i&&e.name!==i}))),this},Tt.prototype.open=function(){var e=this;return X(fi,(function(){return mt(e)}))},Tt.prototype._close=function(){var e=this._state,t=Pi.indexOf(this);if(0<=t&&Pi.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new P((function(t){e.dbReadyResolve=t})),e.openCanceller=new P((function(t,i){e.cancelOpen=i})))},Tt.prototype.close=function(e){var t=(void 0===e?{disableAutoOpen:!0}:e).disableAutoOpen;e=this._state,t?(e.isBeingOpened&&e.cancelOpen(new ti.DatabaseClosed),this._close(),e.autoOpen=!1,e.dbOpenError=new ti.DatabaseClosed):(this._close(),e.autoOpen=this._options.autoOpen||e.isBeingOpened,e.openComplete=!1,e.dbOpenError=null)},Tt.prototype.delete=function(e){var t=this;void 0===e&&(e={disableAutoOpen:!0});var i=0<arguments.length&&"object"!=typeof arguments[0],n=this._state;return new P((function(o,a){function r(){t.close(e);var i=t._deps.indexedDB.deleteDatabase(t.name);i.onsuccess=U((function(){var e,i,n;e=t._deps,i=t.name,n=e.indexedDB,e=e.IDBKeyRange,Ze(n)||i===Di||Qe(n,e).delete(i).catch(x),o()})),i.onerror=Ce(a),i.onblocked=t._fireOnBlocked}if(i)throw new ti.InvalidArgument("Invalid closeOptions argument to db.delete()");n.isBeingOpened?n.dbReadyPromise.then(r):r()}))},Tt.prototype.backendDB=function(){return this.idbdb},Tt.prototype.isOpen=function(){return null!==this.idbdb},Tt.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},Tt.prototype.hasFailed=function(){return null!==this._state.dbOpenError},Tt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Tt.prototype,"tables",{get:function(){var e=this;return Ot(this._allTables).map((function(t){return e._allTables[t]}))},enumerable:!1,configurable:!0}),Tt.prototype.transaction=function(){var e=function(e,t,i){var n=arguments.length;if(n<2)throw new ti.InvalidArgument("Too few arguments");for(var o=new Array(n-1);--n;)o[n-1]=arguments[n];return i=o.pop(),[e,m(o),i]}.apply(this,arguments);return this._transaction.apply(this,e)},Tt.prototype._transaction=function(e,t,i){var n=this,o=wi.trans;o&&o.db===this&&-1===e.indexOf("!")||(o=null);var a,r,s=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(r=t.map((function(e){if("string"!=typeof(e=e instanceof n.Table?e.name:e))throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e})),"r"==e||e===Bi)a=Bi;else{if("rw"!=e&&e!=Oi)throw new ti.InvalidArgument("Invalid transaction mode: "+e);a=Oi}if(o){if(o.mode===Bi&&a===Oi){if(!s)throw new ti.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o=null}o&&r.forEach((function(e){if(o&&-1===o.storeNames.indexOf(e)){if(!s)throw new ti.SubTransaction("Table "+e+" not included in parent transaction.");o=null}})),s&&o&&!o.active&&(o=null)}}catch(e){return o?o._promise(null,(function(t,i){i(e)})):Ti(e)}var c=function e(t,i,n,o,a){return P.resolve().then((function(){var r=wi.transless||wi,s=t._createTransaction(i,n,t._dbSchema,o);if(s.explicit=!0,r={trans:s,transless:r},o)s.idbtrans=o.idbtrans;else try{s.create(),s.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(o){return o.name===Zt.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(t.close({disableAutoOpen:!1}),t.open().then((function(){return e(t,i,n,null,a)}))):Ti(o)}var c,d=Yt(a);return d&&K(),r=P.follow((function(){var e;(c=a.call(s,s))&&(d?(e=V.bind(null,null),c.then(e,e)):"function"==typeof c.next&&"function"==typeof c.throw&&(c=_t(c)))}),r),(c&&"function"==typeof c.then?P.resolve(c).then((function(e){return s.active?e:Ti(new ti.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):r.then((function(){return c}))).then((function(e){return o&&s._resolve(),s._completion.then((function(){return e}))})).catch((function(e){return s._reject(e),Ti(e)}))}))}.bind(null,this,a,r,o,i);return o?o._promise(a,c,"lock"):wi.trans?X(wi.transless,(function(){return n._whenReady(c)})):this._whenReady(c)},Tt.prototype.table=function(e){if(!i(this._allTables,e))throw new ti.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},Tt);Xt="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";var rn,sn=(Et.prototype.subscribe=function(e,t,i){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:i})},Et.prototype[Xt]=function(){return this},Et);try{rn={indexedDB:Bt.indexedDB||Bt.mozIndexedDB||Bt.webkitIndexedDB||Bt.msIndexedDB,IDBKeyRange:Bt.IDBKeyRange||Bt.webkitIDBKeyRange}}catch(e){rn={indexedDB:null,IDBKeyRange:null}}var cn=an;n(cn,Dt(Dt({},ni),{delete:function(e){return new cn(e,{addons:[]}).delete()},exists:function(e){return new cn(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){try{return i=(t=cn.dependencies).indexedDB,t=t.IDBKeyRange,(Ze(i)?Promise.resolve(i.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return e!==Di}))})):Qe(i,t).toCollection().primaryKeys()).then(e)}catch(e){return Ti(new ti.MissingAPI)}var t,i},defineClass:function(){return function(e){t(this,e)}},ignoreTransaction:function(e){return wi.trans?X(wi.transless,e):e()},vip:et,async:function(e){return function(){try{var t=_t(e.apply(this,arguments));return t&&"function"==typeof t.then?t:P.resolve(t)}catch(e){return Ti(e)}}},spawn:function(e,t,i){try{var n=_t(e.apply(i,t||[]));return n&&"function"==typeof n.then?n:P.resolve(n)}catch(e){return Ti(e)}},currentTransaction:{get:function(){return wi.trans||null}},waitFor:function(e,t){return t=P.resolve("function"==typeof e?cn.ignoreTransaction(e):e).timeout(t||6e4),wi.trans?wi.trans.waitFor(t):t},Promise:P,debug:{get:function(){return oi},set:function(e){j(e)}},derive:a,extend:t,props:n,override:s,Events:se,on:Hi,liveQuery:Rt,extendObservabilitySet:ct,getByKeyPath:l,setByKeyPath:u,delByKeyPath:function(e,t){"string"==typeof t?u(e,t,void 0):"length"in t&&[].map.call(t,(function(t){u(e,t,void 0)}))},shallowClone:p,deepClone:_,getObjectDiff:ft,cmp:ne,asap:d,minKey:-1/0,addons:[],connections:Pi,errnames:Zt,dependencies:rn,cache:Yi,semVer:"4.0.4",version:"4.0.4".split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,i){return e+t/Math.pow(10,2*i)}))})),cn.maxKey=Vi(cn.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(Hi(Fi,(function(e){ln||(e=new CustomEvent(Ui,{detail:e}),ln=!0,dispatchEvent(e),ln=!1)})),addEventListener(Ui,(function(e){e=e.detail,ln||jt(e)})));var dn,ln=!1,un=function(){};return"undefined"!=typeof BroadcastChannel&&((un=function(){(dn=new BroadcastChannel(Ui)).onmessage=function(e){return e.data&&jt(e.data)}})(),"function"==typeof dn.unref&&dn.unref(),Hi(Fi,(function(e){ln||dn.postMessage(e)}))),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",(function(e){if(!an.disableBfCache&&e.persisted){null!=dn&&dn.close();for(var t=0,i=Pi;t<i.length;t++)i[t].close({disableAutoOpen:!1})}})),addEventListener("pageshow",(function(e){!an.disableBfCache&&e.persisted&&(un(),jt({all:new Gi(-1/0,[[]])}))}))),P.rejectionMapper=function(e,t){return!e||e instanceof g||e instanceof TypeError||e instanceof SyntaxError||!e.name||!ii[e.name]?e:(t=new ii[e.name](t||e.message,e),"stack"in e&&o(t,"stack",{get:function(){return this.inner.stack}}),t)},j(oi),Dt(an,Object.freeze({__proto__:null,Dexie:an,liveQuery:Rt,Entity:ie,cmp:ne,PropModSymbol:Ut,PropModification:Li,replacePrefix:function(e,t){return new Li({replacePrefix:[e,t]})},default:an,RangeSet:Gi,mergeRanges:nt,rangesOverlap:ot}),{default:an}),an}()),Uo=Symbol.for("Dexie"),Ko=globalThis[Uo]||(globalThis[Uo]=Ho);if(Ho.semVer!==Ko.semVer)throw new Error("Two different versions of Dexie loaded in the same app: ".concat(Ho.semVer," and ").concat(Ko.semVer));let Vo,Jo=!1;try{Vo=new Ko("relatedArticle"),Vo.version(1).stores({articles:"triplekey, relatedlist, timestamp, showRecReason"})}catch(e){Yo("initRelatedArticleDB",e)}const Go=1e8,Xo=Oe.getInnerHeight(),Qo=100*Math.random()<1,Zo=[window.biz,window.mid,window.idx].join("_"),ea=fe.os.ipad||!Ae.isIOS&&!Ae.isAndroid;let ta=0;Ae.isIOS?ta=1:Ae.isAndroid&&(ta=2);const na=[{name:"\u5185\u5bb9\u4f4e\u8d28",value:1},{name:"\u4e0d\u770b\u6b64\u516c\u4f17\u53f7\u5185\u5bb9",value:2}],ia=(()=>{let e=!1;const t=[],i=n=>{e=!0,_e({url:"/mp/relatedarticle?action=expose",type:"POST",dataType:"json",data:n,complete(){t.length?i(t.shift()):e=!1}})};return n=>{e?t.push(n):i(n)}})(),oa=window.matchMedia("(prefers-color-scheme: dark)"),aa=(e="")=>{if(!e)return"";const t=parseInt("0x".concat(e.slice(1,3)),16),i=parseInt("0x".concat(e.slice(3,5)),16),n=parseInt("0x".concat(e.slice(5,7)),16),o=parseInt("0x".concat(e.slice(7,9)),16);return"rgba(".concat(i,", ").concat(n,", ").concat(o,", ").concat(t/255,")")},ra=_t({name:"mp-related-article",filters:{getRecTagStyle:(e,t)=>e?{color:aa(t?e.dark_mode_text_color:e.text_color)}:{},dateToString(e){const t=(new Date).getTime()/1e3-e,i=(new Date).getFullYear(),n=new Date(1e3*e);return t<60?"".concat(Math.floor(t),"\u79d2\u524d"):t<3600?"".concat(Math.floor(t/60),"\u5206\u949f\u524d"):t<86400?"".concat(Math.floor(t/60/60),"\u5c0f\u65f6\u524d"):t<172800?"\u6628\u5929":t<604800?"".concat(Math.floor(t/24/60/60),"\u5929\u524d"):n.getFullYear()===i?"".concat(n.getMonth()+1,"\u6708").concat(n.getDate(),"\u65e5"):"".concat(n.getFullYear(),"\u5e74").concat(n.getMonth()+1,"\u6708").concat(n.getDate(),"\u65e5")}},components:{Intersect:C},data(){const{cgiData:e}=this.$store.state;return{list:[],reason:[],reportInfo:"",showRecReason:!1,showList:!Ae.isMpapp&&1*e.item_show_type==0&&""!==e.item_show_type,unbindTransition:!1,listStyle:{overflow:"hidden",opacity:1,height:0,margin:0},feedbackIdx:-1,feedbackPos:"bottom",feedbackReasonTacitly:{},feedbackReasonKeyword:{},darkModeMatches:oa.matches,relatedArticleListInfo:null,isCreatePlaceholder:!1,hasDataInDB:0}},computed:{...m(["extRes"]),...m("mp-related-article",["notLoad","sources"]),...g("mp-like-and-share",["hasExtAppmsgStat"]),commonReportData(){const{cgiData:e}=this.$store.state;let t=parseInt(window.enterid,10)||0;return!Ae.isWp&&-1===navigator.userAgent.indexOf("MicroMessenger")&&document.body.offsetWidth>=1024&&(t=1024,me.setSum(223326,18,1)),{Bizuin_from:e.biz,Msgid_from:parseInt(e.mid,10)||0,Itemidx_from:parseInt(e.idx,10)||0,Scene:parseInt(e.source,10)||0,Subscene:parseInt(e.subscene,10)||parseInt(e.source,10)||0,Sessionid:e.sessionid||"",Enterid:t,ItemShowType:parseInt(e.item_show_type,10)||0}},type(){return this.sources[0]},isPageInit(){return this.sources[1]},isFromPay(){return"pay"===this.type?1:0},loadType(){switch(this.type){case"default":default:return 0;case"favorite":return 1;case"share":return 2;case"praise":return 3;case"like":return 4;case"pay":return 5;case"reward":return 6;case"favorited":return 7;case"shared":return 8;case"praised":return 9;case"liked":return 10;case"paid":return 11;case"rewarded":return 12;case"recommend":return 13;case"force":return 14;case"subscribe":return 15}},hasFeedbackReason(){return!!(Object.keys(this.feedbackReasonTacitly).length+Object.keys(this.feedbackReasonKeyword).length)},isKuaiXun(){return this.relatedArticleListInfo&&(1===this.relatedArticleListInfo.style||2===this.relatedArticleListInfo.style)},hasExtLoadDone(){var e,t;return void 0!==(null==(t=null==(e=this.extRes)?void 0:e.base_resp)?void 0:t.ret)},canShowList(){return!(!this.showList||(this.hasExtLoadDone?this.notLoad||1!==this.hasDataInDB&&!this.type:!this.list||!this.list.length))}},watch:{sources(){this.$nextTick(this.loadData)}},created(){this.hasReported29433=!1,this.exposeHeight=0,this.loadDataFromDB()},mounted(){if(this.itemHeight=parseFloat(window.getComputedStyle(this.$el).getPropertyValue("--RELATE-ITEM-HEIGHT")),this.itemHeightPx=0,Qo&&window.WX_BJ_REPORT){const{cgiData:e}=this.$store.state;window.WX_BJ_REPORT.BadJs.report("relatedArticleFlag","value:".concat(e.relatedArticleFlag),{mid:"mmbizwap:related_monitor",uin:e.user_uin})}oa.addListener((({matches:e})=>{this.darkModeMatches=!!e})),je.on(window,"scroll",this.loadData),je.on(window,"scroll",this.exposeHandler)},beforeDestroy(){this.destroy()},methods:{preloadMoreKuaixun(){Ie.invoke("onWebPageUrlExposed",{bizType:0,urlList:[{url:this.relatedArticleListInfo.more_url,extInfo:{itemshowType:0,preloadType:0}}]})},async loadData(){if(!this.hasExtLoadDone||!this.canShowList||[0,1].includes(this.hasDataInDB)||this.__lock)return;const e=this.extRes.distance_to_get_related_article_data||-1;e>=0&&Oe.getElementActualTop(this.$refs.jsRelatedArea)-Oe.getScrollTop()-Xo>Xo*e||(this.__lock=!0,this.$nextTick((()=>{if(144===this.commonReportData.Scene)return;const{cgiData:e}=this.$store.state;this.isPageInit&&(this.listStyle.transition="none"),this.list&&this.list.length||(me.setSum(110809,81,1),me.setSum(110809,83,1),_e({url:"/mp/relatedarticle?action=precheck&article_url=".concat(window.encodeURIComponent(location.href),"&__biz=").concat(e.biz,"&mid=").concat(e.mid,"&idx=").concat(e.idx,"&has_related_article_info=").concat(e.hasRelatedArticleInfo,"&is_pay=").concat(this.isFromPay,"&scene=").concat(this.commonReportData.Scene,"&subscene=").concat(parseInt(e.subscene,10)||0,"&is_open_comment=").concat(this.extRes.comment_enabled).concat("subscribe"===this.type?"&is_from_subscribe=1":""),type:"GET",dataType:"json",success:t=>{t&&t.base_resp&&1*t.base_resp.ret==0&&1*t.empty_scene==0&&(this.__placeholderTimer=setTimeout((()=>{this.isCreatePlaceholder=!0,me.setSum(314064,25,1),this.showCard(3)}),500),_e({url:"/mp/relatedarticle?action=directgetlist&article_url=".concat(window.encodeURIComponent(location.href),"&__biz=").concat(e.biz,"&mid=").concat(e.mid,"&idx=").concat(e.idx,"&has_related_article_info=").concat(e.hasRelatedArticleInfo,"&is_pay=").concat(this.isFromPay,"&scene=").concat(this.commonReportData.Scene,"&subscene=").concat(parseInt(e.subscene,10)||0,"&is_open_comment=").concat(this.extRes.comment_enabled).concat("subscribe"===this.type?"&is_from_subscribe=1":""),type:"GET",dataType:"json",success:t=>{if(Qo&&t&&1*t.empty_scene!=0&&this.isCreatePlaceholder&&window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs.report("empty_scene","empty_scene:".concat(t.empty_scene),{mid:"mmbizwap:related_monitor",uin:e.user_uin}),t&&t.base_resp&&1*t.base_resp.ret==0&&t.list&&t.list.length){const i=t.list.map((e=>(e.url=e.url.replace(/#wechat_redirect$/,"&show_related_article=1&subscene=".concat(this.commonReportData[132===this.commonReportData.Scene?"Subscene":"Scene"],"$&")),e.like_num_wording=e.old_like_num?Ce.formatReadNum(e.old_like_num):"",e.read_num_wording=e.read_num?Ce.formatReadNum(e.read_num):"",e.pay_cnt_wording=e.pay_cnt?Ce.formatReadNum(e.pay_cnt):"",e)));Qo&&window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs.report("list.length","list.length:".concat(i.length),{mid:"mmbizwap:related_monitor",_info:{relatedArticleFlag:e.relatedArticleFlag,isPc:ea},uin:e.user_uin}),this.list=i,this.$emit("list-data-change",this.list),this.list.forEach((({url:e,ext_info:i})=>{he.report(29139,Object.assign({Bizuin:ge.getQuery("__biz",e),Msgid:parseInt(ge.getQuery("mid",e),10)||0,Itemidx:parseInt(ge.getQuery("idx",e),10)||0,ExtInfo:i,RecInfo:t.report_info},this.commonReportData))})),this.reason=na,this.reportInfo=t.report_info||"",this.showRecReason=1===t.show_rec_reason;const n={list:i,showRecReason:1===t.show_rec_reason,style:t.style,more_url:t.more_url};!async function(e,t){await $o();try{const i=await Vo.articles.add({triplekey:e,relatedlist:t.list,timestamp:Date.now(),showRecReason:t.showRecReason,style:t.style,more_url:t.more_url});i&&await $o()}catch(e){Yo("addRelatedArticleListToDB",e)}}(Zo,n),this.relatedArticleListInfo=n,this.showRelatedArticles(t.list.length)}else this.clearPlaceholderTimeout((e=>{!e&&this.setLines(0),this.destroy()}))}}))},error:()=>{this.clearPlaceholderTimeout((e=>{!e&&this.setLines(0),this.destroy()}))}}))})))},async loadDataFromDB(){const e=await async function(e){try{const t=await Vo.articles.get({triplekey:e});return Vo.articles.update(e,{timestamp:Date.now()}),t?{list:t.relatedlist,showRecReason:t.showRecReason,style:t.style,more_url:t.more_url}:void 0}catch(e){Yo("getRelatedArticleListFromDB",e)}}(Zo);e&&e.list&&e.list.length?(me.setSum(110809,81,1),me.setSum(110809,82,1),this.list=e.list,this.showRecReason=e.showRecReason,this.relatedArticleListInfo=e,this.reason=na,this.hasDataInDB=1,this.getRecReason(),this.showRelatedArticles(this.list.length),this.$emit("list-data-change",this.list)):this.hasDataInDB=2},showRelatedArticles(e){this.clearPlaceholderTimeout((t=>{t?this.showCard(e):this.setLines(e),this.listStyle.opacity=1,this.listStyle.overflow="visible",this.$nextTick((()=>{this.exposeHandler(),window.ipados13_font_scale&&B(this.$refs.jsRelatedArea,window.ipados13_font_scale/100),!this.isPageInit&&this.canShowList&&De.setCompRenderInfo({compEle:this.$refs.jsRelatedArea,compType:"mp-related-article",compIdx:1,wrapper:document.querySelector("#page_bottom_area")},this.$refs.jsRelatedArea.offsetHeight+parseInt(getComputedStyle(this.$refs.jsRelatedArea).marginTop,10))}))}))},showCard(e){this.setLines(e),delete this.__placeholderTimer},setLines(e){if(!this.canShowList)return;const t=this.$refs.jsRelatedTitle,i=-1===document.body.className.indexOf("pages_skin_pc")?40:60,n=t?t.getBoundingClientRect().height:i,o=this.$refs.moreNews,a=o?o.offsetHeight:0;let r=0;if(0===e){if(this.isCreatePlaceholder){const e=this.$refs.jsRelatedArea,t=e&&this.isPercentInViewport(e);if(t){let e=0;switch(!0){case t>=1:e=31;break;case t>=.8:e=30;break;case t>=.6:e=29;break;case t>=.4:e=28;break;case t>=.2:e=27;break;default:e=26}me.setSum(314064,e,1),me.setSum(314064,32,1)}}this.listStyle.overflow="hidden",this.listStyle.margin="0",this.unbindTransition=!0}else window.is_like_profile_gray,this.listStyle.margin="8px 0 0",r="calc(".concat(e*this.itemHeight,"em + ").concat(n,"px + ").concat(a,"px)");const s={compEle:this.$refs.jsRelatedArea,compType:"mp-related-article",compIdx:1,wrapper:document.querySelector("#page_bottom_area")};this.setLinesTimes=this.setLinesTimes?this.setLinesTimes+1:1,1!==this.setLinesTimes&&(s.subCompType="setLine-".concat(this.setLinesTimes)),this.isPageInit&&De.renderCompSilentlyPreHandler(s),this.listStyle.height=r,this.isPageInit&&this.$nextTick((()=>{De.renderCompSilently(s)})),this.isPageInit&&e&&this.transitionEndHandler({propertyName:"height"})},getHeight(e){return this.itemHeightPx||(this.$refs.relatedPlaceholder?this.itemHeightPx=this.$refs.relatedPlaceholder.getBoundingClientRect().height:this.itemHeightPx=Ce.qs(".js_related_item",this.$refs.jsRelatedList).getBoundingClientRect().height),e*this.itemHeightPx+Ce.qs(".js_related_title",this.$refs.jsRelatedMain).getBoundingClientRect().height},clearPlaceholderTimeout(e){this.__placeholderTimer?(clearTimeout(this.__placeholderTimer),delete this.__placeholderTimer,"function"==typeof e&&e(!0)):"function"==typeof e&&e(!1)},jumpArticle(e){const t=e.currentTarget,{dataset:i}=t,{url:n}=i;me.setSum(110809,23,1),he.report(18832,Object.assign({LoadType:this.loadType,Actiontype:2,Type:1,Bizuin:ge.getQuery("__biz",n),Msgid:parseInt(ge.getQuery("mid",n),10)||0,Itemidx:parseInt(ge.getQuery("idx",n),10)||0,Sendtimestamp:parseInt(i.time,10)||0,Pos:(1*i.index||0)+1,Recalltype:1*i.recalltype,Isreaded:1*i.isreaded,Mmversion:ta,ExpType:i.exptype,ExtInfo:i.ext_info,RecInfo:i.report_info},this.commonReportData)),Ae.isOnlyWechat&&!Ae.isMpapp?Ie.invoke("openWebViewUseFastLoad",{url:n,item_show_type:i.item_show_type,scene:132,subscene:this.commonReportData[132===this.commonReportData.Scene?"Subscene":"Scene"],openType:0},(e=>{e&&e.err_msg&&-1===e.err_msg.indexOf("ok")&&Ue(n.replace(/#wechat_redirect$/,"&scene=132$&"))})):location.href=n.replace(/#wechat_redirect$/,"&scene=132$&")},goKuaixunFeed(){Ie.invoke("openUrlWithExtraWebview",{url:this.relatedArticleListInfo.more_url,openType:1})},exposeHandler(){if(!this.canShowList)return;const{jsRelatedArticleItem:e}=this.$refs;if(!e)return;const{top:t,bottom:i}=this.$refs.jsRelatedArea.getBoundingClientRect();if(!(t>Xo||i<0)){let n=0;n=t<0?i:i>Xo?Xo-t:i-t,this.exposeHeight=Math.max(this.exposeHeight,n);const o=[];for(let t=0;t<e.length;t++){const i=e[t];if(1*i.dataset.hasreport!=1){const e=i.clientHeight/2,n=i.getBoundingClientRect().bottom;n>=e&&n<=e+Xo&&((e,t)=>{const{dataset:i}=e,{url:n}=i;i.hasreport=1,me.setSum(110809,21,1);const a={LoadType:this.loadType,Actiontype:1,Type:1,Bizuin:ge.getQuery("__biz",n),Msgid:parseInt(ge.getQuery("mid",n),10)||0,Itemidx:parseInt(ge.getQuery("idx",n),10)||0,Sendtimestamp:parseInt(i.time,10)||0,Pos:t+1,Recalltype:1*i.recalltype,Mmversion:ta,Isreaded:1*i.isreaded,ExpType:i.exptype,ExtInfo:i.ext_info,RecInfo:i.report_info};he.report(18832,Object.assign(a,this.commonReportData)),ia({bizuin:i.bizuin,mid:i.mid,idx:i.idx}),o.push({item_show_type:i.item_show_type,url:n})})(i,t)}}o.length&&Ie.invoke("downloadPageDataForFastLoad",{itemList:o},(()=>{})),this.report29433()}},transitionEndHandler(e){this.unbindTransition||"height"!==e.propertyName||(this.unbindTransition=!0)},destroy(){this.showList=!1,je.off(window,"scroll",this.loadData),je.off(window,"scroll",this.exposeHandler)},showFeedback(e){const{jsRelatedArticleItem:t}=this.$refs,n=t[e];this.feedbackIdx=e,this.feedbackPos=Xo-n.getBoundingClientRect().bottom<268?"top":"bottom",this.$nextTick((()=>{this.$refs.feedbackBd[e].focus()})),i.show({alpha:.3,onClick:()=>{this.hideFeedback()}})},hideFeedback(){this.feedbackIdx=-1,this.feedbackPos="bottom",this.feedbackReasonTacitly={},this.feedbackReasonKeyword={},i.hide()},submitFeedback(e){if(this.hasFeedbackReason){const t={tacitly:Object.keys(this.feedbackReasonTacitly).map((e=>1*e)),keyword:Object.keys(this.feedbackReasonKeyword)},{cgiData:i}=this.$store.state,n={biz_from:i.biz,mid_from:i.mid,idx_from:i.idx,recommended_biz:ge.getQuery("__biz",e.url),mid:ge.getQuery("mid",e.url),idx:ge.getQuery("idx",e.url),reason:JSON.stringify(t)};_e({type:"POST",url:"/mp/relatedarticle?action=dislike",dataType:"json",data:n,success:t=>{if(t&&t.base_resp&&0===t.base_resp.ret){this.hideFeedback();const t=this.list.indexOf(e);t>-1&&(this.list.splice(t,1),this.setLines(this.list.length),async function(e,t){try{Vo.transaction("rw",Vo.articles,(async()=>{await Vo.articles.get(e);await Vo.articles.update(e,{relatedlist:t.list})}))}catch(e){Yo("updateRelatedArticleList",e)}}(Zo,{list:this.list}))}else window.weui.alert("System error. Try again later")}})}},chooseFeedbackReason(e){const t=e.currentTarget,i=xe.hasClass(t,"js_reason")?this.feedbackReasonTacitly:this.feedbackReasonKeyword,{value:n}=t.dataset;i[n]?this.$delete(i,n):this.$set(i,n,1)},report29433(){if(this.hasReported29433)return;this.hasReported29433=!0;const{cgiData:e}=this.$store.state,t={bizuin_from1:e.biz,msgid_from1:parseInt(e.mid,10)||0,Itemidx_from:parseInt(e.idx,10)||0,ItemShowType:parseInt(e.item_show_type,10)||0};he.report(29433,Object.assign({Type:0},t)),he.leaveReport(29433,(()=>Object.assign({Type:1,Pos_Height:Math.round(this.exposeHeight),Is_article_exposed:Array.prototype.some.call(this.$refs.jsRelatedArticleItem,(e=>1*e.dataset.hasreport==1))?1:0},t)))},getRecReason(){if(!this.list||!this.list.length)return;const e=[],t=[];this.list.forEach((i=>{const n={};n.bizuin=i.bizuin,n.mid=i.mid,n.idx=i.idx,e.push(n),t.push([i.bizuin,i.mid,i.idx].join("_"))}));const i=encodeURIComponent(JSON.stringify({appmsg_list:e}));_e({type:"GET",url:"/mp/getrecreason?appmsg_list=".concat(i),dataType:"json",success:e=>{if(e&&e.base_resp&&0===e.base_resp.ret){const i=e.appmsg_list;i&&i.length&&i.forEach((e=>{const i=[e.bizuin,e.mid,e.idx].join("_"),n=t.indexOf(i);if(n>=0&&this.list[n]){const{rec_reason:t}=e;t&&t.wording&&(this.list[n].rec_reason=t)}}))}}})},isPercentInViewport(e){const t=Fe.getId("js_article_bottom_bar"),i=t?t.offsetHeight:0,n=e.getBoundingClientRect(),o=Math.min(n.bottom,T.height-i)-Math.max(n.top,0);return o<=0?0:o/n.height}}},(function(){var e=this,t=e._self._c;return t("div",{staticClass:"related_container"},[e.canShowList?t("div",{ref:"jsRelatedArea",staticClass:"relate_mod_transition function_mod js_related_area",style:e.listStyle,on:{transitionend:e.transitionEndHandler}},[t("div",{ref:"jsRelatedMain",staticClass:"function_mod_index js_related_main"},[e.isKuaiXun?t("div",{ref:"jsRelatedTitle",staticClass:"function_hd js_related_title",staticStyle:{display:"flex","justify-content":"space-between"}},[e._v(" \u76f8\u5173\u5feb\u8baf "),1===e.relatedArticleListInfo.style?t("Intersect",{attrs:{threshold:[1]},on:{"~enter":function(t){
return e.preloadMoreKuaixun.apply(null,arguments)}}},[t("span",{staticStyle:{color:"#576b95","font-weight":"500"},on:{click:e.goKuaixunFeed}},[e._v("\u66f4\u591a")])]):e._e()],1):"share"===e.type||"shared"===e.type?t("div",{ref:"jsRelatedTitle",staticClass:"function_hd js_related_title"},[e._v(" People who shared this content also liked ")]):"favorite"===e.type||"favorited"===e.type?t("div",{ref:"jsRelatedTitle",staticClass:"function_hd js_related_title"},[e._v(" People who favorited this content also liked ")]):"subscribe"===e.type?t("div",{ref:"jsRelatedTitle",staticClass:"function_hd js_related_title"},[e._v(" \u5173\u6ce8\u6b64\u8d26\u53f7\u7684\u4eba\u8fd8\u559c\u6b22 ")]):e.list.length?t("div",{ref:"jsRelatedTitle",staticClass:"function_hd js_related_title"},[e._v(" People who liked this content also liked ")]):e._e(),t("div",{staticClass:"function_bd"},[e.list.length?t("div",{ref:"jsRelatedList",staticClass:"relate_article_index_list relate_article_list js_related_list",staticStyle:{height:"auto"}},[e._l(e.list,(function(i,n){return t("div",{key:n,ref:"jsRelatedArticleItem",refInFor:!0,staticClass:"weui-media-box weui-media-box_appmsg js_related_item js_wx_tap_highlight wx_tap_cell",attrs:{"data-index":n,"data-url":i.url,"data-time":i.send_time,"data-recalltype":i.recall_type,"data-isreaded":i.is_readed,"data-bizuin":i.bizuin,"data-mid":i.mid,"data-idx":i.idx,"data-item_show_type":i.item_show_type,"data-exptype":i.exptype,"data-ext_info":i.ext_info,"data-report_info":e.reportInfo},on:{click:e.jumpArticle}},[t("div",{staticClass:"weui-media-box__bd"},[t("div",{class:["ellipsis_relate_title mask_ellipsis_wrp mask_ellipsis_auto_height",i.is_pay_subscribe?i.is_paid?"relate_article_paid":"relate_article_pay":"relate_article_default",e.showRecReason?"relate_article_tag_before":""],attrs:{role:"link",tabindex:"0","aria-labelledby":"relate_article_title_"+i.mid+"_"+i.idx+" js_a11y_comma relate_article_tag_"+i.mid+" js_a11y_comma0 relate_article_nickname_"+i.mid+"_"+i.idx+" js_a11y_comma1 relate_article_num_"+i.mid+"_"+i.idx}},[t("div",{staticClass:"mask_ellipsis_text",attrs:{"aria-hidden":"true"}},[e._v(" "+e._s(i.title)+" "),i.is_pay_subscribe&&i.is_paid?t("span",{staticClass:"pay__tag"},[e._v(" Paid ")]):i.is_pay_subscribe?t("span",{staticClass:"unpay__tag"},[e._v(" Pay ")]):e._e()]),t("div",{staticClass:"mask_ellipsis",attrs:{"aria-hidden":"true"}},[t("div",{staticClass:"mask_ellipsis_text",attrs:{id:"relate_article_title_"+i.mid+"_"+i.idx}},[e._v(" "+e._s(i.title)+" "),i.is_pay_subscribe&&i.is_paid?t("span",{staticClass:"pay__tag"},[e._v(" Paid ")]):i.is_pay_subscribe?t("span",{staticClass:"unpay__tag"},[e._v(" Pay ")]):e._e()]),t("div",{staticClass:"mask_ellipsis_placeholder"}),t("div",{staticClass:"mask_ellipsis_extra"},[i.is_pay_subscribe&&i.is_paid?t("span",{staticClass:"pay__tag"},[e._v(" Paid ")]):i.is_pay_subscribe?t("span",{staticClass:"unpay__tag"},[e._v(" Pay ")]):e._e()])])]),t("div",{staticClass:"weui-media-box__info weui-flex"},[t("div",{staticClass:"weui-media-box__info__inner weui-flex weui-flex_align-center weui-flex__item"},[e.showRecReason&&i.rec_reason&&i.rec_reason.wording?t("div",{staticClass:"weui-media-box__info__meta relate_profile_tag",attrs:{"aria-hidden":"true",id:"relate_article_tag_"+i.mid+"_"+i.idx}},[t("span",{staticClass:"icon_appmsg_tag",style:e._f("getRecTagStyle")(i.rec_reason,e.darkModeMatches)},[e._v(" "+e._s(i.rec_reason.wording)+" ")])]):e._e(),t("div",{staticClass:"js_profile relate_profile_nickname weui-media-box__info__meta",attrs:{"aria-hidden":"true",id:"relate_article_nickname_"+i.mid+"_"+i.idx,"data-username":i.username}},[e._v(" "+e._s(i.nickname)+" ")]),e.isKuaiXun?t("div",{staticClass:"js_profile relate_profile_nickname weui-media-box__info__meta",attrs:{"aria-hidden":"true",id:"relate_article_nickname_"+i.mid+"_"+i.idx}},[e._v(" "+e._s(e._f("dateToString")(i.send_time))+" ")]):e._e(),e.showRecReason?e._e():t("div",{staticClass:"weui-media-box__info__meta",attrs:{"aria-hidden":"true",id:"relate_article_num_"+i.mid+"_"+i.idx}},[i.old_like_num>=10?[e._v("Like "+e._s(i.like_num_wording))]:i.is_pay_subscribe&&i.pay_cnt?[e._v(" Pay "+e._s(i.pay_cnt_wording)+" ")]:i.read_num?[e._v("Reads "+e._s(i.read_num_wording))]:e._e()],2)]),t("div",{staticClass:"relate_article_opr"},[t("button",{ref:"feedbackBtn",refInFor:!0,staticClass:"reset_btn dislike_btn js_feedback_btn weui-wa-hotarea",attrs:{type:"button"},on:{touchstart:function(e){e.stopPropagation()},touchend:function(e){e.stopPropagation()},mousedown:function(e){e.stopPropagation()},click:function(t){return t.stopPropagation(),e.showFeedback(n)}}},[e._v(" \u4e0d\u559c\u6b22 ")])]),t("div",{ref:"feedbackBd",refInFor:!0,class:["feedback_dialog_wrp js_feedback_dialog",e.feedbackIdx===n?"feedback_dialog_show":""],attrs:{role:"dialog","aria-modal":"true",tabindex:"0","aria-hidden":e.feedbackIdx!==n?"true":"false"},on:{click:function(e){e.stopPropagation()},touchstart:function(e){e.stopPropagation()},touchmove:function(e){e.preventDefault()},touchend:function(e){e.stopPropagation()},mousedown:function(e){e.stopPropagation()}}},[t("div",{staticClass:"weui-mask js_mask",attrs:{role:"button","aria-label":"Close"},on:{click:e.hideFeedback}}),t("div",{class:["feedback_dialog js_dialog_wrp","top"===e.feedbackPos?"feedback_dialog_pos_top":""]},[t("div",{staticClass:"feedback_dialog_hd weui-flex"},[t("div",{staticClass:"weui-flex__item feedback_dialog_title"},[e._v("\u4e0d\u770b\u7684\u539f\u56e0")]),t("button",{class:["weui-btn weui-btn_primary weui-btn_mini js_submit",e.hasFeedbackReason?"":"weui-btn_disabled"],attrs:{type:"button"},on:{click:function(){return e.submitFeedback(i)}}},[e._v(" OK ")])]),t("div",{staticClass:"feedback_dialog_bd"},[t("ul",{staticClass:"feedback_tag_list"},[e._l(e.reason,(function(i){return t("li",{key:i.value,class:["feedback_tag_item js_reason js_tag_item",e.feedbackReasonTacitly[i.value]?"feedback_tag_selected":""],attrs:{role:"checkbox","aria-checked":!!e.feedbackReasonTacitly[i.value],"data-value":i.value},on:{click:e.chooseFeedbackReason}},[e._v(" "+e._s(i.name)+" ")])})),e._l(i.keyword,(function(i,n){return[n<2?t("li",{key:i,class:["feedback_tag_item js_keyword js_tag_item",e.feedbackReasonKeyword[i]?"feedback_tag_selected":""],attrs:{role:"checkbox","aria-checked":!!e.feedbackReasonKeyword[i],"data-value":i},on:{click:e.chooseFeedbackReason}},[e._v(" \u5bf9"+e._s(i)+"\u4e0d\u611f\u5174\u8da3 ")]):e._e()]}))],2)])])])])]),t("div",{staticClass:"weui-media-box__ft"},[t("img",{directives:[{name:"wxpic-src",rawName:"v-wxpic-src",value:i.cover,expression:"item.cover"}],staticClass:"relate_article_cover",attrs:{alt:"\u76f8\u5173\u9605\u8bfb\u5c01\u9762"}})])])})),e.relatedArticleListInfo&&2===e.relatedArticleListInfo.style?t("Intersect",{attrs:{threshold:[1]},on:{"~enter":function(t){return e.preloadMoreKuaixun.apply(null,arguments)}}},[t("div",{ref:"moreNews",staticClass:"more_news weui-media-box",on:{click:e.goKuaixunFeed}},[e._v(" \u66f4\u591a\u5feb\u8baf "),t("svg",{attrs:{width:"10",height:"20",viewBox:"0 0 10 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.04504 5.48386L2.92893 4.59998L7.74467 9.41572C8.06978 9.74083 8.07266 10.265 7.74467 10.593L2.92893 15.4088L2.04504 14.5249L6.56556 10.0044L2.04504 5.48386Z"}})])])]):e._e()],2):[e._m(0),t("div",{staticClass:"relate_article_list relate_article_placeholder"},[t("div",{ref:"relatedPlaceholder",staticClass:"weui-media-box weui-media-box_appmsg"},[t("div",{staticClass:"weui-media-box_placeholder"})])])]],2)])]):e._e()])}),[function(){var e=this._self._c;return e("div",{staticClass:"relate_list_loading"},[e("span",{staticClass:"weui-primary-loading",attrs:{role:"img"}},[e("span",{staticClass:"weui-primary-loading__dot"})])])}],!1,null,"0be6d963",null,null).exports,sa="--appmsgExtra-BG",ca=_t({components:{[ra.name]:ra,[Wt.name]:Wt,[O.name]:O,[N.name]:N,ProductSearch:qt},data:()=>({isNewMpApp:Ae.isNewMpApp,bottomBounceColor:sa,hasExtLoadDone:!1,hasBottomAd:!1,hasRelatedArticle:!1,fetchBeforeExtResp:!window.__immersiveListMode,commentStatus:{showPreComment:!1,isShowComment:!1,isLoading:!1,isInitial:!1,isEmpty:!0},adObserver:null,onlyComment:"1"===ge.getQuery("only_comment")}),computed:{cmtStoreBase:()=>Ae.isNewMpApp?"mp-app-comment":"mp-comment",...m("mp-product-searchwords",["productList","productSearchLoading"]),...m(["extRes","cgiData"]),...m({fansMsgEnabled(e,t){return t["".concat(this.cmtStoreBase,"/fansMsgEnabled")]},commentEnabled(e,t){return t["".concat(this.cmtStoreBase,"/commentEnabled")]},commentId(e,t){return t["".concat(this.cmtStoreBase,"/commentId")]},writeCommentEntry(e,t){return t["".concat(this.cmtStoreBase,"/writeCommentEntry")]}}),hasExtraCnt(){return this.fansMsgEnabled||1===this.commentEnabled&&1*this.commentId!=0||this.hasBottomAd||this.hasRelatedArticle},showRelatedArticle(){return!(!this.extRes||(this.showProductSearch?this.cgiData.isRefutedAppmsg||this.productSearchLoading||this.productList.length:this.cgiData.isRefutedAppmsg))},showProductSearch(){return this.extRes&&[2,3].includes(this.extRes.show_related_search_word)}},watch:{bottomBounceColor(e){this.setBottomBounceColor(e)}},created(){this.setBottomBounceColor(this.bottomBounceColor),Pe.on("ext-complete-success",(()=>{this.hasExtLoadDone=!0,this.updateBgColor()}))},mounted(){},beforeDestroy(){this.adObserver&&this.adObserver.disconnect()},methods:{loadBottomAd(){const e=new IntersectionObserver((t=>{t.forEach((t=>{if(t.isIntersecting){const{target:i}=t;"js_bottom_opr_right"===i.id?(me.setSum(364569,0,1),e.unobserve(i)):i.classList.contains("mpda_bottom_container")&&(me.setSum(364569,1,1),e.unobserve(i))}}))}),{root:null,rootMargin:"0px",threshold:.05}),t=document.getElementById("js_bottom_opr_right"),i=document.querySelector(".mpda_bottom_container");t&&e.observe(t),i&&e.observe(i),this.adObserver=e,this.hasBottomAd=!0,this.updateBgColor()},onRelatedArticleListDataChange(e){this.hasRelatedArticle=e.length>0,this.updateBgColor()},commentStatusChange(e,t){this.commentStatus[e]=t,this.updateBgColor()},updateBgColor(){this.hasExtLoadDone?this.commentStatus.isShowComment&&!this.commentStatus.isEmpty||this.commentStatus.isShowComment&&this.commentStatus.isInitial&&!this.fansMsgEnabled&&this.writeCommentEntry?this.bottomBounceColor="":this.hasBottomAd||this.hasRelatedArticle||this.commentStatus.isShowComment&&(!this.commentStatus.isShowComment||!this.commentStatus.isEmpty||this.commentStatus.isLoading||this.commentStatus.isInitial)?this.bottomBounceColor=sa:this.bottomBounceColor="":this.commentStatus.showPreComment?this.bottomBounceColor="":this.bottomBounceColor=sa},setBottomBounceColor(e){zt.set(e?{bottom:Ft.get(e)}:void 0),document.body.classList[e?"remove":"add"]("wx_wap_page_primary")},scrollToComment(){const e=this.$refs.comment.$refs.comment.$el.getBoundingClientRect();M.start({y:e.y+window.scrollY})},submitComment(e){this.__submitingComment||(this.__submitingComment=!0,this.$refs.comment.$refs.comment.sendComment({content:e,successEnd:this.scrollToComment,complete:()=>{this.__submitingComment=!1}}))},showAccessComment(e){this.$refs.comment.$refs.comment.showCmtInput(e)},onRenderComment(e){},onShowMoreRepliesSuccess(){},beforeHidePercomment(){document.scrollingElement.style.minHeight||(document.scrollingElement.style.minHeight=document.scrollingElement.scrollHeight+"px",this.__hasSetTmpMinHeight=!0)},afterHidePercomment(){this.__hasSetTmpMinHeight&&(document.scrollingElement.style.minHeight="",this.__hasSetTmpMinHeight=!1)},async cmtScrollPosFix({cmtEl:e,expandHeight:t}={}){await this.$nextTick();const i=e.getBoundingClientRect(),n=(window.immersiveMode?window.normalTopInset||91:0)-i.top;n>0&&(document.scrollingElement.scrollTop-=n)}}},(function(){var e=this,t=e._self._c;return t("div",{class:{has_extra_cnt:e.hasExtraCnt},staticStyle:{position:"relative"},attrs:{id:"page_bottom_area"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.onlyComment,expression:"!onlyComment"}],ref:"cmtTop"},[t("div",{staticStyle:{"font-size":"0",height:"0"},attrs:{"aria-hidden":"true"}},[e._v("\u200b")]),e.showProductSearch?t("ProductSearch"):e._e(),t("mp-bottom-ad",{on:{"ad-load":e.loadBottomAd}}),e.showRelatedArticle?t("mp-related-article",{on:{"list-data-change":e.onRelatedArticleListDataChange}}):e._e()],1),t("mp-appmsg-comment",{ref:"comment",attrs:{"lazy-show":!0,"fetch-before-ext-resp":e.fetchBeforeExtResp},on:{"per-comment-status":t=>e.commentStatusChange("showPreComment",t),"show-comment-change":t=>e.commentStatusChange("isShowComment",t),"loading-change":t=>e.commentStatusChange("isLoading",t),"initial-change":t=>e.commentStatusChange("isInitial",t),"empty-change":t=>e.commentStatusChange("isEmpty",t),"render-comment":e.onRenderComment,"show-more-replies-success":e.onShowMoreRepliesSuccess,"before-hide-percomment":e.beforeHidePercomment,"after-hide-percomment":e.afterHidePercomment,"scroll-pos-fix":e.cmtScrollPosFix}}),e.isNewMpApp?t("mp-interaction-bar",{on:{"submit-comment":e.submitComment,"scroll-to-comment":e.scrollToComment,"show-access-comment":e.showAccessComment}}):e._e()],1)}),[],!1,null,null,null,null).exports,da=window.Vue,la=document.getElementById("profileBt"),ua=_t({name:"mp-profile-card",data:()=>({nickname:window.title,headImg:window.round_head_img,signature:window.profile_signature_new?window.profile_signature_new:window.profile_signature,originalArticleCount:0,verifyPrincipal:"",isVerify:!1,showProfileCard:!1,unloginMobile:Tt(),showPcProfileCard:!1}),computed:{arrowPositionStyle:()=>({left:la.offsetWidth/2-8+"px"}),qrcodeImgSrc(){let e=10000005;const t=document.referrer;return 0==t.indexOf("http://weixin.sogou.com")?e=10000006:0==t.indexOf("https://wx.qq.com")&&(e=10000007),window.isSg?window.sg_qr_code.htmlDecode():((new Image).src="/mp/report?action=pcclick&__biz="+window.biz+"&uin="+window.uin+"&scene="+e+"&r="+Math.random(),"/mp/qrcode?scene="+e+"&size=102&__biz="+window.biz+"&mid="+window.mid+"&idx="+window.idx+"&sn="+window.sn+"&send_time="+window.send_time)}},mounted(){la.addEventListener("click",(e=>{this.showPcProfileCard=!0,e.stopPropagation()}));const e=document.getElementById("js_profile_qrcode");document.addEventListener("click",(t=>{const i=t.target;e&&i!=la&&i!=e&&(this.showPcProfileCard=!1)})),_e({type:"GET",url:"/mp/authorinfo?biz=".concat(window.biz),success:e=>{try{const t=JSON.parse(e),{identity_name:i,is_verify:n,original_article_count:o}=t;i&&(this.verifyPrincipal=i),n&&(this.isVerify=n),o&&(this.originalArticleCount=o)}catch(e){}},error:()=>{}})}},(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.showPcProfileCard,expression:"showPcProfileCard"}],ref:"js_profile_qrcode",staticClass:"profile_card_container",attrs:{id:"js_profile_qrcode"}},[t("div",{staticClass:"profile_card_wrap"},[t("div",{staticClass:"profile_card_qrcode"},[t("img",{staticClass:"profile_qrcode_img",attrs:{id:"js_profile_qrcode_img",src:e.qrcodeImgSrc,alt:"profile_qrcode"}})]),t("div",{staticClass:"profile_card_info"},[t("div",[t("span",{staticClass:"profile_info_nickname"},[e._v(" "+e._s(e.nickname)+" ")])]),e.isVerify?t("div",{staticClass:"profile_verify_principal profile_card_info_meta"},[t("span",{staticClass:"profile_main_text"},[e._v(e._s(e.verifyPrincipal))]),e.isVerify?t("div",{staticClass:"profile_verify-icon"},[1===e.isVerify?t("i",{staticClass:"profile_item-title-type__person inline-icon"}):t("i",{staticClass:"profile_item-title-type inline-icon"})]):e._e()]):e._e(),e.signature?t("div",{staticClass:"profile_card_info_meta"},[t("p",{staticClass:"profile_card_info_meta_text profile_card_signature"},[e._v(" "+e._s(e.signature)+" ")])]):e._e(),e.originalArticleCount?t("p",{staticClass:"profile_original_count profile_card_info_meta"},[t("span",{staticClass:"profile_card_info_meta_text"},[e._v(e._s(e.originalArticleCount)+"\u7bc7\u539f\u521b\u5185\u5bb9")])]):e._e()])]),t("div",{staticClass:"profile_arrow_wrp",style:e.arrowPositionStyle,attrs:{id:"js_profile_arrow_wrp"}},[t("i",{staticClass:"profile_arrow arrow_out"}),t("i",{staticClass:"profile_arrow arrow_in"})])])}),[],!1,null,"da33bb4f",null,null).exports,pa=window.Vue,ma=Ut({name:"mp-feedback",props:{show:{type:Boolean,default:!1},pos:{type:String,default:"bottom"},title:{type:String,default:"\u4e0d\u770b\u7684\u539f\u56e0"},reason:{type:Array,default:function(){return[]}},keyword:{type:Array,default:function(){return[]}},dialogStyle:{type:Object,default:function(){return{}}},reasonLiStyle:{type:Object,default:function(){return{}}},arrowStyle:{type:Object,default:function(){return{}}},showMask:{type:Boolean,default:!0},maskStyle:{type:Object,default:function(){return{}}},showMaskTransition:{type:Boolean,default:!1},showSubmitFeedback:{type:Boolean,default:!0},isSelected:{type:Boolean,default:!0},showShadow:{type:Boolean,default:!1}},data:function(){return{innerShow:!1,reasonTacitly:{},reasonKeyword:{}}},watch:{show:{handler:function(e){var t=this;e?i.show({alpha:this.showMask?.2:0,onClick:function(){t.hideFeedback()}}):(this.reasonTacitly={},this.reasonKeyword={}),this.innerShow=e},immediate:!0}},computed:{hasFeedbackReason:function(){return!!(Object.keys(this.reasonTacitly).length+Object.keys(this.reasonKeyword).length)}},methods:{hideFeedback:function(){this.innerShow=!1,this.reasonTacitly={},this.reasonKeyword={},this.$emit("hide"),i.hide()},submitFeedback:function(){var e=this;this.hasFeedbackReason&&(this.$emit("submit",{tacitly:Object.keys(this.reasonTacitly).map((function(t){return e.reasonTacitly[t]})),keyword:Object.keys(this.reasonKeyword)}),this.hideFeedback())},chooseFeedbackReason:function(e,t){if(this.isSelected){var i=e.currentTarget,n=xe.hasClass(i,"js_reason")?this.reasonTacitly:this.reasonKeyword,o=i.dataset.value;n[o]?this.$delete(n,o):this.$set(n,o,t)}else this.$emit("selectFeedback")}}},(function(){var e=this,t=e._self._c;return t("div",{ref:"feedbackBd",class:["feedback_dialog_wrp feedback_dialog_radius_tail js_feedback_dialog",e.innerShow?"feedback_dialog_show":"",e.showMaskTransition?"feedback_mask":""],attrs:{role:"dialog","aria-modal":"true",tabindex:"0","aria-hidden":!e.innerShow},on:{click:function(e){e.stopPropagation()},touchstart:function(e){e.stopPropagation()},touchend:function(e){e.stopPropagation()},touchmove:function(e){e.stopPropagation(),e.preventDefault()}}},[t("div",{staticClass:"weui-mask js_mask",style:{background:e.maskStyle.background,backdropFilter:e.maskStyle.filter},attrs:{role:"button","aria-label":"Close"},on:{click:e.hideFeedback}}),e._t("default"),t("div",{class:["feedback_dialog js_dialog_wrp","top"===e.pos?"feedback_dialog_pos_top":"",e.showShadow?"feedback_dialog_shadow":""],style:e.dialogStyle},[t("div",{staticClass:"feedback_dialog_hd weui-flex"},[t("div",{staticClass:"weui-flex__item feedback_dialog_title"},[e._v(e._s(e.title))]),e.showSubmitFeedback?t("button",{class:["weui-btn weui-btn_primary weui-btn_mini js_submit",e.hasFeedbackReason?"":"weui-btn_disabled"],attrs:{type:"button",disabled:!e.hasFeedbackReason},on:{click:e.submitFeedback}},[e._v(" OK ")]):e._e()]),t("div",{staticClass:"feedback_dialog_bd"},[t("ul",{staticClass:"feedback_tag_list"},[e._l(e.reason,(function(i){return t("li",{key:i.value,class:["feedback_tag_item js_reason js_tag_item",e.reasonTacitly[i.value]?"feedback_tag_selected":""],style:e.reasonLiStyle,attrs:{role:"checkbox","aria-checked":!!e.reasonTacitly[i.value],"data-value":i.value},on:{click:function(t){return e.chooseFeedbackReason(t,i)}}},[e._v(" "+e._s(i.name)+" ")])})),e._l(e.keyword,(function(i,n){return[n<2?t("li",{key:i,class:["feedback_tag_item js_keyword js_tag_item",e.reasonKeyword[i]?"feedback_tag_selected":""],attrs:{role:"checkbox","aria-checked":!!e.reasonKeyword[i],"data-value":i},on:{click:function(t){return e.chooseFeedbackReason(t,i)}}},[e._v(" \u5bf9"+e._s(i)+"\u4e0d\u611f\u5174\u8da3 ")]):e._e()]}))],2)]),t("div",{class:["feedback_dialog_tail","top"===e.pos?"":"feedback_dialog_tail_pos_up"],style:e.arrowStyle})])],2)}),[],!1,null,"f4da6e1d",null,null).exports;!function(e,t){try{if("undefined"!=typeof document&&!document.getElementById(t.styleId)){var i=document.createElement("style");i.setAttribute("id",t.styleId);for(const e in t.attributes)i.setAttribute(e,t.attributes[e]);i.appendChild(document.createTextNode('.feedback_dialog_wrp[data-v-f4da6e1d]{opacity:0;-webkit-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none}.feedback_dialog_wrp.feedback_mask[data-v-f4da6e1d]{transition:opacity .07s ease-out}.feedback_dialog_wrp .weui-mask[data-v-f4da6e1d]{background:rgba(0,0,0,.2)}.feedback_dialog[data-v-f4da6e1d]{position:absolute;z-index:5000;font-size:10px;right:calc(-16px - 6.4em);top:calc(100% + 10px);width:288px;padding:16px;box-sizing:border-box;background-color:var(--weui-BG-5);color:var(--weui-FG-0);line-height:1.4;border-radius:8px;transition:transform .15s cubic-bezier(.175,.885,.32,1.1);-ms-transform:scale(0);transform:scale(0);-ms-transform-origin:80% 0;transform-origin:80% 0}.feedback_dialog[data-v-f4da6e1d]:before{content:"";display:inline-block;width:0;height:0;border-width:6px;border-style:dashed;border-color:transparent;border-top-width:0;border-bottom-color:var(--weui-BG-5);border-bottom-style:solid;position:absolute;right:calc(7.4em + 10px);top:-6px}.feedback_dialog_radius_tail .feedback_dialog[data-v-f4da6e1d]:before{display:none}.feedback_dialog_tail[data-v-f4da6e1d]{pointer-events:none;position:absolute;left:50%;margin-left:-4px;width:8px;height:8px;border-radius:1.5px;background:var(--weui-BG-5);-ms-transform:rotate(45deg);transform:rotate(45deg);top:auto;bottom:-3px;left:auto;right:calc(7.4em + 12px)}.feedback_dialog_tail[data-v-f4da6e1d]:before,.feedback_dialog_tail[data-v-f4da6e1d]:after{content:"";position:absolute;width:8px;height:8px;border-radius:50%;box-shadow:-6.5px 0 0 0 var(--weui-BG-5)}.feedback_dialog_tail[data-v-f4da6e1d]:before{bottom:-7px;left:6px;-ms-transform:rotate(74deg);transform:rotate(74deg);-ms-transform-origin:0 0;transform-origin:0 0}.feedback_dialog_tail[data-v-f4da6e1d]:after{top:-2px;right:-7px;-ms-transform:rotate(16deg);transform:rotate(16deg);-ms-transform-origin:0 100%;transform-origin:0 100%}.feedback_dialog_tail_pos_up[data-v-f4da6e1d]{bottom:auto;top:-3px}.feedback_dialog_tail_pos_up[data-v-f4da6e1d]:before,.feedback_dialog_tail_pos_up[data-v-f4da6e1d]:after{box-shadow:6.5px 0 0 0 var(--weui-BG-5)}.feedback_dialog_tail_pos_up[data-v-f4da6e1d]:before{bottom:1px;left:-6px;-ms-transform:rotate(16deg);transform:rotate(16deg)}.feedback_dialog_tail_pos_up[data-v-f4da6e1d]:after{top:-15px;right:0;-ms-transform:rotate(80deg);transform:rotate(80deg)}.feedback_dialog_hd[data-v-f4da6e1d]{-ms-flex-align:center;align-items:center}.feedback_dialog_title[data-v-f4da6e1d]{padding-right:16px;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;font-size:15px;font-weight:500;color:var(--weui-FG-0)}.feedback_dialog_bd[data-v-f4da6e1d]{padding-top:4px}.feedback_tag_list[data-v-f4da6e1d]{font-size:0}.feedback_tag_item[data-v-f4da6e1d]{--weui-TAG-TEXT-GREEN: #07C160;--weui-TAG-BACKGROUND-GREEN: rgba(7, 193, 96, .1);margin-right:8px;margin-top:8px;display:inline-block;vertical-align:middle;font-size:14px;width:auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-wrap:normal;max-width:100%;padding:8px 12px;border-radius:4px;box-sizing:border-box;color:var(--weui-FG-0);background:rgba(0,0,0,.03);-webkit-tap-highlight-color:rgba(0,0,0,0)}.feedback_tag_item.feedback_tag_selected[data-v-f4da6e1d]{color:var(--weui-TAG-TEXT-GREEN);background-color:var(--weui-TAG-BACKGROUND-GREEN)}.feedback_tag_item[data-v-f4da6e1d]:active{position:relative}.feedback_tag_item[data-v-f4da6e1d]:active:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.1)}.feedback_dialog_pos_top[data-v-f4da6e1d]{top:auto;bottom:calc(100% + 10px)}.feedback_dialog_pos_top[data-v-f4da6e1d]:before{border-bottom:0;border-top:6px solid var(--weui-BG-5);top:auto;bottom:-6px}.feedback_dialog_show[data-v-f4da6e1d]{opacity:1;pointer-events:all}.feedback_dialog_show.feedback_mask[data-v-f4da6e1d]{transition:all .05s ease-in}.feedback_dialog_show .feedback_dialog[data-v-f4da6e1d]{-ms-transform:scale(1);transform:scale(1)}@media screen and (min-width: 400px){.feedback_dialog[data-v-f4da6e1d]{left:auto;width:320px}}@media (prefers-color-scheme: dark){.feedback_tag_item[data-v-f4da6e1d]{background-color:#ffffff08}}.feedback_dialog[data-v-f4da6e1d]{-ms-transform-origin:50% 0;transform-origin:50% 0}.feedback_dialog.feedback_dialog_pos_top[data-v-f4da6e1d]{-ms-transform-origin:50% 100%;transform-origin:50% 100%}.feedback_dialog_shadow[data-v-f4da6e1d]{box-shadow:0 4px 25px #0003}.weui-btn_disabled.weui-btn_disabled[data-v-f4da6e1d]{background-color:#f7f7f7}@media (prefers-color-scheme: dark){.weui-btn_disabled.weui-btn_disabled[data-v-f4da6e1d]{background-color:#404040}}')),document.head.appendChild(i)}}catch(e){}}(0,{styleId:"mp-common-components-0.6886197473341313"});const _a=_t({components:{[ma.name]:ma},data(){var e,t;return{isShowFeedBack:!1,feedbackArrowStyle:{right:"10px"},feedbackDialogStyle:{position:"absolute",width:"auto",top:"27px",right:"0px"},feedbackReasonLiStyle:{marginRight:0},media:null==(e=window.matchMedia)?void 0:e.call(window,"(prefers-color-scheme: dark)"),isDarkMode:null==(t=window.matchMedia)?void 0:t.call(window,"(prefers-color-scheme: dark)").matches,bottomBarDom:null,bottomBarZIndex:0,bottomBarMaskDom:null,bottomBarMaskZIndex:0,payPanelDom:null,payPanelZIndex:0}},methods:{showFeedBack(){_e({url:"/publicpoc/mparticlefeedback?action=Report&bizuin=".concat(window.biz,"&mid=").concat(window.mid,"&idx=").concat(window.idx,"&feedback_reason_enum=0"),type:"POST"}),this.isShowFeedBack=!0,i.show({color:"#ffffff",alpha:0}),this.bottomBarDom=document.querySelector("#js_article_bottom_bar"),this.bottomBarDom&&(this.bottomBarZIndex=this.bottomBarDom.style.zIndex,this.bottomBarDom.style.zIndex=0),this.bottomBarMaskDom=document.querySelector(".bottom_bar_padding_mask"),this.bottomBarMaskDom&&(this.bottomBarMaskZIndex=this.bottomBarMaskDom.style.zIndex,this.bottomBarMaskDom.style.zIndex=0),this.payPanelDom=document.querySelector("#js_pay_panel"),this.payPanelDom&&(this.payPanelZIndex=this.payPanelDom.style.zIndex,this.payPanelDom.style.zIndex=0)},selectFeedbackFn(){this.hideFeedBack(),_e({url:"/publicpoc/mparticlefeedback?action=Report&bizuin=".concat(window.biz,"&mid=").concat(window.mid,"&idx=").concat(window.idx,"&feedback_reason_enum=1"),type:"POST"}),window.weui.toast("\u5df2\u53cd\u9988",{duration:800})},darkModeListener(){var e;this.isDarkMode=null==(e=this.media)?void 0:e.matches},hideFeedBack(){this.isShowFeedBack=!1,i.hide(),this.bottomBarDom&&(this.bottomBarDom.style.zIndex=this.bottomBarZIndex),this.bottomBarMaskDom&&(this.bottomBarMaskDom.style.zIndex=this.bottomBarMaskZIndex),this.payPanelDom&&(this.payPanelDom.style.zIndex=this.payPanelZIndex),i.hide()}},computed:{maskBackground(){return this.isDarkMode?"linear-gradient(to bottom, rgba(25,25,25,1), rgba(25,25,25,0.5) 120px, rgba(25,25,25,0.5) 120px)":"linear-gradient(to bottom, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0.5) 120px, rgba(255, 255, 255, 0.5) 120px)"},maskFilter(){return this.isShowFeedBack?"blur(5px)":"blur(0px)"}},created(){this.media.addEventListener?this.media.addEventListener("change",this.darkModeListener):this.media.addListener(this.darkModeListener)},destroyed(){this.media.removeEventListener?this.media.removeEventListener("change",this.darkModeListener):this.media.removeListener(this.darkModeListener)}},(function(){var e=this,t=e._self._c;return t("div",{ref:"feedbackIcon",staticClass:"rich_media_meta_feedback dislike_btn",on:{click:function(t){return t.stopPropagation(),e.showFeedBack.apply(null,arguments)}}},[t("mp-feedback",{attrs:{show:e.isShowFeedBack,"arrow-style":e.feedbackArrowStyle,"dialog-style":e.feedbackDialogStyle,title:"\u53cd\u9988",showSubmitFeedback:!1,reason:[{name:"\u6807\u9898\u6709\u8bef\u5bfc\u6027"}],isSelected:!1,showShadow:!0,showMask:!1,maskStyle:{background:e.maskBackground,filter:e.maskFilter},reasonLiStyle:e.feedbackReasonLiStyle,showMaskTransition:!0},on:{hide:e.hideFeedBack,selectFeedback:e.selectFeedbackFn}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowFeedBack,expression:"isShowFeedBack"}],staticClass:"dislike_btn inner"})])],1)}),[],!1,null,"6abc76d6",null,null).exports,ha=window.Vue,ga={initAuthorName:(e,t)=>{const i=document.getElementById("js_author_name");t.reward_entrance_enable_for_preview?Ae.isInMiniProgram&&i&&fa(i):!Ae.isInMiniProgram&&(Ae.isWindowsWechat||Ae.isMacWechat||Ae.isIOS||Ae.isAndroid)?(i&&e.rewardsn&&e.timestamp&&(i.setAttribute("data-rewardsn",e.rewardsn),i.setAttribute("data-timestamp",e.timestamp),i.setAttribute("data-canreward",e.can_reward)),i&&!e.can_reward&&fa(i)):i&&fa(i)}},wa={tagName:"mp-common-cpslink",componentIdPropName:"data-link-component-id",clickReportPropName:"data-click-report-url",exposureReportPropName:"data-exposure-report-url",banPropName:"data-ban-status"},ya={},Aa={initCpslink:function(){const e=document.getElementsByTagName(wa.tagName);for(const t of e)t.classList.add("js_wx_tap_highlight"),ka(t);je.on(window,"scroll",xa)},updateCpslinkStatus:function(e){for(const t of e){if(!t||!t.component_id)continue;const e=t.component_id,i=document.querySelector("".concat(wa.tagName,"[").concat(wa.componentIdPropName,'="').concat(e,'"]'));i&&(i.setAttribute(wa.clickReportPropName,t.click_url),i.setAttribute(wa.exposureReportPropName,t.exp_url),i.setAttribute(wa.banPropName,t.merge_status))}xa()}
},Ia='<div id="page-content">\n  <!--S \u5168\u5c4f\u64ad\u653e full_screen_mv-->\n  <div id="js_mpvedio_wrapper_<#=vid#>" style="position:relative;height:100%">\n    <div class="add_bg_color appmsg_video">\n      <div id="js_video_tail_panel_<#=vid#>" class="video_tail_module video_screen_half" style="display: none;">\n        <div class="video_tail_module__hd" id="js_video_tail_hd">\n          <div class="account_info_wrp">\n            <div class="profile_info_wrp js_go_profile">\n              <img class="account_avatar" src="" alt="" id="js_tail_panel_account_avatar">\n                <div class="account_name" id="js_tail_panel_account_name"></div>\n                <div class="subscription_info subscription_success">\n                  <div class="account_subscription_tips js_subscription_success" id="js_subscription_success"\n                    style="display: none;">\u5df2\u5173\u6ce8</div>\n                  <i class="account_link_icon js_profile_icon" id="js_profile_icon"></i>\n                </div>\n            </div>\n            <div class="btn_account_subscription js_btn_account_subscription" id="js_btn_account_subscription" style="display: none;">\n              Follow</div>\n          </div>\n          <div class="opr_wrp">\n            <span class="opr_item_wrp js_replay" id="js_replay">\n              <i class="opr_item refresh_icon"></i>\n              <span class="opr_item_text">Replay</span>\n            </span>\n            <span class="opr_item_wrp share_item_wrp js_share_button" id="js_tail_share_button"\n              style="display: none;">\n              <i class="opr_item share_icon"></i>\n              <span class="opr_item_text">Share</span>\n            </span>\n            <!--\u70b9\u8d5e\u540e \u52a0className selected-->\n            <span class="opr_item_wrp like_item_wrp" id="js_tail_like_button" style="display: none;">\n              <i class="opr_item like_icon"></i>\n              <span class="opr_item_text">Like</span>\n            </span>\n            <!-- <span class="opr_item_wrp recommend_item_wrp" id="js_tail_channel_button"\n              style="display: none;">\n              <i class="opr_item video-logo_icon"></i>\n              <span class="opr_item_text">\u968f\u4fbf\u770b\u770b</span>\n            </span> -->\n          </div>\n        </div>\n\n        <!-- \u6709\u62d3\u5c55\u5185\u5bb9 -->\n        <div class="have_expand" id="js_expand_area">\n        </div>\n\n        <!-- \u5e7f\u544a\u5185\u5bb9 -->\n        <div class="ad_area" id="js_tail_video_ad_area">\n        </div>\n      </div>\n    </div>\n    <div id="js_vue_player_<#=index#>"></div>\n  </div>\n  <!--E \u89c6\u9891\u64ad\u653e\u5668-->\n  <!-- S \u89c6\u9891\u793e\u4ea4-->\n  <div id="bottom_bar" class="interact_video" style="display:none;height: 35px;">\n    <div class="inter_opr">\n      <a id="video_detail_btn" href="javascript:;" target="_blank" class="access_original">\n        Video Details\n      </a>\n    </div>\n  </div>\n</div>',Ta=[],Ea='<span class="original_img_wrp">\n<span class="tips_global">From : <#=source_nickname#></span>\n</span>';document.querySelectorAll("mp-common-product");const ja=window.user_uin||0,Ba=Math.floor(ja/100)%1e3,Oa=0!==ja&&Ba<1001,Na=.075,Ma="517345",La=e=>/^[^:]+:\/\/mmecoa\.qpic\.cn/.test(e),za=!Ae.isWechat||Ae.isWindowsWechat||Ae.isMacWechat||Ae.isNewMpApp,Fa=Ae.isAndroid&&window.clientversion<"28002A00"||Ae.isIOS&&window.clientversion<"18002824",Ha=Ae.isAndroid&&window.clientversion<"28002800"||Ae.isIOS&&window.clientversion<"18002831",Ua=e=>e?at.encodeStr(e).replace(/^\s/,"").replace(/\s$/,""):"";class Ka{constructor(){this.validTagLen=0,this.adapter={1:rt,2:st},this.tagMap={qqmusic:{eles:[],isClMusic:!1,watchAttrs:[],renderTag:"mp-common-qqmusic"},"mp-common-qqmusic":{eles:[],isClMusic:!1,watchAttrs:["musicid"],renderTag:"mp-common-qqmusic"},"mp-common-clmusic":{eles:[],isClMusic:!0,type2Wording:{1:"Music",2:"\u4e13\u8f91",3:"\u6b4c\u5355"},renderTag:"mp-common-clmusic",watchAttrs:["listenid","categoryid"]}},this.tagNameList=Object.keys(this.tagMap),this.validateEnv()&&(this.renderTag(),this.renderCard())}validateEnv(){try{const e=document.querySelector("#js_content");return this.tagNameList.forEach((t=>{this.tagMap[t].eles=Array.from(e.querySelectorAll(t))})),this.validTagLen=this.tagNameList.reduce(((e,t)=>e+this.tagMap[t].eles.length),0),!!this.validTagLen}catch(e){return!1}}renderTag(){this.tagNameList.forEach((e=>{const t=this.tagMap[e],{renderTag:i,eles:n}=t;n.forEach(((t,o)=>{if(i!==e){const e=((e,t)=>{const i=document.createElement(t);for(const t of e.attributes)i.setAttribute(t.name,t.value);return i.innerHTML=e.innerHTML,e.parentNode.replaceChild(i,e),i})(t,i);this.tagMap[i].eles.push(e),n.splice(o,1,null)}})),t.eles=n.filter((e=>e))}))}renderCard(){this.batchGetClMusicInfo().then((()=>{this.tagNameList.forEach((e=>{const t=this.tagMap[e],{eles:i,watchAttrs:n,isClMusic:o}=t;i.forEach(((e,t)=>{xe.addClass(e,"js_wx_tap_highlight");let i={isClMusic:o,posIndex:t,media_id:Ua(e.getAttribute("mid"))||"",singer:Ua(e.getAttribute("singer"))||"",albumid:Ua(e.getAttribute("albumid"))||"",otherid:Ua(e.getAttribute("otherid"))||"",musicid:Ua(e.getAttribute("musicid"))||"",albumurl:Ua(e.getAttribute("albumurl"))||"",audiourl:Ua(e.getAttribute("audiourl"))||"",listenId:Ua(e.getAttribute("listenid"))||"",clMusicType:parseInt(e.getAttribute("type"))||"",musictype:parseInt(e.getAttribute("musictype"))||1,music_name:Ua(e.getAttribute("music_name"))||"",jumpurlkey:Ua(e.getAttribute("jumpurlkey"))||"",categoryId:Ua(e.getAttribute("categoryid"))||"",duration:parseInt(e.getAttribute(o?"duration":"play_length")||0,10)};if(i.musictype>2&&(i.musictype=2),!i.singer){const t=e.getAttribute("src")||"",n=decodeURIComponent(ge.getQuery("singer",t)||"");i.singer=Ua(n)||""}o?(i.type=11,i.pauseCss="",i.allowPause=!1):this.adapter[i.musictype]&&"function"==typeof this.adapter[i.musictype].initData&&(i=this.adapter[i.musictype].initData(i,{scene:0}),e.setAttribute("albumurl",i.albumurl)),e.setAttribute("posindex",t),this.reRenderCard(e,n),o&&!e.isErrStatus?1!==i.clMusicType||Fa||za?this.bindEvent(e,i):this.renderPlayer(e,i):o||this.renderPlayer(e,i)}))}))}))}reRenderCard(e,t=[]){e&&t.forEach((t=>{const i=e.getAttribute(t);i&&(e.removeAttribute(t),e.setAttribute(t,i))}))}renderPlayer(e,t){setTimeout((()=>{we.log("[Music] init "+t.detailUrl);const i="".concat(t.musicid||t.listenId,"_").concat(t.posIndex);var n;t.player=at.init({epname:"Music",mid:t.media_id,singer:t.singer,songId:t.musicid,type:t.type||0,otherid:t.otherid,albumid:t.albumid,wxIndex:t.posIndex,duration:t.duration,listenId:t.listenId,webUrl:t.webUrl||"",isClMusic:t.isClMusic,coverImgUrl:t.albumurl,jumpurlkey:t.jumpurlkey,playingCss:"share_audio_playing",pauseCss:t.pauseCss||"",allowPause:!!t.allowPause,title:(n=t.music_name,n?at.decodeStr(n):""),detailUrl:t.detailUrl||"",playArea:e.shadowRoot.querySelector("#music_play_".concat(i)),playCssDom:e.shadowRoot.querySelector("#music_main_".concat(i)),detailArea:e.shadowRoot.querySelector("#music_home_".concat(i))})}),0)}bindEvent(e,t){setTimeout((()=>{const i=t.clMusicType,n="".concat(t.listenId||t.categoryId,"_").concat(t.posIndex),o=e.shadowRoot.querySelector("#music_main_".concat(n)),a=e.shadowRoot.querySelector("#music_play_".concat(n));o&&je.on(o,"click",(()=>{if(za)(window.weui||window).alert("\u8bf7\u5728\u624b\u673a\u5fae\u4fe1\u5185\u64cd\u4f5c");else if(1===i&&Fa||(2===i||3===i)&&Ha)Ie.invoke("confirmDialog",{title:"\u5f53\u524d\u7248\u672c\u6682\u4e0d\u652f\u6301\uff0c\u8bf7\u66f4\u65b0\u81f3\u5fae\u4fe1\u6700\u65b0\u7248\u672c",confirmText:"Update Now",cancelText:"Cancel"},(e=>{-1!==e.err_msg.indexOf(":ok")?location.href=Ae.isIOS?"https://itunes.apple.com/cn/app/id414478124?mt=8&ls=1":"https://support.weixin.qq.com/update/":-1!==e.err_msg.indexOf("system:")&&(window.weui||window).alert("\u5f53\u524d\u7248\u672c\u6682\u4e0d\u652f\u6301\uff0c\u8bf7\u66f4\u65b0\u81f3\u5fae\u4fe1\u6700\u65b0\u7248\u672c")}));else{const t=Ua(e.getAttribute("categoryid"))||"";Ie.invoke("openTingView",{action:"openCategory",category_id:t,sync_get:!0},(()=>{}))}})),a&&(je.on(a,"mousedown",(e=>e.stopPropagation())),je.on(a,"touchstart",(e=>e.stopPropagation())))}),0)}batchGetClMusicInfo(){return new Promise((e=>{const t=this.tagMap["mp-common-clmusic"],i=t.eles;if(!i.length)return void e();const n=this,o={count:i.length};i.forEach(((e,t)=>{const i=1*e.getAttribute("type");o["type".concat(t)]=i,o["source".concat(t)]=1*e.getAttribute("music_source"),o["username".concat(t)]=e.getAttribute("username")||"",o["id".concat(t)]=e.getAttribute(1===i?"listenid":"categoryid")||""})),_e({url:"/mp/finder_music_appmsg?action=get",type:"POST",async:!0,dataType:"json",data:o,success(o){var a;if(0===(null==(a=null==o?void 0:o.base_resp)?void 0:a.ret)){const e=o.music_info_list||[];i.forEach((i=>{const o=1*i.getAttribute("type"),a=i.getAttribute(1===o?"listenid":"categoryid")||"",r=e.find((e=>e.id===a));if(r){const{flag:e}=r;switch(1*e!=0&&(i.isErrStatus=!0),1*e){case 0:n.updateClMusicCardInfo(i,r),i.setAttribute("verify_err","");break;case 1:i.setAttribute("verify_err","".concat(t.type2Wording[o],"\u6682\u65f6\u65e0\u6cd5\u64ad\u653e"));break;case 2:i.setAttribute("verify_err","".concat(t.type2Wording[o],"\u5df2\u88ab\u4f5c\u8005\u5220\u9664"));break;case 3:i.setAttribute("verify_err","".concat(t.type2Wording[o],"\u5df2\u88ab\u8bbe\u7f6e\u4e3a\u79c1\u5bc6"));break;case 4:i.setAttribute("verify_err","\u56e0\u4f5c\u8005\u9690\u79c1\u8bbe\u7f6e\uff0c\u6682\u65f6\u65e0\u6cd5\u67e5\u770b\u8be5\u5185\u5bb9")}}}))}e()},error:e})}))}updateClMusicCardInfo(e,t){const{type:i}=t,n=t.user_info||{};let o={};switch(1*i){case 1:o=t.music;break;case 2:o=t.album;break;case 3:o=t.playlist}e.setAttribute("count",o.item_num||0);try{const t=new URL(e.getAttribute("albumurl")||""),i=new URLSearchParams(t.search);i.delete("picformat");const n=new URL(o.cover||"");"".concat(t.origin).concat(t.pathname,"?").concat(i.toString())!=="".concat(n.origin).concat(n.pathname).concat(n.search)&&e.setAttribute("albumurl",o.cover||"")}catch(e){}e.setAttribute("singer",n.nickname||o.author||""),e.setAttribute("duration",o.duration||""),e.setAttribute("avatar",n.headimg_url||""),e.setAttribute("music_name",o.name||o.title||"")}}const Va=Ae.isWechat&&!Ae.isWindowsWechat&&!Ae.isMacWechat&&!Ae.isNewMpApp,Ja={getTingIsOpenPromise:null,getListenLaterIsOpenPromise:null,musicLen:0,musicList:{},isTingOpen:-1,isSupportListenLater:Va?1:0,srcRoot:"".concat(location.protocol,"//res.wx.qq.com/voice/getvoice?mediaid=#meidaid#"),inWechat:Va,channelsInfo:[]};window.musicList={},window.musicMap=new WeakMap;const tr='<!-- \u53d1\u8868\u7559\u8a00 -->\n<#if(window.new_appmsg){#>\n  <div id="js_cmt_mine" class="discuss_container_wrp" style="display:none;">\n    <div class="discuss_container editing access">\n        <div class="discuss_container_inner">\n          <div class="discuss_container_hd">\n            <h2 class="rich_media_title">\n                <#if(window.item_show_type == 10){#>\n                    <#=textPageTitle#>\n                <#}else{#>\n                    <#=window.msg_title.html(1)#>\n                <#}#>\n            </h2><!-- \u6807\u9898\u8981\u8f6c\u4e49 -->\n            <span id="log"></span>\n            <div class="frm_textarea_box_wrp">\n                <span class="frm_textarea_box">\n                    <#if(window.friend_comment_enabled == 1){#>\n                    <!-- <textarea id="js_cmt_input" class="frm_textarea" placeholder="Comments are visible to your friends and can be seen by everyone after being approved by the Official Account."></textarea> -->\n                    <textarea id="js_cmt_input" class="frm_textarea" placeholder="Comments will be visible to everyone after being approved by the Official Account."></textarea>\n                    <#}else{#>\n                    <textarea id="js_cmt_input" class="frm_textarea" placeholder="Comments will be visible to everyone after being approved by the Official Account."></textarea>\n                    <#}#>\n                    <div class="emotion_tool">\n                        <span class="emotion_switch" style="display:none;"></span>\n                        <span id="js_emotion_switch" class="pic_emotion_switch_wrp">\n                            <img class="pic_default" src="<#=window.icon_emotion_switch#>" alt="">\n                            <img class="pic_active" src="<#=window.icon_emotion_switch_active#>" alt="">\n                            <img class="pic_default_primary" src="<#=window.icon_emotion_switch_primary#>" alt="">\n                            <img class="pic_active_primary" src="<#=window.icon_emotion_switch_active_primary#>" alt="">\n                        </span>\n                    </div>\n                </span>\n            </div>\n            <div class="emotion_panel" id="js_emotion_panel">\n                <span class="emotion_panel_arrow_wrp" id="js_emotion_panel_arrow_wrp">\n                    <i class="emotion_panel_arrow arrow_out"></i>\n                    <i class="emotion_panel_arrow arrow_in"></i>\n                </span>\n                <div class="emotion_list_wrp" id="js_slide_wrapper">\n                    <!--<ul class="emotion_list"></ul>-->\n                    <!--<li class="emotion_item"><i class="icon_emotion"></i></li>-->\n                </div>\n                <ul class="emotion_navs" id="js_navbar">\n                    <!--<li class="emotion_nav"></li>-->\n                </ul>\n            </div>\n            <div class="discuss_btn_wrp"><a id="js_cmt_submit" class="btn btn_primary btn_discuss btn_disabled" href="##">Comment</a></div>\n          </div>\n          <div class="discuss_container_bd">\n            <div class="" style="display:none">\n                <div class="mod_title_context">\n                    <strong class="mod_title">My Comments</strong>\n                </div>\n                <ul class="discuss_list" id="js_cmt_mylist"></ul>\n            </div>\n            <div class="weui-loadmore" id="js_mycmt_loading">\n                <i class="weui-loading"></i>\n                <span class="weui-loadmore__tips">Loading...</span>\n            </div>\n            <div id="js_cmt_toast" style="display: none;">\n                <div class="weui-mask_transparent"></div>\n                <div class="weui-toast">\n                    <i class="weui-icon-success-no-circle weui-icon_toast"></i>\n                    <p class="weui-toast__content">Commented</p>\n                </div>\n            </div>\n            <div class="weui-dialog__wrp weui-transition_opacity-hide" id="js_delete_panel_mobile">\n                <div class="weui-mask"></div>\n                <div class="weui-dialog">\n                    <div class="weui-dialog__bd">Delete this comment?</div>\n                    <div class="weui-dialog__ft">\n                    <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_default" id="js_delete_cancel_mobile">Cancel</a>\n                    <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary" id="js_delete_confirm_mobile">Delete</a>\n                    </div>\n                </div>\n            </div>\n          </div>\n        </div>\n    </div>\n  </div>\n<#}else{#>\n    <div id="js_cmt_mine" class="discuss_container editing access" style="display:none;">\n        <div class="discuss_container_inner">\n            <h2 class="rich_media_title"><#=window.msg_title.html(1)#></h2><!-- \u6807\u9898\u8981\u8f6c\u4e49 -->\n            <span id="log"></span>\n            <div class="frm_textarea_box_wrp">\n                <span class="frm_textarea_box">\n                    <#if(window.friend_comment_enabled == 1){#>\n                    <!-- <textarea id="js_cmt_input" class="frm_textarea" placeholder="Comments are visible to your friends and can be seen by everyone after being approved by the Official Account."></textarea> -->\n                    <textarea id="js_cmt_input" class="frm_textarea" placeholder="Comments will be visible to everyone after being approved by the Official Account."></textarea>\n                    <#}else{#>\n                    <textarea id="js_cmt_input" class="frm_textarea" placeholder="Comments will be visible to everyone after being approved by the Official Account."></textarea>\n                    <#}#>\n                    <div class="emotion_tool">\n                        <span class="emotion_switch" style="display:none;"></span>\n                        <span id="js_emotion_switch" class="pic_emotion_switch_wrp">\n                            <img class="pic_default" src="<#=window.icon_emotion_switch#>" alt="">\n                            <img class="pic_active" src="<#=window.icon_emotion_switch_active#>" alt="">\n                        </span>\n                        <div class="emotion_panel" id="js_emotion_panel">\n                            <span class="emotion_panel_arrow_wrp" id="js_emotion_panel_arrow_wrp">\n                                <i class="emotion_panel_arrow arrow_out"></i>\n                                <i class="emotion_panel_arrow arrow_in"></i>\n                            </span>\n                            <div class="emotion_list_wrp" id="js_slide_wrapper">\n                                <!--<ul class="emotion_list"></ul>-->\n                                <!--<li class="emotion_item"><i class="icon_emotion"></i></li>-->\n                            </div>\n                            <ul class="emotion_navs" id="js_navbar">\n                                <!--<li class="emotion_nav"></li>-->\n                            </ul>\n                        </div>\n                    </div>\n                </span>\n            </div>\n            <div class="discuss_btn_wrp"><a id="js_cmt_submit" class="btn btn_primary btn_discuss btn_disabled" href="##">Comment</a></div>\n            <div class="discuss_list_wrp" style="display:none">\n                <div class="rich_tips with_line title_tips discuss_title_line">\n                    <span class="tips">My Comments</span>\n                </div>\n                <ul class="discuss_list" id="js_cmt_mylist"></ul>\n            </div>\n            <div class="rich_tips tips_global loading_tips" id="js_mycmt_loading">\n                <img src="<#=window.icon_loading_white#>" class="rich_icon icon_loading_white" alt="">\n                <span class="tips">Loading...</span>\n            </div>\n            <div class="wx_poptips" id="js_cmt_toast" style="display:none;">\n                <img alt="" class="icon_toast" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGoAAABqCAYAAABUIcSXAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3NpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyMTUxMzkxZS1jYWVhLTRmZTMtYTY2NS0xNTRkNDJiOGQyMWIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTA3QzM2RTg3N0UwMTFFNEIzQURGMTQzNzQzMDAxQTUiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTA3QzM2RTc3N0UwMTFFNEIzQURGMTQzNzQzMDAxQTUiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NWMyOGVjZTMtNzllZS00ODlhLWIxZTYtYzNmM2RjNzg2YjI2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjIxNTEzOTFlLWNhZWEtNGZlMy1hNjY1LTE1NGQ0MmI4ZDIxYiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pmvxj1gAAAVrSURBVHja7J15rF1TFMbXk74q1ZKHGlMkJVIhIgg1FH+YEpEQJCKmGBpThRoSs5jVVNrSQUvEEENIhGiiNf9BiERICCFIRbUiDa2qvudbOetF3Tzv7XWGffa55/uS7593977n3vO7e5+199p7v56BgQGh0tcmvAUERREUQVEERREUQVEERREUQVEERREUQVEERREUQVEERREUQVEERVAUQVEERVAUQbVYk+HdvZVG8b5F0xj4RvhouB+eCy8KrdzDJc1RtAX8ILxvx98V1GyCSkN98Cx4z/95/Wn4fj6j6tUEeN4wkFSnw1MJqj5NhBfAuwaUHREUg4lqNMmePVsHll/HFhVfe1t3FwpJI8DXCCquDrCWNN4B6Tb4M3Z98aTPmTvh0YHl18PXw29yZiKejoPvcUD6E74yFBJbVDk6Bb7K8aP/Hb4c/tRzEYIqprPhSxzlf4Uvhb/0Xoig8qnHAJ3lqPMzfDH8XZ4LEpRf2sVdA5/sqPO9Qfop70UJyn+/boaPddT5yrq7VUUvTIVJI7q74MMddXR8NB1eXcYvhBpZm0s2w72/o86HFoKvLau/pYaXzjLMdUJ6y0LwtWV9CIIaXtvA8+G9HHV03u5q+K+yH47U0NoRngPv7KjzHDwTLj0bS1BDazfJJlcnOOostC6ysnCT+q80G/sIvFVgeW09D8FPVT0uoP7VfvAD8NjA8pqmuAN+OcYAjso0RbIZ8DGB5TVNcRO8JMaHY9SXSdfa3eeANJimWBLrA7JFiZwIXye+NMUV8CcxP2SRFjXefok7NRjSGZJlWUPvw2/wtNiQirSoXWyMsR28wR7AzzYM0oXw+Y7yK+CLJGeaoqjyrJSdZJD6Ov4+z5y6NJc0Az7NUecHydIUy+v60KNyQHoM3nKI1y7YCFiq0i7uBvgER52vDdKqWn9djhY1Dn4G3n6Ecqm2rF74dvgoR53S0hQxW9RJAZAGW5bSn58QJA27dQ7uIEedjywEX5NKVxCqsY6y+qA+LxFI4+yZ6oH0trWkNan80jygtIUsc5SflgAsDXgehfdx1KkkTRE76tN+Xue2jnTU0Ru1oIbvpt30bBtKhOp5yaaRkts0lic8V1i6dPcIRx2d/l8Y8XtNNEg7OOo8bl1kmmOKnDsO88CaYzejau0hWZqiL7C83oCH4SeTHvwV2BqqsHRVztSEYOmWF80NeXZT6Hd4KflResE9vCnBOlCyGfDNAstHTVPUDWoQ1t3iW+9WNizvlhfd4aerXd+ThqiMfNR6+9LvOOro5OY5JX2H4+F7HZD+kGzlamMgldWiirQsjcwWFbjmqZJteekJLK9pisvgL6RhKvuciZiwzrWWGapfrPy30kBVcSBIrw0aD3PU0XB6cehntq7rTMf7/2iQlktDVdXJLXlg6VjmiYBn6rWSTRCH6hvJ0hQrpcGq8oidsmHpTP8t8DGO9/vcWt9qabiqPgup1yKyQwvC2tSefZ73SSpNkUJ4PlLorlHZ+446nc8f3fIyywlJhwrTuwVSjBa1ccvSxN0hjjoK5xVrYZMd9V6XbFfgBukixTwGLg8sDam3dZR/wZ6L/dJlin1en8LS+bgpFbz3Ygvzu1J1HKxYNqxGpCmaCEo12rrBorD6LRp8UbpcdR5VWhTW35KlKd6QFqjuM2XzwlpnMxTvSkuUwuG/Xlg6NtPjbT6WFimF/VG6LEvXgn8QGDjMbBukVECFwhpoS+CQatfX2Q1q6H7wENHdrfCr0lKleEB9JyxNneus+VJpsVL9TwI6W65LovWIGl3KtVJaLv7LBwYTFEERFEVQFEERFEVQFEERFEVQFEERFEVQFEERFEVQFEERFFWq/hFgADUMN4RzT6/OAAAAAElFTkSuQmCC">\n                <p class="toast_content">Commented</p>\n            </div>\n        </div>\n    </div>\n<#}#>\n<div class="weui-webview-nav" style="display:none;" id="js_fake_bar">\n    <button class="weui-webview-nav__btn_goback" id="js_cmt_goback">goback</button>\n    <button class="weui-webview-nav__btn_forward weui-webview-nav__btn_disabled" disabled="disabled">forward</button>\n</div>',nr={tagName:"mp-common-poi",oldTagName:"mppoi",isWechat:(Ae.isAndroid||Ae.isIOS)&&(Ae.isWechat||Ae.isWxWork)&&!Ae.isNewMpApp,screen_height:Oe.getInnerHeight(),commonReportData:{bizuin:1*Ne(window.biz),msgid:1*window.mid,itemidx:1*window.idx,sessionidnew:window.sessionid,enterid:1*window.enterid},poiDom:[]},ir=e=>{nr.isWechat?Ae.isWxWork?Re():Ie.invoke("openLocation",{latitude:1*e.latitude,longitude:1*e.longitude,name:e.name,address:e.address,poiCardExpand:!0,infoUrl:""},(function(e){-1!==e.err_msg.indexOf("ok")?me.setSum(110809,53,1):me.setSum(110809,54,1)})):Ae.isNewMpApp?window.open("https://apis.map.qq.com/uri/v1/marker?marker=coord:".concat(e.latitude,",").concat(e.longitude,";title:").concat(encodeURIComponent(e.name),";addr:").concat(encodeURIComponent(e.address))):new t({msg:"\u8bf7\u4f7f\u7528\u79fb\u52a8\u7aef\u5fae\u4fe1\u6253\u5f00\u3002"})},or=(e={})=>{const t=e.dom,i=e.poiInfo;je.on(t,"click",(function(e){e.stopPropagation(),e.preventDefault(),he.report(19937,Object.assign({},nr.commonReportData,{type:2,actiontype:2})),me.setSum(110809,55,1),ir(i)}),!0)},ar=()=>{for(let e=0;e<nr.poiDom.length;e++){const t=nr.poiDom[e];if(1*t.getAttribute("data-hasreport")!=1){t.setAttribute("data-hasreport",1);const e=document.documentElement.scrollTop||document.body.scrollTop;t.clientHeight+t.offsetTop>=e+t.clientHeight/2&&t.clientHeight+t.offsetTop<=e+t.clientHeight/2+nr.screen_height&&("A"===t.tagName?(he.report(19937,Object.assign({},nr.commonReportData,{type:1,actiontype:1})),me.setSum(110809,58,1)):(he.report(19937,Object.assign({},nr.commonReportData,{type:2,actiontype:1})),me.setSum(110809,56,1)))}}},rr={oldTagName:"mpsearch",tagName:"mp-common-search",isWechat:(Ae.isAndroid||Ae.isIOS)&&(Ae.isWechat||Ae.isWxWork)&&!Ae.isNewMpApp,keywords:[],screen_height:Oe.getInnerHeight(),exposeHasReport:0,commonReportData:{BizUin:window.biz,MsgId:1*window.mid,ItemIdx:1*window.idx,SearchKeyWord:"",SessionId:window.sessionid,EnterId:1*window.enterid,Scene:1*window.source,SubScene:1*window.subscene}},sr=(e={})=>{je.on(e.dom,"click",(function(){const e=rr.keywords.map((e=>e.label)).join(";");if(he.report(19453,Object.assign({},rr.commonReportData,{SearchKeyWord:e,EventType:2})),me.setSum(110809,47,1),rr.isWechat){if(Ae.isWxWork)Re();else if((Ae.isIOS&&Ae.ltVersion("7.0.12")||Ae.isAndroid&&Ae.ltVersion("7.0.12"))&&!Ae.isWxWork)return void new t({msg:"\u5f53\u524d\u5fae\u4fe1\u7248\u672c\u4e0d\u652f\u6301\u5c55\u793a\u8be5\u5185\u5bb9\uff0c\u8bf7\u5347\u7ea7\u81f3\u6700\u65b0\u7248\u672c\u3002"});const e=[];for(let t=0;t<rr.keywords.length;t++)e.push({hotword:rr.keywords[t].label,id:t,optype:1});Ie.invoke("openWXSearchPage",{query:"",thirdExtParam:JSON.stringify({data:[{items:e,title:window.nickname+"\u63a8\u8350\u641c\u7d22",type:4}],from:"mpWidget",bizUserName:window.user_name,bizNickName:window.nickname,id:"mpWidget_".concat(rr.commonReportData.BizUin,":").concat(rr.commonReportData.MsgId,":").concat(rr.commonReportData.ItemIdx)})},(function(e){-1!==e.err_msg.indexOf("ok")?me.setSum(110809,48,1):me.setSum(110809,49,1)}))}else new t({msg:"\u8bf7\u4f7f\u7528\u79fb\u52a8\u7aef\u5fae\u4fe1\u6253\u5f00\u3002"})}));const i=()=>{if(!rr.exposeHasReport){rr.exposeHasReport=1;const t=document.documentElement.scrollTop||document.body.scrollTop;if(e.dom.clientHeight+e.dom.offsetTop>=t+e.dom.clientHeight/2&&e.dom.clientHeight+e.dom.offsetTop<=t+e.dom.clientHeight/2+rr.screen_height){const e=rr.keywords.map((e=>e.label)).join(";");he.report(19453,Object.assign({},rr.commonReportData,{SearchKeyWord:e,EventType:1})),me.setSum(110809,46,1)}}};je.on(window,"scroll",i),i()};let cr={pvele:[],checkInScreenId:null,reportRandom:Math.random()};const mr=window.location.protocol+"//support.weixin.qq.com/update/";let _r=[],hr=1,fr=ge.getQuery("fontScale"),br={"network_type:fail":"fail","network_type:edge":"2g/3g","network_type:wwan":"2g/3g","network_type:wifi":"wifi"};const vr='<div id="js_profile_ban" style="display: none;">\n  <div class="weui-mask_transparent"></div>\n  <div class="weui-toast">\n    <i class="weui-icon-warn weui-icon_toast"></i>\n    <p class="weui-toast__content">\u8be5\u8d26\u53f7\u56e0\u8fdd\u89c4\u65e0\u6cd5\u8df3\u8f6c</p>\n  </div>\n</div>';let kr=[];const xr=[],Rr=[],Pr=document.getElementsByTagName("mp-common-sticker"),Dr=new Map,jr=[],Br=[];for(const e of Pr){jr.push(e.dataset.md5);const t=Dr.get(e.dataset.md5);t?(t.push(e),Dr.set(e.dataset.md5,t)):(Dr.set(e.dataset.md5,[e]),e.dataset.buf||Br.push(e.dataset.md5))}const Or={EXPOSE:0,CLICK:1,LONGTAP:2},qr={tagName:"mp-common-answer",isWechat:(Ae.isAndroid||Ae.isIOS)&&Ae.isWechat&&!Ae.isWxWork&&!Ae.isNewMpApp,isPCWechat:Ae.isWindowsWechat||Ae.isMacWechat},Wr=Array.from(document.getElementsByTagName(qr.tagName)),zr=[],Fr=[];Wr&&Wr.length&&Wr.forEach((e=>{Number(e.dataset.card_type)?zr.push(e):Fr.push(e)}));const Hr={EXPOSE:1,CLICK:2,ANSWER:3},Xr={tagName:"mp-common-product",CHANNEL_PRODUCT_DOMAIN:"https://mp.weixin.qq.com",isWechat:(Ae.isAndroid||Ae.isIOS)&&Ae.isWechat&&!Ae.isWxWork&&!Ae.isNewMpApp,exposureInit:!1},Zr={init:function(){Zt(en),tn(),nn(),window.addEventListener("message",(e=>{const{iframeEle:t,productEle:i}=on(e.source);if(e.origin===Xr.CHANNEL_PRODUCT_DOMAIN&&i&&t)try{const{action:n,value:o}=JSON.parse(e.data);if(!n)return;const a=t.contentWindow;switch(n){case"changeFrameStyle":!function(e,t,i){if("2"!==t.getAttribute("data-cardtype")&&e&&t&&i&&"object"==typeof i)try{const n={compEle:t,compType:"channelProduct",subCompType:"cardHeight",compIdx:Array.from(document.getElementsByTagName("mp-common-product")).indexOf(t)};for(const t of Object.keys(i))"height"===t&&De.renderCompSilentlyPreHandler(n),e.style[t]=i[t],"height"===t&&De.renderCompSilently(n)}catch(e){}}(t,i,o);break;case"onFrameReady":Qr(a,0,i)}}catch(e){}}))}},es=window.Vue,ts={cacheTime:6e5,networkType:"",isPc:/(WindowsNT)|(Windows NT)|(Macintosh)/i.test(navigator.userAgent),defaultErrorWording:"\u89c6\u9891\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u518d\u8bd5",defaultHeadImgUrl:"http://mmbiz.qpic.cn/mmbiz/a5icZrUmbV8p5jb6RZ8aYfjfS2AVle8URwBt8QIu6XbGewB9wiaWYWkPwq4R7pfdsFibuLkic16UcxDSNYtB8HnC1Q/0",playerStatus:{formatId:null},netTypeMap:{"network_type:fail":"fail","network_type:edge":"2g/3g","network_type:wwan":"2g/3g","network_type:wifi":"wifi"},definitionMap:{20003:4,10002:3,10003:2,10004:1,10102:3,10103:2,10104:1},resolutionNameMap:{10002:"\u8d85\u6e05",10003:"\u9ad8\u6e05",10004:"\u6d41\u7545",10102:"\u8d85\u6e05",10103:"\u9ad8\u6e05",10104:"\u6d41\u7545",20003:"\u81ea\u52a8"},playbackRateInfo:[{rate:.5,name:"0.5\u500d"},{rate:.75,name:"0.75\u500d"},{rate:1,name:"1.0\u500d"},{rate:1.5,name:"1.5\u500d"},{rate:2,name:"2.0\u500d"}],allCpsPlayersOfPage:{}},ns={NOT_IN_WECHAT:91,VIDEO_BAN:92},is=new rn("cps_video_info"),os=["\u7ee7\u7eed\u89c2\u770b",""],as=["\u518d\u6b21\u89c2\u770b","refresh"],rs={1:os.concat("135px"),2:as.concat("135px"),201:os.concat("100%"),202:as.concat("100%"),203:os.concat("135px"),204:as.concat("135px")},ss=es.extend({components:{Intersect:C,[Ot.name]:Ot},provide:{playerScene:"cps"},data:()=>({id:Date.now()+"_"+Math.floor(Math.random()*Math.floor(Date.now())),opt:null,playerOpt:null,wrapStyle:null,videoStyle:null,posterStyle:null,topStickyExpendWhenPaused:!1,showScreenshotMask:!1,screenshot:"",toastTips:"",canLoad:!0}),computed:{...m(["cgiData"]),...m("mp-video-player",["errType","errCode","errMsg","fullscreenStatus","orientationStatus","refreshBtnStatus","topStickyInfoStatus","commonReportData"]),innerPlugins(){return this.opt&&this.opt.plugins&&this.opt.plugins.filter((e=>e.type===Nt.TYPE_INNER))||[]},coverPlugins(){return this.opt&&this.opt.plugins&&this.opt.plugins.filter((e=>e.type===Nt.TYPE_COVER))||[]},controlPlugins(){return this.opt&&this.opt.plugins&&this.opt.plugins.filter((e=>e.type===Nt.TYPE_CONTROL))||[]},profilePlugins(){return this.opt&&this.opt.plugins&&this.opt.plugins.filter((e=>e.type===Nt.TYPE_PROFILE))||[]},topStickyInfoWording(){const e=rs[this.topStickyInfoStatus];return e&&e[0]||"\u7ee7\u7eed\u89c2\u770b"},topStickyInfoIconClass(){const e=rs[this.topStickyInfoStatus];return e&&e[1]||""},topStickyInfoMaskWidth(){const e=rs[this.topStickyInfoStatus];return e&&e[2]||"100%"},extInfo(){return this.opt&&this.opt.extInfo||{}},isDramaVideo(){return this.extInfo&&this.extInfo.dramaInfo}},watch:{orientationStatus(e){this.$emit("orientation-change",e),this.fullscreenStatus?1===e?this.showScreenshotMask=!0:setTimeout((()=>{this.showScreenshotMask=!1}),250):this.showScreenshotMask=!1}},mounted(){ts.allCpsPlayersOfPage[this.id]=this,this.opt&&this.opt.dontAutoInit||this.init(),this.onPageResize(),this.opt&&this.opt.autoplayWhenExpose&&(this.__debouncedOnScroll=Ce.debounce(this.onPageScroll.bind(this),250),window.addEventListener("scroll",this.__debouncedOnScroll),this.__debouncedOnScroll()),window.addEventListener("unload",this.onPageUnload),window.addEventListener("resize",this.onPageResize),document.addEventListener("visibilitychange",this.onVisibilityChange)},beforeDestroy(){this.opt&&this.opt.autoplayWhenExpose&&this.__debouncedOnScroll&&window.removeEventListener("scroll",this.__debouncedOnScroll),window.removeEventListener("unload",this.onPageUnload),window.removeEventListener("resize",this.onPageResize),document.removeEventListener("visibilitychange",this.onVisibilityChange)},methods:{...w("mp-video-player",["setError"]),init(){this.initController(),ve.addSpecificReport("native_data",(()=>({video_data:{vid:this.opt.vid,lastPlayedTime:this.getCurrentTime(),lastPlayedTimeExpiredTime:(Date.now()+ts.cacheTime)/1e3}})))},initController(){this.opt={bizUserName:"",bizNickName:"",profileTabType:2,videoTitle:"",headImgUrl:"",preview:!1,fromid:0,oriStatus:3,isMpVideo:0,mpVideoCoverUrl:"",mpVideoTransInfo:[],showFullscreenMenu:!0,videoMd5:"",oriVid:"",vid:"",ckey:"",width:0,height:0,autoplay:!1,muted:!1,loop:!1,__biz:"",uin:"",mid:"",idx:"",comment_id:"",scene_type:0,hitBizuin:"",hitVid:"",totalRange:10,useFeFullscreen:!1,coverFit:"contain",lazyLoad:!1,blurFullscreenBackground:"all",canMute:!0,canFullscreen:!1,canChangePlaybackRate:!1,canPraiseVideo:!1,canShareVideo:!1,canLikeVideo:!1,...this.$options.opt,useWcSlPlayer:!1,useImmersiveMode:!1,isMpVideo:!0},this.opt.oriVid=this.opt.oriVid||this.opt.vid,this.opt.headImgUrl=this.opt.headImgUrl||ts.defaultHeadImgUrl,1!=this.opt.oriStatus&&2!=this.opt.oriStatus&&(this.opt.oriStatus=3),this.__reportData=G.getVideoReportData(),this.__gWidth=this.__gWidth||this.opt.width,this.__gHeight=this.__gHeight||this.opt.height,
this.__playRangeInfo=[],this.__dynamicErrMsg="",this.__isUnloaded=!1,this.__isShowTx=!1,this.__dataCount=0,this.__targetDataCount=2,this.__coverUrl="",this.__cacheStartTs=0,this.__initialData=null,this.__preventResize=Boolean(this.opt.initFullscreenStatus),this.__vInfo={status:null,coverUrl:"",dynamicData:null},this.initLazyLoad(),this.hideError(),this.initLegacyPlugins(),this.initReportData(),this.getCache(),window.__timelineInitialData&&(this.__initialData=window.__timelineInitialData,delete window.__timelineInitialData),this.getCoverUrl(),this.getAdvanceCodecSupportBeforeCallback((()=>{ts.playerStatus&&!ts.playerStatus.formatId?cs((()=>this.getDynamicData())):this.getDynamicData()}))},reinit(e){this.opt&&"object"==typeof this.opt&&(this.$options.opt=e),delete this.__gWidth,delete this.__gHeight,this.$nextTick(this.init)},reload(){this.playerOpt=null,this.initController(),this.triggerEvent("reload")},resetPlayer(){const e=this.$refs.player;e&&(e.__canplay=!1,e.pause(),e.preventOperating(2),e.$refs.video.currentTime=0,e.currentTime=0)},initLazyLoad(){this.canLoad=!this.opt.lazyLoad,this.opt.lazyLoad&&(this.$on("startLoadVideo",(()=>{this.canLoad=!0,this.$nextTick((()=>{this.initPlugins(),this.triggerEvent("playerReady")}))})),this.$on("hideVideo",(()=>{this.canLoad=!1})))},initLegacyPlugins(){const e=this.opt.plugins||[];this.__blockPlugin={},this.__legacyPlugins=[];const t=new Mt;t.setPlayer(this),t.init&&t.init(),this.__legacyPlugins.push(t);for(let t=0,i=e.length;t<i;t++){const i=e[t];i.prototype instanceof Nt||(i.setPlayer(this),i.init&&i.init(),this.__legacyPlugins.push(i))}},initPlugins(){this.$refs.innerPlugins&&this.$refs.innerPlugins.forEach((e=>e.initContext(this))),this.$refs.coverPlugins&&this.$refs.coverPlugins.forEach((e=>e.initContext(this))),this.$refs.controlPlugins&&this.$refs.controlPlugins.forEach((e=>e.initContext(this))),this.$refs.profilePlugins&&this.$refs.profilePlugins.forEach((e=>e.initContext(this)))},destroyPlugins(){this.opt.plugins=[],this.__legacyPlugins.forEach((e=>e.destroy&&e.destroy())),this.__legacyPlugins=[],this.__blockPlugin={}},initReportData(){let e=this.__reportData;e.mid=this.opt.mid,e.__biz=this.opt.__biz,e.idx=this.opt.idx,e.vid=this.opt.vid,e.commentid=this.opt.comment_id,e.scene_type=this.opt.scene_type,e.auto_play=this.opt.autoplay?1:0,e.fromid=this.opt.fromid,e.hit_bizuin=this.opt.hitBizuin,e.hit_vid=this.opt.hitVid,this.__monitorUid=this.triggerEvent("initMonitor",64728),this.__monitorUid2=this.triggerEvent("initMonitor",380812)},getReportTypeBySceneType(){return 0==this.opt.scene_type?1:1==this.opt.scene_type||2==this.opt.scene_type?2:4==this.opt.scene_type?3:7==this.opt.scene_type?4:0},onPageScroll(){const e=this.$refs.player;this.__exposing&&Object.keys(ts.allCpsPlayersOfPage).filter((e=>ts.allCpsPlayersOfPage[e]&&ts.allCpsPlayersOfPage[e].__exposing)).reduce(((e,t)=>{const i=ts.allCpsPlayersOfPage[t].$el.getBoundingClientRect();let n=0;return i.top>=0?n=Math.max(Math.min(window.innerHeight-i.top,i.height),0):i.bottom>=0&&(n=Math.max(Math.min(i.bottom,window.innerHeight),0)),e[t]=n,n>=e.max&&(e.max=n,e.maxId=t),e}),{max:0,maxId:""}).maxId===this.id?!this.opt||!this.opt.autoplayWhenExpose||e&&e.isEnd()||this.__coverNextShowing||e&&e.isPlay()||(this.__canPlay?setTimeout((()=>{const e=this.getPlayer();e&&e.resumeOperating(),this.play(),this.triggerEvent("exposeAutoPlay")})):this.__shouldPlayAfterCanplay=!0):!this.opt||!this.opt.autoplayWhenExpose||e&&e.isEnd()||this.__coverNextShowing||(this.__shouldPlayAfterCanplay=!1,setTimeout((()=>this.pause())))},onPageUnload(e){if(this.__isUnloaded)return;this.__isUnloaded=!0;let t=this.__reportData;if(0===t.videoerror?this.cacheData():this.clearCache(),e&&"leaveReport"===e.type){const e=[];for(let i in t)t.hasOwnProperty(i)&&e.push(i+"="+encodeURIComponent(t[i]));return{reportUrl:"/mp/videoreport?",method:"POST",reportData:e.join("&")}}G.videoreport({data:t,async:!1})},onVisibilityChange(){document.hidden&&this.cacheData()},onPageResize(){this.__preventResize||(this.$refs.player&&this.$refs.player.isWcSlPlayer?this.fullscreenStatus||setTimeout((()=>{const e=this.$el.parentNode,t=e&&e.getBoundingClientRect(),i=t&&t.width||0;0!==i&&this.setVideoSize({width:i})}),0):this.opt.height&&this.opt.width&&(this.__isShowTx&&this.__txPlayer?setTimeout((()=>{try{const e=this.$el.parentNode,t=e&&e.getBoundingClientRect(),i=this.opt.width/this.opt.height,n=t&&t.width||0,o=Math.floor(n/i);0!==n&&(e.style.height=o+"px",this.__gWidth=n,this.__gHeight=o,this.__txPlayer.resize({width:n,height:o}))}catch(e){}}),0):setTimeout((()=>{const e=this.$el.parentNode,t=e&&e.getBoundingClientRect(),i=t.width,n=t.height;0!==i&&(this.__gWidth=i,this.__gHeight=n,this.setVideoSize({width:i,height:n}))}),250)))},getCache(){const e=function(e,t,i,n,o){let a=is.get(n||o);if(!a)return null;try{if(a=JSON.parse(a)||{},!a.time||Date.now()-ts.cacheTime>1*a.time)return ls(n||o),a.videoInfo={status:ds(e,t,i,n||o)},a}catch(e){return ls(n||o),null}return a=a.videoInfo?a:{videoInfo:{}},a.videoInfo.status=ds(e,t,i,n||o),a.videoInfo?a:null}(this.opt.__biz,this.opt.mid,this.opt.idx,this.opt.vid||this.opt.playUrl);if(e){const t=this.__vInfo;t.dynamicData=e.videoInfo.dynamicData||null,t.coverUrl=e.videoInfo.coverUrl||"",t.status=e.videoInfo.status||null,this.__cacheStartTs=e.time||null}},cacheData(){const e=this.$refs.player,t=this.__vInfo;e&&(t.status||(t.status={}),"function"==typeof e.isEnd&&(t.status.isEnd=e.isEnd()),"function"==typeof e.getCurTime&&(t.status.playTime=e.getCurTime()),"function"==typeof e.getPlaybackRate&&(t.status.playbackRate=e.getPlaybackRate()),!this.__initialData&&this.__coverUrl&&(t.coverUrl=this.__coverUrl),function(e,t,i,n,o,a){let r={dynamicData:o.dynamicData||null,coverUrl:o.coverUrl||""};const s=Date.now()+864e5;is.set(n,JSON.stringify({time:a||Date.now(),videoInfo:r}),s),o.status&&is.set(e+t+i+n,JSON.stringify(o.status),s)}(this.opt.__biz,this.opt.mid,this.opt.idx,this.opt.vid||this.opt.playUrl,this.__vInfo,this.__cacheStartTs))},clearCache(){ls(this.opt.vid||this.opt.playUrl)},getCoverUrl(){this.__coverUrl=this.opt.cover,this.__dataCount++,this.videoDataReady(),this.getFloatCoverBase64(this.__coverUrl)},getDynamicData(){if(window.cgiData.is_teenager||window.is_teenager)return this.__dynamicErrMsg="\u672a\u6210\u5e74\u4eba\u6a21\u5f0f\u4e0b\u6682\u4e0d\u652f\u6301\u89c2\u770b\u89c6\u9891",this.__reportData.duration_ms=0,this.__vInfo.dynamicData=null,this.__dataCount=this.__targetDataCount,void setTimeout((()=>this.videoDataReady()),0);if(this.isDramaVideo){if(!Ae.isWechat)return this.__dynamicErrMsg="\u8bf7\u5728\u5fae\u4fe1\u5ba2\u6237\u7aef\u6253\u5f00",this.__reportData.videoerror=ns.NOT_IN_WECHAT,this.__reportData.duration_ms=0,this.__vInfo.dynamicData=null,this.__dataCount=this.__targetDataCount,void setTimeout((()=>this.videoDataReady()),0);if(this.extInfo&&this.extInfo.dramaInfo&&this.extInfo.dramaInfo.ban)return this.__dynamicErrMsg="\u89c6\u9891\u6682\u65f6\u65e0\u6cd5\u64ad\u653e",this.__reportData.videoerror=ns.VIDEO_BAN,this.__reportData.duration_ms=0,this.__vInfo.dynamicData=null,this.__dataCount=this.__targetDataCount,setTimeout((()=>this.videoDataReady()),0),void we.error("cps player controller: failed to play drama video: dramaBan")}this.__vInfo.dynamicData={data:{formatid:10003,time:this.opt.duration,title:"",width:this.opt.videoWidth,height:this.opt.videoHeight,file_size:0,totalUrl:this.opt.playUrl,rate:0,ori_url_info:[{format_id:10003,url:this.opt.playUrl}]}},this.__dataCount++,this.videoDataReady()},videoDataReady(){this.__dataCount===this.__targetDataCount&&(this.__isShowTx?this.removeLoading():this.__vInfo.dynamicData?this.createPlayer():(this.removeLoading(),we.error("cps player controller: failed to create player because no dynamic data")))},createPlayer(){let e=this.__vInfo,t=this.__reportData,i=e.dynamicData.data;this.__reportData.duration_ms=parseInt(1e3*i.time),this.initPlayRangeInfo({durationMs:this.__reportData.duration_ms}),t.vtitle=this.opt.vtitle||i.title||"";const n=this.getReportTypeBySceneType();let o,a;if(i.ori_url_info){const e=function(e){const t={};return e.url_info.forEach((i=>{let n;const o=i.format_id;switch(1*o){case 20003:case 10002:case 10003:case 10004:t[ts.definitionMap[o]]||(n=ts.definitionMap[o]);break;case 10102:case 10103:case 10104:e.h265&&(n=ts.definitionMap[o])}n&&(t[n]=i)})),t}({h265:this.__supportH256,url_info:i.ori_url_info});o=i.ori_url_info.find((e=>10004===e.format_id)),a=Object.keys(e).filter((e=>1*e!==ts.definitionMap[20003]||this.opt.useWcSlPlayer&&Ae.isWechat&&Ae.isAndroid&&Ae.gtVersion("7.0.16",1))).sort(((e,t)=>t-e)).map((t=>{const i=e[t];return{name:i.video_quality_wording||ts.resolutionNameMap[i.format_id],formatId:i.format_id,height:i.height,width:i.width,src:i.url}}))}const r=ge.getQuery("play_time");let s=0;this.__initialData?s=this.__initialData.initialTime||0:""!==r?s=1*r||0:e.status&&!e.status.isEnd&&(s=e.status.playTime||0),we.info("cps player controller: begin to create player",JSON.stringify(i)),this.playerOpt={...this.opt,__biz:this.opt.__biz,mid:this.opt.mid,idx:this.opt.idx,bizUserName:this.opt.bizUserName,bizNickName:this.opt.bizNickName,profileTabType:this.opt.profileTabType,videoTitle:t.vtitle,videoReportType:n,coverFit:this.opt.coverFit,cover:this.__coverUrl,width:this.__gWidth,height:this.__gHeight,videoWidth:i.width,videoHeight:i.height,duration:i.time,autoplay:this.opt.autoplay,flowNotice:this.opt.flowNotice,flow:i.flow,loop:this.opt.loop,muted:this.opt.muted,src:i.totalUrl,formatId:i.formatid,headImgUrl:this.opt.headImgUrl,useWcSlPlayer:this.opt.useWcSlPlayer,useImmersiveMode:this.opt.useImmersiveMode,useFeFullscreen:this.opt.useFeFullscreen,oriStatus:this.opt.oriStatus,initialTime:s,resolutionInfo:a,retryResolution:o,playbackRateInfo:ts.playbackRateInfo,playbackRateBtnInfoDefaultId:2,showFullscreenMenu:this.opt.showFullscreenMenu,videoMd5:this.opt.videoMd5,extinfo:{hit_bizuin:this.opt.hitBizuin,hit_vid:this.opt.hitVid,vid:this.opt.vid,preview:this.opt.preview,pageplayer:this},fileSize:i.file_size,checkPlayAuthority:this.checkPlayAuthority,readNum:this.__immersiveData&&this.__immersiveData.view_num&&this.__immersiveData.view_num.pv||0,praiseNum:this.__immersiveData&&this.__immersiveData.like_num&&this.__immersiveData.like_num.pv||0,likeNum:this.__immersiveData&&this.__immersiveData.seen_num&&this.__immersiveData.seen_num.pv||0,isPraised:this.__immersiveData&&this.__immersiveData.like_num&&this.__immersiveData.like_num.liked||0,isLiked:this.__immersiveData&&this.__immersiveData.seen_num&&this.__immersiveData.seen_num.seen||0,disableBorderRadius:!0,alwaysShowControl:this.opt.alwaysShowControl,hideDuration:this.opt.hideDuration||!1},this.$nextTick((()=>{this.initPlugins(),this.triggerEvent("playerReady")}))},removeLoading(){this.afterRemoveLoading()},afterRemoveLoading(){if(!this.__isShowTx&&!this.__vInfo.dynamicData)if(this.opt.isMpVideo){let e=1;(-1!==[72,73].indexOf(this.__reportData.videoerror)||window.cgiData.is_teenager||window.is_teenager||-1!==Object.values(ns).indexOf(this.__reportData.videoerror))&&(e=2),this.showError(this.__dynamicErrMsg,e)}else this.showError(this.__dynamicErrMsg||"",window.cgiData.is_teenager||window.is_teenager?2:void 0);const e=this.getVideoData();this.triggerEvent("videoReady",{formatId:e&&e.formatid})},showError(e,t){e=e||ts.defaultErrorWording,this.setError({type:t||1,code:this.__reportData.videoerror,msg:e,refresh:e===ts.defaultErrorWording?1:0})},hideError(){this.setError({type:0,code:0,msg:"",refresh:0})},checkPlayAuthority(e){this.opt.checkNoPaid?_e({type:"GET",dataType:"json",timeout:3e4,url:"/mp/videoplayer?action=check_video_paid_status&__biz=".concat(this.opt.__biz,"&mid=").concat(this.opt.mid,"&idx=").concat(this.opt.idx),success:t=>{1==!t.can_play?window.weui.confirm("\u6b64\u89c6\u9891\u6765\u81ea\u4e8e\u4ed8\u8d39\u5185\u5bb9\uff0c\u5728\u539f\u6587\u4ed8\u8d39\u540e\u624d\u53ef\u64ad\u653e",{buttons:[{type:"default",label:"Cancel"},{label:"\u524d\u5f80\u539f\u6587",onClick:()=>{this.opt.openArticle()}}]}):"function"==typeof e.allowPlay&&e.allowPlay()}}):"function"==typeof e.allowPlay&&e.allowPlay()},onExpose(){this.__exposing=!0,this.triggerEvent("playerExpose")},onExposeLeave(){this.$refs.player,this.__exposing=!1,this.triggerEvent("playerExposeLeave")},onLoaded(){setTimeout((()=>{this.removeLoading()}),0),we.info("cps player controller: succ created player")},onTimeupdate(e){if(this.__reportedTimeupdate||(this.__reportedTimeupdate=!0,this.$refs.player.getLog().loadwait),!this.__reportedPv){this.__reportedPv=!0;const e=this.__monitorUid,t=this.__monitorUid2;this.triggerEvent("clearMonitor",e),this.triggerEvent("clearMonitor",t),this.opt.isMpVideo?(this.triggerEvent("setMonitor",t,{12:1,13:1}),this.triggerEvent("sendMonitor",t)):(this.triggerEvent("setMonitor",e,{0:1,1:1}),this.triggerEvent("sendMonitor",e))}this.__reportData.last_ms=parseInt(1e3*e.currentTime),this.__reportData.video_play_time=parseInt(1e3*e.currentTime),this.triggerEvent("timeupdate",e)},onBeginPlay(){const e=this.__reportData;e.client_time_when_play=Math.round(Date.now()/1e3),e.click_play_button=1,!this.$refs.player.autoplay&&this.recoverPlaybackRate(),this.triggerEvent("beginPlay")},onDurationchange(){this.$refs.player.autoplay&&this.recoverPlaybackRate()},onTouchVideo(){this.triggerEvent("touchVideo")},onOpenSourcePage(){this.triggerEvent("openSourcePage")},onFastForward(){this.triggerEvent("fastForward")},onReplay(){this.triggerEvent("replay")},onStatusChange(e){const t=this.__reportData;"loading"!==e.status||"seeked"!==e.subStatus&&"seeking"!==e.subStatus||this.initPlayRangeInfo({durationMs:t.duration_ms}),"pause"===e.status?this.computePlayTotalTimeForKyk(e):"play"===e.status||e.status,"loading"===e.status&&"waiting"===e.subStatus&&("play"===e.preStatus||"loading"===e.preStatus&&"seeked"===e.preSubStatus||"loading"===e.preStatus&&e.preSubStatus),this.triggerEvent("statusChange",e)},onAfterReplay(){this.triggerEvent("afterReplay")},onHandDragComplete(e){this.triggerEvent("handDragComplete",e)},onBarDragComplete(e){this.triggerEvent("barDragComplete",e)},onEnd(){const e=this.__vInfo,t=this.__reportData;e.dynamicData.data,this.getReportTypeBySceneType(),t.hasended=1,this.triggerEvent("beforeEnd",this.playerOpt.loop),this.playerOpt.loop?(this.__reportedPv=!1,this.__reportData.replay=1):this.triggerEvent("resetVideo"),this.triggerEvent("end",this.playerOpt.loop),this.initPlayRangeInfo({durationMs:t.duration_ms})},onError(e){const t=this.__reportData;this.__monitorUid;const i=this.__monitorUid2;switch(!e||!e.errorcode||e.errorcode>5||e.errorcode<=0?t.videoerror=46:t.videoerror=e.errorcode+40,this.__reportedPv||(this.__reportedPv=!0,this.triggerEvent("setMonitor",i,{12:1})),this.triggerEvent("setMonitor",i,{14:1}),1*e.errorcode){case 1:this.triggerEvent("setMonitor",i,{15:1});break;case 2:this.triggerEvent("setMonitor",i,{16:1});break;case 3:this.triggerEvent("setMonitor",i,{17:1});break;case 4:this.triggerEvent("setMonitor",i,{18:1});break;case 5:this.triggerEvent("setMonitor",i,{19:1});break;case 6:this.triggerEvent("setMonitor",i,{39:1});break;default:this.triggerEvent("setMonitor",i,{20:1})}this.triggerEvent("sendMonitor",i),t.v_err_code=e.errorcode,this.showError(),this.initPlayRangeInfo({durationMs:t.duration_ms})},onErrorRetry(){const e=this.__monitorUid2;this.triggerEvent("setMonitor",e,{64:1}),this.triggerEvent("sendMonitor",e)},onFirstBufferingTime(e){var t;if(this.__hasFirstPlayed||this.$refs.player.autoplay,this.opt.isMpVideo){this.$store.state.cgiData;const e=this.getVideoData();null==(t=e.ori_url_info)||t.some((e=>1*e.format_id%1e3>100)),e.formatid,e.formatid}this.__hasFirstPlayed||(this.__hasFirstPlayed=!0),this.triggerEvent("firstBufferingTime",e)},onPlayingBufferingTime(e){this.triggerEvent("playingBufferingTime",e)},onUserplay(e){this.triggerEvent("userplay",e),1===e.tapType||e.tapType},onUserpause(e){this.triggerEvent("userpause",{curTime:this.getCurrentTime(),...e});const t=this.__reportData;t.pause_num=(t.pause_num||0)+1,1===e.tapType||e.tapType},onWaiting(e){this.triggerEvent("waiting",e)},onPlay(e){this.__pauseTimestamp&&delete this.__pauseTimestamp,this.triggerEvent("play",e)},onPause(e){this.triggerEvent("pause",e),this.__pauseTimestamp=Date.now()},onMidPlayClick(){},onAfterCheckVideoFit(e){let t={97:1};!0===e.needToFit&&(t[98]=1,t[100]=1,e.os.ios&&(t[103]=1),e.os.android&&(t[106]=1),!0===e.supportObjectFit&&(t[101]=1,e.os.ios&&(t[104]=1),e.os.android&&(t[107]=1)));const i=this.__monitorUid;this.triggerEvent("setMonitor",i,t),this.triggerEvent("sendMonitor",i)},onBindError(e){this.triggerEvent("bindError",e)},onRateChange(e){this.triggerEvent("rateChange",e),"changed"===e.action&&this.cacheData()},onResolutionChange(e){"changed"===e.action&&(ts.playerStatus.formatId=e.infoAfter&&e.infoAfter.formatId||null,is.set("playerStatus",JSON.stringify({playerStatus:ts.playerStatus}),Date.now()+6048e5),Ie.invoke("handleMPPageAction",{action:"setLocalData",key:"formatId",data:String(ts.playerStatus.formatId),url:location.href},(()=>{})),we.info("player controller: set player status cache "+JSON.stringify(ts.playerStatus))),this.triggerEvent("resolutionChange",e)},onBrightnessChange(e){this.triggerEvent("brightnessChange",e)},onVolumeChange(e){this.triggerEvent("volumeChange",e)},onLoadedMetaData(){if(this.getAndUpdateVideoInfo(),this.__canPlay=!0,this.__shouldPlayAfterCanplay){const e=this.getPlayer();e&&e.resumeOperating(),this.play(),this.triggerEvent("exposeAutoPlay"),this.__shouldPlayAfterCanplay=!1}this.triggerEvent("loadedmetadata")},onProfileJump(e){this.triggerEvent("profileJump",e)},onProcessStateChange(e){this.triggerEvent("processStateChange",e)},onCanplay(e){this.getAndUpdateVideoInfo(),this.triggerEvent("canplay",e)},onAfterFirstLoaded(e){this.triggerEvent("afterfirstloaded",e)},onShowControlBar(e){this.triggerEvent("showControlBar",e)},onHideControlBar(e){this.triggerEvent("hideControlBar",e)},triggerEvent(e,...t){const i=[].concat(this.$refs.innerPlugins||[],this.$refs.coverPlugins||[],this.$refs.controlPlugins||[],this.$refs.profilePlugins||[],this.__legacyPlugins),n=this.__blockPlugin[e]||this.__blockPlugin.all;let o,a,r=0;if(n&&"function"==typeof n.recv&&(o=n.recv(e,...t),"[object Object]"===Object.prototype.toString.call(o)?(r|=o.code,a=o.data):r|=o,1&r))return a;for(let n=0,s=i.length;n<s;++n){try{o=i[n].recv(e,...t)}catch(e){}if("[object Object]"===Object.prototype.toString.call(o)?(r|=o.code,a=o.data):r|=o,2&r)break}if(!(this._blockInnerHandler||4&r)){const i=this[e+"InnerHandler"];i&&(o=i.apply(this,[e,...t]),"[object Object]"===Object.prototype.toString.call(o)&&(a=o.data))}return 8&r||this.emitEvent(e.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase())),...t),a},emitEvent(e,...t){e&&this.$emit(e,...t)},getAndUpdateVideoInfo(){const e=this.getPlayer();if(e&&e.$refs.video){const t=Math.round(e.$refs.video.duration),i=e.$refs.video.videoWidth,n=e.$refs.video.videoHeight;t!==this.playerOpt.duration&&0!==t&&this.$set(this.playerOpt,"duration",t),i!==this.playerOpt.videoWidth&&0!==i&&this.$set(this.playerOpt,"videoWidth",i),n!==this.playerOpt.videoHeight&&0!==n&&this.$set(this.playerOpt,"videoHeight",n)}},setBlockPlugin(e,t){this.__blockPlugin[e]=t},getPlayer(){return this.$refs.player},supportWcSlPlayer(){return!!this.$refs.player&&this.$refs.player.supportWcSlPlayer()},getAdvanceCodecSupportBeforeCallback(e){this.checkH265Support(e)},checkH265Support(e){if(this.opt.useWcSlPlayer&&fe.os.iphone)this.__supportH256=!0,"function"==typeof e&&e();else if(this.opt.useWcSlPlayer&&fe.os.android)Ae.gtVersion("8.0.14",1)?Ie.invoke("handleVideoAction",{action:"supportCodec",codecId:172,height:1920,width:1080,frameRate:60},(t=>{const i=-1!==t.err_msg.indexOf(":ok");this.__supportH256=i,"function"==typeof e&&e()})):(this.__supportH256=!1,"function"==typeof e&&e());else{let t=!1;t=Ae.isIOS&&fe.os.getNumVersion()>=11?!fe.isLockdownMode():Ae.isAndroid?this.checkH5VideoCanPlayType('video/mp4; codecs="hvc1"'):this.checkH5VideoCanPlayType('video/mp4; codecs="hevc"'),this.__supportH256=t,"function"==typeof e&&e()}},checkH5VideoCanPlayType(e){const t=document.createElement("video");if("function"==typeof t.canPlayType){const i=t.canPlayType(e);if("maybe"==i.toLowerCase()||"probably"==i.toLowerCase())return!0}return!1},initPlayRangeInfo(e){function t(e,t){const i=[{start:0,end:e,hasReport:!1}];for(;;){let n=i[i.length-1];if(n.end>=t)break;i.push({start:n.end,end:n.end+e,hasReport:!1})}return i}if(e.durationMs<=0)return;const i=this.opt.totalRange;1e3*i>=e.durationMs?this.__playRangeInfo=t(1e3,e.durationMs):this.__playRangeInfo=t(Math.ceil(e.durationMs/i),e.durationMs)},getTraceId:()=>0,getOrderid:()=>0,getOriStatus(){return this.opt.oriStatus},getFromid(){return this.opt.fromid},resetVideoInnerHandler(){this.$refs.player.isWcSlPlayer?this.$refs.player.showCover():this.$refs.player.resetVideo()},coverNextShowStatusChangeInnerHandler(e){this.__coverNextShowing=e},pause(){this.$refs.player&&this.$refs.player.pause4outer()},play(){this.$refs.player&&this.$refs.player.play4outer()},getRealPlayTime(){let e=0,t=this.$refs.player;return t&&(e=Math.round(1e3*t.getPlayTotalTime())),e},getCurrentTime(){let e=0,t=this.$refs.player;return t&&(e=t.getCurTime()),e},getCurrentTimeMs(){return Math.round(1e3*this.getCurrentTime())},getVideoData(){return this.__vInfo&&this.__vInfo.dynamicData&&this.__vInfo.dynamicData.data?this.__vInfo.dynamicData.data:null},getReportData(){return this.__reportData},extendMpReportData(e){Object.assign(this.__reportData,e)},getMpReportData(){return this.__reportData},recoverPlaybackRate(){const e=this.__vInfo.status,t=e&&e.playbackRate||1;this.$refs.player.setPlaybackRate(t),this.$refs.player.isWcSlPlayer&&setTimeout((()=>{this.$refs.player&&this.$refs.player.setPlaybackRate(t)}),250)},setLoop(e){this.playerOpt&&(this.playerOpt.loop=e)},setMuted(e){this.playerOpt&&(this.playerOpt.muted=e)},setAutoplay(e){this.$refs.player&&(this.$refs.player.autoplay=e)},setVideoSize(e){this.playerOpt&&("number"==typeof e.width&&(this.playerOpt.width=e.width),"number"==typeof e.height&&(this.playerOpt.height=e.height))},getVideoDuration(){return this.playerOpt&&this.playerOpt.duration||0},getFloatCoverBase64(e){const t=new Image;t.crossOrigin="anonymous",t.onload=()=>{t.onload=null,t.onerror=null;try{const e=t.naturalWidth||t.width,i=t.naturalHeight||t.height,n=document.createElement("canvas"),o=n.getContext("2d"),a=640,r=1280;n.width=a,n.height=r,n.style.width=a+"px",n.style.height=r+"px";const s=function(e="cover",t,i,n,o){let a=1,r=0,s=0,c=n,d=o,l=0,u=0,p=t,m=i,_=t/i,h=n/o;return"cover"===e?h>=_?(a=i/o,r=(n-t/a)/2,c=t/a,d=o):(a=t/n,s=(o-i/a)/2,c=n,d=i/a):"contain"===e&&(h>=_?(a=t/n,u=(i-o*a)/2,m=o*a):(a=i/o,l=(t-n*a)/2,p=n*a)),[r,s,c,d,l,u,p,m]}("contain",a,r,e,i);o.drawImage(t,...s),o.beginPath(),o.moveTo(a/2-50,r/2-60),o.lineTo(a/2-50,r/2+60),o.lineTo(a/2+50,r/2),o.fillStyle="rgba(255,255,255,0.8)",o.strokeStyle="rgba(255,255,255,0.8)",o.shadowBlur=100,o.shadowColor="rgba(0,0,0,0.5)",o.fill(),o.closePath(),o.stroke(),this.__floatCoverBase64=n.toDataURL("image/jpeg",0),this.__floatCoverBase64=this.__floatCoverBase64.replace("data:image/jpeg;base64,","")}catch(e){this.__floatCoverBase64=""}},t.onerror=()=>{this.__floatCoverBase64="",t.onload=null,t.onerror=null},t.src=e},showToast(e){this.__toastTimeoutId&&clearTimeout(this.__toastTimeoutId),this.toastTips=e,this.__toastTimeoutId=setTimeout((()=>{this.__toastTimeoutId=null,this.toastTips=""}),1e3)},computePlayTotalTimeForKyk(e){},getCurrentDefinition(){return ts.playerStatus.formatId?ts.definitionMap[ts.playerStatus.formatId]:this.__vInfo.dynamicData?ts.definitionMap[this.__vInfo.dynamicData.data.formatid]:0},onTouchMoveHorizontally(e){this.triggerEvent("touchMoveHorizontally",e)},onPlayerTouchEnd(e){this.triggerEvent("playerTouchEnd",e)},onSeekingStatusChange(e){this.triggerEvent("seekingStatusChange",e)},onSwipeBack(e){this.triggerEvent("swipeBack",e)},onMuteChange(e){Object.keys(ts.allCpsPlayersOfPage).forEach((t=>{const i=ts.allCpsPlayersOfPage[t],n=i&&i.$refs.player,o=n&&n.$refs.video;o&&(o.muted=e,n.$set(n.opt,"muted",e))})),this.triggerEvent("muteChange",e)},onClickPlaySwitch(e){this.triggerEvent("clickPlaySwitch",e)}}});cs(),function(){let e=is.get("playerStatus");if(e){try{e=JSON.parse(e)||{}}catch(e){return void ls("playerStatus")}e.playerStatus&&(ts.playerStatus=e.playerStatus,we.info("cps player controller: get player status cache "+JSON.stringify(ts.playerStatus)))}}();const us=ss;Ot._getFormatTime,Ot._getAllPlayersOfPage;const ps=_t(us,(function(){var e=this,t=e._self._c;return e._self._setupProxy,t("intersect",{attrs:{threshold:[.5]},on:{enter:e.onExpose,leave:e.onExposeLeave}},[t("div",{staticClass:"mp-video-player",style:{height:e.fullscreenStatus?"100vh":"100%"}},[0===e.errType&&e.playerOpt?t("mp-video-player",{ref:"player",class:101===e.fullscreenStatus?"opr_fade_out":"",attrs:{opt:e.playerOpt,"can-load":e.canLoad,"wrap-style":e.wrapStyle,"video-style":e.videoStyle,"poster-style":e.posterStyle},on:{loaded:e.onLoaded,timeupdate:e.onTimeupdate,"begin-play":e.onBeginPlay,durationchange:e.onDurationchange,"status-change":e.onStatusChange,"after-replay":e.onAfterReplay,"hand-drag-complete":e.onHandDragComplete,"bar-drag-complete":e.onBarDragComplete,end:e.onEnd,error:e.onError,"error-retry":e.onErrorRetry,"first-buffering-time":e.onFirstBufferingTime,"playing-buffering-time":e.onPlayingBufferingTime,userplay:e.onUserplay,userpause:e.onUserpause,waiting:e.onWaiting,play:e.onPlay,pause:e.onPause,"mid-play-click":e.onMidPlayClick,"after-check-video-fit":e.onAfterCheckVideoFit,"bind-error":e.onBindError,"rate-change":e.onRateChange,"resolution-change":e.onResolutionChange,"brightness-change":e.onBrightnessChange,"volume-change":e.onVolumeChange,"profile-jump":e.onProfileJump,"process-state-change":e.onProcessStateChange,canplay:e.onCanplay,"show-control-bar":e.onShowControlBar,"hide-control-bar":e.onHideControlBar,replay:e.onReplay,"touch-video":e.onTouchVideo,"open-source-page":e.onOpenSourcePage,"fast-forward":e.onFastForward,loadedmetadata:e.onLoadedMetaData,"touch-move-horizontally":e.onTouchMoveHorizontally,"player-touch-end":e.onPlayerTouchEnd,"seeking-status-change":e.onSeekingStatusChange,"swipe-back":e.onSwipeBack,afterfirstloaded:e.onAfterFirstLoaded,"mute-change":e.onMuteChange,"click-play-switch":e.onClickPlaySwitch},scopedSlots:e._u([{key:"poster",fn:function({cover:i,coverStatus:n,videoSnapshot:o,withoutCover:a}){return[t("div",{directives:[{name:"show",rawName:"v-show",value:(i&&0!==n||o)&&!a,expression:"(cover && coverStatus !== 0 || videoSnapshot) && !withoutCover"}],staticClass:"poster_cover_wrp",style:e.posterStyle},[t("div",{staticClass:"poster_cover",style:"background-image: url(".concat(o||i.imgChange640(),"); background-size: contain; background-color: transparent;")}),t("div",{staticClass:"poster_cover_blur_wrp"},[t("div",{staticClass:"poster_cover_blur"}),t("div",{staticClass:"poster_cover",style:"background-image: url(".concat(o||i.imgChange640(),"); background-size: cover;")})])])]}},{key:"video_background",fn:function({cover:e}){return[t("div",{staticClass:"poster_cover_blur_wrp"},[t("div",{staticClass:"poster_cover_blur"}),t("div",{staticClass:"poster_cover",style:"background-image: url(".concat(e.imgChange640(),"); background-size: cover;")})])]}},{key:"inner",fn:function(){return e._l(e.innerPlugins,(function(e,i){return t(e,{key:i,ref:"innerPlugins",refInFor:!0,tag:"component"})}))},proxy:!0},{key:"cover",fn:function(){return e._l(e.coverPlugins,(function(e,i){return t(e,{key:i,ref:"coverPlugins",refInFor:!0,tag:"component"})}))},proxy:!0},{key:"control",fn:function(){return e._l(e.controlPlugins,(function(e,i){return t(e,{key:i,ref:"controlPlugins",refInFor:!0,tag:"component"})}))},proxy:!0},{key:"profile",fn:function(){return e._l(e.profilePlugins,(function(e,i){return t(e,{key:i,ref:"profilePlugins",refInFor:!0,tag:"component"})}))},proxy:!0}],null,!1,4255383019)}):1===e.errType?t("div",{staticClass:"wrp_pop_tips wx_video_error_box js_error_box"},[t("div",{staticClass:"wx_video_error_msg js_error_area"},[t("p",{attrs:{role:"heading"}},[e._v(e._s(e.errMsg))]),t("i",{staticClass:"wx_video_error_code"},[e._v("Error code: "+e._s(e.errCode))]),0!==e.refreshBtnStatus?t("a",{staticClass:"wx_video_error_msg_btn js_video_errormsg_btn",attrs:{role:"button",href:"javascript:void(0);"},on:{click:e.reload}},[t("img",{staticClass:"wx_video_error_refresh",attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAqCAMAAADhynmdAAAAQlBMVEUAAACcnJycnJycnJyoqKicnJycnJycnJycnJycnJyfn5+cnJydnZ2enp6kpKSdnZ2cnJyenp6cnJycnJycnJybm5t8KrXMAAAAFXRSTlMAyeb3CNp3tJRvHIEtJhBgqztWRJ+p5TqGAAABCklEQVQ4y5WTi27DIAxFAUMhgTzX8/+/urB2pdKI0x0pSoRuruyLbf7gF3PBaDE6X44LyY0D1SJQsfd9PpMM/CJx60v8SmV1HMSi1lKyA1n0jnwWSO08l04uJbxpBmTrpDtbGB6fmxC6Tc4BHv9aZDJdJsHW9w43Jez9x8T5M4l31WZsJn2bsYY+nUum2lQkGIVANPZ4FCLWOJImSTgjZE2SkU9crmu57mj9JBc93Qzj9R1d3HSG5bN5MRsnUzcGKK8Ns02z+Da7rYQE4bUE2PG1C6kVnkCyf0pwX8/jwbyxCLhcHpKTFkvkwK3pRmXtRrVFoTGYLvN+t0EUl0qrRaF1pFBz0anp/ptvNB4SY1XDAVMAAAAASUVORK5CYII=",alt:""}}),e._v(" Refresh ")]):e._e()]),t("img",{staticClass:"wx_video_error_loading js_video_errormsg_loading",staticStyle:{display:"none"},attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADkAAAA5CAMAAAC7xnO3AAAAY1BMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+aRQ2gAAAAIXRSTlMAOx20pMJbzBQNTDGTh2ohLCZmeUF2hEmXCFdxUquef4yHE17nAAACnklEQVRIx9WW2xqiIBSFRc1AUATJU1a+/1MOm0NYKvnNXM260ZLftRcbqCQinOLI0yiY/iXKuUZPjx5Fk+6RhF1yHiVF0wC6IZfr9fqIkpRqdNyQ9AoiUU8g+YZ8Xn96YmNKvkhkLMskKgEo/yJzaxkXeZsGsjeWKEIFU/FBZgA+D5yEwGtTgR0J18lYUvdcLZ1YkUjLf+a0saYYSG/J3Hury+WSkTCjCETtF6Mvd8QGJMZSWIfsAlKhWGRl5zQ1ZNBDgy/zzvvFavWUK7SyTRs+rsiUZS/4LHIHyo8VgBx7vDkKx2WhPS7dD1Q6cNlu2dTa0gMys4bz/vJR6ph8ADgcVcSVUkfnhzJTc6gRj8fbCOHk30UI2KC+V4gKjskJQqC5frFHli0kafogFIfFkAXVCSqdAFVR8pmtVCWiXCtaarbWpGtQAYx7sjf2GCbfjFRQpH7lTLucveSMBE7+Z6VqViT2/PVs0d7hPk9TUcTaUuVaT8k/f/v6SXOgyG7InZaSvM8vj/309LrbvpSAORDH2/kWGyHhm/u5AYUc8qdFBRRrsV749bRv6I5x1OY50GZUUxQz9aGplAXZcOQ1DL3vwsTyvHQ2YWgjZV2rDTmxYRjUuoBvcQDr7QRLBiiNzJ4BawG3FLtTmEMGBigTRyC2oIKht1vbwLWrKmXKBZal+yApDGhm4q5JCVdNdrZeQBe8B44WnE2NGmxrR1bCvMugHdkhSwMWI9wjIGeosnPlJmNrst6PQrpeFkBSyAmkdD016DYqAVC6HHcNtnCPgazcuytAd5IqB/qYtq4bkP7vnEaL3W4KH9/HhKBAKl8XFUlMIWYIek4hZgh6UtjHBLVA4pPkCKRf9jOQ5Kwp1UvPDyb3qkPJaRG8Ln7f8Q8Bki/Kj5IYnQAAAABJRU5ErkJggg=="}})]):2===e.errType?t("div",{staticClass:"wrp_pop_tips wx_video_msg_primary js_error_box",style:{height:e.fullscreenStatus?"100%":"calc(100% - 12px)"}},[t("div",{staticClass:"wx_video_msg_primary_inner"},[t("p",{staticClass:"wx_video_msg_primary_text"},[e._v(e._s(e.errMsg))])])]):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:e.toastTips,expression:"toastTips"}]},[t("div",{staticClass:"weui-mask_transparent"}),t("div",{staticClass:"weui-toast",style:{top:0===e.orientationStatus?"45%":"50%",position:"absolute"}},[t("i",{staticClass:"weui-icon-success-no-circle weui-icon_toast"}),t("p",{staticClass:"weui-toast__content"},[e._v(e._s(e.toastTips))])])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showScreenshotMask,expression:"showScreenshotMask"}],staticClass:"fullscreen-screenshot__layer",staticStyle:{"background-color":"#000"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.screenshot,expression:"screenshot"}],staticClass:"fullscreen-screenshot__layer",style:"z-index: -1; background-image: url("+e.screenshot+")"})],1)])}),[],!1,null,"6862d4cb",null,null).exports;window.Vue.use(L);const ms=()=>{const e=new L.Store({modules:{[q.name]:q},state:W(),mutations:z()});return e.commit(Y.SET_CGI_DATA,X(window.cgiData)),e.commit(Y.SET_URL_PARAMS,Q()),[Z].forEach((t=>e.registerModule([q.name,t.name],t))),e},_s=()=>{let e=0;const t=fe.os.version;let i="unknown";return fe.os.ios&&(e=1,i="IOS ".concat(t)),fe.os.android&&(e=2,i="Android ".concat(t)),{os:e,os_ver:i}},hs=e=>{let t="";try{e||(x.report312728(2),x.report309906(82),window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&window.WX_BJ_REPORT.BadJs.report("cpsProductData",JSON.stringify(e),{mid:"mmbizwap:cps_product_data",view:"wap_business"}));const i=JSON.parse(e).kvs;for(const e of i)"js_version"===e.key&&(t=e.value)}catch(e){x.report312728(3)}return t||(x.report312728(1),t="v112"),t},vs=(e,t)=>{const i=document.createElement(t);Array.from(e.attributes).forEach((e=>i.setAttribute(e.name,e.value)));const{parentNode:n}=e;return n&&n.replaceChild(i,e),i},As={LIST:"list",CARD:"card",MP_VIDEO_PLAY:"video-play"},Es={tagName:"mp-common-cpsad",oldTagName:"mpcps",cpsVersion:"",iframeMap:{}},Rs=document.getElementById("js_article"),Ps=document.getElementById("content_bottom_interaction"),Ds=!!window.is_login
;if(Rs&&Rs.addEventListener("click",(()=>{for(const e in Es.iframeMap)Ts(Ct.CLICK_OUTSIDE_ACTION,"",Es.iframeMap[e])})),Oe.bindDebounceScrollEvent((()=>{const e=Oe.getScrollTop();let t=Oe.getInnerHeight();if(Ds&&Ps){const e=Math.floor(null==Ps?void 0:Ps.getBoundingClientRect().height)||0;t=Oe.getInnerHeight()-e}for(const i in Es.iframeMap){const n=Es.iframeMap[i].shadowRoot.querySelector("iframe");if(!n)continue;const o=c.getOffset(n).offsetTop;Ts(Ct.PAGE_SCROLL_ACTION,{bodyScrollTop:e,adOffsetTop:o,screenHeight:t,boundingClientRect:n.getBoundingClientRect()},n)}})),window.localStorage&&window.localStorage.getItem){const e=4500,t="loadSec-"+window.biz+"-"+window.mid+"-"+window.idx;let i=window.localStorage.getItem(t);i&&window.write_sceen_time-parseInt(i,10)>e&&(he.report(20801,{Bizuin:window.biz,MsgId:1*window.mid,ItemIdx:1*window.idx,Url:window.msg_source_url||"",Title:window.msg_title||""}),window.localStorage.removeItem(t))}const Os=function(){let e=window.location.href.split("?")[1];if(e){let t=e.split("&");for(let e=0;e<t.length;e++){const[i,n]=t[e].split("=");if("imageIndex"===i)return parseInt(n,10)}return""}return""}();""!==Os&&"scrollRestoration"in history&&(history.scrollRestoration="manual"),"loading"!==document.readyState?Ms():window.addEventListener("DOMContentLoaded",(function(){Ms()})),je.on(window,"load",(function(){if(""==networkType&&window.isInWeixinApp()){let e={"network_type:fail":"fail","network_type:edge":"2g/3g","network_type:wwan":"2g/3g","network_type:wifi":"wifi"};JSAPI.invoke("getNetworkType",{},(function(t){networkType=e[t.err_msg],"network_type:edge"!=t.err_msg&&"network_type:wwan"!=t.err_msg||(t.detailtype&&"4g"==t.detailtype||t.subtype&&"4g"==t.subtype)&&(networkType="4g"),Ls()}))}else Ls()}),!1),window.page_endtime=+new Date;const qs="https://mp.weixin.qq.com/s/bpYquVzmjFzY_IrmCsxniQ",Ws=Ae.isWp||Ae.isIOS||Ae.isAndroid,zs=_t({components:{[y.name]:y},data:()=>({isNavShow:!0}),mounted(){document.addEventListener("visibilitychange",(()=>{var e;!this.isNavShow&&!document.hidden&&(null==(e=this.secControl)?void 0:e.ad_violation_middle_page)>0&&(this.isNavShow=!0,i.hide(),i.show({alpha:.6}))}))},computed:{...m({secControl:e=>e.extRes.sec_control})},watch:{secControl:{handler(e){(null==e?void 0:e.ad_violation_middle_page)>0&&this.$nextTick((()=>{Ws?this.show():(document.body.parentNode.style.overflow="hidden",window.weui.dialog({content:"\u5f53\u524d\u5185\u5bb9\u53ef\u80fd\u5b58\u5728\u672a\u7ecf\u5ba1\u6838\u7684\u7b2c\u4e09\u65b9\u5546\u4e1a\u8425\u9500\u4fe1\u606f\uff0c\u8bf7\u786e\u8ba4\u662f\u5426\u7ee7\u7eed\u8bbf\u95ee\u3002",buttons:[{label:"\u7ee7\u7eed\u8bbf\u95ee",type:"default",onClick:()=>{this.report(1),document.body.parentNode.style.overflow="auto"}},{label:"Cancel",type:"primary",onClick:()=>{this.closePage()}}],isAndroid:Ae.isAndroid}))}))},immediate:!0}},methods:{show(){this.$refs.bottomModal.show()},hide(){this.report(1),this.$refs.bottomModal.hide(),this.isNavShow&&i.hide()},closePage(){this.report(2),Ae.isWechat?Ie.invoke("closeWindow",(e=>{-1===e.err_msg.indexOf("ok")&&(window.close(),window.open("about:blank","_top").close())})):(window.close(),window.open("about:blank","_top").close())},onTermClick(e){e.preventDefault(),"A"===e.target.tagName&&(Ae.isWechat?Ie.invoke("openUrlWithExtraWebview",{url:qs,openType:1},(e=>{-1===e.err_msg.indexOf("ok")?location.href=qs:this.isNavShow=!1})):location.href=qs)},report(e){he.report(30608,{action:e,scene:1,url:location.href,mid:1*window.mid||0,idx:1*window.idx||0,bizuin:window.biz&&1*window.atob(window.biz)||0})}}},(function(){var e=this,t=e._self._c;return t("mp-bottom-modal",{ref:"bottomModal",attrs:{"auto-height":"","has-header":!1,"hide-when-mask-click":!1},scopedSlots:e._u([{key:"footer",fn:function(){return[t("div",{staticClass:"weui-half-screen-dialog__btn-area"},[t("a",{staticClass:"weui-btn weui-btn_default",attrs:{href:"javascript:","wah-hotarea":"click"},on:{click:e.hide}},[e._v("\u7ee7\u7eed\u8bbf\u95ee")]),t("a",{staticClass:"weui-btn weui-btn_primary",attrs:{href:"javascript:","wah-hotarea":"click"},on:{click:e.closePage}},[e._v("Cancel")])]),t("div",{staticClass:"weui-half-screen-dialog__attachment-area",on:{click:e.onTermClick}},[t("a",{staticClass:"weui-link",attrs:{href:"javacript:;"}},[e._v("\u5fae\u4fe1\u516c\u4f17\u5e73\u53f0\u5e7f\u544a\u89c4\u8303\u6307\u5f15")])])]},proxy:!0}])},[t("p",{staticClass:"ad_control-tips"},[e._v("\u5f53\u524d\u5185\u5bb9\u53ef\u80fd\u5b58\u5728\u672a\u7ecf\u5ba1\u6838\u7684\u7b2c\u4e09\u65b9\u5546\u4e1a\u8425\u9500\u4fe1\u606f\uff0c\u8bf7\u786e\u8ba4\u662f\u5426\u7ee7\u7eed\u8bbf\u95ee\u3002")])])}),[],!1,null,"d1299f68",null,null).exports;let Fs,Hs="";const Ks={
bizuin:"1034280761,1431142721,1559284381,1593467941,1643294701,2276745981,2390281185,2390287897,2390403755,2390428640,2390553873,2390609440,2390856064,2390957431,2391111309,2391164500,2391199416,2391247334,2391375304,2391496567,2391844653,2392014380,2392031944,2392040960,2392068072,2392082080,2392154590,2392213146,2392718635,2392856453,2392897401,2393278785,2393306340,2393688720,2393702823,2393896961,2394032960,2394131000,2394134267,2394291820,2394889101,2394892111,2395111601,2395124745,2395159421,2395164392,2395212841,2395462792,2396123612,2396268083,2396283012,2396356952,2396388401,2396456681,2396639940,2396676120,2396822627,2396829423,2396942001,2397165860,2397251641,2397274880,2397329668,2397341623,2397343481,2397372552,2397491920,2397526740,2397536160,2398089220,2398191832,2398264303,2398285141,2398299140,2398330323,2398339600,2398552775,2398694681,2398838963,2399230362,2399354541,2399585921,2399587742,2399590682,2399627020,2399777220,2399984042,2786833600,3001648390,3002542227,3003037429,3003116648,3007158068,3009185121,3010540601,3012272362,3012301452,3013338725,3015508367,3016277592,3016752164,3070024236,3070196162,3070365200,3070494630,3071396719,3072501450,3073249188,3073254928,3073674128,3074001907,3074502309,3075409771,3076802329,3078365435,3079351773,3079981327,3080543482,3080796821,3081448106,3082446799,3083052239,3083282110,3086716937,3089340324,3089461010,3089474939,3090044084,3090136400,3090588715,3092634507,3092876047,3093258134,3093286307,3093485357,3093635076,3095301145,3095693511,3096421576,3096422132,3098395705,3098741504,3099311533,3200455571,3208460593,3239033926,3239724132,3240168687,3242247792,3251670823,3255036745,3256388201,3258413158,3265775647,3269032708,3269176942,3271158630,3271436617,3271443368,3274292289,3274590163,3286126582,3288868675,3292158393,3294233713,3294751423,3518062346,3521090753,3525800276,3537480573,3553935523,3558818400,3559619275,3560409763,3562893285,3563439857,3564573611,3570795545,3572825035,3588055360,3588502049,3591941043,3597585164,3598836122,3862092748,3863661346,3870597774,3872851260,3890467628,3890744878,3890769148,3890964029,3891717967,3892555190,3893127105,3898707519,3898741980,3898909364,3899903346,3907314219,3909716943,3910251662,3914274522,3925310299,3926248961,3928602515,3944000110,3948180278,699115,4393255,962494081,1212133741,1240574601,1275451641,1375135921,1444391061,1628309301,1791575621,1952208001,2095329301,2390095621,2390185980,2390204122,2390216734,2390302080,2390471121,2390642694,2390731784,2390870601,2391039495,2391150242,2391246920,2391567054,2391771880,2391844323,2392049500,2392135301,2392458732,2392727558,2393013234,2393041860,2393238864,2393256753,2393295571,2393468372,2393698380,2394260794,2394349740,2394595381,2395056175,2395148767,2395155740,2395347320,2395771800,2396006101,2396892002,2397224253,2397755480,2397783483,2398112841,2398177561,2398342156,2398377244,2398539040,2398632600,2398847601,2398982052,2399112600,2399178100,2399179801,2399272251,2399311780,2399488342,2399593722,2399828201,2399865442,2399899102,2399903782,2399991836,2560685080,2940696320,3000521703,3001008593,3003310516,3004961517,3008522239,3009401635,3009790978,3010170184,3012249769,3012326877,3012558019,3012729257,3014000347,3014173967,3014836707,3016397069,3017159050,3019157166,3071373728,3071712628,3071782930,3072030302,3072107639,3073731004,3075193232,3075325238,3076292503,3076392209,3077316430,3077322513,3077423712,3077572710,3078245224,3078852525,3079423800,3079476127,3079958145,3080043700,3080464616,3080580668,3080976631,3081200029,3081915473,3082416430,3082493215,3082539519,3084276724,3084405827,3084418087,3084639036,3084917558,3085157003,3086263435,3087030803,3087036607,3088308533,3089222529,3090060408,3090321411,3093197108,3093232206,3094160674,3094358118,3095437037,3096111432,3097079126,3097189780,3097498138,3099000336,3099068632,3200251369,3203815843,3204674323,3207173165,3209033201,3212096040,3214041112,3215656497,3217555405,3220101605,3222004532,3235111899,3236088154,3236259213,3237753356,3239235368,3243884694,3244599030,3255030554,3255918706,3259480365,3262231420,3263009825,3268117899,3269523047,3270637292,3271638842,3272710521,3280796249,3283053842,3284089266,3288495941,3294290460,3517426927,3522532562,3529012635,3531389974,3535085610,3548031541,3556007534,3557594538,3559352214,3563068977,3564760843,3567698492,3568878114,3569830872,3572699929,3578502418,3584493905,3589897120,3590745740,3592823583,3861638209,3864086737,3864811637,3865848828,3866756856,3867740377,3869559570,3871854925,3875092925,3879808364,3881127782,3885902745,3886703252,3889147671,3890135424,3893597889,3894866322,3902206426,3902301003,3902720236,3907694243,3911517477,3912441527,3918223942,3922186273,3922691457,3926241941,3931289542,699115,4393255,962494081,1212133741,1240574601,1275451641,1375135921,1444391061,1628309301,1791575621,1952208001,2095329301,2390095621,2390185980,2390204122,2390216734,2390302080,2390471121,2390642694,2390731784,2390870601,2391039495,2391150242,2391246920,2391567054,2391771880,2391844323,2392049500,2392135301,2392458732,2392727558,2393013234,2393041860,2393238864,2393256753,2393295571,2393468372,2393698380,2394260794,2394349740,2394595381,2395056175,2395148767,2395155740,2395347320,2395771800,2396006101,2396892002,2397224253,2397755480,2397783483,2398112841,2398177561,2398342156,2398377244,2398539040,2398632600,2398847601,2398982052,2399112600,2399178100,2399179801,2399272251,2399311780,2399488342,2399593722,2399828201,2399865442,2399899102,2399903782,2399991836,2560685080,2940696320,3000521703,3001008593,3003310516,3004961517,3008522239,3009401635,3009790978,3010170184,3012249769,3012326877,3012558019,3012729257,3014000347,3014173967,3014836707,3016397069,3017159050,3019157166,3071373728,3071712628,3071782930,3072030302,3072107639,3073731004,3075193232,3075325238,3076292503,3076392209,3077316430,3077322513,3077423712,3077572710,3078245224,3078852525,3079423800,3079476127,3079958145,3080043700,3080464616,3080580668,3080976631,3081200029,3081915473,3082416430,3082493215,3082539519,3084276724,3084405827,3084418087,3084639036,3084917558,3085157003,3086263435,3087030803,3087036607,3088308533,3089222529,3090060408,3090321411,3093197108,3093232206,3094160674,3094358118,3095437037,3096111432,3097079126,3097189780,3097498138,3099000336,3099068632,3200251369,3203815843,3204674323,3207173165,3209033201,3212096040,3214041112,3215656497,3217555405,3220101605,3222004532,3235111899,3236088154,3236259213,3237753356,3239235368,3243884694,3244599030,3255030554,3255918706,3259480365,3262231420,3263009825,3268117899,3269523047,3270637292,3271638842,3272710521,3280796249,3283053842,3284089266,3288495941,3294290460,3517426927,3522532562,3529012635,3531389974,3535085610,3548031541,3556007534,3557594538,3559352214,3563068977,3564760843,3567698492,3568878114,3569830872,3572699929,3578502418,3584493905,3589897120,3590745740,3592823583,3861638209,3864086737,3864811637,3865848828,3866756856,3867740377,3869559570,3871854925,3875092925,3879808364,3881127782,3885902745,3886703252,3889147671,3890135424,3893597889,3894866322,3902206426,3902301003,3902720236,3907694243,3911517477,3912441527,3918223942,3922186273,3922691457,3926241941,3931289542,1034280761,1431142721,1559284381,1593467941,1643294701,2276745981,2390281185,2390287897,2390403755,2390428640,2390553873,2390609440,2390856064,2390957431,2391111309,2391164500,2391199416,2391247334,2391375304,2391496567,2391844653,2392014380,2392031944,2392040960,2392068072,2392082080,2392154590,2392213146,2392718635,2392856453,2392897401,2393278785,2393306340,2393688720,2393702823,2393896961,2394032960,2394131000,2394134267,2394291820,2394889101,2394892111,2395111601,2395124745,2395159421,2395164392,2395212841,2395462792,2396123612,2396268083,2396283012,2396356952,2396388401,2396456681,2396639940,2396676120,2396822627,2396829423,2396942001,2397165860,2397251641,2397274880,2397329668,2397341623,2397343481,2397372552,2397491920,2397526740,2397536160,2398089220,2398191832,2398264303,2398285141,2398299140,2398330323,2398339600,2398552775,2398694681,2398838963,2399230362,2399354541,2399585921,2399587742,2399590682,2399627020,2399777220,2399984042,2786833600,3001648390,3002542227,3003037429,3003116648,3007158068,3009185121,3010540601,3012272362,3012301452,3013338725,3015508367,3016277592,3016752164,3070024236,3070196162,3070365200,3070494630,3071396719,3072501450,3073249188,3073254928,3073674128,3074001907,3074502309,3075409771,3076802329,3078365435,3079351773,3079981327,3080543482,3080796821,3081448106,3082446799,3083052239,3083282110,3086716937,3089340324,3089461010,3089474939,3090044084,3090136400,3090588715,3092634507,3092876047,3093258134,3093286307,3093485357,3093635076,3095301145,3095693511,3096421576,3096422132,3098395705,3098741504,3099311533,3200455571,3208460593,3239033926,3239724132,3240168687,3242247792,3251670823,3255036745,3256388201,3258413158,3265775647,3269032708,3269176942,3271158630,3271436617,3271443368,3274292289,3274590163,3286126582,3288868675,3292158393,3294233713,3294751423,3518062346,3521090753,3525800276,3537480573,3553935523,3558818400,3559619275,3560409763,3562893285,3563439857,3564573611,3570795545,3572825035,3588055360,3588502049,3591941043,3597585164,3598836122,3862092748,3863661346,3870597774,3872851260,3890467628,3890744878,3890769148,3890964029,3891717967,3892555190,3893127105,3898707519,3898741980,3898909364,3899903346,3907314219,3909716943,3910251662,3914274522,3925310299,3926248961,3928602515,3944000110,3948180278,699115,1034280761,1240574601,1431142721,1444391061,1593467941,1791575621,1952208001,2095329301,2276745981,2390216734,2390281185,2390553873,2390609440,2390870601,2391039495,2391246920,2391496567,2391844653,2392031944,2392040960,2392049500,2392068072,2392082080,2393013234,2393041860,2393238864,2393256753,2393295571,2393468372,2394032960,2394134267,2394260794,2394595381,2395111601,2395212841,2396456681,2396892002,2397343481,2397755480,2398177561,2398342156,2399178100,2399179801,2399272251,2399488342,2399587742,2399590682,2399627020,2399828201,2399899102,2399984042,3000521703,3001008593,3002542227,3003116648,3003310516,3004961517,3007158068,3009401635,3014000347,3014836707,3015508367,3070024236,3070365200,3071396719,3071712628,3072501450,3073731004,3075409771,3076292503,3076802329,3077322513,3080796821,3081915473,3082416430,3082539519,3084276724,3084639036,3086263435,3089474939,3090321411,3093258134,3093635076,3096421576,3097079126,3098741504,3099311533,3200455571,3208460593,3237753356,3239033926,3239235368,3239724132,3240168687,3242247792,3251670823,3256388201,3258413158,3262231420,3265775647,3271158630,3271436617,3271443368,3271638842,3274590163,3283053842,3284089266,3294290460,3517426927,3522532562,3529012635,3531389974,3535085610,3537480573,3557594538,3559619275,3560409763,3564573611,3568878114,3569830872,3570795545,3572699929,3578502418,3588055360,3589897120,3591941043,3597585164,3861638209,3863661346,3864086737,3867740377,3871854925,3881127782,3885902745,3890744878,3893597889,3898741980,3902301003,3907694243,3911517477,3918223942,3922186273,1212133741,1275451641,1375135921,2390204122,2390302080,2390428640,2390642694,2390856064,2390957431,2391150242,2391199416,2391247334,2391375304,2391567054,2392014380,2392135301,2392727558,2393688720,2393698380,2393702823,2393896961,2394131000,2394349740,2394889101,2394892111,2395056175,2395124745,2395155740,2396006101,2396123612,2396639940,2396829423,2396942001,2397165860,2397224253,2397274880,2397491920,2398089220,2398112841,2398299140,2398330323,2398377244,2398694681,2398847601,2398982052,2399230362,2399354541,2399865442,2399903782,2940696320,3001648390,3003037429,3009185121,3009790978,3010170184,3010540601,3012272362,3012326877,3012558019,3012729257,3014173967,3016277592,3017159050,3019157166,3070494630,3071373728,3073249188,3073254928,3074001907,3075193232,3078365435,3078852525,3080543482,3080580668,3080976631,3081200029,3081448106,3082493215,3083282110,3085157003,3087036607,3089340324,3089461010,3090044084,3090136400,3092876047,3093232206,3093286307,3094358118,3095301145,3095437037,3095693511,3096111432,3096422132,3097498138,3099068632,3200251369,3207173165,3220101605,3235111899,3243884694,3255030554,3255036745,3255918706,3259480365,3263009825,3268117899,3269176942,3270637292,3272710521,3280796249,3288495941,3288868675,3292158393,3294233713,3518062346,3548031541,3553935523,3558818400,3559352214,3562893285,3563068977,3564760843,3584493905,3588502049,3592823583,3598836122,3869559570,3872851260,3889147671,3890467628,3891717967,3899903346,3902206426,3910251662,3922691457,3925310299,3931289542,4393255,962494081,1559284381,1628309301,1643294701,2390095621,2390185980,2390287897,2390403755,2390471121,2390731784,2391111309,2391164500,2391771880,2391844323,2392154590,2392213146,2392458732,2392718635,2392856453,2392897401,2393278785,2393306340,2394291820,2395148767,2395159421,2395164392,2395347320,2395462792,2395771800,2396268083,2396283012,2396356952,2396388401,2396676120,2396822627,2397251641,2397329668,2397341623,2397372552,2397526740,2397536160,2397783483,2398191832,2398264303,2398285141,2398339600,2398539040,2398552775,2398632600,2398838963,2399112600,2399311780,2399585921,2399593722,2399777220,2399991836,2560685080,2786833600,3008522239,3012249769,3012301452,3013338725,3016397069,3016752164,3070196162,3071782930,3072030302,3072107639,3073674128,3074502309,3075325238,3076392209,3077316430,3077423712,3077572710,3078245224,3079351773,3079423800,3079476127,3079958145,3079981327,3080043700,3080464616,3082446799,3083052239,3084405827,3084418087,3084917558,3086716937,3087030803,3088308533,3089222529,3090060408,3090588715,3092634507,3093197108,3093485357,3094160674,3097189780,3098395705,3099000336,3203815843,3204674323,3209033201,3212096040,3214041112,3215656497,3217555405,3222004532,3236088154,3236259213,3244599030,3269032708,3269523047,3274292289,3286126582,3294751423,3521090753,3525800276,3556007534,3563439857,3567698492,3572825035,3590745740,3862092748,3864811637,3865848828,3866756856,3870597774,3875092925,3879808364,3886703252,3890135424,3890769148,3890964029,3892555190,3893127105,3894866322,3898707519,3898909364,3902720236,3907314219,3909716943,3912441527,3914274522,3926241941,3926248961,3928602515,3944000110,3948180278,699115,4393255,962494081,1212133741,1240574601,1275451641,1375135921,1444391061,1628309301,1791575621,1952208001,2095329301,2390095621,2390185980,2390204122,2390216734,2390302080,2390471121,2390642694,2390731784,2390870601,2391039495,2391150242,2391246920,2391567054,2391771880,2391844323,2392049500,2392135301,2392458732,2392727558,2393013234,2393041860,2393238864,2393256753,2393295571,2393468372,2393698380,2394260794,2394349740,2394595381,2395056175,2395148767,2395155740,2395347320,2395771800,2396006101,2396892002,2397224253,2397755480,2397783483,2398112841,2398177561,2398342156,2398377244,2398539040,2398632600,2398847601,2398982052,2399112600,2399178100,2399179801,2399272251,2399311780,2399488342,2399593722,2399828201,2399865442,2399899102,2399903782,2399991836,2560685080,2940696320,3000521703,3001008593,3003310516,3004961517,3008522239,3009401635,3009790978,3010170184,3012249769,3012326877,3012558019,3012729257,3014000347,3014173967,3014836707,3016397069,3017159050,3019157166,3071373728,3071712628,3071782930,3072030302,3072107639,3073731004,3075193232,3075325238,3076292503,3076392209,3077316430,3077322513,3077423712,3077572710,3078245224,3078852525,3079423800,3079476127,3079958145,3080043700,3080464616,3080580668,3080976631,3081200029,3081915473,3082416430,3082493215,3082539519,3084276724,3084405827,3084418087,3084639036,3084917558,3085157003,3086263435,3087030803,3087036607,3088308533,3089222529,3090060408,3090321411,3093197108,3093232206,3094160674,3094358118,3095437037,3096111432,3097079126,3097189780,3097498138,3099000336,3099068632,3200251369,3203815843,3204674323,3207173165,3209033201,3212096040,3214041112,3215656497,3217555405,3220101605,3222004532,3235111899,3236088154,3236259213,3237753356,3239235368,3243884694,3244599030,3255030554,3255918706,3259480365,3262231420,3263009825,3268117899,3269523047,3270637292,3271638842,3272710521,3280796249,3283053842,3284089266,3288495941,3294290460,3517426927,3522532562,3529012635,3531389974,3535085610,3548031541,3556007534,3557594538,3559352214,3563068977,3564760843,3567698492,3568878114,3569830872,3572699929,3578502418,3584493905,3589897120,3590745740,3592823583,3861638209,3864086737,3864811637,3865848828,3866756856,3867740377,3869559570,3871854925,3875092925,3879808364,3881127782,3885902745,3886703252,3889147671,3890135424,3893597889,3894866322,3902206426,3902301003,3902720236,3907694243,3911517477,3912441527,3918223942,3922186273,3922691457,3926241941,3931289542,1034280761,1431142721,1559284381,1593467941,1643294701,2276745981,2390281185,2390287897,2390403755,2390428640,2390553873,2390609440,2390856064,2390957431,2391111309,2391164500,2391199416,2391247334,2391375304,2391496567,2391844653,2392014380,2392031944,2392040960,2392068072,2392082080,2392154590,2392213146,2392718635,2392856453,2392897401,2393278785,2393306340,2393688720,2393702823,2393896961,2394032960,2394131000,2394134267,2394291820,2394889101,2394892111,2395111601,2395124745,2395159421,2395164392,2395212841,2395462792,2396123612,2396268083,2396283012,2396356952,2396388401,2396456681,2396639940,2396676120,2396822627,2396829423,2396942001,2397165860,2397251641,2397274880,2397329668,2397341623,2397343481,2397372552,2397491920,2397526740,2397536160,2398089220,2398191832,2398264303,2398285141,2398299140,2398330323,2398339600,2398552775,2398694681,2398838963,2399230362,2399354541,2399585921,2399587742,2399590682,2399627020,2399777220,2399984042,2786833600,3001648390,3002542227,3003037429,3003116648,3007158068,3009185121,3010540601,3012272362,3012301452,3013338725,3015508367,3016277592,3016752164,3070024236,3070196162,3070365200,3070494630,3071396719,3072501450,3073249188,3073254928,3073674128,3074001907,3074502309,3075409771,3076802329,3078365435,3079351773,3079981327,3080543482,3080796821,3081448106,3082446799,3083052239,3083282110,3086716937,3089340324,3089461010,3089474939,3090044084,3090136400,3090588715,3092634507,3092876047,3093258134,3093286307,3093485357,3093635076,3095301145,3095693511,3096421576,3096422132,3098395705,3098741504,3099311533,3200455571,3208460593,3239033926,3239724132,3240168687,3242247792,3251670823,3255036745,3256388201,3258413158,3265775647,3269032708,3269176942,3271158630,3271436617,3271443368,3274292289,3274590163,3286126582,3288868675,3292158393,3294233713,3294751423,3518062346,3521090753,3525800276,3537480573,3553935523,3558818400,3559619275,3560409763,3562893285,3563439857,3564573611,3570795545,3572825035,3588055360,3588502049,3591941043,3597585164,3598836122,3862092748,3863661346,3870597774,3872851260,3890467628,3890744878,3890769148,3890964029,3891717967,3892555190,3893127105,3898707519,3898741980,3898909364,3899903346,3907314219,3909716943,3910251662,3914274522,3925310299,3926248961,3928602515,3944000110,3948180278,1034280761,1431142721,1559284381,1593467941,1643294701,2276745981,2390281185,2390287897,2390403755,2390428640,2390553873,2390609440,2390856064,2390957431,2391111309,2391164500,2391199416,2391247334,2391375304,2391496567,2391844653,2392014380,2392031944,2392040960,2392068072,2392082080,2392154590,2392213146,2392718635,2392856453,2392897401,2393278785,2393306340,2393688720,2393702823,2393896961,2394032960,2394131000,2394134267,2394291820,2394889101,2394892111,2395111601,2395124745,2395159421,2395164392,2395212841,2395462792,2396123612,2396268083,2396283012,2396356952,2396388401,2396456681,2396639940,2396676120,2396822627,2396829423,2396942001,2397165860,2397251641,2397274880,2397329668,2397341623,2397343481,2397372552,2397491920,2397526740,2397536160,2398089220,2398191832,2398264303,2398285141,2398299140,2398330323,2398339600,2398552775,2398694681,2398838963,2399230362,2399354541,2399585921,2399587742,2399590682,2399627020,2399777220,2399984042,2786833600,3001648390,3002542227,3003037429,3003116648,3007158068,3009185121,3010540601,3012272362,3012301452,3013338725,3015508367,3016277592,3016752164,3070024236,3070196162,3070365200,3070494630,3071396719,3072501450,3073249188,3073254928,3073674128,3074001907,3074502309,3075409771,3076802329,3078365435,3079351773,3079981327,3080543482,3080796821,3081448106,3082446799,3083052239,3083282110,3086716937,3089340324,3089461010,3089474939,3090044084,3090136400,3090588715,3092634507,3092876047,3093258134,3093286307,3093485357,3093635076,3095301145,3095693511,3096421576,3096422132,3098395705,3098741504,3099311533,3200455571,3208460593,3239033926,3239724132,3240168687,3242247792,3251670823,3255036745,3256388201,3258413158,3265775647,3269032708,3269176942,3271158630,3271436617,3271443368,3274292289,3274590163,3286126582,3288868675,3292158393,3294233713,3294751423,3518062346,3521090753,3525800276,3537480573,3553935523,3558818400,3559619275,3560409763,3562893285,3563439857,3564573611,3570795545,3572825035,3588055360,3588502049,3591941043,3597585164,3598836122,3862092748,3863661346,3870597774,3872851260,3890467628,3890744878,3890769148,3890964029,3891717967,3892555190,3893127105,3898707519,3898741980,3898909364,3899903346,3907314219,3909716943,3910251662,3914274522,3925310299,3926248961,3928602515,3944000110,3948180278,699115,4393255,962494081,1212133741,1240574601,1275451641,1375135921,1444391061,1628309301,1791575621,1952208001,2095329301,2390095621,2390185980,2390204122,2390216734,2390302080,2390471121,2390642694,2390731784,2390870601,2391039495,2391150242,2391246920,2391567054,2391771880,2391844323,2392049500,2392135301,2392458732,2392727558,2393013234,2393041860,2393238864,2393256753,2393295571,2393468372,2393698380,2394260794,2394349740,2394595381,2395056175,2395148767,2395155740,2395347320,2395771800,2396006101,2396892002,2397224253,2397755480,2397783483,2398112841,2398177561,2398342156,2398377244,2398539040,2398632600,2398847601,2398982052,2399112600,2399178100,2399179801,2399272251,2399311780,2399488342,2399593722,2399828201,2399865442,2399899102,2399903782,2399991836,2560685080,2940696320,3000521703,3001008593,3003310516,3004961517,3008522239,3009401635,3009790978,3010170184,3012249769,3012326877,3012558019,3012729257,3014000347,3014173967,3014836707,3016397069,3017159050,3019157166,3071373728,3071712628,3071782930,3072030302,3072107639,3073731004,3075193232,3075325238,3076292503,3076392209,3077316430,3077322513,3077423712,3077572710,3078245224,3078852525,3079423800,3079476127,3079958145,3080043700,3080464616,3080580668,3080976631,3081200029,3081915473,3082416430,3082493215,3082539519,3084276724,3084405827,3084418087,3084639036,3084917558,3085157003,3086263435,3087030803,3087036607,3088308533,3089222529,3090060408,3090321411,3093197108,3093232206,3094160674,3094358118,3095437037,3096111432,3097079126,3097189780,3097498138,3099000336,3099068632,3200251369,3203815843,3204674323,3207173165,3209033201,3212096040,3214041112,3215656497,3217555405,3220101605,3222004532,3235111899,3236088154,3236259213,3237753356,3239235368,3243884694,3244599030,3255030554,3255918706,3259480365,3262231420,3263009825,3268117899,3269523047,3270637292,3271638842,3272710521,3280796249,3283053842,3284089266,3288495941,3294290460,3517426927,3522532562,3529012635,3531389974,3535085610,3548031541,3556007534,3557594538,3559352214,3563068977,3564760843,3567698492,3568878114,3569830872,3572699929,3578502418,3584493905,3589897120,3590745740,3592823583,3861638209,3864086737,3864811637,3865848828,3866756856,3867740377,3869559570,3871854925,3875092925,3879808364,3881127782,3885902745,3886703252,3889147671,3890135424,3893597889,3894866322,3902206426,3902301003,3902720236,3907694243,3911517477,3912441527,3918223942,3922186273,3922691457,3926241941,3931289542,699115,4393255,962494081,1212133741,1240574601,1275451641,1375135921,1444391061,1628309301,1791575621,1952208001,2095329301,2390095621,2390185980,2390204122,2390216734,2390302080,2390471121,2390642694,2390731784,2390870601,2391039495,2391150242,2391246920,2391567054,2391771880,2391844323,2392049500,2392135301,2392458732,2392727558,2393013234,2393041860,2393238864,2393256753,2393295571,2393468372,2393698380,2394260794,2394349740,2394595381,2395056175,2395148767,2395155740,2395347320,2395771800,2396006101,2396892002,2397224253,2397755480,2397783483,2398112841,2398177561,2398342156,2398377244,2398539040,2398632600,2398847601,2398982052,2399112600,2399178100,2399179801,2399272251,2399311780,2399488342,2399593722,2399828201,2399865442,2399899102,2399903782,2399991836,2560685080,2940696320,3000521703,3001008593,3003310516,3004961517,3008522239,3008522239,3009401635,3009790978,3010170184,3012249769,3012326877,3012558019,3012729257,3014000347,3014173967,3014836707,3016397069,3017159050,3019157166,3071373728,3071712628,3071782930,3072030302,3072107639,3073731004,3075193232,3075325238,3076292503,3076392209,3077316430,3077322513,3077423712,3077572710,3078245224,3078852525,3079423800,3079476127,3079958145,3080043700,3080464616,3080580668,3080976631,3081200029,3081915473,3082416430,3082493215,3082539519,3084276724,3084405827,3084418087,3084639036,3084917558,3085157003,3086263435,3087030803,3087036607,3088308533,3089222529,3090060408,3090321411,3093197108,3093232206,3094160674,3094358118,3095437037,3096111432,3097079126,3097189780,3097498138,3099000336,3099068632,3200251369,3203815843,3204674323,3207173165,3209033201,3212096040,3214041112,3215656497,3217555405,3220101605,3222004532,3235111899,3236088154,3236259213,3237753356,3239235368,3243884694,3244599030,3255030554,3255918706,3259480365,3262231420,3263009825,3268117899,3269523047,3270637292,3271638842,3272710521,3280796249,3283053842,3284089266,3288495941,3294290460,3517426927,3522532562,3529012635,3531389974,3535085610,3548031541,3556007534,3557594538,3559352214,3563068977,3564760843,3567698492,3568878114,3569830872,3572699929,3578502418,3584493905,3589897120,3590745740,3592823583,3861638209,3864086737,3864811637,3865848828,3866756856,3867740377,3869559570,3871854925,3875092925,3879808364,3881127782,3885902745,3886703252,3889147671,3890135424,3893597889,3894866322,3902206426,3902301003,3902720236,3907694243,3911517477,3912441527,3918223942,3922186273,3922691457,3926241941,3931289542,1034280761,1431142721,1559284381,1593467941,1643294701,2276745981,2390281185,2390287897,2390403755,2390428640,2390553873,2390609440,2390856064,2390957431,2391111309,2391164500,2391199416,2391247334,2391375304,2391496567,2391844653,2392014380,2392031944,2392040960,2392068072,2392082080,2392154590,2392213146,2392718635,2392856453,2392897401,2393278785,2393306340,2393688720,2393702823,2393896961,2394032960,2394131000,2394134267,2394291820,2394889101,2394892111,2395111601,2395124745,2395159421,2395164392,2395212841,2395462792,2396123612,2396268083,2396283012,2396356952,2396388401,2396456681,2396639940,2396676120,2396822627,2396829423,2396942001,2397165860,2397251641,2397274880,2397329668,2397341623,2397343481,2397372552,2397491920,2397526740,2397536160,2398089220,2398191832,2398264303,2398285141,2398299140,2398330323,2398339600,2398552775,2398694681,2398838963,2399230362,2399354541,2399585921,2399587742,2399590682,2399627020,2399777220,2399984042,2786833600,3001648390,3002542227,3003037429,3003116648,3007158068,3009185121,3010540601,3012272362,3012301452,3013338725,3015508367,3016277592,3016752164,3070024236,3070196162,3070365200,3070494630,3071396719,3072501450,3073249188,3073254928,3073674128,3074001907,3074502309,3075409771,3076802329,3078365435,3079351773,3079981327,3080543482,3080796821,3081448106,3082446799,3083052239,3083282110,3086716937,3089340324,3089461010,3089474939,3090044084,3090136400,3090588715,3092634507,3092876047,3093258134,3093286307,3093485357,3093635076,3095301145,3095693511,3096421576,3096422132,3098395705,3098741504,3099311533,3200455571,3208460593,3239033926,3239724132,3240168687,3242247792,3251670823,3255036745,3256388201,3258413158,3265775647,3269032708,3269176942,3271158630,3271436617,3271443368,3274292289,3274590163,3286126582,3288868675,3292158393,3294233713,3294751423,3518062346,3521090753,3525800276,3537480573,3553935523,3558818400,3559619275,3560409763,3562893285,3563439857,3564573611,3570795545,3572825035,3588055360,3588502049,3591941043,3597585164,3598836122,3862092748,3863661346,3870597774,3872851260,3890467628,3890744878,3890769148,3890964029,3891717967,3892555190,3893127105,3898707519,3898741980,3898909364,3899903346,3907314219,3909716943,3910251662,3914274522,3925310299,3926248961,3928602515,3944000110,3948180278,699115,1034280761,1240574601,1431142721,1444391061,1593467941,1791575621,1952208001,2095329301,2276745981,2390216734,2390281185,2390553873,2390609440,2390870601,2391039495,2391246920,2391496567,2391844653,2392031944,2392040960,2392049500,2392068072,2392082080,2393013234,2393041860,2393238864,2393256753,2393295571,2393468372,2394032960,2394134267,2394260794,2394595381,2395111601,2395212841,2396456681,2396892002,2397343481,2397755480,2398177561,2398342156,2399178100,2399179801,2399272251,2399488342,2399587742,2399590682,2399627020,2399828201,2399899102,2399984042,3000521703,3001008593,3002542227,3003116648,3003310516,3004961517,3007158068,3009401635,3014000347,3014836707,3015508367,3070024236,3070365200,3071396719,3071712628,3072501450,3073731004,3075409771,3076292503,3076802329,3077322513,3080796821,3081915473,3082416430,3082539519,3084276724,3084639036,3086263435,3089474939,3090321411,3093258134,3093635076,3096421576,3097079126,3098741504,3099311533,3200455571,3208460593,3237753356,3239033926,3239235368,3239724132,3240168687,3242247792,3251670823,3256388201,3258413158,3262231420,3265775647,3271158630,3271436617,3271443368,3271638842,3274590163,3283053842,3284089266,3294290460,3517426927,3522532562,3529012635,3531389974,3535085610,3537480573,3557594538,3559619275,3560409763,3564573611,3568878114,3569830872,3570795545,3572699929,3578502418,3588055360,3589897120,3591941043,3597585164,3861638209,3863661346,3864086737,3867740377,3871854925,3881127782,3885902745,3890744878,3893597889,3898741980,3902301003,3907694243,3911517477,3918223942,3922186273,1212133741,1275451641,1375135921,2390204122,2390302080,2390428640,2390642694,2390856064,2390957431,2391150242,2391199416,2391247334,2391375304,2391375304,2391567054,2392014380,2392135301,2392727558,2393688720,2393698380,2393702823,2393896961,2394131000,2394349740,2394889101,2394892111,2395056175,2395124745,2395155740,2396006101,2396123612,2396639940,2396829423,2396942001,2397165860,2397224253,2397274880,2397491920,2398089220,2398112841,2398299140,2398330323,2398377244,2398694681,2398847601,2398982052,2399230362,2399354541,2399865442,2399903782,2940696320,3001648390,3003037429,3009185121,3009790978,3010170184,3010540601,3012272362,3012326877,3012558019,3012729257,3014173967,3016277592,3017159050,3019157166,3070494630,3071373728,3073249188,3073254928,3074001907,3075193232,3078365435,3078852525,3080543482,3080580668,3080976631,3081200029,3081448106,3082493215,3083282110,3085157003,3087036607,3089340324,3089461010,3090044084,3090136400,3092876047,3093232206,3093286307,3094358118,3095301145,3095437037,3095693511,3096111432,3096422132,3097498138,3099068632,3200251369,3207173165,3220101605,3235111899,3243884694,3255030554,3255036745,3255918706,3259480365,3263009825,3268117899,3269176942,3270637292,3272710521,3280796249,3288495941,3288868675,3292158393,3294233713,3518062346,3548031541,3553935523,3558818400,3559352214,3562893285,3563068977,3564760843,3584493905,3588502049,3592823583,3598836122,3869559570,3872851260,3889147671,3890467628,3891717967,3899903346,3902206426,3910251662,3922691457,3925310299,3931289542,4393255,962494081,1559284381,1628309301,1643294701,2390095621,2390185980,2390287897,2390403755,2390471121,2390731784,2391111309,2391164500,2391771880,2391844323,2392154590,2392213146,2392458732,2392718635,2392856453,2392897401,2393278785,2393306340,2394291820,2395148767,2395159421,2395164392,2395347320,2395462792,2395771800,2396268083,2396283012,2396356952,2396388401,2396676120,2396822627,2397251641,2397329668,2397341623,2397372552,2397526740,2397536160,2397783483,2398191832,2398264303,2398285141,2398339600,2398539040,2398552775,2398632600,2398838963,2399112600,2399311780,2399585921,2399593722,2399777220,2399991836,2560685080,2786833600,3008522239,3012249769,3012301452,3013338725,3016397069,3016752164,3070196162,3071782930,3072030302,3072107639,3073674128,3074502309,3075325238,3076392209,3077316430,3077423712,3077572710,3078245224,3079351773,3079423800,3079476127,3079958145,3079981327,3080043700,3080464616,3082446799,3083052239,3084405827,3084418087,3084917558,3086716937,3087030803,3088308533,3089222529,3090060408,3090588715,3092634507,3093197108,3093485357,3094160674,3097189780,3098395705,3099000336,3203815843,3204674323,3209033201,3212096040,3214041112,3215656497,3217555405,3222004532,3236088154,3236259213,3244599030,3269032708,3269523047,3274292289,3286126582,3294751423,3521090753,3525800276,3556007534,3563439857,3567698492,3572825035,3590745740,3862092748,3864811637,3865848828,3866756856,3870597774,3875092925,3879808364,3886703252,3890135424,3890769148,3890964029,3892555190,3893127105,3894866322,3898707519,3898909364,3902720236,3907314219,3909716943,3912441527,3914274522,3926241941,3926248961,3928602515,3944000110,3948180278"
};setTimeout((()=>{const e=document.getElementById("js_content");e&&[{name:"mp-common-miniprogram",idkey:2,detectName:"miniprogramCoverDetect"},{name:"mp-common-profile",idkey:3,detectName:"profileCoverDetect"},{name:"mp-common-videosnap",idkey:4,detectName:"videoSnapCoverDetect"},{name:"mp-common-search",idkey:5,detectName:"searchCoverDetect"},{name:"mp-common-subscribe",idkey:6,detectName:"subscribeCoverDetect"},{name:"mp-common-sticker",idkey:7,detectName:"stickerCoverDetect"},{name:"mp-common-poi",idkey:8,detectName:"poiCoverDetect"},{name:"mp-common-redpacket",idkey:9,detectName:"redpacketCoverDetect"},{name:"mp-common-cpslink",idkey:10,detectName:"cpslinkCoverDetect"},{name:"mp-common-cpsad",idkey:11,detectName:"cpsadCoverDetect"},{name:"mp-common-claudio",idkey:12,detectName:"claudioCoverDetect"},{name:"mp-common-mpaudio",idkey:13,detectName:"mpaudioCoverDetect"},{name:"mp-common-vote",idkey:14,detectName:"voteCoverDetect"},{name:"mp-common-qqmusic",idkey:15,detectName:"qqmusicCoverDetect"},{name:"mp-common-clmusic",idkey:16,detectName:"clmusicCoverDetect"},{name:"mp-common-answer",idkey:17,detectName:"answerCoverDetect"}].forEach((t=>{const{name:i,idkey:n,detectName:o}=t;Array.from(document.getElementsByTagName(i)).forEach((t=>{const i=ee({startElem:t,endElem:e},{rules:["CSS[Opacity<1]","CSS[Height=0]"]});if(i.length>0){me.setSum(299174,n,1);const e="biz=".concat(window.biz,"&mid=").concat(window.mid,"&idx=").concat(window.idx);window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&window.WX_BJ_REPORT.BadJs.report("".concat(o),"".concat(e),{mid:"mmbizwap:appmsg_covertest",view:"wap_business",_info:{url:location.href,hitArr:i}})}}))}))}),1e4);const Vs=window.Vue;te(l);const{isIOS:Js,getInner:$s,isAndroid:Gs}=Ae,Ys=!!window.is_login,Xs=ke("disable_share");!Xs&&(Ie.on("menu:share:appmessage",(function(e){let t=ht(window.user_uin+"_"+Date.now());if(window.is_wash)At({img_url:$i,img_width:"640",img_height:"640",link:qi(Ui,type,t),desc:"You can read the content of the original author below.",title:"Article constitutes content laundering."},(function(){Vi(Ui,fakeid,type,t,e.shareScene)}));else{let i=1,n=Ji(Fi,"1");if(e&&"favorite"==e.scene&&(i=24,n=Ji(Fi,"4"),l.commit("mp-related-article/setSources",["favorite"]),Ae.isWindowsWechat&&"207"===ge.getQuery("subscene"))){const e=Ae.getWindows();if(e&&parseInt(e,16)>=parseInt("0x63090500",16)&&parseInt(e,16)<=parseInt("0x630905FF",16))return void Ie.invoke("handleMPPageAction",{action:"doFavorite"},(function(e){e.err_msg&&e.err_msg.indexOf("ok")>0?weui.toast("\u5df2\u6536\u85cf"):weui.toast("\u6536\u85cf\u5931\u8d25")}))}1==malicious_content_type&&(n="https://mmbiz.qlogo.cn/mmbiz_png/cVgP5bCElFiayFgbgEB9iaDt7hLicfz9RrXGM0LpaQ0TUic2gP7lbbqU3jCD8ibonicgIa3p99yjx1f1P26HChraeRUg/0?wx_fmt=png");let o={appid:zi,img_url:n,img_width:"640",img_height:"640",link:Ui,desc:window.clear_desc_flag?"":Ki,title:Wi};if(window.customShareInfo&&"object"==typeof window.customShareInfo&&Object.assign(o,window.customShareInfo),"string"==typeof o.forbid_msg){let t=o.forbid_msg.replace("#op#","favorite"===e.scene?"Favorite":"Share");return void(window.weui||window).alert(t)}o.link=qi(o.link,i,t),At(o,(function(){Vi(Ui,fakeid,i,t,0),l.commit("mp-related-article/setSources",[24===i?"favorite":"share"]),o.vid&&(Li=Object.assign(Li,{vid:o.vid,share_type:2}),u.reportKanData(Li))}))}})),Ie.on("menu:share:timeline",(function(e){let t=ht(window.user_uin+"_"+Date.now());if(window.is_wash)It({img_url:$i,img_width:"640",img_height:"640",link:qi(Ui,2,t),desc:"",title:"Article constitutes content laundering. You can read the content of the original author below."},(function(){Vi(Ui,fakeid,2,t,e.shareScene)}));else{let i=Fi;Ae.isIOS||(i=Ji(Fi,"2"));let n={img_url:i,img_width:"640",img_height:"640",link:Ui,desc:window.clear_desc_flag?"":Ki,title:Wi};if(window.customShareInfo&&"object"==typeof window.customShareInfo&&Object.assign(n,window.customShareInfo),"string"==typeof n.forbid_msg){let e=n.forbid_msg.replace("#op#","Share");return void(window.weui||window).alert(e)}n.link=qi(n.link,2,t),It(n,(function(){Vi(Ui,fakeid,2,t,e.shareScene),l.commit("mp-related-article/setSources",["share"]),n.vid&&(Li=Object.assign(Li,{vid:n.vid,share_type:1}),u.reportKanData(Li))}))}})),Ie.on("menu:share:weiboApp",(function(){let e=ht(window.user_uin+"_"+Date.now());Ie.invoke("shareWeiboApp",{img_url:Fi,link:qi(Ui,3,e),title:Wi},(function(){Vi(Ui,fakeid,3,e)}))})),Ie.on("menu:share:facebook",(function(){let e=ht(window.user_uin+"_"+Date.now());Vi(Ui,fakeid,7,e),Ie.invoke("shareFB",{img_url:Hi,img_width:"640",img_height:"640",link:qi(Ui,43,e),desc:Ki,title:Wi},(function(){}))})),Ie.on("menu:share:QZone",(function(){let e=Ji(Fi,"6"),t=ht(window.user_uin+"_"+Date.now());Vi(Ui,fakeid,5,t),Ie.invoke("shareQZone",{img_url:e,img_width:"640",img_height:"640",link:qi(Ui,22,t),desc:Ki,title:Wi},(function(){}))})),Ie.on("menu:share:qq",(function(){let e=Ji(Fi,"7"),t=ht(window.user_uin+"_"+Date.now());Vi(Ui,fakeid,5,t),Ie.invoke("shareQQ",{img_url:e,img_width:"640",img_height:"640",link:qi(Ui,23,t),desc:Ki,title:Wi},(function(){}))})),Ie.on("menu:share:email",(function(){let e=ht(window.user_uin+"_"+Date.now());Vi(Ui,fakeid,5,e),Ie.invoke("sendEmail",{content:qi(Ui,5,e),title:Wi},(function(){}))})),Ie.on("sys:record",(function(){Ie.invoke("recordHistory",{link:Ui,title:Wi,source:nickname,img_url:Fi},(function(){}))}))),dn(0),ne(l),(window.user_uin||Tt())&&Ht(l,Yi),window.is_login||!document.getElementById("js_profile_card")||Ae.isWxWork||Tt()&&document.getElementById("js_profile_card_modal")||new pa({render:e=>e(ua)}).$mount("#js_profile_card");try{fe.os.ios&&fe.os.getNumVersion()>=16&&(me.setSum(110809,78,1),fe.isLockdownMode()&&me.setSum(110809,79,1)),window.customElements?me.setSum(110809,70,1):me.setSum(110809,71,1),document.head.createShadowRoot||document.head.attachShadow?me.setSum(110809,72,1):me.setSum(110809,73,1)}catch(e){}window.canUseStar=Js&&$s()>="18003623"||Gs&&$s()>="28003630",setTimeout((()=>{window.canUseStar&&Ie.invoke("operateStar",{opType:"getSwitch"},(e=>{window.getSwitchRes=e,/:ok$/.test(e.err_msg)&&e.switch?localStorage.setItem("mp_star_switch",!0):localStorage.setItem("mp_star_switch",!1)}))})),function(){const e=112287,t=document.getElementById("js_content"),i=document.getElementsByTagName("tbody");if(t.innerHTML.length>1048576&&(me.setSum(e,44,1),t.innerText.length<5e3&&t.scrollHeight<1e4)){me.setSum(e,45,1);const t={Url:location.href,Reason:3,Title:window.msg_title,Createtime:window.create_time,SendTime:window.svr_time};if(he.report(31768,t),0===i.length){me.setSum(e,46,1);const t={Url:location.href,Reason:4,Title:window.msg_title,Createtime:window.create_time,SendTime:window.svr_time};he.report(31768,t)}}}(),function(){const e=112287,t=parseInt(window.atob(window.biz)),i=Ks.bizuin.includes(t),n=document.getElementById("js_content").innerHTML;let o="mpEditor";n&&(n.match(/powered-by="(\S*)"/)?o=n.match(/powered-by="(\S*)"/)[1]:n.match(/data-tools="(\S*)"/)?o=n.match(/data-tools="(\S*)"/)[1]:0==n.indexOf("\u897f\u74dc\u63d2\u4ef6")?o="\u897f\u74dc\u63d2\u4ef6":n.match(/[P|p]owered by "(\S*)"/)?o=n.match(/[P|p]owered by "(\S*)"/)[1]:n.includes("_mbEditor")&&(o="\u7f8e\u7f16\u52a9\u624b"),.5<Math.random()<.6&&window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&window.WX_BJ_REPORT.BadJs.report("type: ".concat(o," | url: ").concat(location.href),"type: ".concat(o),{mid:"mmbizwap:editor_report",view:"wap_business"}),i&&window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&window.WX_BJ_REPORT.BadJs.report("type: ".concat(o," | url: ").concat(location.href),"type: ".concat(o),{mid:"mmbizwap:editor_media_report",view:"wap_business"})),n&&(n.match(/powered-by="(\S*)"/)||n.match(/data-tools="(\S*)"/)||0==n.indexOf("\u897f\u74dc\u63d2\u4ef6")||n.match(/[P|p]owered by "(\S*)"/)||n.includes("_mbEditor")?(i&&me.setSum(e,49,1),me.setSum(e,47,1)):(i&&me.setSum(e,50,1),me.setSum(e,48,1)))}(),Ge.setGvar({payType:0,pageType:0,albumId:window.appmsg_album_info.id||""}),Vs.config.errorHandler=(e,t,i)=>{e._info=i,window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&window.WX_BJ_REPORT.BadJs.onError(e)},window.__immersiveListMode&&Ie.invoke("disableBounceScroll",{place:["top","bottom"]}),J.initHtmlMinHeight(),window.__second_open__||window.ext_complete||pe.setExtLoadDom(),Pe.on("ext-complete",(()=>{window.requestAnimationFrame(pe.removeExtLoadDom)})),Pe.on("interact-ext-complete",(()=>{window.requestAnimationFrame(pe.removeExtLoadDom)}));let Qs=-1,Zs=!1;if(window.logs.pagetime.jsapi_ready_time=+new Date,window.logs.idkeys={},we.log("[Appmsg] start run index.js init"),function(){const e=(new Date).getHours(),t=function(e,t){t=t||"",window.isSg?(t=["uin:sougou","resp:".concat(t)].join("|"),me.setLogs({id:24729,key:e,value:1,log:t})):(t=["uin:".concat(window.user_uin),"resp:".concat(t)].join("|"),me.setLogs({id:24729,key:e,value:1,log:t}))},i=e>=11&&e<=17&&Math.random()<1;window.__report=t,window.__commonVideoReport=function(e,n){i&&t(e,n)},window.__addIdKeyReport=function(e,t,i){const n=e+"_"+t;i=i||1,window.logs.idkeys[n]||(window.logs.idkeys[n]={val:0}),window.logs.idkeys[n].val+=i}}(),Oe.initWebCompt(["wxOpen"],(e=>{window.__is_support_wxOpen=e.err_msg&&e.err_msg.indexOf(":ok")>-1,(document.getElementsByTagName("mpsubscribe")&&document.getElementsByTagName("mpsubscribe").length||document.getElementsByTagName("mp-common-subscribe")&&document.getElementsByTagName("mp-common-subscribe").length)&&wr()})),function(){function e(){const e=window.performance||window.msPerformance||window.webkitPerformance;if(e.timing){const t=e.timing;we.log("[Appmsg] dns:"+(t.domainLookupEnd-t.domainLookupStart)+"^^^ ssl:"+(0==t.secureConnectionStart?0:t.connectEnd-t.secureConnectionStart)+"^^^ tcp:"+(t.connectEnd-t.connectStart)+"^^^ request:"+(t.responseStart-t.requestStart)+"^^^ getPackageTime:"+(t.responseEnd-t.responseStart)+"^^^ domCententLoaded:"+(t.domContentLoadedEventStart-t.domLoading)+"^^^ domComplete:"+(t.domComplete-t.domLoading)+"^^^ firstViewTime:"+(real_show_page_time-t.navigationStart)+"^^^ interactiveTime:"+(window.page_endtime-t.navigationStart)),window.navigator.userAgent,setTimeout((()=>{t.loadEventEnd&&we.log("[Appmsg] onload:"+(t.loadEventEnd-t.loadEventStart))}),100)}"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),""==document.getElementById("js_content").innerHTML.trim()&&me.setSum(24729,94,1),Math.random()<.001&&document.getElementById("js_read_area3")&&document.getElementById("js_read_area3").innerText&&document.getElementById("js_read_area3").innerText.indexOf("Pageview")>-1&&me.setSum(24729,95,1),window.__wxjs_is_wkwebview&&me.setSum(28307,67,1)}setTimeout((()=>{let e=document.getElementsByClassName("wx-edui-video_source_link");e=Array.prototype.slice.call(e),e.forEach((e=>{e&&e.addEventListener("click",(()=>{const t=e.dataset.hitUsername,i=e.dataset.hitBiz;Ce.goProfile({biz:i},{username:t})}))}))}),500);let t=!1;if((()=>{try{const e=Oe.getParam("anchor_list");let i=!1;if(e&&2!==window.copyright_stat){t=!0;const n=document.getElementById("js_content"),o=We(n,{ignoreNotWriteableChildren:!0});let a=decodeURIComponent(e).split("#");for(let e=0;e<a.length;e++){let t=a[e].split(",");if(t&&3===t.length){let e=o[t[0]],n=1*t[1],a=1*t[2];window.__addIdKeyReport("306353","3");const r=ze(e,n,a);i||(window.__addIdKeyReport("306353","1"),window.scrollTo(0,r.getBoundingClientRect().top+Oe.getScrollTop()-68),i=!0)}}}}catch(e){window.__addIdKeyReport("306353","2")}})(),window.is_teenager?me.setSum(286024,0,1):js(),Zr.init(),window.is_new_msg&&-1!=navigator.userAgent.indexOf("MicroMessenger")){window.title&&(window.title=window.title.replace(/&#39;/g,"'").replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")),window.msg_title&&(window.msg_title=window.msg_title.replace(/&#39;/g,"'").replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")),hd_head_img||r.jsmonitor({id:115849,key:26,value:1}),Ys&&!window.show_comment_bar&&ue(!1);const e=document.querySelectorAll("mp-common-product, mp-common-videosnap"),t={userName:window.user_name,bizNickName:window.nickname,bizNickNameBackup:window.title,cover:"",title:window.msg_title,headImg:window.hd_head_img,roundHeadImg:window.round_head_img,digest:window.msg_desc,reportData:{BizUin:window.biz,AppMsgID:1*window.mid,ItemIndex:1*window.idx,Scene:1*window.source,SubScene:1*window.subscene,EnterId:1*window.enterid,SessionId:window.sessionid,ItemShowType:1*window.item_show_type},hasFinderElement:e.length>0?1:0,canReadArticle:!window.tempkey&&window.tts_is_show&&Qt(document.querySelector("#js_content"))>100};if(!Xs)if(Ae.isAndroid){t.cover="",le.init(t);const e=window.cdn_url_1_1||window.cdn_url_235_1||"",i=new Image;e&&(i.src=e,i.onload=()=>{i.width<2048&&i.height<2048&&(t.cover=e,le.init(t)),window.topbarInited=!0},i.onerror=()=>{window.topbarInited=!0})}else t.cover=window.cdn_url_1_1||window.cdn_url_235_1||window.msg_cdn_url,le.init(t);je.on(window,"scroll",(()=>{Zs||Ae.isAndroid&&!window.topbarInited||(tt(0),Zs=!0)})),Ie.invoke("createWebViewForFastLoad",{scene:1},(()=>{}))}let i=document.getElementsByTagName("body");if(!i||!i[0])return!1;i=i[0],function(){function e(){!function(){if(t.length){const e=document.documentElement.scrollTop||document.body.scrollTop;for(let i=0;i<t.length;i++)if(1!=t[i].getAttribute("hasload")){const n=t[i].getBoundingClientRect();(n.top<a+e&&n.top>e||n.top+n.height>e&&n.top+n.height<a+e)&&t[i].getAttribute("href").length>0&&(t[i].setAttribute("hasload",1),Ie.invoke("downloadPageDataForFastLoad",{itemList:[{item_show_type:t[i].getAttribute("data-itemshowtype"),url:t[i].getAttribute("href")}]},(()=>{})),t.splice(i,1),i--)}}}(),function(){for(let e=0;e<n.length;e++){const t=n[e],i=t.getBoundingClientRect();(i.top<=0&&i.top+i.height>=0||i.top>0&&i.top<a)&&(n.splice(e,1),e--,de.report([1,de.getRedirectType(t.parentNode.getAttribute("href")),"",window.img_popup?1:0,window.source,de.getUrlData(t.parentNode.getAttribute("href"))]))}for(let e=0;e<o.length;e++){const t=o[e],i=t.getBoundingClientRect();(i.top<=0&&i.top+i.height>=0||i.top>0&&i.top<a)&&(o.splice(e,1),e--,de.report([1,1,"",window.img_popup?1:0,window.source,t.getAttribute("data-miniprogram-appid")]))}}()}const t=[],i=document.getElementById("js_content").getElementsByTagName("a");for(let e=0;e<i.length;e++)null!==i[e].getAttribute("data-itemshowtype")&&t.push(i[e]);const n=[];Array.prototype.map.call(document.getElementById("js_content").getElementsByClassName("h5_image_link"),(e=>{e.parentNode.getAttribute("href")&&e.parentNode.getAttribute("href").length>0&&n.push(e)}));const o=[];Array.prototype.map.call(document.getElementById("js_content").getElementsByClassName("weapp_image_link"),(e=>{o.push(e)}));const a=window.innerHeight||document.documentElement.clientHeight;je.on(window,"scroll",e),e()}(),(async()=>{let e=null;const t=document.querySelector("#js_ting_heard");if(t){const i=pt();i&&(me.setSum(293511,18,1),2===i&&me.setSum(293511,23,1),3===i&&me.setSum(293511,24,1),e=await mt("#audio_panel_area",i));let n=!0,o=!1;new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(o||(o=!0,le.topbarReport(4),me.setSum(293511,4,1)))}))}),{threshold:.5}).observe(t),window.frontend_exp_list&&window.frontend_exp_list.forEach((e=>{"tts_floating"===e.key&&(n=1!=+e.value)}));const a=(t=!0)=>{if(t&&(le.topbarReport(5),me.setSum(293511,5,1)),e&&i){if(t&&he.report(32561,{BizUin:window.biz,MsgId:+window.mid,Idx:+window.idx,Scene:1*window.source,SubScene:1*window.subscene,ListenId:"",ListenType:0,Pos:0,EventType:13,EventTime:parseInt(Date.now()/1e3,10),SessionId:"".concat(window.sessionid),EnterId:+window.enterid,ExpVersion:"".concat(i||0),PlayRate:0,ListenTime:0,ShutDownType:"",ShutDownLeftTime:0,ListBase64:""}),!1!==e.show())return;t&&me.setSum(293511,22,1)}const o={openPlayerUI:n,itemList:[{type:2,startTime:0,duration:123,srcId:location.href,title:window.msg_title||"",webUrl:window.msg_link||location.href,author:window.nickname||window.cgiData.nick_name||"",cover:window.cdn_url_1_1||window.__appmsgCgiData.hd_head_img||"",mpInfo:{username:window.user_name||"",name:window.nickname||window.cgiData.nick_name||"",bizUin:window.biz?parseInt(window.atob(window.biz),10):0,webUrl:window.msg_link||location.href}}]};Ie.invoke("setTingAudioState",o,(e=>{-1===e.err_msg.indexOf("ok")&&(window.weui.alert("\u6682\u65e0\u6cd5\u6717\u8bfb\uff0c\u8bf7\u91cd\u8bd5"),me.setSum(293511,6,1),window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&window.WX_BJ_REPORT.BadJs.report("t1t read fail","res: ".concat(JSON.stringify(e)," | url: ").concat(location.href),{mid:"mmbizwap:t1t_read_fail",view:"wap_business"}))}))};window.__hasClickedAudioPanelHandler&&t.removeEventListener("click",window.__hasClickedAudioPanelHandler),window.__hasClickedAudioPanel&&(a(),window.__hasClickedAudioPanel=!1),je.on(t,"click",(()=>a())),Ie.on("onTingEntryClick",(()=>{a(!1),me.setSum(293511,34,1),he.report(32561,{BizUin:window.biz,MsgId:+window.mid,Idx:+window.idx,ListenId:"",ListenType:0,Scene:1*window.source,SubScene:1*window.subscene,Pos:0,EventType:22,EventTime:parseInt(Date.now()/1e3,10),SessionId:"".concat(window.sessionid),EnterId:+window.enterid,ExpVersion:"".concat(i||0),PlayRate:0,ListenTime:0,ShutDownType:"",ShutDownLeftTime:0,ListBase64:""})}))}let i=[];voiceList&&voiceList.voice_in_appmsg&&voiceList.voice_in_appmsg.length>0&&(i=voiceList.voice_in_appmsg),er(i,e)})();const n=/^http(s)?:\/\/mp\.weixin\.qq\.com\//g;try{if(top!=window&&(!top||top&&location.href&&n.test(location.href))&&!window.isSg)throw new Error("in iframe")}catch(e){const t="";me.setLogs({id:24729,key:4,value:1,log:"biz:".concat(biz,",mid:").concat(mid,",uin:").concat(uin,",[key4]").concat(t).substring(0,1024)})}if(window.isInWeixinApp()&&/#rd$/.test(location.href)&&!window.isWeixinCached&&!window.__second_open__&&!Ae.isWxWork){const e=-1!=location.href.indexOf("?")?"&":"?";location.replace(location.href.replace(/#rd$/,e+"rd2werd=1#wechat_redirect"))}const o=!Ae.isWp&&-1==navigator.userAgent.indexOf("MicroMessenger"),c=Ae.isMpapp&&Ae.cpVersion("2.25.0",1,!0,"mpapp");if(window.__review_image__=!o||c||/wxwork\/([\d.]+)/i.test(navigator.userAgent)?new Je({isHttpsRes:is_https_res}):null,function(){const e=document.getElementById("js_content");let t=!1;const i=e.getElementsByTagName("img");for(let e=0,n=i.length;e<n;e++){const n=i[e].getAttribute("data-src");if(n&&n.canHevc()){t=!0;break}}if(!t){const i=e.querySelectorAll("[data-lazy-bgimg]");for(let e=0,n=i.length;e<n;e++){const n=i[e].getAttribute("data-lazy-bgimg");if(n&&n.canHevc()){t=!0;break}}}t?ft((e=>{gt((t=>{qa(e,t)}))})):gt((e=>{qa(!1,e)}))}(),window.__review_image__){const e=document.getElementById("js_cover");window.__review_image__.add({container:document.getElementById("js_content"),imgs:e?[e]:[]})}Da(),new zo({store:l,render:e=>e(Wo)}).$mount("#content_bottom_area"),new da({store:l,render:e=>e(ca)}).$mount("#page_bottom_area"),new Vs({store:l,render:e=>e(zs)}).$mount("#js_ad_control"),function(){const e=document.getElementById("profileBt"),t=document.getElementById("copyright_info"),i=[];if(e){let t="57";"28"==window.source&&(t="96"),"31"===window.source&&(t="103"),"30"===window.source&&(t="102"),"29"==window.source&&(t="39"),"15"==window.source&&(t="121"),i.push({dom:e,username:user_name,profileReportInfo:window.profileReportInfo||"",scene:t})}t&&source_encode_biz&&i.push({dom:t,source_encode_biz:source_encode_biz,scene:"161"});for(let e=0,t=i.length;e<t;e++)!function(e){je.on(e.dom,"click",(t=>{if("copyright_info"==e.dom.id&&source_encode_biz)Ri.card_click_report({scene:"0"}),Ce.goProfile({biz:e.source_encode_biz,scene:e.scene},{username:source_username,scene:e.scene+""});else{if(we.log("[Appmsg] profile_click_before_loadprofile: username:"+e.username+", scene:"+e.scene),Se.profileReport({hotspotjson:JSON.stringify({hotspotinfolist:window.hotspotInfoList})}),profileReportInfo){const e=String(profileReportInfo).split("_");3==e.length&&_e({url:"/mp/ad_biz_info?action=report&__biz="+window.biz+"&report_type=2&aid="+e[1]+"&tid="+e[2],type:"GET",dataType:"json",async:!0,success(e){}})}Ae.isWxWork&&(Ae.isIOS||Ae.isAndroid)?Re():1==isprofileblock?Ie.invoke("openUrlWithExtraWebview",{url:"https://mp.weixin.qq.com/mp/profileblock?__biz="+window.biz+"#wechat_redirect",openType:1},(e=>{-1==e.err_msg.indexOf("ok")&&(location.href="https://mp.weixin.qq.com/mp/profileblock?__biz="+window.biz+"#wechat_redirect")})):Ie.invoke("profile",{username:e.username,profileReportInfo:e.profileReportInfo||"",scene:e.scene+"",bizuin:window.biz&&1*window.atob(window.biz)||0},(t=>{window.__addIdKeyReport("28307","1"),we.log("[Appmsg] profile_click_after_loadprofile: username:"+e.username+", scene:"+e.scene+", profileReportInfo:"+e.profileReportInfo+", res.err_msg:"+t.err_msg)}))}t.preventDefault()})),Ae.isWp&&e.dom.setAttribute("href","weixin://profile/"+e.username)}(i[e])}(),function(){function e(){const e=function(){if("hidden"in document)return"hidden";const e=["webkit","moz","ms","o"];for(let t=0;t<e.length;t++)return e[t]+"Hidden";return null}();return!!e&&document[e]}function t(){if(e())for(let e=0;e<window.originalVideoAdFrames.length;e++)window.originalVideoAdFrames[e].contentWindow.postMessage({action:"pauseAd",value:""},"*");else window.originalVideoAdCurrentFrame&&window.originalVideoAdCurrentFrame.contentWindow.postMessage({action:"playAd"},"*")}document.webkitVisibilityState?document.addEventListener("webkitvisibilitychange",t,!1):document.msVisibilityState?document.addEventListener("msvisibilitychange",t,!1):document.visibilityState&&document.addEventListener("visibilitychange",t,!1)}();try{const e=document.getElementById("js_author_name");if(e){let t="";je.on(e,"click",(()=>!!xe.hasClass(e,"rich_media_meta_link")&&(window.is_temp_url?(window.weui.alert("Unable to do this in preview"),!1):!Et("js_author_name")&&!!e.getAttribute("data-rewardsn")&&1==e.getAttribute("data-canreward")&&(t="https://mp.weixin.qq.com/mp/author?action=show&author_id="+author_id+"&rewardsn="+e.getAttribute("data-rewardsn")+"&timestamp="+e.getAttribute("data-timestamp")+"&__biz="+window.biz+"&appmsgid="+window.appmsgid+"&idx="+window.idx+"&scene=142&rscene=129&from_scene="+window.source+"&from_subscene="+window.subscene+"&from_enterid="+window.enterid+"&from_sessionid="+window.sessionid+"&is_fans="+window.isFans+"&is_paidarticle="+window.isPaySubscribe+"&author_from_scene=0#wechat_redirect",!Ae.isInMiniProgram&&void(-1!=navigator.userAgent.indexOf("MicroMessenger")&&(Ae.isIOS||Ae.isAndroid||Ae.isWp)?(window.__addIdKeyReport("110809","1"),Ie.invoke("openUrlWithExtraWebview",{url:t,openType:1},(e=>{-1==e.err_msg.indexOf("ok")&&(location.href=t)}))):window.open(t))))))}}catch(e){}new ie({container:document.getElementById("js_content"),changeHref(e,t,i){if(e=e.trim(),1===window.ban_jump_link.block_atag)return ban_jump_link.atag_intcp_url;if(!e||0!=e.indexOf("http://mp.weixin.qq.com/")&&0!=e.indexOf("https://mp.weixin.qq.com/")){if(18==ban_scene)return"/mp/ban?action=check&__biz="+biz+"&mid="+mid+"&idx="+idx+"&scene="+ban_scene+"#wechat_redirect";if(0!=e.indexOf("http://mp.weixinbridge.com/mp/wapredirect")&&0!=e.indexOf("https://mp.weixinbridge.com/mp/wapredirect")&&0!=e.indexOf("https://support.weixin.qq.com/cgi-bin/mmsupport-bin/showredpacket"))return"https://mp.weixinbridge.com/mp/wapredirect?url="+encodeURIComponent(e)+"&action=appmsg_redirect&uin="+uin+"&biz="+biz+"&mid="+mid+"&idx="+idx+"&type="+t+"&scene=0"}else{let t="&";-1==(e=(e=(e=e.replace(/#rd\s*$/,"")).replace(/#wechat_redirect\s*$/,"")).replace(/[\?&]scene=21/,"")).indexOf("?")&&(t="?"),e+=t+"scene=".concat(i?310:21,"#wechat_redirect")}return e}}),function(){function e(){let e=window.pageYOffset||document.documentElement.scrollTop;for(let t=0;t<n.length;++t){let i=n[t];if(!i.isReport){let t=i.offsetTop;e<=t&&e+Oe.getInnerHeight()>=t&&(i.isReport=!0,(new Image).src="/mp/appmsgreport?action=appmsg_recom&type=1&__biz="+biz+"&ascene="+(window.ascene||-1)+"&mid="+mid+"&idx="+idx+"&sn="+sn+"&product_id="+i.product_id+"&order="+i.order+"&r="+Math.random())}}}if(!document.getElementsByClassName)return;let t=document.getElementsByClassName("js_product_section"),i=document.getElementsByClassName("js_product_a"),n=[];for(let e=0;e<t.length;++e){let i=t[e];i.dataset&&i.dataset.product_id&&i.dataset.order&&n.push({dom:i,offsetTop:i.offsetTop,product_id:i.dataset.product_id||"",order:i.dataset.order||"",isReport:!1})}n.length>0&&(je.on(window,"scroll",e),e());for(let e=0;e<i.length;++e)!function(e){je.on(e,"click",(function(){let t=e.dataset||{};return(new Image).src="/mp/appmsgreport?action=appmsg_recom&type=2&__biz="+biz+"&ascene="+(window.ascene||-1)+"&mid="+mid+"&idx="+idx+"&sn="+sn+"&product_id="+(t.product_id||"")+"&order="+(t.order||"")+"&r="+Math.random(),!!t.href&&(setTimeout((function(){location.href="https://mp.weixinbridge.com/mp/wapredirect?url="+encodeURIComponent(t.href)+"&action=appmsg_redirect&uin="+uin+"&biz="+biz+"&mid="+mid+"&idx="+idx+"&scene=0"}),300),!1)}),!0)}(i[e])}(),window.originalVideoAdFrames=[],window.originalVideoAdCurrentFrame=null,window.originalVideoAdFramesUnsetList=[],window.addEventListener("message",(e=>{let t="";const i=document.getElementsByTagName("iframe");if(e.data&&"originalVideoAdNeedData"==e.data.action&&e.data.vid)if(window.originalVideoAdFramesAdData){window.originalVideoAdFramesAdData&&window.originalVideoAdFramesAdData[e.data.vid]&&(t=window.originalVideoAdFramesAdData[e.data.vid]);for(let n=0;n<i.length;n++)i[n].dataset&&i[n].dataset.mpvid==e.data.vid&&i[n].contentWindow.postMessage({action:"receiveOriginalVideoData",vid:e.data.vid,adData:t},"*")}else window.originalVideoAdFramesUnsetList.push(e.data.vid)})),$e(),window.fromWeixinCached||Sa(),oe.getAdData(window.reportVid),function(){try{new Ka}catch(e){}}(),Us(),cn(),ae(),(()=>{const e=document.querySelectorAll(rr.oldTagName);for(let t=0;t<e.length;t++){const i=e[t],n=document.createElement("mp-common-search"),o=i.getAttribute("data-keywords");i.parentNode.appendChild(n),i.parentNode.removeChild(i),n.setAttribute("data-nickname",window.nickname),n.setAttribute("data-headImg",window.round_head_img),n.setAttribute("data-keywords",o)}const t=document.querySelectorAll(rr.tagName);if(!(t.length<=0))for(let e=0,i=t.length;e<i;e++){const i=t[e];i.classList.add("js_wx_tap_highlight");let n=[];try{n=JSON.parse(window.decodeURIComponent(i.getAttribute("data-keywords")))}catch(e){me.setSum(110809,50,1)}if(n.length){const e={nickname:window.nickname,avatar:window.round_head_img,keywords:n};rr.keywords=n;const t=i.parentNode.querySelector('[data-preloadingid="mp-common-search"]');t&&t.parentNode.removeChild(t),sr({dom:i,keywords:e.keywords})}}})(),(()=>{const e=document.querySelectorAll(nr.oldTagName);for(const t of e){const e=document.createElement(nr.tagName);t.parentNode.appendChild(e),t.parentNode.removeChild(t);const i=["pluginname","id","poiid","districtid","name","address","img","longitude","latitude","provice","city","hasreport","type"];for(const n of i){const i="data-".concat(n);e.setAttribute(i,t.getAttribute(i))}}const t=document.querySelectorAll(nr.tagName);for(let e=0,i=t.length;e<i;e++){const i=t[e];i.classList.add("js_wx_tap_highlight");const n={id:decodeURIComponent(i.getAttribute("data-id")||""),name:decodeURIComponent(i.getAttribute("data-name")||""),address:decodeURIComponent(i.getAttribute("data-address")||""),img:decodeURIComponent(i.getAttribute("data-img")||""),longitude:decodeURIComponent(i.getAttribute("data-longitude")||""),latitude:decodeURIComponent(i.getAttribute("data-latitude")||""),type:decodeURIComponent(i.getAttribute("data-type")||"")},o=i.parentNode.querySelector('[data-preloadingid="'+n.id+'"]');o&&o.parentNode.removeChild(o),nr.poiDom.push(i),or({poiInfo:n,dom:i})}const i=document.getElementsByClassName("js_poi_entry");for(let e=0;e<i.length;e++)(e=>{const t=i[e];xe.removeClass(t,"ct_geography_loc_tip"),xe.addClass(t,"wx_poi_link"),xe.addClass(t,"js_wx_tap_highlight"),xe.addClass(t,"wx_tap_link"),nr.poiDom.push(t),je.on(t,"click",(e=>{e.stopPropagation(),e.preventDefault();const i={id:decodeURIComponent(t.getAttribute("data-id")||""),name:decodeURIComponent(t.getAttribute("data-name")||""),address:decodeURIComponent(t.getAttribute("data-address")||""),img:decodeURIComponent(t.getAttribute("data-img")||""),longitude:decodeURIComponent(t.getAttribute("data-longitude")||""),latitude:decodeURIComponent(t.getAttribute("data-latitude")||""),type:decodeURIComponent(t.getAttribute("data-type")||"")};return i.longitude&&i.latitude&&i.name&&i.address&&(he.report(19937,Object.assign({},nr.commonReportData,{type:1,actiontype:2})),me.setSum(110809,57,1),ir(i)),!1}),!0)})(e);ar(),je.on(window,"scroll",ar)})(),Aa.initCpslink(),V.init(),1===window.show_msg_voice&&Wa(),!window.__appmsgCgiData||1!=window.__appmsgCgiData.wxa_product&&1!=window.__appmsgCgiData.wxa_cps||dr(),re.init(),document.getElementsByTagName("mp-qa").length&&vi.renderQaCard({mid:window.mid,idx:window.idx,isLogin:!!window.is_login,userUin:window.user_uin,biz:window.biz,itemShowType:window.item_show_type,sessionId:window.sessionid,enterId:window.enterid,scene:window.source,subScene:window.subscene});const d=document.getElementsByTagName("mp-common-videosnap");(document.getElementsByTagName("mpvideosnap")&&document.getElementsByTagName("mpvideosnap").length||d&&d.length)&&Xt();const u=document.getElementsByTagName("mp-common-profile");if((document.getElementsByTagName("mpprofile")&&document.getElementsByTagName("mpprofile").length||u&&u.length)&&Er(),document.getElementsByTagName("mp-common-sticker")&&document.getElementsByTagName("mp-common-sticker").length&&Mr(),Wr&&Wr.length&&Yr(),document.getElementsByTagName("mp-wxaproduct").length){const e=window.__appmsgCgiData.minishopCardData?JSON.parse(decodeURIComponent(window.__appmsgCgiData.minishopCardData)):"";yn({biz:window.biz,mid:window.mid,idx:window.idx,source:1*window.source,subscene:1*window.subscene,enterid:1*window.enterid,minishopCards:e})}if(Ie.invoke("getNetworkType",{},(function(e){networkType=br[e.err_msg],"network_type:edge"!=e.err_msg&&"network_type:wwan"!=e.err_msg||(e.detailtype&&"4g"==e.detailtype||e.subtype&&"4g"==e.subtype)&&(networkType="4g"),yr()})),je.on(window,"load",yr,!1),new xi({biz:window.biz,isPaySubscribe:window.isPaySubscribe,container:document.getElementById("js_content"),logid:18504,baseData:["",window.biz,window.mid,window.idx,window.location.href,window.msg_title]}),setTimeout((()=>{je.tap(document.getElementById("copyright_logo"),(()=>{const e="http://kf.qq.com/touch/sappfaq/150211YfyMVj150326iquI3e.html";window.__second_open__?Ie.invoke("openUrlWithExtraWebview",{url:e,openType:1},(t=>{-1==t.err_msg.indexOf("ok")&&(location.href=e)})):location.href=e})),un(),se.init({dom:document.getElementById("js_report_article3"),title:window.msg_title.htmlDecode(),link:window.msg_link}),function(){if(o&&!window.cps_article_data){document.title=window.msg_title.htmlDecode(),xe.addClass(i,"not_in_mm");const e=document.getElementById("js_pc_qr_code_img");if(e){let t=10000004;const i=document.referrer;0==i.indexOf("http://weixin.sogou.com")?t=10000001:0==i.indexOf("https://wx.qq.com")&&(t=10000003),window.isSg?e.setAttribute("src",sg_qr_code.htmlDecode()):(e.setAttribute("src","/mp/qrcode?scene="+t+"&size=102&__biz="+biz+"&mid="+mid+"&idx="+idx+"&sn="+sn+"&send_time="+send_time),(new Image).src="/mp/report?action=pcclick&__biz="+biz+"&uin="+uin+"&scene="+t+"&r="+Math.random()),document.getElementById("js_pc_qr_code").style.display="block"}}else{const e=document.getElementById("js_report_article3");e&&(e.style.display="")}}();const e=document.getElementsByTagName("map");for(let t=0,i=e.length;t<i;++t)e[t].parentNode.removeChild(e[t]);if(Ri.card_pv_report(),Math.random()<.01)try{const e="https://js.aq.qq.com/js/aq_common.js",t=document.createElement("script");t.src=e,document.getElementsByTagName("head")[0].appendChild(t)}catch(e){}const t=document.getElementById("js_close_temp");je.on(t,"click",(()=>{t.parentNode.parentNode.removeChild(t.parentNode),xe.removeClass(document.getElementById("js_article"),"preview_appmsg")}))}),1e3),function(){if(!fe.os.ios||!("onorientationchange"in window))return;const e=[],t="onorientationchange"in window?"orientationchange":"resize";let i=!1;const n=function(){return 90===Math.abs(window.orientation)?1:2};1!==n()||i||(Ge.report110809(63),window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&window.WX_BJ_REPORT.BadJs.report("horizontal screen report","biz: ".concat("function"==typeof window.atob&&window.biz?window.atob(window.biz):window.biz," | mid: ").concat(window.mid," | idx: ").concat(window.idx," | url: ").concat(location.href),{
mid:"mmbizwap:horizontal_screen",view:"wap_business"}),i=!0),e.push({ori:n(),scroll:window.pageYOffset||document.documentElement.scrollTop,istouchmove:!1});const o=(new Date).getHours();je.on(window,t,(()=>{const t=e.length-2,a=n();if(Qs=+new Date,t>=0){const i=e[t];e[e.length-1].istouchmove||(o>=11&&o<=17&&window.__report(63),setTimeout((()=>{window.scrollTo(0,i.scroll)}),100))}e.push({ori:a,scroll:window.pageYOffset||document.documentElement.scrollTop,istouchmove:!1}),1!==a||i||(Ge.report110809(63),window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&window.WX_BJ_REPORT.BadJs.report("horizontal screen report","biz: ".concat("function"==typeof window.atob&&window.biz?window.atob(window.biz):window.biz," | mid: ").concat(window.mid," | idx: ").concat(window.idx," | url: ").concat(location.href),{mid:"mmbizwap:horizontal_screen",view:"wap_business"}),i=!0)})),je.on(window,"scroll",(()=>{const t=e.length-1,i=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,o=Date.now();if(-1!=Qs){if(o-Qs<500)return void(Qs=-1)}else Qs=-1;e[t].ori==n()&&(e[t].scroll=i,e[t].istouchmove=!0)}))}(),we.log("[Appmsg] href:"+location.href+"^^^ ua:"+window.navigator.userAgent),window.addEventListener?window.addEventListener("load",e,!1):window.attachEvent&&window.attachEvent("onload",e),window.addEventListener&&document.getElementsByTagName("body")[0].addEventListener("copy",(()=>{me.setSum(28307,18,1),Ae.isIOS&&me.setSum(28307,19,1),Ae.isAndroid&&me.setSum(28307,20,1)}),!1),window.__observer&&window.__observer_data&&Bs(),"undefined"!=typeof isSg&&function(){function e(e){const t=document.getElementById("js_cover"),i=[];t&&i.push(t);const n=document.getElementById("js_content");if(n){const e=n.getElementsByTagName("img")||[];for(let t=0,n=e.length;t<n;t++)i.push(e.item(t))}const o=[];for(let t=0,n=i.length;t<n;t++){const n=i[t],a=n.getAttribute("data-src")||n.getAttribute("src");a&&(o.push(a),function(t){je.on(n,"click",(function(){return"ios"==e?window.JSInvoker&&window.JSInvoker.openImageList&&window.JSInvoker.openImageList(JSON.stringify({index:t,array:o})):window.JSInvoker&&window.JSInvoker.weixin_openImageList&&window.JSInvoker.weixin_openImageList(JSON.stringify({index:t,array:o})),!1}))}(t))}}if(document.getElementById("js_report_article3")&&(document.getElementById("js_report_article3").style.display="none"),document.getElementById("js_content_end")&&(document.getElementById("js_content_end").style.display="none"),function(){const e=document.createElement("div");e&&(e.innerHTML=Be.tmpl(tr,{}),document.body.appendChild(e))}(),new a.Emotion({emotionPanel:s("#js_emotion_panel"),inputArea:s("#js_cmt_input"),emotionPanelArrowWrp:s("#js_emotion_panel_arrow_wrp"),emotionSwitcher:s("#js_emotion_switch"),emotionSlideWrapper:s("#js_slide_wrapper"),emotionNavBar:s("#js_navbar"),submitBtn:s("#js_cmt_submit")}),navigator.userAgent.toLowerCase().match(/ios/)){const t=navigator.userAgent.toLowerCase().match(/(?:sogousearch\/ios\/)(.*)/);if(t&&t[1]){const i=t[1].replace(/\./g,"");parseInt(i)>422&&e("ios")}}else e("android");window.onerror=function(e){me.setLogs({id:24729,key:86,value:1,log:e})}}(),setTimeout((()=>{const e=function(){me.setLogs({id:28307,key:49,value:1,log:"[28307_49_appmsg_fe_filter]"+encodeURIComponent(location.href)})},t=(window.appmsg_fe_filter||"").split(","),i=function(t,i){try{if(!t)return;if(t.querySelectorAll){const n=t.querySelectorAll("*["+i+"]");if(n&&n.length>0){e();for(let e=0;e<n.length;++e)n[e]&&n[e].removeAttribute&&n[e].removeAttribute(i)}return}const n=t.childNodes;if(t.hasAttribute&&t.hasAttribute(i)&&e(),t.removeAttribute&&t.removeAttribute(i),n&&n.length)for(let e=0;e<n.length;++e)filterContenteditable(n[e])}catch(e){}},n=document.getElementById("js_content");for(let e=0;e<t.length;++e)t[e]&&i(n,t[e])}),0),setTimeout((()=>{const e="//mmbiz.qpic.cn/mmbiz_png/7lG1x2vpicdic0p5bBthpD9lsJcINicsSzd6uKQQJyoj5oTl8lFIs9K0fIibgxCzms0enDLTRxTHLpDPCLpSvIExiag/640",t=(new Date).getHours();if(t<11||t>16||Math.random()<.99)return;const i=new Image;i.onload=function(){const e=i.naturalWidth||i.width,t=i.naturalHeight||i.height;640===e&&407===t||window.__addIdKeyReport("28307","wifi"===window.networkType?120:123),window.__addIdKeyReport("28307","wifi"===window.networkType?121:124)},i.src="http:"+e;const n=new Image;n.onload=function(){const e=n.naturalWidth||n.width,t=n.naturalHeight||n.height;640===e&&407===t||window.__addIdKeyReport("28307",126),window.__addIdKeyReport("28307",127)},n.src="https:"+e}),3e3),Math.random()<2e-4)try{const e=document.getElementsByTagName("img"),t=window.screen.height,i=window.screen.width,n=window.devicePixelRatio;let o="";for(let a=0,r=e.length;a<r;a++){const r=e[a].getAttribute("data-src");if(r){const s=e[a].getBoundingClientRect();o+=i+"|"+t+"|"+s.left.toFixed(2)+"|"+(i-s.right).toFixed(2)+"|"+s.width.toFixed(2)+"|"+n.toFixed(2)+"|"+r+";"}}_e({url:"/mp/wapreport?action=img_display_report",data:{key:o},type:"POST",dataType:"json",async:!0})}catch(e){}setTimeout((()=>{Ii&&Ii("updatePageHeight")}),2e3),Ae.isIOS&&location.href.match(/fontScale=\d+/)&&ce.isIPadOS13&&setTimeout((()=>{if(window.ipados13_font_scale)return;const e=location.href.match(/fontScale=(\d+)/);window.ipados13_font_scale=parseFloat(e[1]),ce.setFontSize(document.getElementsByTagName("html").item(0),window.ipados13_font_scale/100)}),500);const p=!isNaN(parseInt(ke("start")))&&!isNaN(parseInt(ke("end"))),m=!!window.goContentId;if(we.log("[PagePos] init entry"),J.init({hasSpAd:!0,disableScroll:window.isPaySubscribe&&!window.isPaid&&window.jump2pay||p||m||t}),window.__main_process_finish__=!0,Ce.elementVisibleController(),document.querySelector(".refuted_appmsg_card")){const e=document.querySelector(".refuted_appmsg_card"),t=be(e.getAttribute("data-url"),"norumor",1),i=Number(e.getAttribute("data-itemshowtype"))||0;Ie.invoke("downloadPageDataForFastLoad",{itemList:[{item_show_type:i,url:t}]},(()=>{})),e.addEventListener("click",(()=>{Ae.isOnlyWechat&&!Ae.isMpapp?Ie.invoke("openWebViewUseFastLoad",{url:t,item_show_type:i,openType:0},(e=>{e&&e.err_msg&&-1===e.err_msg.indexOf("ok")&&Ue(t)})):Ue(t)}))}}(),window.can_feedback&&!fe.os.pc&&document.getElementById("js_problem_feedback")&&new ha({render:e=>e(_a)}).$mount("#js_problem_feedback"),!window.__second_open__){const e=window.performance||window.msPerformance||window.webkitPerformance;if(e&&e.timing){const t=window.location.protocol;r.saveSpeeds({uin:window.uin,pid:"https:"==t?462:417,speeds:{sid:34,time:Date.now()-e.timing.navigationStart}}),r.send()}Ze({isPaySubscribe:window.isPaySubscribe})}export{e as __vite_legacy_guard};