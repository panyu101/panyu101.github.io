<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>AP&#x27;s Readings</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">AP&#x27;s Readings</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/panyu101/panyu101.github.io" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>My personal notes, which is copied from <a href="https://github.com/sigoden/mynotes">sigoden</a>.  Thanks to <strong>sigoden</strong></p>
<p>The notes divided into following blocks:</p>
<ul>
<li>CLI Samples: A collections of used and worked CLI samples for reference.</li>
<li>Pages: A collections of used and worked html page samples for reference.</li>
<li>Collections: <strong>sigoden</strong>'s command-line tools and utility websites.</li>
<li>Languages: <strong>sigoden</strong>'s notes on some programming languages, added my ones.</li>
<li>Tools: <strong>sigoden</strong>'s experience with famous tools, added my ones.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cli-samples"><a class="header" href="#cli-samples">CLI Samples</a></h1>
<p>A collections of used and worked CLI samples for reference.</p>
<ul>
<li><a href="cli_samples/linux.html">Linux</a></li>
<li><a href="cli_samples/bash.html">Bash</a></li>
<li><a href="cli_samples/aws.html">AWS</a></li>
<li><a href="cli_samples/ubuntu.html">Ubuntu</a></li>
<li><a href="cli_samples/alpine.html">Alpine</a></li>
<li><a href="cli_samples/windows.html">Windows</a></li>
<li><a href="cli_samples/docker.html">Docker</a></li>
<li><a href="cli_samples/mysql.html">MySQL</a></li>
<li><a href="cli_samples/apache.html">Apache</a></li>
<li><a href="cli_samples/nginx.html">Nginx</a></li>
<li><a href="cli_samples/php.html">PHP</a></li>
<li><a href="cli_samples/git.html">Git</a></li>
<li><a href="cli_samples/utility.html">Utility</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><p>Sample of run a task periodically when certain check command failed</p>
<pre><code class="language-bash">/etc/cron.d/apan
9,39 6-16 * * * root /root/check2run.sh

/root/check2run.sh
#!/bin/bash

docker ps -a|grep Exited; if [ $? -eq 0 ]; then cd /home/ec2-user/devlake/;docker-compose up -d; elif [ $? -eq 1 ]; then echo "Looks OK"; else echo "Failed with a different exit code: $?."; fi

</code></pre>
<p>Mount a disk in fstab file</p>
<pre><code class="language-bash">nano -w /etc/fstab
... ...
/swap.img       none    swap    sw      0       0

/dev/sdb1  /opt  ext4  defaults  0  2
</code></pre>
<p>Get IMPORTANT constance</p>
<pre><code class="language-bash"># get PI
echo "scale=100; 4*a(1)" | bc -l

# get E
echo "scale=100; e(1)" | bc -l
</code></pre>
<p>Say there are a few lines like this in log file:   /var/log/zabbix/zabbix_server.log</p>
<pre><code class="language-bash">1061:20230605:175232.950 cannot send list of active checks to "11.12.13.14": host [ABC] not found
1065:20230605:182403.690 cannot send list of active checks to "21.22.23.24": host [XYZ] not found
</code></pre>
<p>How can I grep ALL of them</p>
<pre><code class="language-bash">grep 'host \[.*\] not found' /var/log/zabbix/zabbix_server.log
</code></pre>
<p>Verify TXT record with dig</p>
<pre><code class="language-bash">dig TXT _D8E99F7B564DB09BE85F65861BB81679.subdomain.domain.com @8.8.8.8
</code></pre>
<p>Check specified domain to see the expiration date</p>
<pre><code class="language-bash">DNS=www.hp.com;echo | openssl s_client -servername $DNS -connect $DNS:443 2&gt;/dev/null | openssl x509 -noout -enddate | sed -e 's#notAfter=##'
</code></pre>
<p>Make a ssh tunnel for postgres database access</p>
<pre><code class="language-bash">ssh -i id_rsa ec2-user@i-XXXXXXXXXXXX -L 5432:database-prod.XXXXXXXXX.us-west-2.rds.amazonaws.com:5432

Connect to the database from localhost
psql -h localhost -U username databasename
</code></pre>
<p>One line command to deploy changes to SLS(Serverless) stack</p>
<pre><code class="language-bash">sls s3sync &amp;&amp; sls invoke -f setup
</code></pre>
<p>Open port 80 for IP 11.12.13.14 with iptables</p>
<pre><code class="language-bash">iptables -I INPUT -p tcp -s 11.12.13.14 --dport 80 -j ACCEPT
Saved in iptable is
-A INPUT -s 11.12.13.14/32 -p tcp -m tcp --dport 80 -j ACCEPT
</code></pre>
<p>Set ssh key for git remote set as ssh way</p>
<pre><code class="language-bash">eval "$(ssh-agent -s)"
ssh-add PRIVATE_KEY_FOR_GITHUB
# test it
ssh -T git@github.com
Hi $THE_USER_NAME! You've successfully authenticated, but GitHub does not provide shell access.
</code></pre>
<p>Sort the current directory disk usage with depth 1 level down</p>
<pre><code class="language-bash">du . -h --max-depth=1 | sort -h
</code></pre>
<p>Sort the current directory disk usage with depth 1 level down, VERY complicated version</p>
<pre><code class="language-bash">du . --max-depth=1 -x -k | sort -n | awk 'function human(x) { s="KMGTEPYZ"; while (x&gt;=1000 &amp;&amp; length(s)&gt;1) {x/=1024; s=substr(s,2)} return int(x+0.5) substr(s,1,1)"iB" } {gsub(/^[0-9]+/, human($1)); print}
</code></pre>
<p>Sleep randomly between 0 to 3 seconds</p>
<pre><code class="language-bash">time sleep $(($RANDOM % 3))
</code></pre>
<p>Draw a SOLID line across the entire width of the terminal</p>
<pre><code class="language-bash">for ((i=0; i&lt;$(tput cols); i++)); do echo -e "_\c" ;done
</code></pre>
<p>Sample of search string and do something or NOT do something, if or while sample</p>
<pre><code class="language-bash">if [ `tail -99 picked.list|grep "ent" &gt; /dev/null;echo $?` = 0 ];then echo 'Found';else echo 'Nope';fi

while [ `tail -99 picked.list|grep "ent" &gt; /dev/null;echo $?` = 0 ];do SOMETHING;done
</code></pre>
<p>Allow ONLY subnet 192.168.0.0/24 access port 22 (ssh), and drop ALL others</p>
<pre><code class="language-bash">iptables -I INPUT -p tcp ! -s 192.168.0.0/24 --dport 22 -j DROP
</code></pre>
<p>Add user, one line command</p>
<pre><code class="language-bash">USER=USER_ID; \
useradd --create-home $USER; \
rsync -razxcv /etc/skel/ $USER/; \
chown -R $USER:users $USER/ &amp;&amp; passwd $USER
</code></pre>
<p>Count the disk usage and sort at the current directory</p>
<pre><code class="language-bash">du -h|grep [[:digit:]]G|sort -k1 -n
</code></pre>
<p>Check hard disk performance</p>
<pre><code class="language-bash">hdparm -Tt /dev/sda
</code></pre>
<p>How do I know where are SSL certificates located? for Apach2 as an example</p>
<pre><code class="language-bash">grep -Rn SSL /etc/apache2/|grep -v \#|grep "/ssl/"
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><p>Set timezone quickly on Ubuntu</p>
<pre><code class="language-bash">timedatectl set-timezone America/Vancouver
</code></pre>
<p>Disable/remove cloud-init.service at Ubuntu 22.04.2 LTS</p>
<pre><code class="language-bash">touch /etc/cloud/cloud-init.disabled
dpkg-reconfigure cloud-init   # uncheck everything except "None"
apt-get purge cloud-init
rm -rf /etc/cloud/ &amp;&amp; sudo rm -rf /var/lib/cloud/
reboot
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><p>Set timezone quickly on Windows</p>
<pre><code class="language-bash">Check timezone list here: https://ss64.com/nt/timezones.html

tzutil /s "Pacific Standard Time
</code></pre>
<p>Check if 3389 port is open at Windows</p>
<pre><code class="language-bash">netstat -an | find "3389"
netstat -an | findstr "3389"
</code></pre>
<p>Install WindowsTerminal</p>
<pre><code class="language-bash">winget install --id=Microsoft.WindowsTerminal -e
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><p>One line command to deploy changes to SLS(Serverless) stack</p>
<pre><code class="language-bash">sls s3sync &amp;&amp; sls invoke -f setup
</code></pre>
<p>Open port 80 for IP 11.12.13.14 with iptables</p>
<pre><code class="language-bash">iptables -I INPUT -p tcp -s 11.12.13.14 --dport 80 -j ACCEPT

Saved in iptable is
-A INPUT -s 11.12.13.14/32 -p tcp -m tcp --dport 80 -j ACCEPT
</code></pre>
<p>Sample of search string and do something or NOT do something, if or while sample</p>
<pre><code class="language-bash">if [ `tail -99 picked.list|grep "ent" &gt; /dev/null;echo $?` = 0 ];then echo 'Found';else echo 'Nope';fi

while [ `tail -99 picked.list|grep "ent" &gt; /dev/null;echo $?` = 0 ];do SOMETHING;done
</code></pre>
<p>Change USER_ID with PASSWORD, one line command</p>
<pre><code class="language-bash">USER_ID=USERID; PASSWORD=PASSWD; echo "$USER_ID:$PASSWORD"|chpasswd
</code></pre>
<p>Generate 12 characters long random password</p>
<pre><code class="language-bash">openssl rand -base64 12
</code></pre>
<p>Pick one FILE randomly from many files with path D0s/D1s/FILEs</p>
<pre><code class="language-bash">D0=$(ls|shuf -n1);D1=$(ls $D0/|shuf -n1);FILE=$(ls $D0/$D1/*.jpg|shuf -n1);echo $FILE
</code></pre>
<p>Display ALL possible color (256) for current console</p>
<pre><code class="language-bash">for i in {1..255};do echo -en "\e[38;5;${i}m";echo -n "$i ";done;echo
</code></pre>
<p>Usage of cat here file, it will add ANYTHING afterwords into FILE_NAME till a line with EOF only</p>
<pre><code class="language-bash">cat &gt; FILE_NAME &lt;&lt; EOF
... ...
EOF
</code></pre>
<p>Create index.html file at current directory for HTTP access</p>
<pre><code class="language-bash">tree -L 1 -I '.html|.php|.ico|zz' -T 'MyTitle' -H .|grep -B 999 'directories,'|sed 's|/"&gt;|/" target=_blank&gt;|g' &gt; index.html
</code></pre>
<p>Query openweathermap.org with API key (PVG and YVR)</p>
<pre><code class="language-bash">curl -s "https://api.openweathermap.org/data/2.5/onecall?lat=31.22&amp;lon=121.46&amp;exclude=minutely,hourly,daily&amp;units=metric&amp;appid=MY_OPEN_WEATHER_MAP_API_KEY"|jq
LOC="lat=49.25&amp;lon=-123.12"; curl -s "https://api.openweathermap.org/data/2.5/onecall?$LOC&amp;exclude=minutely,hourly,daily&amp;units=metric&amp;appid=$APPID"|jq
</code></pre>
<p>Convert date to Unix time, and convert it back</p>
<pre><code class="language-bash">date +"%s"
date -d @1738544871
</code></pre>
<p>Search JSON file with specific name(s) and value(s)</p>
<pre><code class="language-bash">COUNTRY=$1;CITY=$2; jq -r ".[] | select(.country == \"$COUNTRY\" and .name == \"$CITY\")".coord city.list.json
</code></pre>
<p>Remove files that were modified 30 days ago at the current directory</p>
<pre><code class="language-bash">find . -mtime +30 -type f -exec rm -rf {} \;
</code></pre>
<p>Write data to SDCard, useage of dd</p>
<pre><code class="language-bash">dd if=&lt;image&gt; of=/dev/sdx bs=4M iflag=direct,fullblock oflag=direct status=progress
</code></pre>
<p>Display SSL expiration date for a domain</p>
<pre><code class="language-bash">DNS=google.com;echo | openssl s_client -servername $DNS -connect $DNS:443 2&gt;/dev/null | openssl x509 -noout -enddate
</code></pre>
<p>Kill all Zombie processes one-liner</p>
<pre><code class="language-bash">ps axo state,ppid | awk '!/PPID/$1~"Z"{print $2}' | xargs -r kill -9
</code></pre>
<p>Generate one random IPv4 address</p>
<pre><code class="language-bash">for i in a b c d; do echo -n $(($RANDOM % 256)).; done | sed -e "s/\.$//g"; echo
</code></pre>
<p>rsync from remote to local</p>
<pre><code class="language-bash">rsync -chavzP --stats user@remote.host:/path/to/copy /path/to/local/storage
</code></pre>
<p>rsync from remote to local with non-standard ssh port</p>
<pre><code class="language-bash">rsync -avz -e "ssh -p $portNumber" user@remote.host:/path/to/copy /local/path
</code></pre>
<p>My BASH template for any script with argument(s)</p>
<pre><code class="language-bash">#!/bin/bash

if [[ $# -ne 2 ]]
  then
    echo -e "$0\n\tAAA_NAME ( sampleA )\n\tBBB_NAME ( sampleB )"
cat &lt;&lt; EOF_USAGE
This script is to do WHATEVER ...
EOF_USAGE
    exit 1
fi
</code></pre>
<p>My .bashrc/.profile favorite</p>
<pre><code class="language-bash"># 99+
export PS1="\[\e[31m\][\[\e[m\]\[\e[38;5;172m\]\u\[\e[m\]@\[\e[38;5;153m\]\h\[\e[m\] \[\e[38;5;214m\]\w\[\e[m\]\[\e[31m\]]\[\e[m\]\\$ "
# w - for current working directory, absolute FULL path from / (root)
alias rm='rm -fv' ll='ls -al ' gg='grep --color ' hh='history 33' nn='nano -w '

export LS_COLORS=${LS_COLORS}:'zz=04;31'
export EDITOR=nano
#eval "$(direnv hook bash)"
# 99+.
</code></pre>
<p>Rename all files in current directory</p>
<pre><code class="language-bash">N=10;for i in $(ls);do N=$(( N += 1 ));echo $i $N;done	# dry-run
N=10;for i in $(ls);do N=$(( N += 1 ));mv $i $N;done
</code></pre>
<p>Write image to USB drive, sample of using dd</p>
<pre><code class="language-bash">dd if=&lt;image&gt; of=/dev/sdx bs=4M iflag=direct,fullblock oflag=direct status=progress
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><p>Send my pubkey to AWS SSM managed server instance (needs to be sshed within 60 seconds!  Otherwise, re-send)</p>
<pre><code class="language-bash">aws ec2-instance-connect send-ssh-public-key --profile=PROFILE --instance-id "i-XXXXXXXXXXXX" --ssh-public-key "file://id_rsa.pub" --instance-os-user=ec2-user --region "us-west-2"
</code></pre>
<p>Connect to it with ssh right after pub key was sent</p>
<pre><code class="language-bash">ssh -i id_rsa ec2-user@i-XXXXXXXXXXXX

Required to have ~/.ssh/config has entries like these:
# SSH over AWS Systems Manager Session Manager
  host i-* mi-*
  ProxyCommand sh -c "aws ssm start-session --target %h --document-name AWS-StartSSHSession --profile=PROFILE --region=us-west-2 --parameters 'portNumber=%p'"
</code></pre>
<p>Sync current directory to S3</p>
<pre><code class="language-bash">export AWS_PROFILE=ratox;aws s3 sync . s3://alex.eboy.work/ --delete
</code></pre>
<p>List AWS specific region all running instance public IPs</p>
<pre><code class="language-bash">aws --profile $MY_PROFILE --region us-west-2 --output json ec2 describe-addresses | jq -r '.Addresses[].PublicIp
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><p>Backup MySQL DB, oneliner</p>
<pre><code class="language-bash">DB="my-db-name"; mysqldump -u root -p $DB &gt; ${DB}_$(date +%Y-%m-%d_%H-%M).sql
</code></pre>
<p>Restore MySQL DB, oneliner</p>
<pre><code class="language-bash">DB="my-db-name"; mysql -u root -p $DB &lt; ${DB}_yyyy-mm-dd_hh-mm.sql
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><p>Docker build a image with tag and local Docker file</p>
<pre><code class="language-bash">docker build -t panel-auth:v1.0 .
</code></pre>
<p>Remove ALL docker images</p>
<pre><code class="language-bash">docker images
docker images -q |gg -v 'REPOSITORY'|xargs docker rmi -f
docker images
</code></pre>
<p>Docker pull, tag and push image to AWS ECR</p>
<pre><code class="language-bash">docker pull arturn311/node_js_app
docker tag arturn311/node_js_app 123412341234.dkr.ecr.us-west-2.amazonaws.com/my-test:latest
aws ecr get-login-password --region us-west-2 --profile XXXXXX | docker login --username AWS --password-stdin 123412341234.dkr.ecr.us-west-2.amazonaws.com
Login Succeeded

docker push 123412341234.dkr.ecr.us-west-2.amazonaws.com/my-test:latest
</code></pre>
<p>Start a container with port mapping (HOST at 88, CONTAINER at 80)</p>
<pre><code class="language-bash">docker run -d -p 88:80 nginxdemos/hello
# verifying
docker ps -a
curl localhost:88
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><p>Count and output Nginx zipped access log</p>
<pre><code class="language-bash">zcat /var/log/nginx/access.log-*|awk '{print $1}'|awk '{a[$0]++}END{for(i in a){print a[i],i}}'|sort -k1 -r
</code></pre>
<p>Count how many hits from outside to Nginx server</p>
<pre><code class="language-bash">grep -v '192.168.0.' /var/log/nginx/access.log|awk '{print $1}'|awk '{a[$0]++}END{for(i in a){print a[i],i}}'|sort -rn
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><p>Make current directory HTML web page with php (ONLY can view text files, sub-directory accessiable when L set 2 or more)</p>
<pre><code class="language-bash">tree -H '.' -L 1 &gt; index.html &amp;&amp; php -S 192.168.56.11:8000 &amp;&amp; rm -fv index.html
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><p>This also need to be set in the directory</p>
<pre><code class="language-bash">cat .envrc
#!/bin/bash

git config user.email "aXXX.pXX@sXXX.cX"
git config user.name "ox0"
</code></pre>
<p>Set GitHub auto choose user when cd to the directory</p>
<pre><code class="language-bash">Instead to use the normal ssh clone command:
git clone git@github.com:ox0/ox0.github.io.git

Use this one to specify the user:
git clone git@github-ox0:ox0/ox0.github.io.git

This way to specify the use, so if the use has setup in .ssh/config file, it will be chosen

</code></pre>
<p>Remove zz.txt from repo
add zz.txt into .gitignore file</p>
<pre><code class="language-bash">git rm --cached zz.txt
git add -A &amp;&amp; git commit -a -m 'update' &amp;&amp; git push
</code></pre>
<p>Initial a repository / update an existing repository:</p>
<pre><code class="language-bash">git clone XXX.git / git pull
</code></pre>
<p>One line command to do commit and push together after any changes made at local repository</p>
<pre><code class="language-bash">git add FILE_NAME/. &amp;&amp; git commit -a -m 'ANY_COMMENT' &amp;&amp; git push
</code></pre>
<p>Check remote rpository on this local one</p>
<pre><code class="language-bash">git remote -v
</code></pre>
<p>Set git remote http or ssh way</p>
<pre><code class="language-bash">git remote set-url origin https://ox0@github.com/ox0/ox0.github.io.git
git remote set-url origin git@github.com:ox0/ox0.github.io.git
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><p>Install direnv # convenient tools to set environment when you enter a directory</p>
<pre><code class="language-bash">curl -sfL https://direnv.net/install.sh | bash

The direnv binary is now available in:

    /usr/local/bin/direnv

The last step is to configure your shell to use it. For example for bash, add
the following lines at the end of your ~/.bashrc:

    eval "$(direnv hook bash)"

Then restart the shell.

For other shells, see https://direnv.net/docs/hook.html
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="pages"><a class="header" href="#pages">Pages</a></h1>
<p>A collections of used and worked html page samples for reference.</p>
<ul>
<li><a href="pages/clock/index.html">Clock</a></li>
<li><a href="pages/clock-fancy/index.html">Clock Fancy</a></li>
<li><a href="pages/crontab/crontab.html">Crontab</a></li>
<li><a href="pages/world-time-zone/world-time-zone.html">World Time Zone</a></li>
<li><a href="pages/legoJ/index.html">Lego J</a></li>
<li><a href="pages/legoX/index.html">Lego X</a></li>
<li><a href="pages/XJ/index.html">Progress XJ</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><!DOCTYPE html>
<html lang="en">
<head>
<style>
   :root {
 --main-bg-color: #fff;
 --main-text-color: #888888;
}

[data-theme="dark"] {
 --main-bg-color: #1e1f26;
 --main-text-color: #ccc;
}

* {
 box-sizing: border-box;
}

body {
 margin: 0;
 height: 100vh;
 display: flex;
 flex-direction: column;
 justify-content: space-between;
 align-items: center;
 font-size: 16px;
 background-color: var(--main-bg-color);
 position: relative;
 transition: all ease 0.2s;
}
.page-header {
 font-size: 2rem;
 color: var(--main-text-color);
 padding: 2rem 0;
 font-family: monospace;
 text-transform: uppercase;
 letter-spacing: 4px;
 transition: all ease 0.2s;
}

.clock {
  margin-top: 100px;
 min-height: 28em;
 min-width: 28em;
 display: flex;
 justify-content: center;
 align-items: center;
 background-color: var(--main-bg-color);
 background-image: url("https://imvpn22.github.io/analog-clock/clock.png");
 background-position: center center;
 background-size: cover;
 border-radius: 50%;
 border: 4px solid var(--main-bg-color);
 box-shadow: 0 -15px 15px rgba(255, 255, 255, 0.05),
  inset 0 -15px 15px rgba(255, 255, 255, 0.05), 0 15px 15px rgba(0, 0, 0, 0.3),
  inset 0 15px 15px rgba(0, 0, 0, 0.3);
 transition: all ease 0.2s;
}
.clock:before {
 content: "";
 height: 0.75rem;
 width: 0.75rem;
 background-color: var(--main-text-color);
 border: 2px solid var(--main-bg-color);
 position: absolute;
 border-radius: 50%;
 z-index: 1000;
 transition: all ease 0.2s;
}
.hour,
.min,
.sec {
 position: absolute;
 display: flex;
 justify-content: center;
 border-radius: 50%;
}
.hour {
 height: 16em;
 width: 16em;
}
.hour:before {
 content: "";
 position: absolute;
 height: 50%;
 width: 6px;
 background-color: var(--main-text-color);
 border-radius: 6px;
}
.min {
 height: 20em;
 width: 20em;
}
.min:before {
 content: "";
 height: 50%;
 width: 4px;
 background-color: var(--main-text-color);
 border-radius: 4px;
}
.sec {
 height: 22em;
 width: 22em;
}
.sec:before {
 content: "";
 height: 60%;
 width: 2px;
 background-color: #f00;
 border-radius: 2px;
}

.switch-cont {
 margin: 2em auto 150px;
}
.switch-cont .switch-btn {
 font-family: monospace;
 text-transform: uppercase;
 outline: none;
 padding: 0.5rem 1rem;
 background-color: var(--main-bg-color);
 color: var(--main-text-color);
 border: 1px solid var(--main-text-color);
 border-radius: 0.25rem;
 cursor: pointer;
 transition: all ease 0.3s;
}
</style>
</head>
<body>
<div class="clock">
 <div class="hour"></div>
 <div class="min"></div>
 <div class="sec"></div>
</div>
<div class="switch-cont">
 <button class="switch-btn"> Light </button>
</div>
</body>
<script>
  const deg = 6;
const hour = document.querySelector(".hour");
const min = document.querySelector(".min");
const sec = document.querySelector(".sec");
<p>const setClock = () =&gt; {
let day = new Date();
let hh = day.getHours() * 30;
let mm = day.getMinutes() * deg;
let ss = day.getSeconds() * deg;</p>
<p>hour.style.transform = <code>rotateZ(${hh + mm / 12}deg)</code>;
min.style.transform = <code>rotateZ(${mm}deg)</code>;
sec.style.transform = <code>rotateZ(${ss}deg)</code>;
};</p>
<p>setClock();
setInterval(setClock, 1000);</p>
<p>const switchTheme = (evt) =&gt; {
const switchBtn = evt.target;
if (switchBtn.textContent.toLowerCase() === "light") {
switchBtn.textContent = "dark";
document.documentElement.setAttribute("data-theme", "dark");
} else {
switchBtn.textContent = "light";
document.documentElement.setAttribute("data-theme", "light");
}
};</p>
<p>const switchModeBtn = document.querySelector(".switch-btn");
switchModeBtn.addEventListener("click", switchTheme, false);</p>
<p>let currentTheme = "dark";</p>
<p>if (currentTheme) {
document.documentElement.setAttribute("data-theme", currentTheme);
switchModeBtn.textContent = currentTheme;
}
</script></p>
</html>
<div style="break-before: page; page-break-before: always;"></div><!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <style>  
  *, *:after, *:before {
    box-sizing: border-box;
  }
<p>html {
background: #222;
overflow: hidden;
font-family: 'BenchNine', sans-serif;
}</p>
<p>.clock-container {
position: fixed;
left: 50%;
top: 50%;
transform: translate(-50%, -50%);
width: 480px;
height: 480px;
border-radius: 50%;
overflow: hidden;
background: #111;
box-shadow: 0 0 25px 3px #000, 0 0 10px rgba(0, 0, 0, 0.8) inset;
}
.clock-container .spear {
position: absolute;
width: 220px;
height: 1px;
background: red;
left: 50%;
top: 50%;
transform: translateY(-50%);
z-index: 200;
box-shadow: 0 3px 3px rgba(0, 0, 0, 0.4);
}
.clock-container .spear:after {
content: '';
position: absolute;
border: 7px solid transparent;
border-right-color: red;
right: 0;
top: -7px;
}
.clock-container .spear:before {
content: '';
position: absolute;
border: 7px solid transparent;
border-left-color: red;
left: 2px;
top: -7px;
}
.clock-container .clock-analog {
width: 440px;
height: 440px;
border-radius: 50%;
margin: 20px;
background: #fff;
z-index: 5;
position: relative;
box-shadow: 0 0 25px 3px #000 inset;
}
.clock-container .clock-analog .second, .clock-container .clock-analog .minute, .clock-container .clock-analog .hour {
width: 20px;
height: 20px;
position: absolute;
left: 0;
top: 0;
right: 0;
bottom: 0;
margin: auto;
z-index: 100;
transition: 0.2s 0.2s ease-in;
transform: rotate(90deg);
}
.clock-container .clock-analog .second span, .clock-container .clock-analog .minute span, .clock-container .clock-analog .hour span {
position: absolute;
width: 20px;
height: 20px;
line-height: 20px;
text-align: center;
transform-origin: 50%;
z-index: 5;
}
.clock-container .clock-analog .second span:after, .clock-container .clock-analog .minute span:after, .clock-container .clock-analog .hour span:after {
content: '';
width: 4px;
height: 1px;
background: #000;
position: absolute;
left: 130%;
top: -10%;
opacity: 0.3;
}
.clock-container .clock-analog .second span:nth-child(5n + 2):after, .clock-container .clock-analog .minute span:nth-child(5n + 2):after, .clock-container .clock-analog .hour span:nth-child(5n + 2):after {
width: 7px;
opacity: 1;
left: 110%;
}
.clock-container .clock-analog .hour {
z-index: 150;
font-size: 32px;
font-weight: 400;
}
.clock-container .clock-analog .hour span:after {
opacity: 1;
width: 4px;
height: 1px;
color: #666;
transform: translate(5px, 12px);
}
.clock-container .clock-analog .hour:after {
content: '';
background: #fff;
position: absolute;
left: 50%;
top: 50%;
transform: translate(-50%, -50%);
width: 250px;
height: 250px;
border-radius: 50%;
box-shadow: 0 0 15px 2px rgba(0, 0, 0, 0.6) inset;
}
.clock-container .clock-analog .minute {
color: #fff;
font-size: 16px;
}
.clock-container .clock-analog .minute span:after {
background: #fff;
transform: translate(10px, -7px) rotate(-9deg);
}
.clock-container .clock-analog .minute:after {
content: '';
background: #333;
position: absolute;
left: 50%;
top: 50%;
transform: translate(-50%, -50%);
width: 350px;
height: 350px;
border-radius: 50%;
box-shadow: 0 0 25px 2px #000 inset;
}
.clock-container .clock-analog .second {
font-size: 12px;
}
.clock-container .clock-analog .second span:after {
transform: translate(5px, -10px);
}
.clock-container .clock-analog .dail {
width: 20px;
height: 20px;
position: absolute;
left: 0;
top: 0;
right: 0;
bottom: 0;
margin: auto;
z-index: 100;
}
.clock-container .clock-analog .dail span {
width: 20px;
height: 20px;
line-height: 20px;
transform-origin: 50%;
text-indent: 1000px;
overflow: hidden;
position: absolute;
}
.clock-container .clock-analog .dail span:after {
content: '';
position: absolute;
width: 4px;
height: 4px;
border-radius: 50%;
background-color: #7d7e7d;
*zoom: 1;
filter: progid:DXImageTransform.Microsoft.gradient(gradientType=1, startColorstr='#FF7D7E7D', endColorstr='#FF0E0E0E');
background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgeDE9IjAuMCIgeTE9IjAuNSIgeDI9IjEuMCIgeTI9IjAuNSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzdkN2U3ZCIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzBlMGUwZSIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JhZCkiIC8+PC9zdmc+IA==');
background-size: 100%;
background-image: linear-gradient(to right, #7d7e7d 0%, #0e0e0e 100%);
left: 50%;
top: 50%;
transform: translate(-50%, -50%);
}
.clock-container .clock-analog .dail span:nth-child(5n + 1):after {
width: 8px;
}
.clock-container .clock-digital {
position: absolute;
z-index: 200;
height: 444px;
width: 224px;
background: #090909;
left: 18px;
top: 18px;
border-radius: 220px 0 0 220px;
box-shadow: 5px 0 15px #000;
}
.clock-container .clock-digital:after {
content: '';
position: absolute;
border: 15px solid #8e0a0a;
border-right: none;
height: 400px;
width: 200px;
border-radius: 220px 0 0 220px;
left: 25px;
top: 25px;
}
.clock-container .clock-digital .time {
background: #111;
position: absolute;
right: 20px;
top: 50%;
transform: translateY(-50%);
color: #fff;
border-radius: 50px;
font-size: 20px;
padding: 2px 20px;
box-shadow: 0 0 15px #000 inset;
}
.clock-container .clock-digital .day {
background: #111;
position: absolute;
right: 20px;
bottom: 100px;
color: #fff;
border-radius: 20px;
box-shadow: 0 0 15px #000 inset;
padding: 2px 20px;
font-size: 16px;
}
.clock-container .clock-digital .date {
background: #111;
position: absolute;
right: 20px;
top: 100px;
color: #fff;
border-radius: 20px;
font-size: 16px;
box-shadow: 0 0 10px #000 inset;
padding: 2px 20px;
}</p>
   </style>
   <script src="jquery.min.js"></script>
</head>
<body>
<div class="clock-container">
  <div class="clock-digital">
    <div class="date"></div>
    <div class="time"></div>
    <div class="day"> </div>
  </div>
  <div class="clock-analog">
    <div class="spear"></div>
    <div class="hour"></div>
    <div class="minute"></div>
    <div class="second"></div>
    <div class="dail"></div>
  </div>
</div>
</body>
<script>
(function () {
    days = ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'];
<p>function getTime() {</p>
<pre><code>var date = new Date(),
  second = date.getSeconds(),
  minute = date.getMinutes(),
  hour = date.getHours(),
  time = date.toLocaleString('zh-CN', { hour: 'numeric', minute: 'numeric', hour12: true }),
  day = date.getDay(),
  month = date.getMonth() + 1,
  date = month + ' / ' + date.getDate()

  ds = second * -6,
  dm = minute * -6,
  dh = hour * -30;

$('.second').css('transform', 'rotate(' + ds + 'deg)');
$('.minute').css('transform', 'rotate(' + dm + 'deg)');
$('.hour').css('transform', 'rotate(' + dh + 'deg)');

$('.time').text(time);
$('.day').text(days[day]);
$('.date').text(date)
</code></pre>
<p>}</p>
<p>function dailer(selector, size) {
for (var s = 0; s &lt; 60; s++) {
$(selector).append('<span style="transform: rotate(' + 6 * s + 'deg) translateX(' + size + 'px)">' + s + '</span>')
}
}</p>
<p>dailer('.second', 195);
dailer('.minute', 145);
dailer('.dail', 230);</p>
<p>for (var s = 1; s &lt; 13; s++) {
$('.hour').append('<span style="transform: rotate(' + 30 * s + 'deg) translateX(100px)">' + s + '</span>')
}
setInterval(getTime, 1000);
getTime();</p>
<p>}());
</script></p>
</html>
<div style="break-before: page; page-break-before: always;"></div><!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0" />
  <link href='./crontab.css' rel='stylesheet' type='text/css'>
  <title>Crontab.guru - The cron schedule expression editor</title>
  <meta name="description" content="An easy to use editor for crontab schedules.">
  <!-- Facebook Pixel Code -->
  <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '1161891790822431');
    fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=1161891790822431&ev=PageView&noscript=1"
  /></noscript>
  <!-- End Facebook Pixel Code -->
  <!-- Twitter single-event website tag code -->
  <script src="./oct.js" type="text/javascript"></script>
  <script type="text/javascript">twttr.conversion.trackPid('o3opg', { tw_sale_amount: 0, tw_order_quantity: 0 });</script>
  <noscript>
  <img height="1" width="1" style="display:none;" alt="" src="https://analytics.twitter.com/i/adsct?txn_id=o3opg&p_id=Twitter&tw_sale_amount=0&tw_order_quantity=0" />
  <img height="1" width="1" style="display:none;" alt="" src="pages/crontab///t.co/i/adsct?txn_id=o3opg&p_id=Twitter&tw_sale_amount=0&tw_order_quantity=0" />
  </noscript>
  <!-- End Twitter single-event website tag code -->
</head>
<body>
<a href="pages/crontab//"><h1 id="crontab-guru"><a class="header" href="#crontab-guru">crontab guru</a></h1></a>
<div id="content">loading...</div>
<script src="./crontab.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51806867-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-51806867-2');
</script>
<script>
  document.addEventListener('DOMContentLoaded', window.main);
</script>
</body>
</html>
<div style="break-before: page; page-break-before: always;"></div><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>World Map with Clocks</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
        }
        #map {
            width: 100%;
            height: 100%;
            background: url('world-time-zone.jpg') no-repeat center center;
            background-size: contain; /* Changed from cover to contain */
            position: relative;
        }
        .city {
            position: absolute;
            cursor: pointer;
            color: red;
            font-weight: bold;
            text-shadow: 1px 1px 2px black;
            transform: translate(-50%, -50%);
        }
        .clock {
            color: yellow;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 5px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div id="map">
        <div class="city" id="hawaiian" style="top: 52vh; left: 2vw;">Hawaiian</div>
        <div class="city" id="vancouver" style="top: 34vh; left: 12vw;">Vancouver</div>
        <div class="city" id="new-york" style="top: 40vh; left: 26vw;">New York</div>
        <div class="city" id="london" style="top: 33vh; left: 46vw;">London</div>
        <div class="city" id="rome" style="top: 39vh; left: 50vw;">Rome</div>
        <div class="city" id="cairo" style="top: 46vh; left: 55vw;">Cairo</div>
        <div class="city" id="moscow" style="top: 30vh; left: 58vw;">Moscow</div>
        <div class="city" id="new-delhi" style="top: 45vh; left: 69vw;">New Delhi</div>
        <div class="city" id="beijing" style="top: 40vh; left: 79vw;">Beijing</div>
        <div class="city" id="shanghai" style="top: 45vh; left: 80vw;">Shanghai</div>
        <div class="city" id="manila" style="top: 55vh; left: 80vw;">Manila</div>
        <div class="city" id="tokyo" style="top: 43vh; left: 85vw;">Tokyo</div>
        <div class="city" id="sidney" style="top: 81vh; left: 88vw;">Sidney</div>
        <!-- Add more cities as needed -->
    </div>
    <script>
        const cities = [
            {id: 'hawaiian', timezone: 'Pacific/Honolulu'},
            {id: 'vancouver', timezone: 'America/Vancouver'},
            {id: 'new-york', timezone: 'America/New_York'},
            {id: 'london', timezone: 'Europe/London'},
            {id: 'rome', timezone: 'Europe/Rome'},
            {id: 'cairo', timezone: 'Africa/Cairo'},
            {id: 'moscow', timezone: 'Europe/Moscow'},
            {id: 'new-delhi', timezone: 'Asia/Kolkata'},
            {id: 'beijing', timezone: 'Asia/Shanghai'},
            {id: 'shanghai', timezone: 'Asia/Shanghai'},
            {id: 'manila', timezone: 'Asia/Shanghai'},
            {id: 'tokyo', timezone: 'Asia/Tokyo'},
            {id: 'sidney', timezone: 'Australia/Sydney'},
            // Add more cities and their respective timezones
        ];
<pre><code>    cities.forEach(city =&gt; {
        const cityElement = document.getElementById(city.id);
        cityElement.addEventListener('click', () =&gt; toggleClock(city));
    });

    function toggleClock(city) {
        const cityElement = document.getElementById(city.id);
        if (cityElement.querySelector('.clock')) {
            cityElement.querySelector('.clock').remove();
        } else {
            const clock = document.createElement('div');
            clock.className = 'clock';
            updateClock(clock, city.timezone);
            cityElement.appendChild(clock);
        }
    }

    function updateClock(clockElement, timezone) {
        const time = new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', timeZone: timezone });
        clockElement.textContent = time;
        setTimeout(() =&gt; updateClock(clockElement, timezone), 60000);
    }
&lt;/script&gt;
</code></pre>
</body>
</html>
<div style="break-before: page; page-break-before: always;"></div><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lego Set</title>
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
    <h1 id="lego-set"><a class="header" href="#lego-set">Lego Set</a></h1>
    <table>
        <thead>
            <tr>
                <th>Set Number</th>
                <th>Set Name</th>
                <th>Purchase Date</th>
                <th>Price</th>
                <th>Order</th>
            </tr>
        </thead>
        <tbody>
            <!-- Add more rows as needed latest top-->
            <tr>
                <td><a href="https://www.lego.com/">2856755</a></td>
                <td>
                    <div class="tooltip">
                        Standard small box of pieces - Multi-Purpose Rocket
                        <div class="tooltiptext">
                            <img src="pages/legoJ/image/mp-rocket.png" alt="Multi-Purpose Rocket">
                        </div>
                    </div>
                </td>
                <td>2025-02-08</td>
                <td>$12.99</td>
                <td>16</td>
            </tr>
            <tr>
                <td><a href="https://www.lego.com/en-ca/product/space-shuttle-31134">31134</a></td>
                <td>
                    <div class="tooltip">
                        Space Shuttle
                        <div class="tooltiptext">
                            <img src="pages/legoJ/image/31134.png" alt="Space Shuttle">
                        </div>
                    </div>
                </td>
                <td>2024-11-04</td>
                <td>$13.99</td>
                <td>15</td>
            </tr>
            <tr>
                <td><a href="https://www.lego.com/en-ca/product/lego-large-creative-brick-box-10698">10698</a></td>
                <td>
                    <div class="tooltip">
                        Icebreaker from Lego Classic Set
                        <div class="tooltiptext">
                            <img src="pages/legoJ/image/10698.png" alt="Icebreaker from Lego Classic Set">
                        </div>
                    </div>
                </td>
                <td>2024-10-11</td>
                <td>$0.00</td>
                <td>14</td>
            </tr>
            <tr>
                <td><a href="https://www.lego.com/en-ca/product/festival-calendar-40678">40678</a></td>
                <td>
                    <div class="tooltip">
                        Festival Calendar
                        <div class="tooltiptext">
                            <img src="pages/legoJ/image/40678.png" alt="Festival Calendar">
                        </div>
                    </div>
                </td>
                <td>2024-08-09</td>
                <td>$39.99</td>
                <td>13</td>
            </tr>
            <tr>
                <td><a href="https://www.lego.com/en-ca/product/mercedes-amg-f1-w14-e-performance-pull-back-42165">42165</a></td>
                <td>
                    <div class="tooltip">
                        Mercedes-AMG F1 W14 E Performance
                        <div class="tooltiptext">
                            <img src="pages/legoJ/image/42165.png" alt="Mercedes-AMG F1 W14 E Performance">
                        </div>
                    </div>
                </td>
                <td>2024-07-20</td>
                <td>$34.99</td>
                <td>12</td>
            </tr>
            <tr>
                <td><a href="https://www.lego.com/en-ca/product/nasa-mars-rover-perseverance-space-hoverbike-30682">30682</a></td>
                <td>
                    <div class="tooltip">
                        NASA Mars Rover Perseverance
                        <div class="tooltiptext">
                            <img src="pages/legoJ/image/30682.png" alt="NASA Mars Rover Perseverance">
                        </div>
                    </div>
                </td>
                <td>2024-07-06</td>
                <td>$5.99</td>
                <td>11</td>
            </tr>
            <tr>
                <td><a href="https://www.lego.com/">2856755</a></td>
                <td>
                    <div class="tooltip">
                        Standard small box of pieces - Police Station
                        <div class="tooltiptext">
                            <img src="pages/legoJ/image/xj-made.png" alt="Police Station">
                        </div>
                    </div>
                </td>
                <td>2024-06-15</td>
                <td>$12.99</td>
                <td>10</td>
            </tr>
            <tr>
                <td><a href="https://www.lego.com/en-ca/product/construction-steamroller-60401">60401</a></td>
                <td>
                    <div class="tooltip">
                        Construction Steamroller
                        <div class="tooltiptext">
                            <img src="pages/legoJ/image/60401.png" alt="Construction Steamroller">
                        </div>
                    </div>
                </td>
                <td>2024-05-27</td>
                <td>$13.99</td>
                <td>09</td>
            </tr>
            <tr>
                <td><a href="https://www.lego.com/en-ca/product/heavy-duty-bulldozer-42163">42163</a></td>
                <td>
                    <div class="tooltip">
                        Heavy-Duty Bulldozer
                        <div class="tooltiptext">
                            <img src="pages/legoJ/image/42163.png" alt="Heavy-Duty Bulldozer">
                        </div>
                    </div>
                </td>
                <td>2024-04-27</td>
                <td>$16.99</td>
                <td>08</td>
            </tr>
            <tr>
                <td><a href="https://www.lego.com/en-ca/product/mack-lr-electric-garbage-truck-42167">42167</a></td>
                <td>
                    <div class="tooltip">
                        Mack LR Electric Garbage Truck
                        <div class="tooltiptext">
                            <img src="pages/legoJ/image/42167.png" alt="Mack LR Electric Garbage Truck">
                        </div>
                    </div>
                </td>
                <td>2024-01-27</td>
                <td>$39.99</td>
                <td>07</td>
            </tr>
            <tr>
                <td><a href="https://www.lego.com/en-ca/product/arctic-explorer-truck-and-mobile-lab-60378">60378</a></td>
                <td>
                    <div class="tooltip">
                        Arctic Explorer Truck and Mobile Lab
                        <div class="tooltiptext">
                            <img src="pages/legoJ/image/60378.png" alt="Arctic Explorer Truck and Mobile Lab">
                        </div>
                    </div>
                </td>
                <td>2023-12-23</td>
                <td>$99.99</td>
                <td>06</td>
            </tr>
            <tr>
                <td><a href="https://www.lego.com/en-ca/product/electric-sports-car-60383">60383</a></td>
                <td>
                    <div class="tooltip">
                        Electric Sports Car
                        <div class="tooltiptext">
                            <img src="pages/legoJ/image/60383.png" alt="Electric Sports Car">
                        </div>
                    </div>
                </td>
                <td>2023-10-07</td>
                <td>$13.99</td>
                <td>05</td>
            </tr>
            <tr>
                <td><a href="https://www.lego.com/en-ca/product/arctic-explorer-snowmobile-60376">60376</a></td>
                <td>
                    <div class="tooltip">
                        Arctic Explorer Snowmobile
                        <div class="tooltiptext">
                            <img src="pages/legoJ/image/60376.png" alt="Arctic Explorer Snowmobile">
                        </div>
                    </div>
                </td>
                <td>2023-09-03</td>
                <td>$13.99</td>
                <td>04</td>
            </tr>
            <tr>
                <td><a href="https://www.lego.com/en-ca/product/fire-engine-10969">10969</a></td>
                <td>
                    <div class="tooltip">
                        Fire Truck
                        <div class="tooltiptext">
                            <img src="pages/legoJ/image/10969.png" alt="Fire Truck">
                        </div>
                    </div>
                </td>
                <td>2022-11-05</td>
                <td>$39.99</td>
                <td>03</td>
            </tr>
            <tr>
                <td><a href="https://www.lego.com/en-ca/product/fire-rescue-police-chase-60319">60319</a></td>
                <td>
                    <div class="tooltip">
                        Fire Rescue & Police Chase
                        <div class="tooltiptext">
                            <img src="pages/legoJ/image/60319.png" alt="Fire Rescue & Police Chase">
                        </div>
                    </div>
                </td>
                <td>2022-08-08</td>
                <td>$49.99</td>
                <td>02</td>
            </tr>
            <tr>
                <td><a href="https://www.lego.com/en-ca/product/cement-mixer-truck-60325">60325</a></td>
                <td>
                    <div class="tooltip">
                        Cement Mixer Truck
                        <div class="tooltiptext">
                            <img src="pages/legoJ/image/60325.png" alt="Cement Mixer Truck">
                        </div>
                    </div>
                </td>
                <td>2022-05-07</td>
                <td>$24.99</td>
                <td>01</td>
            </tr>
        </tbody>
    </table>
</body>
</html>
<div style="break-before: page; page-break-before: always;"></div><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lego Set</title>
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
    <h1 id="lego-set-1"><a class="header" href="#lego-set-1">Lego Set</a></h1>
    <table>
        <thead>
            <tr>
                <th>Set Number</th>
                <th>Set Name</th>
                <th>Purchase Date</th>
                <th>Price</th>
                <th>Order</th>
            </tr>
        </thead>
        <tbody>
            <!-- Add more rows as needed latest top-->
            <tr>
                <td><a href="https://www.lego.com/en-ca/product/spin-s-motorcycle-adventure-10424">10424</a></td>
                <td>
                    <div class="tooltip">
                        Spin's Motorcycle Adventure
                        <div class="tooltiptext">
                            <img src="pages/legoX/image/10424.png" alt="Spin's Motorcycle Adventure">
                        </div>
                    </div>
                </td>
                <td>2024-08-09</td>
                <td>$24.99</td>
                <td>01</td>
            </tr>
        </tbody>
    </table>
</body>
</html>
<div style="break-before: page; page-break-before: always;"></div><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recorded Progress</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1 id="recorded-progress"><a class="header" href="#recorded-progress">Recorded Progress</a></h1>
    <div class="container">
        <table>
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Weekday</th>
                    <th>Recorded Progress</th>
                    <th>Order</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>2024-10-24</td><td>Thursday</td><td>I got my birthday post need to be done and to prepare my speech in French.</td><td>0011</td></tr>
                <tr><td>2024-10-23</td><td>Wednesday</td><td>I learned "h" pronounce nothing and "ch" makes "shi" sound in French.</td><td>0010</td></tr>
                <tr><td>2024-10-18</td><td>Friday</td><td>I learned how to play a xylophone and a metallophone.</td><td>0009</td></tr>
                <tr><td>2024-10-17</td><td>Thursday</td><td>I learned what to do if earthquake happens.  Adrian got microscope set.</td><td>0008</td></tr>
                <tr><td>2024-10-16</td><td>Wednesday</td><td>Adrian started typing practice.</td><td>0007</td></tr>
                <tr><td>2024-10-15</td><td>Tuesday</td><td>I learned the difference between "a" and "e".</td><td>0006</td></tr>
                <tr><td>2024-10-11</td><td>Friday</td><td>I learned what to do if there is a fire.</td><td>0005</td></tr>
                <tr><td>2024-10-10</td><td>Thursday</td><td>I took the second position in Lego playing.</td><td>0004</td></tr>
                <tr><td>2024-10-09</td><td>Wednesday</td><td>I learned how to solve small to big fights.</td><td>0003</td></tr>
                <tr><td>2024-10-08</td><td>Tuesday</td><td>I learned music notes.</td><td>0002</td></tr>
                <tr><td>2024-10-07</td><td>Monday</td><td>I can write whole sentences in French.</td><td>0001</td></tr>
            </tbody>
        </table>
    </div>
</body>
</html>
<div style="break-before: page; page-break-before: always;"></div><h1 id="collections"><a class="header" href="#collections">Collections</a></h1>
<p>A collections of tools, services, websites.</p>
<ul>
<li><a href="collections/cli.html">CLI Tools</a></li>
<li><a href="collections/sass.html">SASS Tools</a></li>
<li><a href="collections/websites.html">Utility Websites</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cli-tools"><a class="header" href="#cli-tools">Cli Tools</a></h1>
<h2 id="dufs"><a class="header" href="#dufs"><a href="https://github.com/sigoden/dufs">dufs</a></a></h2>
<p>A file server that supports static serving, uploading, searching, accessing control, webdav...</p>
<h2 id="croc"><a class="header" href="#croc"><a href="https://github.com/schollz/croc">croc</a></a></h2>
<p>Easily and securely send things from one computer to another with cli</p>
<h2 id="frp"><a class="header" href="#frp"><a href="https://github.com/fatedier/frp">frp</a></a></h2>
<p>A proxy tools supports intranet penetration, port forwarding.</p>
<h2 id="rg"><a class="header" href="#rg"><a href="https://github.com/BurntSushi/ripgrep">rg</a></a></h2>
<p>A better grep</p>
<h2 id="webhookd"><a class="header" href="#webhookd"><a href="https://github.com/ncarlier/webhookd">webhookd</a></a></h2>
<p>Use shell scripts to handle webhook request.</p>
<h2 id="proxychains-ng"><a class="header" href="#proxychains-ng"><a href="https://github.com/rofl0r/proxychains-ng">proxychains-ng</a></a></h2>
<p>Run command with proxy network</p>
<h2 id="proxychains-windows"><a class="header" href="#proxychains-windows"><a href="https://github.com/shunf4/proxychains-windows">proxychains-windows</a></a></h2>
<p>Run command with proxy network in windows pc.</p>
<h2 id="mdbook"><a class="header" href="#mdbook"><a href="https://github.com/rust-lang/mdBook">mdbook</a></a></h2>
<p>Create book from markdown files.</p>
<h2 id="argc"><a class="header" href="#argc"><a href="https://github.com/sigoden/argc">argc</a></a></h2>
<p>Easily create and use cli that based on bashscript.</p>
<h2 id="projclean"><a class="header" href="#projclean"><a href="https://github.com/sigoden/projclean">projclean</a></a></h2>
<p>Find and clean dependencies &amp; builds from software projects to saving space.</p>
<h2 id="rclone"><a class="header" href="#rclone"><a href="https://github.com/rclone/rclone">rclone</a></a></h2>
<p>Rsync for cloud storage</p>
<h2 id="bat"><a class="header" href="#bat"><a href="https://github.com/sharkdp/bat">bat</a></a></h2>
<p>Cat with syntax highlight</p>
<h2 id="jless"><a class="header" href="#jless"><a href="https://github.com/PaulJuliusMartinez/jless">jless</a></a></h2>
<p>A command-line JSON viewer</p>
<h2 id="git-cliff"><a class="header" href="#git-cliff"><a href="https://github.com/orhun/git-cliff">git-cliff</a></a></h2>
<p>Create changelog from git commit.</p>
<h2 id="plantuml"><a class="header" href="#plantuml"><a href="https://github.com/plantuml/plantuml">plantuml</a></a></h2>
<p>Code as diagrams</p>
<h2 id="zellij"><a class="header" href="#zellij"><a href="https://github.com/zellij-org/zellij">zellij</a></a></h2>
<p>A terminal multiplexer similar to tmux.</p>
<h2 id="mcfly"><a class="header" href="#mcfly"><a href="https://github.com/cantino/mcfly">mcfly</a></a></h2>
<p>Search shell history</p>
<h2 id="zellij-1"><a class="header" href="#zellij-1"><a href="https://github.com/zellij-org/zellij">zellij</a></a></h2>
<p>Terminal multiplexer</p>
<h2 id="yq"><a class="header" href="#yq"><a href="https://github.com/mikefarah/yq">yq</a></a></h2>
<p>Process YAML, JSON, XML, CSV and properties documents from the CLI</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sass-tool"><a class="header" href="#sass-tool">Sass Tool</a></h1>
<h2 id="gogs"><a class="header" href="#gogs"><a href="https://github.com/gogs/gogs">gogs</a></a></h2>
<p>A painless self-hosted Git service</p>
<h2 id="minio"><a class="header" href="#minio"><a href="https://github.com/minio/minio">minio</a></a></h2>
<p>A self-hosted cloud storage compatible with aws s3</p>
<h2 id="meilisearch"><a class="header" href="#meilisearch"><a href="https://github.com/meilisearch/MeiliSearch">meilisearch</a></a></h2>
<p>A self-hosted search engine.</p>
<h2 id="gorse"><a class="header" href="#gorse"><a href="https://github.com/zhenghaoz/gorse">gorse</a></a></h2>
<p>A self-hosted recommand system.</p>
<h2 id="dtm"><a class="header" href="#dtm"><a href="https://github.com/yedf/dtm">dtm</a></a></h2>
<p>A self-hosted distributed transaction service supports saga, tcc, xa, 2-phase message, outbox patterns.</p>
<h2 id="centrifugo"><a class="header" href="#centrifugo"><a href="https://github.com/centrifugal/centrifugo">centrifugo</a></a></h2>
<p>A self-hosted scalable real-time messaging server.</p>
<h2 id="dynimgen"><a class="header" href="#dynimgen"><a href="https://github.com/sigoden/dynimgen">dynimgen</a></a></h2>
<p>A self-hosted dynamic image generator.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="utility-websites"><a class="header" href="#utility-websites">Utility Websites</a></h1>
<h2 id="amp-what"><a class="header" href="#amp-what"><a href="https://www.amp-what.com/">amp-what</a></a></h2>
<p>Discover Unicode Character Entities &amp; Symbols.</p>
<h2 id="webhooksite"><a class="header" href="#webhooksite"><a href="https://webhook.site/">webhook.site</a></a></h2>
<p>Test, process and transform HTTP requests.</p>
<h2 id="drawio"><a class="header" href="#drawio"><a href="https://app.diagrams.net/">draw.io</a></a></h2>
<p>Draw wireframes, support local storage, cloud storage.</p>
<h2 id="asciiflow"><a class="header" href="#asciiflow"><a href="https://asciiflow.com/">asciiflow</a></a></h2>
<p>Draw ascii diagrams.</p>
<h2 id="iconfontcn"><a class="header" href="#iconfontcn"><a href="https://www.iconfont.cn/">iconfont.cn</a></a></h2>
<p>Pick icons to create your own icon fonts.</p>
<h2 id="getimg"><a class="header" href="#getimg"><a href="https://getimg.co/">getimg</a></a></h2>
<p>Fast and Free Online Image Processing Tool.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="languages"><a class="header" href="#languages">Languages</a></h1>
<p>Some notes on programing languages.</p>
<ul>
<li><a href="languages/shell.html">Shell</a></li>
<li><a href="languages/rust.html">Rust</a></li>
<li><a href="languages/markdown.html">Markdown</a></li>
<li><a href="languages/nodejs.html">Nodejs</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="shell"><a class="header" href="#shell">Shell</a></h1>
<h2 id="variables"><a class="header" href="#variables">Variables</a></h2>
<pre><code class="language-sh"># Default value
echo ${value:-xa} # xa
value=xyz/ijk/abc
# Head
echo ${value%/*} # xyz/ijk
echo ${value%%/*} # xyz
# Tail
echo ${value#*/} # ijk/abc
echo ${value##*/} # abc
# Truncate
echo ${value:7} # /abc
echo ${value:7:4} # /abc
echo ${value:(-4):4} # /abc
# Replace
echo ${value/abc/cba} # xyz/cba
</code></pre>
<h2 id="shell-variables"><a class="header" href="#shell-variables">Shell Variables</a></h2>
<ul>
<li><code>$#</code>: count args</li>
<li><code>$n</code>: nth arg</li>
<li><code>$?</code>: last exit code</li>
<li><code>$!</code>: last pid</li>
</ul>
<h2 id="array"><a class="header" href="#array">Array</a></h2>
<pre><code class="language-sh">Fruits=('Apple' 'Banana' 'Orange' 'Pear')

echo ${Fruits[0]}           # Element #0
echo ${Fruits[-1]}          # Last element
echo ${Fruits[@]}           # All elements, space-separated
echo ${#Fruits[@]}          # Number of elements
echo ${#Fruits}             # String length of the 1st element
echo ${#Fruits[3]}          # String length of the Nth element
echo ${Fruits[@]:3:2}       # Range (from position 3, length 2)
echo ${!Fruits[@]}          # Keys of all elements, space-separated



Fruits=("${Fruits[@]}" "Grape")         # Push
Fruits+=('Watermelon')                  # Also Push
Fruits=( ${Fruits[@]/Ap*/} )            # Remove by regex match
unset Fruits[2]                         # Remove one item
Fruits=("${Fruits[@]}")                 # Duplicate
Fruits=("${Fruits[@]}" "${Veggies[@]}") # Concatenate

TempFiles=($(ls /tmp))

for i in "${Fruits[@]}"; do
  echo $i
done

if [[ " ${Fruits[*]} " =~ " Banana " ]]; then
  echo "Apple in Fruits"
fi
</code></pre>
<h2 id="dictionary"><a class="header" href="#dictionary">Dictionary</a></h2>
<pre><code class="language-sh">declare -A sounds

sounds[dog]="bark"
sounds[cow]="moo"
sounds[bird]="tweet"
sounds[wolf]="howl"

echo ${sounds[dog]} # Dog's sound
echo ${sounds[@]}   # All values
echo ${!sounds[@]}  # All keys
echo ${#sounds[@]}  # Number of elements
unset sounds[dog]   # Delete dog

# Value loop
for val in "${sounds[@]}"; do
  echo $val
done

# Key loop
for key in "${!sounds[@]}"; do
  echo $key
done
</code></pre>
<h2 id="condition"><a class="header" href="#condition">Condition</a></h2>
<h3 id="test"><a class="header" href="#test">test</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Code</th><th>Explain</th></tr></thead><tbody>
<tr><td><code>[[ -z STRING ]]</code></td><td>Empty string</td></tr>
<tr><td><code>[[ -n STRING ]]</code></td><td>Not empty string</td></tr>
<tr><td><code>[[ STRING == STRING ]]</code></td><td>Equal</td></tr>
<tr><td><code>[[ STRING != STRING ]]</code></td><td>Not equal</td></tr>
<tr><td><code>[[ STRING =~ STRING ]]</code></td><td>Regexp</td></tr>
<tr><td>-</td><td>-</td></tr>
<tr><td><code>[[ -e FILE ]]</code></td><td>Exists</td></tr>
<tr><td><code>[[ -d FILE ]]</code></td><td>Directory</td></tr>
<tr><td><code>[[ -f FILE ]]</code></td><td>File</td></tr>
<tr><td><code>[[ -x FILE ]]</code></td><td>Executable</td></tr>
<tr><td><code>[[ FILE1 -ef FILE2 ]]</code></td><td>Same files</td></tr>
<tr><td>-</td><td>-</td></tr>
<tr><td><code>[[ ! EXPR ]]</code></td><td>Not</td></tr>
<tr><td><code>[[ X &amp;&amp; Y ]]</code></td><td>And</td></tr>
<tr><td><code>[[ X || Y ]]</code></td><td>Or</td></tr>
</tbody></table>
</div>
<h3 id="if"><a class="header" href="#if">if</a></h3>
<pre><code class="language-sh">if [[ "foo" == "$1" ]]; then
  echo foo
elif [[ "bar" == "$1" ]]; then
  echo bar
else
  echo "not found"
  exit 1
fi
</code></pre>
<h3 id="case"><a class="header" href="#case">case</a></h3>
<pre><code class="language-sh">case "$1" in
  start | up)
    vagrant up
    ;;
  stop | down)
    vagrant up
    ;;

  *)
    echo "Usage: $0 {start|stop}"
    ;;
esac
</code></pre>
<h3 id="exitcode"><a class="header" href="#exitcode">exitcode</a></h3>
<pre><code class="language-sh">if grep -q 'alice' /etc/passwd; then
  echo "User alice exists"
fi
</code></pre>
<h2 id="loop"><a class="header" href="#loop">Loop</a></h2>
<pre><code class="language-sh">
# index
for i in `seq 1 10`; do
  echo $i 
done

for i in `seq 1 2 10`; do
  echo $i
done

# fs
for f in ./*; do
  echo $f
done

# array
arr=( a b c )
for v in ${arr[@]}; do
  echo $v
done

# lines
cat file.txt | while read l; do
  echo $l
done

# forever
while true; do
  sleep 1
done
</code></pre>
<h2 id="function"><a class="header" href="#function">Function</a></h2>
<p>Returns value</p>
<pre><code class="language-sh">foo() {
    local msg='world'
    echo "$1 $msg"
}
result="$(foo hello)"
echo $result
</code></pre>
<p>Returns boolean</p>
<pre><code class="language-sh">_is_win() {
    if [[ "$(uname)" =~ "_NT" ]]; then
        return 0
    else
        return 1
    fi
}

if _is_win; then
  echo 'windows'
fi
</code></pre>
<h2 id="value"><a class="header" href="#value">Value</a></h2>
<h3 id="condition-1"><a class="header" href="#condition-1">Condition</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Code</th><th>Explain</th></tr></thead><tbody>
<tr><td><code>[[ NUM -eq NUM ]]</code></td><td>Equal</td></tr>
<tr><td><code>[[ NUM -ne NUM ]]</code></td><td>Not equal</td></tr>
<tr><td><code>[[ NUM -lt NUM ]]</code></td><td>Less than</td></tr>
<tr><td><code>[[ NUM -le NUM ]]</code></td><td>Less than or equal</td></tr>
<tr><td><code>[[ NUM -gt NUM ]]</code></td><td>Greater than</td></tr>
<tr><td><code>[[ NUM -ge NUM ]]</code></td><td>Greater than or equal</td></tr>
<tr><td><code>(( NUM &lt; NUM ))</code></td><td>Numeric conditions</td></tr>
</tbody></table>
</div>
<h3 id="math"><a class="header" href="#math">Math</a></h3>
<pre><code class="language-sh">a=$(($RANDOM%200))  # Random number 0..199
$((a + 200))        # Add 200 to $a
</code></pre>
<h2 id="redirect"><a class="header" href="#redirect">Redirect</a></h2>
<ul>
<li><code>&gt;</code>: equal to  <code>1&gt;</code></li>
<li><code>1&gt;&amp;2</code>： redirect stdout to stderr</li>
<li><code>2&gt;&amp;1</code>： redirect stderr to stdout</li>
<li><code>&gt;&amp; file</code>: redirect stdout/stderr to file</li>
</ul>
<h2 id="heredoc"><a class="header" href="#heredoc">Heredoc</a></h2>
<pre><code class="language-sh">cat &lt;&lt; EOF | sudo tee -a /etc/sudoers.d/$USER
$USER ALL=(ALL) NOPASSWD:ALL
EOF 
</code></pre>
<ul>
<li><code>&lt;&lt;EOF</code>: will replace variable</li>
<li><code>&lt;&lt;'EOF'</code>: not replace variable</li>
<li><code>&lt;&lt;-EOF</code>: will replace variable trim <code>\t</code></li>
<li><code>&lt;&lt;-'EOF'</code>: not replace variable，trim <code>\t</code></li>
</ul>
<h2 id="yesno"><a class="header" href="#yesno">Yes/No</a></h2>
<pre><code class="language-sh">read -p "Are you sure (y/n)? " choice
if [ "$choice" = "y" ]; then
  echo choice yes
fi
</code></pre>
<h2 id="common-tools"><a class="header" href="#common-tools">Common Tools</a></h2>
<ul>
<li>Character related: find/sed/awk</li>
<li>Network related: curl/wget</li>
<li>Argument parser related: getopt/<a href="https://github.com/sigoden/argc">argc</a></li>
<li>JSON/YAML/TOML related: <a href="https://github.com/jqlang/jq">jq</a>/<a href="https://github.com/mikefarah/yq">yq</a></li>
<li>Interative related: <a href="https://github.com/charmbracelet/gum">gum</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust"><a class="header" href="#rust">Rust</a></h1>
<h2 id="installation"><a class="header" href="#installation">Installation</a></h2>
<pre><code class="language-sh">curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
</code></pre>
<h2 id="rustup"><a class="header" href="#rustup">Rustup</a></h2>
<h3 id="concepts"><a class="header" href="#concepts">Concepts</a></h3>
<ul>
<li>target: <code>x86_64-pc-windows-msvc</code>, <code>x86_64-unknown-linux-gnu</code>, <code>wasm32-unknown-unknown</code></li>
<li>toolchain: <code>stable-x86_64-pc-windows-msvc</code>, <code>nightly-2021-05-11-x86_64-unknown-linux-gnu</code></li>
<li>component: <code>rustc</code>,<code>rustsrc</code>,<code>rustfmt</code>, <code>rust-analyzer</code></li>
</ul>
<h3 id="snippets"><a class="header" href="#snippets">Snippets</a></h3>
<pre><code class="language-sh">rustup update 

rustup toolchain install nightly

rustup target add wasm32-unknown-unknown --toolchain nightly

rustup default nightly

rustup override set nightly
</code></pre>
<h2 id="crates"><a class="header" href="#crates">Crates</a></h2>
<ul>
<li><a href="https://docs.rs/tokio">tokio</a>: Async</li>
<li><a href="https://docs.rs/crossbeam">crossbeam</a>: Concurrency</li>
<li><a href="https://docs.rs/rayon">rayon</a>: Concurrency computation</li>
<li><a href="https://docs.rs/axum">axum</a>: web framework</li>
<li><a href="https://docs.rs/poem">poem</a>: web framework，supports openapi</li>
<li><a href="https://docs.rs/sqlx">sqlx</a>: sql</li>
<li><a href="https://docs.rs/sea-orm">sea-orm</a>: orm</li>
<li><a href="https://docs.rs/reqwest">reqwest</a>: http client</li>
<li><a href="https://docs.rs/anyhow">anyhow</a>: generic error framework</li>
<li><a href="https://docs.rs/thiserror">thiserror</a>: library error framework</li>
<li><a href="https://docs.rs/clap">clap</a>: cli framework</li>
<li><a href="https://docs.rs/nom">nom</a>: bytes/charactor parser</li>
<li><a href="https://docs.rs/assert_cmd">assert_cmd</a>: cli test framework</li>
<li><a href="https://docs.rs/insta">insta</a>: snapshot test framework</li>
</ul>
<h2 id="cargo"><a class="header" href="#cargo">Cargo</a></h2>
<h3 id="plugins"><a class="header" href="#plugins">Plugins</a></h3>
<ul>
<li><a href="https://github.com/kbknapp/cargo-outdated">cargo-outdated</a>: Displaying when dependencies have newer versions available.</li>
<li><a href="https://github.com/RustSec/rustsec/tree/main/cargo-audit">cargo-audit</a>: Audit your dependencies for crates with security vulnerabilities.</li>
<li><a href="https://github.com/est31/cargo-udeps">cargo-udeps</a>: Find unused dependencies in Cargo.toml</li>
<li><a href="https://github.com/RazrFalcon/cargo-bloat">cargo-bloat</a>: Find out what takes most of the space in your executable.</li>
<li><a href="https://github.com/rust-fuzz/cargo-fuzz">cargo-fuzz</a>: Fuzzing with libFuzzer</li>
<li><a href="https://github.com/mitsuhiko/insta">cargo-insta</a>: Snapshot testing</li>
<li><a href="https://github.com/cargo-bins/cargo-binstall">cargo-binstall</a>: Binary installation for rust projects</li>
<li><a href="https://github.com/rust-secure-code/cargo-geiger">cargo-geiger</a>: Detects usage of unsafe Rust in a Rust crate and its dependencies.</li>
</ul>
<h3 id="snippets-1"><a class="header" href="#snippets-1">Snippets</a></h3>
<pre><code class="language-sh">cargo add serde
cargo add serde -F derive
cargo add -D serde
cargo add -B serde

cargo tree
cargo tree -p libc
cargo tree -p libc -i
</code></pre>
<h3 id="cargotoml"><a class="header" href="#cargotoml">Cargo.toml</a></h3>
<pre><code class="language-sh">[profile.release]
lto = true
strip = true
opt-level = "z"
</code></pre>
<h2 id="resources"><a class="header" href="#resources">Resources</a></h2>
<ul>
<li><a href="https://cheats.rs/">Rust Language Cheat Sheet</a></li>
<li><a href="https://doc.rust-lang.org/rust-by-example">Rust by Example</a></li>
<li><a href="https://rust-unofficial.github.io/patterns/intro.html">Rust Design Patterns</a></li>
<li><a href="https://marabos.nl/atomics/">Rust Atomics and Locks</a></li>
<li><a href="https://github.com/erikgrinaker/toydb">learn project: toydb</a></li>
<li><a href="https://github.com/tokio-rs/mini-redis">learn project: mini-redis</a></li>
<li><a href="https://rust-lang.github.io/api-guidelines/about.html">Rust API Guidelines</a></li>
<li><a href="https://github.com/pretzelhammer/rust-blog">pretzelhammer Blog</a></li>
<li><a href="https://www.youtube.com/channel/UC_iD0xppBwwsrM9DegC5cQQ">Jon Gjengset Youtube</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="markdown"><a class="header" href="#markdown">Markdown</a></h1>
<h2 id="heading"><a class="header" href="#heading">Heading</a></h2>
<h3 id="heading3"><a class="header" href="#heading3">Heading3</a></h3>
<h4 id="heading4"><a class="header" href="#heading4">Heading4</a></h4>
<h5 id="heading5"><a class="header" href="#heading5">Heading5</a></h5>
<h2 id="text-style"><a class="header" href="#text-style">Text Style</a></h2>
<p><strong>bold text</strong></p>
<p><em>italicized text</em></p>
<blockquote>
<p>blockquote</p>
</blockquote>
<h2 id="ordered-list"><a class="header" href="#ordered-list">Ordered List</a></h2>
<ol>
<li>First item</li>
<li>Second item</li>
<li>Third item</li>
</ol>
<h2 id="unordered-list"><a class="header" href="#unordered-list">Unordered List</a></h2>
<ul>
<li>First item</li>
<li>Second item</li>
<li>Third item</li>
</ul>
<h2 id="code"><a class="header" href="#code">Code</a></h2>
<p><code>Inline code</code> with backticks</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Debug)]
pub enum State {
    Start,
    Transient,
    Closed,
}

impl From&lt;&amp;'a str&gt; for State {
    fn from(s: &amp;'a str) -&gt; Self {
        match s {
            "start" =&gt; State::Start,
            "closed" =&gt; State::Closed,
            _ =&gt; unreachable!(),
        }
    }
}
<span class="boring">}</span></code></pre></pre>
<h2 id="link"><a class="header" href="#link">Link</a></h2>
<p><a href="http://a.com">Link</a></p>
<h2 id="image"><a class="header" href="#image">Image</a></h2>
<p><img src="https://dummyimage.com/200x100/e0e0e0" alt="Image" /></p>
<h2 id="horizontal-rule"><a class="header" href="#horizontal-rule">Horizontal Rule</a></h2>
<hr />
<h2 id="autolink-literals"><a class="header" href="#autolink-literals">Autolink literals</a></h2>
<p>www.example.com, https://example.com, and contact@example.com.</p>
<h2 id="footnote"><a class="header" href="#footnote">Footnote</a></h2>
<p>A note<sup class="footnote-reference"><a href="#1">1</a></sup></p>
<div class="footnote-definition" id="1"><sup class="footnote-definition-label">1</sup>
<p>Big note.</p>
</div>
<h2 id="strikethrough"><a class="header" href="#strikethrough">Strikethrough</a></h2>
<p><del>one</del> or <del>two</del> tildes.</p>
<h2 id="table"><a class="header" href="#table">Table</a></h2>
<div class="table-wrapper"><table><thead><tr><th>a</th><th style="text-align: left">b</th><th style="text-align: right">c</th><th style="text-align: center">d</th></tr></thead><tbody>
<tr><td>1</td><td style="text-align: left">2</td><td style="text-align: right">3</td><td style="text-align: center">4</td></tr>
</tbody></table>
</div>
<h2 id="tasklist"><a class="header" href="#tasklist">Tasklist</a></h2>
<ul>
<li><input disabled="" type="checkbox"/>
to do</li>
<li><input disabled="" type="checkbox" checked=""/>
done</li>
</ul>
<h2 id="math-1"><a class="header" href="#math-1">Math</a></h2>
<p>$E = mc^2 + 2$</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="nodejs"><a class="header" href="#nodejs">Nodejs</a></h1>
<h2 id="installation-1"><a class="header" href="#installation-1">Installation</a></h2>
<pre><code class="language-sh">curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash

nvm i --lts

nvm i --lts --reinstall-packages-from=node
</code></pre>
<h2 id=""><a class="header" href="#"></a></h2>
<div class="table-wrapper"><table><thead><tr><th>name</th><th>explain</th></tr></thead><tbody>
<tr><td>npm-check-updates</td><td>check updates</td></tr>
<tr><td>pkg</td><td>pack as single executable</td></tr>
<tr><td>pm2</td><td>process managment</td></tr>
<tr><td>zx</td><td>js like bash</td></tr>
<tr><td>prettier</td><td>code style</td></tr>
<tr><td>yargs</td><td>cli framework</td></tr>
<tr><td>leran</td><td>monorepo</td></tr>
</tbody></table>
</div>
<h2 id="npm"><a class="header" href="#npm">NPM</a></h2>
<pre><code class="language-sh"># list all packages
npm ls -g --depth=0
# init projects
npm i -y
</code></pre>
<h2 id="run-node-service"><a class="header" href="#run-node-service">Run node service</a></h2>
<ol>
<li>Use pm2</li>
</ol>
<pre><code class="language-sh">pm2 start --name app npm start
</code></pre>
<ol start="2">
<li>Use systemd</li>
</ol>
<pre><code>[Unit]
After=network.target

[Service]
Environment=NODE_PORT=3000
Type=simple
User=ubuntu
ExecStart=/usr/bin/node /home/ubuntu/app.js
Restart=on-failure

[Install]
WantedBy=multi-user.target
</code></pre>
<pre><code>sudo cp app.service /etc/systemd/system/
sudo systemd daemon-reload
sudo systemd start app
</code></pre>
<ol start="3">
<li>Use docker</li>
</ol>
<pre><code class="language-Dockerfile">FROM sigoden/node:native as builder
WORKDIR /app
COPY package.json package-lock.json ./
RUN npm ci --prod

FROM sigoden/node:slim
WORKDIR /app
COPY --from=builder /app .
COPY . .
EXPOSE 3000
CMD ["node", "index.js"]
</code></pre>
<h2 id="native-addon"><a class="header" href="#native-addon">Native addon</a></h2>
<ol>
<li>INstall deps like gcc, make, python</li>
</ol>
<pre><code class="language-sh"># ubuntu
apt install build-essential

# alpine
apk add make gcc g++ python3 git
</code></pre>
<ol start="2">
<li>Test native addon</li>
</ol>
<pre><code>npm i --build-from-source bcrypt
</code></pre>
<h2 id="es-features"><a class="header" href="#es-features">ES features</a></h2>
<p><a href="https://node.green">https://node.green</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tools"><a class="header" href="#tools">Tools</a></h1>
<p>Some notes on tools.</p>
<ul>
<li><a href="tools/docker.html">Docker</a></li>
<li><a href="tools/git.html">Git</a></li>
<li><a href="tools/github-ci.html">Github CI</a></li>
<li><a href="tools/linux.html">Linux</a></li>
<li><a href="tools/redis.html">Redis</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="docker"><a class="header" href="#docker">Docker</a></h1>
<h2 id="installation-2"><a class="header" href="#installation-2">Installation</a></h2>
<pre><code class="language-sh">curl -fsSL get.docker.com | sudo bash
</code></pre>
<h2 id="none-root"><a class="header" href="#none-root">None-Root</a></h2>
<pre><code class="language-sh">sudo usermod -aG docker $USER
</code></pre>
<h2 id="snippets-2"><a class="header" href="#snippets-2">Snippets</a></h2>
<pre><code class="language-sh"># Run container then enter shell
docker run -it --rm -v `pwd`/data:/data -p 3000:3000 node:16 bash

# Run container as service
docker run -d --name redis -p 6379:6379 redis:5

# Exec in container
docker exec -it redis bash
docker exec redis bash -c 'redis-cli set k1 a &amp;&amp; redis-cli get k1'

# View log
docker logs --tail 50 -f redis

# Clean
docker system prune -f

# Clean dead images
docker rmi $(docker images --filter "dangling=true" -q --no-trunc)
</code></pre>
<h2 id="use-mirror"><a class="header" href="#use-mirror">Use Mirror</a></h2>
<ul>
<li>WIN: Docker Desktop -&gt; Preferences -&gt; Docker Engine</li>
<li>LINUX: /etc/docker/daemon.json</li>
</ul>
<pre><code class="language-json">{
    "registry-mirrors": ["https://docker.mirrors.ustc.edu.cn"]
}
</code></pre>
<h2 id="dockerfile"><a class="header" href="#dockerfile">Dockerfile</a></h2>
<h3 id="copy-vs-add"><a class="header" href="#copy-vs-add">COPY vs ADD</a></h3>
<ul>
<li><code>ADD</code> copy files, download remote resources, handle zip/tar.gz</li>
<li><code>COPY</code> only copy local files</li>
</ul>
<p>Do not use <code>ADD</code> unless <code>COPY</code> not works.</p>
<pre><code class="language-DOckerfile">ADD /source/file/path  /destination/path
ADD http://source.file/url  /destination/path
ADD source.file.tar.gz /destination

COPY /source/file/path  /destination/path
</code></pre>
<h3 id="entrypoint-vs-cmd"><a class="header" href="#entrypoint-vs-cmd">ENTRYPOINT vs CMD</a></h3>
<ul>
<li>No ENTRYPOINT</li>
</ul>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Cmd</th><th style="text-align: left">Effect</th></tr></thead><tbody>
<tr><td style="text-align: left"></td><td style="text-align: left">error, not allowed</td></tr>
<tr><td style="text-align: left">CMD ["c1"]</td><td style="text-align: left">c1</td></tr>
<tr><td style="text-align: left">CMD c1</td><td style="text-align: left">/bin/sh -c c1</td></tr>
</tbody></table>
</div>
<ul>
<li>ENTRYPOINT e1</li>
</ul>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Cmd</th><th style="text-align: left">Effect</th></tr></thead><tbody>
<tr><td style="text-align: left"></td><td style="text-align: left">/bin/sh -c e1</td></tr>
<tr><td style="text-align: left">CMD ["c1"]</td><td style="text-align: left">/bin/sh -c e1</td></tr>
<tr><td style="text-align: left">CMD c1</td><td style="text-align: left">/bin/sh -c e1</td></tr>
</tbody></table>
</div>
<ul>
<li>ENTRYPOINT ["e1"]</li>
</ul>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Cmd</th><th style="text-align: left">Effect</th></tr></thead><tbody>
<tr><td style="text-align: left"></td><td style="text-align: left">e1</td></tr>
<tr><td style="text-align: left">CMD ["c1"]</td><td style="text-align: left">e1 c1</td></tr>
<tr><td style="text-align: left">CMD c1</td><td style="text-align: left">e1 /bin/sh -c e1</td></tr>
</tbody></table>
</div>
<h3 id="conconcate-commands"><a class="header" href="#conconcate-commands">Conconcate commands</a></h3>
<pre><code class="language-Dockerfile">RUN set -ex \
    # comment
    &amp;&amp; apt-get update &amp;&amp; apt-get install -y curl --no-install-recommends \
    &amp;&amp; rm -rf /var/lib/apt/lists/* 
</code></pre>
<h3 id="layers"><a class="header" href="#layers">Layers</a></h3>
<pre><code class="language-Dockerfile">FROM sigoden/node:native as builder
WORKDIR /app
COPY package.json package-lock.json ./
RUN npm ci --prod

FROM sigoden/node:slim
WORKDIR /app
COPY --from=builder /app .
COPY . .
EXPOSE 3000
CMD ["node", "index.js"]
</code></pre>
<h3 id="heredoc-1"><a class="header" href="#heredoc-1">Heredoc</a></h3>
<pre><code class="language-Dockerfile">RUN printf '#!/bin/bash\n\
echo 1\n\
echo 2'\
&gt;&gt; /tmp/hello
</code></pre>
<h3 id="enrypoint-file"><a class="header" href="#enrypoint-file">Enrypoint file</a></h3>
<pre><code class="language-sh">#!/bin/sh
set -e

if [ "${1#-}" != "${1}" ] || [ -z "$(command -v "${1}")" ]; then
  set -- app "$@" # change app to your binary
fi

exec "$@"
</code></pre>
<h3 id="normal-user"><a class="header" href="#normal-user">Normal User</a></h3>
<pre><code class="language-Dockerfile">RUN groupadd --gid 1000 user \
  &amp;&amp; useradd --uid 1000 --gid user --shell /bin/bash --create-home user
</code></pre>
<h3 id="multi-arch-build"><a class="header" href="#multi-arch-build">Multi-Arch Build</a></h3>
<pre><code>docker buildx create --name mybuilder --driver docker-container
docker buildx use mybuilder
</code></pre>
<pre><code>docker buildx build \
  --platform linux/amd64,linux/arm64,linux/arm/v7,linux/386 \
  -t demo . 
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="git"><a class="header" href="#git">Git</a></h1>
<h2 id="stages"><a class="header" href="#stages">Stages</a></h2>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">CMD</th><th style="text-align: left">NOTE</th><th style="text-align: center">UNCHANGED</th><th style="text-align: center">CHANGED</th><th style="text-align: center">STAGED</th><th style="text-align: center">COMMITTED</th></tr></thead><tbody>
<tr><td style="text-align: left">git commit</td><td style="text-align: left">commit files</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">|---</td><td style="text-align: center">-------&gt;</td></tr>
<tr><td style="text-align: left">git reset --soft HEAD^</td><td style="text-align: left">undo commit files</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">&lt;----</td><td style="text-align: center">------|</td></tr>
<tr><td style="text-align: left">git add file</td><td style="text-align: left">add file to stage</td><td style="text-align: center"></td><td style="text-align: center">|---</td><td style="text-align: center">----&gt;</td><td style="text-align: center"></td></tr>
<tr><td style="text-align: left">git add .</td><td style="text-align: left">add all files to stage</td><td style="text-align: center"></td><td style="text-align: center">|---</td><td style="text-align: center">----&gt;</td><td style="text-align: center"></td></tr>
<tr><td style="text-align: left">git reset -- file</td><td style="text-align: left">unstaged file</td><td style="text-align: center"></td><td style="text-align: center">&lt;----</td><td style="text-align: center">---|</td><td style="text-align: center"></td></tr>
<tr><td style="text-align: left">git reset</td><td style="text-align: left">unsatged all files</td><td style="text-align: center"></td><td style="text-align: center">&lt;----</td><td style="text-align: center">---|</td><td style="text-align: center"></td></tr>
<tr><td style="text-align: left">git checkout -- file</td><td style="text-align: left">unchanged file</td><td style="text-align: center">&lt;-----</td><td style="text-align: center">---|</td><td style="text-align: center"></td><td style="text-align: center"></td></tr>
<tr><td style="text-align: left">git checkout -f</td><td style="text-align: left">unchanged all files</td><td style="text-align: center">&lt;-----</td><td style="text-align: center">---|</td><td style="text-align: center"></td><td style="text-align: center"></td></tr>
</tbody></table>
</div>
<h2 id="clone"><a class="header" href="#clone">Clone</a></h2>
<pre><code class="language-sh"># branch
git clone -b dev https://github.com/org/repo.git
# target folder
git clone https://github.com/org/repo.git myrepo 
# contains submodule
git clone --recurse-submodules https://github.com/org/repo.git
# abaddon history
git clone --depth=1 https://github.com/org/repo.git
</code></pre>
<h2 id="branch"><a class="header" href="#branch">Branch</a></h2>
<pre><code class="language-sh"># list branches
git branch
# list remote branches
git branch -r
# list all branches
git branch -a
# create branch
git checkout -b feat1
# rename a branch
git branch -m newname
# checkout branch
git checkout feat1
# checkout remote branch
git checkout -t origin/dev
# delete branch
git branch -d feat1
# delete branch forcedly
git branch -D feat1
# delete branch of remote repo
git push origin :feat1
</code></pre>
<h2 id="tag"><a class="header" href="#tag">Tag</a></h2>
<pre><code class="language-sh"># list tags
git tag
# create tag
git tag v1.0.0
# delete tag
git tag -d v1.0.0
# delete tag forcedly
git tag -D v1.0.0
# delete tag of remote repo
git push origin :v1.0.0
</code></pre>
<h2 id="fetch"><a class="header" href="#fetch">Fetch</a></h2>
<pre><code class="language-sh"># pull changes
git fetch
# pull github pr
git fetch origin pull/ID/head:BRANCH_NAME
# pull changes and prune none-exist remote branches
git fetch --purge
</code></pre>
<h2 id="snippets-3"><a class="header" href="#snippets-3">Snippets</a></h2>
<pre><code class="language-sh"># merge last commit
git commit --amend
# sync submodule
git submodule update --init --recursive
# inspect remote url
git remote -v
# change remote url
git remote set-url origin $new_repo
</code></pre>
<h2 id="config"><a class="header" href="#config">Config</a></h2>
<h3 id="user"><a class="header" href="#user">User</a></h3>
<pre><code class="language-sh">git config --global user.name $user
git config --global user.email $email
</code></pre>
<h3 id="ignore"><a class="header" href="#ignore">Ignore</a></h3>
<pre><code># linux/macos
git config --global core.excludesFile '~/.gitignore'
# windows
git config --global core.excludesFile "$env:USERPROFILE\.gitignore"
</code></pre>
<h3 id="cjk-path"><a class="header" href="#cjk-path">Cjk path</a></h3>
<pre><code>git config --global core.quotepath false
</code></pre>
<h3 id="crlf"><a class="header" href="#crlf">CRLF</a></h3>
<pre><code class="language-sh">git config --global core.eol lf
git config --global core.autocrlf input
</code></pre>
<h2 id="credentials"><a class="header" href="#credentials">Credentials</a></h2>
<h3 id="wsl2"><a class="header" href="#wsl2">WSL2</a></h3>
<pre><code class="language-sh">git config --global credential.helper \
  "/mnt/c/Program\\ Files/Git/mingw64/bin/git-credential-manager.exe"
</code></pre>
<h2 id="ssh-repo"><a class="header" href="#ssh-repo">SSH Repo</a></h2>
<pre><code class="language-sh">sudo useradd -m -r -U -d /home/git-repos git
sudo su - git

mkdir -p ~/.ssh
chmod 700 ~/.ssh
chmod 600 ~/.ssh/authorized_keys
touch ~/.ssh/authorized_keys

git init --bare ~/repo.git
</code></pre>
<pre><code class="language-sh">git remote add origin git@&lt;your-server-ip&gt;:repo.git
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="github-ci"><a class="header" href="#github-ci">Github CI</a></h1>
<h2 id="triggers"><a class="header" href="#triggers">Triggers</a></h2>
<pre><code class="language-yaml">on: 
  push:
    tags: 
      - v[0-9]+.[0-9]+.[0-9]+*

on
  push:
    branches:
    - main
  pull_request:

on:
  workflow_dispatch:
  schedule:
    - cron:  '0 2 * * *'
</code></pre>
<h2 id="environment-variables"><a class="header" href="#environment-variables">Environment Variables</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Explain</th></tr></thead><tbody>
<tr><td><code>CI</code></td><td><code>true</code>，detect CI environment</td></tr>
<tr><td><code>GITHUB_REPOSITORY</code></td><td>owner/name，e.g. <code>nodejs/node</code></td></tr>
<tr><td><code>GITHUB_REF</code></td><td>tag or branch, <code>refs/tags/v1.0.0</code></td></tr>
<tr><td><code>RUNNER_OS</code></td><td>os info, e.g. <code>Linux</code>, <code>Windows</code>, <code>macOS</code>.</td></tr>
</tbody></table>
</div>
<pre><code class="language-yaml">jobs:
  job1:
    runs-on: ubuntu-latest
    env:
      FOO: foo
    steps:
      - if: ${{ env.FOO == 'foo' }}
        run: echo "$BAR"
        env:
          BAR: bar
</code></pre>
<h2 id="debug-tips"><a class="header" href="#debug-tips">Debug Tips</a></h2>
<h3 id="print-all-environment-variables"><a class="header" href="#print-all-environment-variables">Print all environment variables</a></h3>
<pre><code class="language-yaml">    steps:
      - run: env
</code></pre>
<h3 id="print-github-variables"><a class="header" href="#print-github-variables">Print github variables</a></h3>
<pre><code class="language-yaml">    steps:
      - run: echo "$GITHUB_CONTEXT"
        env:
          GITHUB_CONTEXT: ${{ toJSON(github) }}
</code></pre>
<h3 id="print-shell-evalutaion"><a class="header" href="#print-shell-evalutaion">Print shell evalutaion</a></h3>
<pre><code class="language-yaml">    steps:
      - run: |
          set -x 

          src=`pwd`
          dist=$src/dist
        shell: bash
</code></pre>
<h3 id="ssh-into-runner"><a class="header" href="#ssh-into-runner">ssh into runner</a></h3>
<pre><code class="language-yaml">    steps:
    - name: Setup upterm session
      uses: lhotari/action-upterm@v1
</code></pre>
<p>RUNNER will log:</p>
<pre><code>=== S1WV8GFLUQTD7SN7TAKM                                                                 
Command:                tmux new -s upterm -x 132 -y 43                                 
Force Command:          tmux attach -t upterm                                           
Host:                   ssh://uptermd.upterm.dev:22                                     
SSH Session:            ssh s1wv8gfLuqTd7sn7taKm:MTAuMjQ0LjAuNzY6MjI=@uptermd.upterm.dev
</code></pre>
<h2 id="get-tag-info"><a class="header" href="#get-tag-info">Get Tag info</a></h2>
<pre><code class="language-yaml">jobs:
  release:
    outputs:
      rc: ${{ steps.check-tag.outputs.rc }}
    steps:
      - name: Get Tag
        id: get_tag
        shell: bash
        run: |
          tag=${GITHUB_REF##*/}
          if [[ "$tag" =~ [0-9]+.[0-9]+.[0-9]+$ ]]; then
            echo "rc=false" &gt;&gt; $GITHUB_OUTPUT
          else
            echo "rc=true" &gt;&gt; $GITHUB_OUTPUT
          fi
</code></pre>
<h2 id="add-environment-variable"><a class="header" href="#add-environment-variable">Add environment variable</a></h2>
<pre><code class="language-yaml">jobs:
  job1:
    steps:
      - name: Set env var
        run: |
          echo "foo=bar" &gt;&gt; $GITHUB_ENV

</code></pre>
<h2 id="pass-variables-between-jobs"><a class="header" href="#pass-variables-between-jobs">Pass variables between jobs</a></h2>
<pre><code class="language-yaml">jobs:
  job1:
    runs-on: ubuntu-20.04
    outputs:
      tag: ${{ steps.get_tag.outputs.tag }}

  job2:
    needs: ["job1"]
    if: needs.job1.outputs.tag != 'null'
</code></pre>
<h2 id="pass-artificats-between-jobs"><a class="header" href="#pass-artificats-between-jobs">Pass artificats between jobs</a></h2>
<pre><code class="language-yaml">jobs:
  job1:
    steps:
      - uses: actions/upload-artifact@v4
        with:
          name: app
          path: target/release/app

  job2:
    steps:
      - uses: actions/download-artifact@v4
        with:
          name: app
          path: ${{ github.workspace }}/target/release/app 
</code></pre>
<h2 id="build-and-push-docker-image"><a class="header" href="#build-and-push-docker-image">Build and push docker image</a></h2>
<pre><code class="language-yaml">jobs:
  docker:
    name: Publish to Docker Hub
    if: startsWith(github.ref, 'refs/tags/')
    runs-on: ubuntu-latest
    needs: release
    steps:
      - name: Set up QEMU
        uses: docker/setup-qemu-action@v3
      - name: Set up Docker Buildx
        uses: docker/setup-buildx-action@v3
      - name: Login to DockerHub
        uses: docker/login-action@v3
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
      - name: Build and push
        uses: docker/build-push-action@v5
        with:
          build-args: |
            REPO=${{ github.repository }}
            VER=${{ github.ref_name }}
          platforms: |
            linux/amd64
            linux/arm64
            linux/386
            linux/arm/v7
          push: ${{ needs.release.outputs.rc == 'false' }}
          tags: ${{ github.repository }}:latest, ${{ github.repository }}:${{ github.ref_name }}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="linux"><a class="header" href="#linux">Linux</a></h1>
<h2 id="inspect"><a class="header" href="#inspect">Inspect</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Aspect</th><th>Command</th></tr></thead><tbody>
<tr><td>distro</td><td><code>lsb_release -a</code></td></tr>
<tr><td>kernel</td><td><code>uname -a</code></td></tr>
<tr><td>mem</td><td><code>free -m</code></td></tr>
<tr><td>fs</td><td><code>df -h</code></td></tr>
<tr><td>net</td><td><code>ip -4 a</code></td></tr>
<tr><td>disk</td><td><code>lsblk</code></td></tr>
<tr><td>CPU</td><td><code>lscpu</code></td></tr>
<tr><td>port</td><td><code>netstat -tulpn | grep LISTEN</code></td></tr>
<tr><td>process</td><td><code>top</code></td></tr>
<tr><td>trafic</td><td><code>vnstat -i eth0 -l</code></td></tr>
<tr><td>ip</td><td><code>curl ipinfo.io</code></td></tr>
<tr><td>timezone</td><td><code>cat /etc/timezone</code></td></tr>
<tr><td>login user</td><td><code>whoami</code></td></tr>
</tbody></table>
</div>
<h2 id="file"><a class="header" href="#file">File</a></h2>
<pre><code class="language-sh"># List files
ls -alh file

# Modify user group
chown -R alice file
chown -R alice:www-data file

# Modify perms
chmod 600 file
chmod -w file
chmod +x file
chmod o-x file
chmod u+w file

# Open with default app
xdg-open file

# link file
ln -s /user/bin/vim /usr/bin/vi
# Link file relative
ln -sr node_modules/eslint/bin/eslint.js node_modules/.bin/eslint

# Zip
zip -r data.zip data
# Inspect zip files
unzip -t data.zip
# Unzip file
unzip data.zip
# Unzip to specific folder
unzip -d output-dir data.zip
# Unzip with pass
zip -er data.zip data

# Tar
tar -cf data.tar.gz data
# Inspect tar files
tar -tf data.tar.gz
# Untar
tar -xf data.tar.gz
# Untar to specific folders
tar -xf data.tar.gz -C output-dir

# bz format compression (slower but smaller)
tar -cjf data.tar.bz2 data

# Download
wget $url
wget -O /tmp/file $curl
curl -o /tmp/file $curl

# Find
find -name README.md
find / -name sfz
find -type -f -name '*.log' -exec rm -rf {} \;

# split by number of copies
split -d -n 5 data.zip data.zip.part
# split by size
split -d -b 256M data.zip data.zip.part
# Combine split files
cat data.zip.part* &gt; data.zip

# generate file
dd if=/dev/zero of=/tmp/1G.bin bs=1M count=1000
dd if=/dev/urandom of=/tmp/1G.bin bs=10M count=1000
</code></pre>
<h2 id="usergroup"><a class="header" href="#usergroup">User/Group</a></h2>
<pre><code class="language-sh"># add users (more complete, similar to interface operations)
adduser alice
# add user (recommended version)
useradd -m alice
# add user, specify user directory
useradd -d /d/alice alice
# add user, specify uid, gid
useradd -u 1001 -g 1001 nodejs
# add program account
useradd -r -s /usr/sbin/nologin nodejs

# MODIFY THE USER SHELL
usermod -s /usr/bin/bash alice

# user join group
usermod -a -G docker alice

# modify user password
passwd alice

# delete users
userdel nodejs

# add group
groupadd -g 344 linuxde
# delete group
groupdel linuxde
</code></pre>
<h2 id="process"><a class="header" href="#process">Process</a></h2>
<pre><code class="language-sh"># find process
ps aux | grep nginx

# kill process
kill $pid
# kill process forcelly
kill -9 $pid
# kill process by name
pkill nginx
pkill '^ssh$'
pkill -9 nginx

# find process by port
lsof -i:3000
netstat -utlpn | grep 3000
# find port by process
netstat -utlpn | grep nginx

cat /proc/$pid/status | grep VmRSS
cat /proc/$pid/cmdline 
cat /proc/$pid/environ 

ls -l /proc/$pid/cwd
ls -l /proc/$pid/exe
ls -l /proc/$pid/root

# run in backgroud
nohup server &amp;
nohup server &gt; server.log 2&gt;&amp;1 &amp;
nohup server &gt; server.log 2&gt; server.err &amp;
</code></pre>
<h2 id="text"><a class="header" href="#text">Text</a></h2>
<pre><code class="language-sh"># count lines
cat file | wc -l

# first n lines
cat file | head -3
# last n lists
cat file | tail -3

cat file | more

# hex
cat file | xxd 
cat file | xxd -p &gt; file.hex

# split columns with `:`, only show first, third columns
cat /etc/group | cut -d: -f1,3
# only show 5-10 charactors of each row
cat file | cut -c5-10
# only show first 10 charactors of each row
cat file | cut -c-10
# only show 10th and subsequent of each line
cat file | cut -c10-

# replace charactor
cat file | tr '\t' ' '
# delete charactor
cat file | tr -d '\r'

# remove duplicates
cat file | sort | uniq 
# count duplicates
cat file | sort | uniq -c
# show duplicates
cat file | sort | uniq -d
</code></pre>
<h3 id="sed"><a class="header" href="#sed">sed</a></h3>
<pre><code class="language-sh"># delete first line
cat file | sed '1d'
# delete empty line
cat file | sed '/^$/d'
# insert at first line
cat file | sed '1i#!/usr/bin/env node\n'
# append on last line
cat file | sed '$a\\n'
# replace functions
cat file | sed '/foo() {/,/}/c foo() { }'
# replace path
cat file| sed 's|/bin/sh|/bin/bash|g'
# replace with matched parts
cat file | sed 's|\(\w\+\) \(\w\+\) \(\w\+\)|\2 \3 \1|'
# change file
sed -i 's/\w\+.ubuntu.com/mirrors.tuna.tsinghua.edu.cn/' /etc/apt/sources.list
</code></pre>
<h3 id="awk"><a class="header" href="#awk">awk</a></h3>
<pre><code class="language-sh"># print specific column
docker images | awk '{print $1}'
# specific delimeter
cat /etc/paswd | awk -F: '{print $1}'
# combine columns
cat file | awk '{print $1,$3}'
</code></pre>
<h2 id="regex"><a class="header" href="#regex">Regex</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Code</th><th>Explain</th></tr></thead><tbody>
<tr><td><code>^</code></td><td>start</td></tr>
<tr><td><code>$</code></td><td>end</td></tr>
<tr><td><code>*</code></td><td>zero or many</td></tr>
<tr><td><code>\?</code></td><td>zero or one</td></tr>
<tr><td><code>\+</code></td><td>at least one</td></tr>
<tr><td><code>\{\}</code></td><td>match n times</td></tr>
<tr><td><code>|</code></td><td>choices</td></tr>
<tr><td><code>\(\)</code></td><td>group</td></tr>
<tr><td><code>[]</code></td><td>match options</td></tr>
<tr><td><code>[^]</code></td><td>not match options</td></tr>
<tr><td><code>[-]</code></td><td>options hyper</td></tr>
<tr><td><code>.</code></td><td>any char</td></tr>
<tr><td><code>\w</code></td><td>word char</td></tr>
<tr><td><code>\s</code></td><td>empty char</td></tr>
<tr><td><code>\S</code></td><td>none-empty char</td></tr>
<tr><td><code>\b</code></td><td>boundary</td></tr>
<tr><td><code>\&lt;\&gt;</code></td><td>boundary</td></tr>
</tbody></table>
</div>
<h2 id="glob"><a class="header" href="#glob">GLOB</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Code</th><th>Explain</th></tr></thead><tbody>
<tr><td><code>*</code></td><td>any</td></tr>
<tr><td><code>[]</code></td><td>match options</td></tr>
<tr><td><code>[^]</code></td><td>not match options</td></tr>
<tr><td><code>{str1,str2}</code></td><td>choices</td></tr>
</tbody></table>
</div>
<h2 id="terminal"><a class="header" href="#terminal">Terminal</a></h2>
<div class="table-wrapper"><table><thead><tr><th>hotkey</th><th>desc</th></tr></thead><tbody>
<tr><td>ctrl+a</td><td>to head of line</td></tr>
<tr><td>ctrl+e</td><td>to end of line</td></tr>
<tr><td>alt+f</td><td>move forward a word</td></tr>
<tr><td>alt+b</td><td>move backward a word</td></tr>
<tr><td>ctrl+w</td><td>delete word backward</td></tr>
<tr><td>alt+d</td><td>delete word forward</td></tr>
<tr><td>ctrl+u</td><td>delete backward</td></tr>
<tr><td>ctrl+k</td><td>delete forward</td></tr>
<tr><td>ctrl+l</td><td>clear screen</td></tr>
<tr><td>ctrl+r</td><td>search for history</td></tr>
</tbody></table>
</div>
<ul>
<li><code>!!</code> last command</li>
<li><code>!$</code> last postional parameter of last command</li>
</ul>
<h2 id="set"><a class="header" href="#set">Set</a></h2>
<pre><code>set -euxo pipefail
</code></pre>
<ul>
<li><code>-e</code>: Exit on none-zero status</li>
<li><code>-x</code>: Print a trace</li>
<li><code>-u</code>: Treat unset variables as error</li>
<li><code>-o pipefail</code>: Return none-zero if last pipeline return none-zero</li>
</ul>
<h2 id="xargs"><a class="header" href="#xargs">Xargs</a></h2>
<p>Capture the output of one command and pass it to another command</p>
<pre><code class="language-sh"># Batch renames
ls -1 . | sed 's/\.mdx$//' | xargs -I{} mv {}.mdx {}.md
</code></pre>
<h2 id="cron-syntax"><a class="header" href="#cron-syntax">Cron Syntax</a></h2>
<pre><code>Min  Hour Day  Mon  Weekday
*    *    *    *    *  command to be executed
┬    ┬    ┬    ┬    ┬
│    │    │    │    └─  Weekday  (0=Sun .. 6=Sat)
│    │    │    └──────  Month    (1..12)
│    │    └───────────  Day      (1..31)
│    └────────────────  Hour     (0..23)
└─────────────────────  Minute   (0..59)
</code></pre>
<div class="table-wrapper"><table><thead><tr><th>expr</th><th>description</th></tr></thead><tbody>
<tr><td><code>0 * * * *</code></td><td>every hour</td></tr>
<tr><td><code>*/15 * * * *</code></td><td>every 15 mins</td></tr>
<tr><td><code>0 */2 * * *</code></td><td>every 2 hours</td></tr>
<tr><td><code>0 18 * * 0-6</code></td><td>every week Mon-Sat at 6pm</td></tr>
<tr><td><code>10 2 * * 6,7</code></td><td>every Sat and Sun on 2:10am</td></tr>
<tr><td><code>0 0 * * 0</code></td><td>every Sunday midnight</td></tr>
<tr><td><code>@reboot</code></td><td>every reboot</td></tr>
</tbody></table>
</div>
<h2 id="common-snippets"><a class="header" href="#common-snippets">Common Snippets</a></h2>
<h3 id="script-directory"><a class="header" href="#script-directory">Script Directory</a></h3>
<pre><code class="language-sh">SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" &amp;&gt; /dev/null &amp;&amp; pwd )"
</code></pre>
<h3 id="sudo-without-pass"><a class="header" href="#sudo-without-pass">Sudo Without Pass</a></h3>
<pre><code class="language-sh">cat &lt;&lt; EOF | sudo tee -a /etc/sudoers.d/$USER
$USER ALL=(ALL) NOPASSWD:ALL
EOF 
</code></pre>
<h3 id="ulimit"><a class="header" href="#ulimit">Ulimit</a></h3>
<pre><code class="language-sh">cat &lt;&lt;EOF | sudo tee -a /etc/security/limits.d/$USER.conf
$USER soft nproc 100000
$USER hard nproc 100000
$USER soft nofile 100000
$USER hard nofile 100000
EOF
</code></pre>
<h2 id="change-repo-source"><a class="header" href="#change-repo-source">Change repo source</a></h2>
<h3 id="ubuntu"><a class="header" href="#ubuntu">ubuntu</a></h3>
<pre><code class="language-sh">sed -i -E 's/\w+.ubuntu.com/mirrors.tuna.tsinghua.edu.cn/g' /etc/apt/sources.list
</code></pre>
<h3 id="alpine"><a class="header" href="#alpine">Alpine</a></h3>
<pre><code class="language-sh">sed -i 's/dl-cdn.alpinelinux.org/mirrors.tuna.tsinghua.edu.cn/g' /etc/apk/repositories
</code></pre>
<h3 id="load-environment-variables-from-env"><a class="header" href="#load-environment-variables-from-env">Load environment variables from .env</a></h3>
<pre><code class="language-sh">eval $(cat .env | sed 's/^/export /')
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="redis"><a class="header" href="#redis">Redis</a></h1>
<h2 id="clear-all"><a class="header" href="#clear-all">Clear all</a></h2>
<pre><code class="language-sh">EVAL "return redis.call('del', unpack(redis.call('keys', ARGV[1])))" 0 prefix:*
</code></pre>
<h2 id="enter-redis-container"><a class="header" href="#enter-redis-container">Enter redis container</a></h2>
<pre><code class="language-sh">#!/bin/bash -e
server=$(docker ps | grep redis | awk  '{print $1}')
docker exec -it $server redis-cli -a ${1:-pass}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
